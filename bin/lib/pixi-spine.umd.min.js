/*!
 * pixi-spine - v3.1.0
 * Compiled Wed, 03 Aug 2022 17:00:10 UTC
 *
 * pixi-spine is licensed under SPINE-LICENSE
 * http://esotericsoftware.com/spine-runtimes-license
 * 
 * Copyright 2019-2020, Ivan Igorevich Popelyshev <ivan.popelyshev@gmail.com>, All Rights Reserved
 */ this.PIXI=this.PIXI||{},this.PIXI.spine=this.PIXI.spine||{},function(a,b){"object"==typeof exports&&"undefined"!=typeof module?b(exports,require("@pixi/loaders"),require("@pixi/core"),require("@pixi/constants"),require("@pixi/math"),require("@pixi/display"),require("@pixi/sprite"),require("@pixi/mesh-extras"),require("@pixi/graphics"),require("@pixi/utils")):"function"==typeof define&&define.amd?define(["exports","@pixi/loaders","@pixi/core","@pixi/constants","@pixi/math","@pixi/display","@pixi/sprite","@pixi/mesh-extras","@pixi/graphics","@pixi/utils"],b):b((a="undefined"!=typeof globalThis?globalThis:a||self).pixi_spine={},a.PIXI,a.PIXI,a.PIXI,a.PIXI,a.PIXI,a.PIXI,a.PIXI,a.PIXI,a.PIXI.utils)}(this,function(a,Q,cW,cX,cY,Z,$,_,cZ,c$){"use strict";a.AttachmentType=void 0,(c_=a.AttachmentType||(a.AttachmentType={}))[c_.Region=0]="Region",c_[c_.BoundingBox=1]="BoundingBox",c_[c_.Mesh=2]="Mesh",c_[c_.LinkedMesh=3]="LinkedMesh",c_[c_.Path=4]="Path",c_[c_.Point=5]="Point",c_[c_.Clipping=6]="Clipping";var j,c_,D,E,F,G,H,I,k,J,K,R,o,y,z,q,l,aa=function(){function a(d,a,b,c){void 0===a&&(a=new Array),void 0===b&&(b=0),void 0===c&&(c=new DataView(d.buffer)),this.strings=a,this.index=b,this.buffer=c}return a.prototype.readByte=function(){return this.buffer.getInt8(this.index++)},a.prototype.readUnsignedByte=function(){return this.buffer.getUint8(this.index++)},a.prototype.readShort=function(){var a=this.buffer.getInt16(this.index);return this.index+=2,a},a.prototype.readInt32=function(){var a=this.buffer.getInt32(this.index);return this.index+=4,a},a.prototype.readInt=function(c){var a=this.readByte(),b=127&a;return(128&a)!=0&&(b|=(127&(a=this.readByte()))<<7,(128&a)!=0&&(b|=(127&(a=this.readByte()))<<14,(128&a)!=0&&(b|=(127&(a=this.readByte()))<<21,(128&a)!=0&&(b|=(127&(a=this.readByte()))<<28)))),c?b:b>>>1^ -(1&b)},a.prototype.readStringRef=function(){var a=this.readInt(!0);return 0==a?null:this.strings[a-1]},a.prototype.readString=function(){var d=this.readInt(!0);switch(d){case 0:return null;case 1:return""}d--;for(var a="",b=0;b<d;){var c=this.readUnsignedByte();switch(c>>4){case 12:case 13:a+=String.fromCharCode((31&c)<<6|63&this.readByte()),b+=2;break;case 14:a+=String.fromCharCode((15&c)<<12|(63&this.readByte())<<6|63&this.readByte()),b+=3;break;default:a+=String.fromCharCode(c),b++}}return a},a.prototype.readFloat=function(){var a=this.buffer.getFloat32(this.index);return this.index+=4,a},a.prototype.readBoolean=function(){return 0!=this.readByte()},a}();a.MixBlend=void 0,(o=a.MixBlend||(a.MixBlend={}))[o.setup=0]="setup",o[o.first=1]="first",o[o.replace=2]="replace",o[o.add=3]="add",a.MixDirection=void 0,(y=a.MixDirection||(a.MixDirection={}))[y.mixIn=0]="mixIn",y[y.mixOut=1]="mixOut",a.PositionMode=void 0,(z=a.PositionMode||(a.PositionMode={}))[z.Fixed=0]="Fixed",z[z.Percent=1]="Percent",a.RotateMode=void 0,(q=a.RotateMode||(a.RotateMode={}))[q.Tangent=0]="Tangent",q[q.Chain=1]="Chain",q[q.ChainScale=2]="ChainScale",a.TransformMode=void 0,(l=a.TransformMode||(a.TransformMode={}))[l.Normal=0]="Normal",l[l.OnlyTranslation=1]="OnlyTranslation",l[l.NoRotationOrReflection=2]="NoRotationOrReflection",l[l.NoScale=3]="NoScale",l[l.NoScaleOrReflection=4]="NoScaleOrReflection";/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */ var c0=function(a,b){return(c0=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(c,a){for(var b in a)Object.prototype.hasOwnProperty.call(a,b)&&(c[b]=a[b])})(a,b)};function c1(b,a){if("function"!=typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");function c(){this.constructor=b}c0(b,a),b.prototype=null===a?Object.create(a):(c.prototype=a.prototype,new c)}function ab(b){switch(b.toLowerCase()){case"nearest":return a.TextureFilter.Nearest;case"linear":return a.TextureFilter.Linear;case"mipmap":return a.TextureFilter.MipMap;case"mipmapnearestnearest":return a.TextureFilter.MipMapNearestNearest;case"mipmaplinearnearest":return a.TextureFilter.MipMapLinearNearest;case"mipmapnearestlinear":return a.TextureFilter.MipMapNearestLinear;case"mipmaplinearlinear":return a.TextureFilter.MipMapLinearLinear;default:throw new Error("Unknown texture filter "+b)}}a.TextureFilter=void 0,(c2=a.TextureFilter||(a.TextureFilter={}))[c2.Nearest=9728]="Nearest",c2[c2.Linear=9729]="Linear",c2[c2.MipMap=9987]="MipMap",c2[c2.MipMapNearestNearest=9984]="MipMapNearestNearest",c2[c2.MipMapLinearNearest=9985]="MipMapLinearNearest",c2[c2.MipMapNearestLinear=9986]="MipMapNearestLinear",c2[c2.MipMapLinearLinear=9987]="MipMapLinearLinear",a.TextureWrap=void 0,(c3=a.TextureWrap||(a.TextureWrap={}))[c3.MirroredRepeat=33648]="MirroredRepeat",c3[c3.ClampToEdge=33071]="ClampToEdge",c3[c3.Repeat=10497]="Repeat";var c2,c3,ac,S=function(){function a(){this.size=null,this.names=null,this.values=null,this.renderObject=null}return Object.defineProperty(a.prototype,"width",{get:function(){var a=this.texture;return a.trim?a.trim.width:a.orig.width},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"height",{get:function(){var a=this.texture;return a.trim?a.trim.height:a.orig.height},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"u",{get:function(){return this.texture._uvs.x0},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"v",{get:function(){return this.texture._uvs.y0},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"u2",{get:function(){return this.texture._uvs.x2},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"v2",{get:function(){return this.texture._uvs.y2},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"offsetX",{get:function(){var a=this.texture;return a.trim?a.trim.x:0},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"offsetY",{get:function(){return this.spineOffsetY},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"pixiOffsetY",{get:function(){var a=this.texture;return a.trim?a.trim.y:0},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"spineOffsetY",{get:function(){var a=this.texture;return this.originalHeight-this.height-(a.trim?a.trim.y:0)},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"originalWidth",{get:function(){return this.texture.orig.width},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"originalHeight",{get:function(){return this.texture.orig.height},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"x",{get:function(){return this.texture.frame.x},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"y",{get:function(){return this.texture.frame.y},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"rotate",{get:function(){return 0!==this.texture.rotate},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"degrees",{get:function(){return(360-45*this.texture.rotate)%360},enumerable:!1,configurable:!0}),a}(),c4=function(){this.x=0,this.y=0,this.width=0,this.height=0,this.offsetX=0,this.offsetY=0,this.originalWidth=0,this.originalHeight=0,this.rotate=0,this.index=0},ad=function(){function b(a,b,c){this.pages=new Array,this.regions=new Array,a&&this.addSpineAtlas(a,b,c)}return b.prototype.addTexture=function(h,f){for(var d=this.pages,b=null,e=0;e<d.length;e++)if(d[e].baseTexture===f.baseTexture){b=d[e];break}if(null===b){(b=new ae).name="texturePage";var g=f.baseTexture;b.width=g.realWidth,b.height=g.realHeight,b.baseTexture=g,b.minFilter=b.magFilter=a.TextureFilter.Nearest,b.uWrap=a.TextureWrap.ClampToEdge,b.vWrap=a.TextureWrap.ClampToEdge,d.push(b)}var c=new af;return c.name=h,c.page=b,c.texture=f,c.index=-1,this.regions.push(c),c},b.prototype.addTextureHash=function(b,c){for(var a in b)b.hasOwnProperty(a)&&this.addTexture(c&& -1!==a.indexOf(".")?a.substr(0,a.lastIndexOf(".")):a,b[a])},b.prototype.addSpineAtlas=function(a,b,c){return this.load(a,b,c)},b.prototype.load=function(f,g,j){var k=this;if(null==g)throw new Error("textureLoader cannot be null.");var e=new c5(f),h=new Array(4),l=null,d={},m=null;d.size=function(){l.width=parseInt(h[1]),l.height=parseInt(h[2])},d.format=function(){},d.filter=function(){l.minFilter=ab(h[1]),l.magFilter=ab(h[2])},d.repeat=function(){-1!=h[1].indexOf("x")&&(l.uWrap=a.TextureWrap.Repeat),-1!=h[1].indexOf("y")&&(l.vWrap=a.TextureWrap.Repeat)},d.pma=function(){l.pma="true"==h[1]};var b={};b.xy=function(){m.x=parseInt(h[1]),m.y=parseInt(h[2])},b.size=function(){m.width=parseInt(h[1]),m.height=parseInt(h[2])},b.bounds=function(){m.x=parseInt(h[1]),m.y=parseInt(h[2]),m.width=parseInt(h[3]),m.height=parseInt(h[4])},b.offset=function(){m.offsetX=parseInt(h[1]),m.offsetY=parseInt(h[2])},b.orig=function(){m.originalWidth=parseInt(h[1]),m.originalHeight=parseInt(h[2])},b.offsets=function(){m.offsetX=parseInt(h[1]),m.offsetY=parseInt(h[2]),m.originalWidth=parseInt(h[3]),m.originalHeight=parseInt(h[4])},b.rotate=function(){var a=h[1],b=0;b="true"==a.toLocaleLowerCase()?6:"false"==a.toLocaleLowerCase()?0:(720-parseFloat(a))%360/45,m.rotate=b},b.index=function(){m.index=parseInt(h[1])};for(var c=e.readLine();null!=c&&0==c.trim().length;)c=e.readLine();for(;null!=c&&0!=c.trim().length&&0!=e.readEntry(h,c);)c=e.readLine();var i=function(){for(;;){if(null==c)return j&&j(k);if(0==c.trim().length)l=null,c=e.readLine();else if(null===l){for((l=new ae).name=c.trim();0!=e.readEntry(h,c=e.readLine());){var n=d[h[0]];n&&n()}k.pages.push(l),g(l.name,function(a){if(null===a)return k.pages.splice(k.pages.indexOf(l),1),j&&j(null);l.baseTexture=a,l.pma&&(a.alphaMode=cX.ALPHA_MODES.PMA),a.valid||a.setSize(l.width,l.height),l.setFilters(),l.width&&l.height||(l.width=a.realWidth,l.height=a.realHeight,l.width&&l.height||console.log("ERROR spine atlas page "+l.name+": meshes wont work if you dont specify size in atlas (http://www.html5gamedevs.com/topic/18888-pixi-spines-and-meshes/?p=107121)")),i()});break}else{m=new c4;var f=new af;f.name=c,f.page=l;for(var o=null,q=null;;){var r=e.readEntry(h,c=e.readLine());if(0==r)break;var n=b[h[0]];if(n)n();else{null==o&&(o=[],q=[]),o.push(h[0]);for(var s=[],p=0;p<r;p++)s.push(parseInt(h[p+1]));q.push(s)}}0==m.originalWidth&&0==m.originalHeight&&(m.originalWidth=m.width,m.originalHeight=m.height);var a=l.baseTexture.resolution;m.x/=a,m.y/=a,m.width/=a,m.height/=a,m.originalWidth/=a,m.originalHeight/=a,m.offsetX/=a,m.offsetY/=a;var t=m.rotate%4!=0,u=new cY.Rectangle(m.x,m.y,t?m.height:m.width,t?m.width:m.height),v=new cY.Rectangle(0,0,m.originalWidth,m.originalHeight),w=new cY.Rectangle(m.offsetX,m.originalHeight-m.height-m.offsetY,m.width,m.height);f.texture=new cW.Texture(f.page.baseTexture,u,v,w,m.rotate),f.index=m.index,f.texture.updateUvs(),k.regions.push(f)}}};i()},b.prototype.findRegion=function(b){for(var a=0;a<this.regions.length;a++)if(this.regions[a].name==b)return this.regions[a];return null},b.prototype.dispose=function(){for(var a=0;a<this.pages.length;a++)this.pages[a].baseTexture.dispose()},b}(),c5=function(){function a(a){this.index=0,this.lines=a.split(/\r\n|\r|\n/)}return a.prototype.readLine=function(){return this.index>=this.lines.length?null:this.lines[this.index++]},a.prototype.readEntry=function(d,a){if(null==a||0==(a=a.trim()).length)return 0;var e=a.indexOf(":");if(-1==e)return 0;d[0]=a.substr(0,e).trim();for(var b=1,c=e+1;;b++){var f=a.indexOf(",",c);if(-1==f)return d[b]=a.substr(c).trim(),b;if(d[b]=a.substr(c,f-c).trim(),c=f+1,4==b)return 4}},a}(),ae=function(){function b(){this.minFilter=a.TextureFilter.Nearest,this.magFilter=a.TextureFilter.Nearest,this.uWrap=a.TextureWrap.ClampToEdge,this.vWrap=a.TextureWrap.ClampToEdge}return b.prototype.setFilters=function(){var b=this.baseTexture,c=this.minFilter;c==a.TextureFilter.Linear?b.scaleMode=cX.SCALE_MODES.LINEAR:this.minFilter==a.TextureFilter.Nearest?b.scaleMode=cX.SCALE_MODES.NEAREST:(b.mipmap=cX.MIPMAP_MODES.POW2,c==a.TextureFilter.MipMapNearestNearest?b.scaleMode=cX.SCALE_MODES.NEAREST:b.scaleMode=cX.SCALE_MODES.LINEAR)},b}(),af=function(b){function a(){return null!==b&&b.apply(this,arguments)||this}return c1(a,b),a}(S),ag=(ac=new Float32Array(1),function(a){return ac[0]=a,ac[0]}),c6=Math.fround||ag,ah=function(){function a(){this.array=new Array}return a.prototype.add=function(a){var b=this.contains(a);return this.array[0|a]=0|a,!b},a.prototype.contains=function(a){return void 0!=this.array[0|a]},a.prototype.remove=function(a){this.array[0|a]=void 0},a.prototype.clear=function(){this.array.length=0},a}(),ai=function(){function a(){this.entries={},this.size=0}return a.prototype.add=function(a){var b=this.entries[a];return this.entries[a]=!0,!b&&(this.size++,!0)},a.prototype.addAll=function(b){for(var c=this.size,a=0,d=b.length;a<d;a++)this.add(b[a]);return c!=this.size},a.prototype.contains=function(a){return this.entries[a]},a.prototype.clear=function(){this.entries={},this.size=0},a}(),aj=function(){function a(a,b,c,d){void 0===a&&(a=0),void 0===b&&(b=0),void 0===c&&(c=0),void 0===d&&(d=0),this.r=a,this.g=b,this.b=c,this.a=d}return a.prototype.set=function(a,b,c,d){return this.r=a,this.g=b,this.b=c,this.a=d,this.clamp()},a.prototype.setFromColor=function(a){return this.r=a.r,this.g=a.g,this.b=a.b,this.a=a.a,this},a.prototype.setFromString=function(a){return a="#"==a.charAt(0)?a.substr(1):a,this.r=parseInt(a.substr(0,2),16)/255,this.g=parseInt(a.substr(2,2),16)/255,this.b=parseInt(a.substr(4,2),16)/255,this.a=8!=a.length?1:parseInt(a.substr(6,2),16)/255,this},a.prototype.add=function(a,b,c,d){return this.r+=a,this.g+=b,this.b+=c,this.a+=d,this.clamp()},a.prototype.clamp=function(){return this.r<0?this.r=0:this.r>1&&(this.r=1),this.g<0?this.g=0:this.g>1&&(this.g=1),this.b<0?this.b=0:this.b>1&&(this.b=1),this.a<0?this.a=0:this.a>1&&(this.a=1),this},a.rgba8888ToColor=function(a,b){a.r=((4278190080&b)>>>24)/255,a.g=((16711680&b)>>>16)/255,a.b=((65280&b)>>>8)/255,a.a=(255&b)/255},a.rgb888ToColor=function(a,b){a.r=((16711680&b)>>>16)/255,a.g=((65280&b)>>>8)/255,a.b=(255&b)/255},a.fromString=function(b){return new a().setFromString(b)},a.WHITE=new a(1,1,1,1),a.RED=new a(1,0,0,1),a.GREEN=new a(0,1,0,1),a.BLUE=new a(0,0,1,1),a.MAGENTA=new a(1,0,1,1),a}(),ak=function(){function a(){}return a.clamp=function(a,b,c){return a<b?b:a>c?c:a},a.cosDeg=function(b){return Math.cos(b*a.degRad)},a.sinDeg=function(b){return Math.sin(b*a.degRad)},a.signum=function(a){return a>0?1:a<0?-1:0},a.toInt=function(a){return a>0?Math.floor(a):Math.ceil(a)},a.cbrt=function(a){var b=Math.pow(Math.abs(a),1/3);return a<0?-b:b},a.randomTriangular=function(b,c){return a.randomTriangularWith(b,c,(b+c)*.5)},a.randomTriangularWith=function(a,b,c){var d=Math.random(),e=b-a;return d<=(c-a)/e?a+Math.sqrt(d*e*(c-a)):b-Math.sqrt((1-d)*e*(b-c))},a.isPowerOfTwo=function(a){return a&&(a&a-1)==0},a.PI=3.1415927,a.PI2=2*a.PI,a.radiansToDegrees=180/a.PI,a.radDeg=a.radiansToDegrees,a.degreesToRadians=a.PI/180,a.degRad=a.degreesToRadians,a}(),T=function(){function a(){}return a.prototype.apply=function(a,b,c){return a+(b-a)*this.applyInternal(c)},a}(),U=function(b){function a(c){var a=b.call(this)||this;return a.power=2,a.power=c,a}return c1(a,b),a.prototype.applyInternal=function(a){return a<=.5?Math.pow(2*a,this.power)/2:Math.pow((a-1)*2,this.power)/(this.power%2==0?-2:2)+1},a}(T),al=function(b){function a(a){return b.call(this,a)||this}return c1(a,b),a.prototype.applyInternal=function(a){return Math.pow(a-1,this.power)*(this.power%2==0?-1:1)+1},a}(U),am=function(){function a(){}return a.arrayCopy=function(d,b,e,f,g){for(var a=b,c=f;a<b+g;a++,c++)e[c]=d[a]},a.arrayFill=function(b,c,d,e){for(var a=c;a<d;a++)b[a]=e},a.setArraySize=function(a,b,c){void 0===c&&(c=0);var d=a.length;if(d==b)return a;if(a.length=b,d<b)for(var e=d;e<b;e++)a[e]=c;return a},a.ensureArrayCapacity=function(b,d,c){return(void 0===c&&(c=0),b.length>=d)?b:a.setArraySize(b,d,c)},a.newArray=function(b,d){for(var c=new Array(b),a=0;a<b;a++)c[a]=d;return c},a.newFloatArray=function(d){if(a.SUPPORTS_TYPED_ARRAYS)return new Float32Array(d);for(var b=new Array(d),c=0;c<b.length;c++)b[c]=0;return b},a.newShortArray=function(d){if(a.SUPPORTS_TYPED_ARRAYS)return new Int16Array(d);for(var b=new Array(d),c=0;c<b.length;c++)b[c]=0;return b},a.toFloatArray=function(b){return a.SUPPORTS_TYPED_ARRAYS?new Float32Array(b):b},a.toSinglePrecision=function(b){return a.SUPPORTS_TYPED_ARRAYS?c6(b):b},a.webkit602BugfixHelper=function(a,b){},a.contains=function(b,c,d){for(var a=0;a<b.length;a++)if(b[a]==c)return!0;return!1},a.enumValue=function(b,a){return b[a[0].toUpperCase()+a.slice(1)]},a.SUPPORTS_TYPED_ARRAYS="undefined"!=typeof Float32Array,a}(),an=function(){function a(){}return a.logBones=function(c){for(var b=0;b<c.bones.length;b++){var d=c.bones[b],a=d.matrix;console.log(d.data.name+", "+a.a+", "+a.b+", "+a.c+", "+a.d+", "+a.tx+", "+a.ty)}},a}(),ao=function(){function a(a){this.items=new Array,this.instantiator=a}return a.prototype.obtain=function(){return this.items.length>0?this.items.pop():this.instantiator()},a.prototype.free=function(a){a.reset&&a.reset(),this.items.push(a)},a.prototype.freeAll=function(b){for(var a=0;a<b.length;a++)this.free(b[a])},a.prototype.clear=function(){this.items.length=0},a}(),ap=function(){function a(a,b){void 0===a&&(a=0),void 0===b&&(b=0),this.x=a,this.y=b}return a.prototype.set=function(a,b){return this.x=a,this.y=b,this},a.prototype.length=function(){var a=this.x,b=this.y;return Math.sqrt(a*a+b*b)},a.prototype.normalize=function(){var a=this.length();return 0!=a&&(this.x/=a,this.y/=a),this},a}(),aq=function(){function a(){this.maxDelta=.064,this.framesPerSecond=0,this.delta=0,this.totalTime=0,this.lastTime=Date.now()/1e3,this.frameCount=0,this.frameTime=0}return a.prototype.update=function(){var a=Date.now()/1e3;this.delta=a-this.lastTime,this.frameTime+=this.delta,this.totalTime+=this.delta,this.delta>this.maxDelta&&(this.delta=this.maxDelta),this.lastTime=a,this.frameCount++,this.frameTime>1&&(this.framesPerSecond=this.frameCount/this.frameTime,this.frameTime=0,this.frameCount=0)},a}(),ar=function(){function a(a){void 0===a&&(a=32),this.addedValues=0,this.lastValue=0,this.mean=0,this.dirty=!0,this.values=new Array(a)}return a.prototype.hasEnoughData=function(){return this.addedValues>=this.values.length},a.prototype.addValue=function(a){this.addedValues<this.values.length&&this.addedValues++,this.values[this.lastValue++]=a,this.lastValue>this.values.length-1&&(this.lastValue=0),this.dirty=!0},a.prototype.getMean=function(){if(this.hasEnoughData()){if(this.dirty){for(var b=0,a=0;a<this.values.length;a++)b+=this.values[a];this.mean=b/this.values.length,this.dirty=!1}return this.mean}return 0},a}(),as={yDown:!0,FAIL_ON_NON_EXISTING_SKIN:!1,GLOBAL_AUTO_UPDATE:!0,GLOBAL_DELAY_LIMIT:0},c7=[0,0,0],at=function(b){function a(){var a=null!==b&&b.apply(this,arguments)||this;return a.region=null,a.attachment=null,a}return c1(a,b),a}($.Sprite),au=function(b){function a(c,d,e,f,g){var a=b.call(this,c,d,e,f,g)||this;return a.region=null,a.attachment=null,a}return c1(a,b),a}(_.SimpleMesh),r=function(c){function b(g){var b=c.call(this)||this;if(!g)throw new Error("The spineData param is required.");if("string"==typeof g)throw new Error('spineData param cant be string. Please use spine.Spine.fromAtlas("YOUR_RESOURCE_NAME") from now on.');b.spineData=g,b.createSkeleton(g),b.slotContainers=[],b.tempClipContainers=[];for(var h=0,l=b.skeleton.slots.length;h<l;h++){var d=b.skeleton.slots[h],e=d.getAttachment(),f=b.newContainer();if(b.slotContainers.push(f),b.addChild(f),b.tempClipContainers.push(null),e){if(e.type===a.AttachmentType.Region){var i=e.name,j=b.createSprite(d,e,i);d.currentSprite=j,d.currentSpriteName=i,f.addChild(j)}else if(e.type===a.AttachmentType.Mesh){var k=b.createMesh(d,e);d.currentMesh=k,d.currentMeshId=e.id,d.currentMeshName=e.name,f.addChild(k)}else e.type===a.AttachmentType.Clipping&&(b.createGraphics(d,e),f.addChild(d.clippingContainer),f.addChild(d.currentGraphics))}}return b.tintRgb=new Float32Array([1,1,1]),b.autoUpdate=!0,b.visible=!0,b}return c1(b,c),Object.defineProperty(b.prototype,"autoUpdate",{get:function(){return this._autoUpdate},set:function(a){a!==this._autoUpdate&&(this._autoUpdate=a,this.updateTransform=a?b.prototype.autoUpdateTransform:Z.Container.prototype.updateTransform)},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"tint",{get:function(){return c$.rgb2hex(this.tintRgb)},set:function(a){this.tintRgb=c$.hex2rgb(a,this.tintRgb)},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"delayLimit",{get:function(){return(void 0!==this.localDelayLimit?this.localDelayLimit:as.GLOBAL_DELAY_LIMIT)||Number.MAX_VALUE},enumerable:!1,configurable:!0}),b.prototype.update=function(r){var y=this.delayLimit;if(r>y&&(r=y),this.state.update(r),this.state.apply(this.skeleton),this.skeleton){this.skeleton.updateWorldTransform();var s=this.skeleton.slots,t=this.color,e=null,h=null;t?(e=t.light,h=t.dark):e=this.tintRgb;for(var f=0,u=s.length;f<u;f++){var b=s[f],d=b.getAttachment(),c=this.slotContainers[f];if(!d){c.visible=!1;continue}var m=null;d.sequence&&d.sequence.apply(b,d);var n=d.region,g=d.color;switch(d.type){case a.AttachmentType.Region:if(c.transform.setFromMatrix(b.bone.matrix),n=d.region,b.currentMesh&&(b.currentMesh.visible=!1,b.currentMesh=null,b.currentMeshId=void 0,b.currentMeshName=void 0),!n){b.currentSprite&&(b.currentSprite.renderable=!1);break}if(!b.currentSpriteName||b.currentSpriteName!==d.name){var o=d.name;if(b.currentSprite&&(b.currentSprite.visible=!1),b.sprites=b.sprites||{},void 0!==b.sprites[o])b.sprites[o].visible=!0;else{var A=this.createSprite(b,d,o);c.addChild(A)}b.currentSprite=b.sprites[o],b.currentSpriteName=o}b.currentSprite.renderable=!0,b.hackRegion||this.setSpriteRegion(d,b.currentSprite,n),b.currentSprite.color?m=b.currentSprite.color:(c7[0]=e[0]*b.color.r*g.r,c7[1]=e[1]*b.color.g*g.g,c7[2]=e[2]*b.color.b*g.b,b.currentSprite.tint=c$.rgb2hex(c7)),b.currentSprite.blendMode=b.blendMode;break;case a.AttachmentType.Mesh:if(b.currentSprite){b.currentSprite.visible=!1,b.currentSprite=null,b.currentSpriteName=void 0;var v=new cY.Transform;v._parentID=-1,v._worldID=c.transform._worldID,c.transform=v}if(!n){b.currentMesh&&(b.currentMesh.renderable=!1);break}var z=d.id;if(!b.currentMeshId||b.currentMeshId!==z){var q=z;if(b.currentMesh&&(b.currentMesh.visible=!1),b.meshes=b.meshes||{},void 0!==b.meshes[q])b.meshes[q].visible=!0;else{var B=this.createMesh(b,d);c.addChild(B)}b.currentMesh=b.meshes[q],b.currentMeshName=d.name,b.currentMeshId=q}b.currentMesh.renderable=!0,d.computeWorldVerticesOld(b,b.currentMesh.vertices),b.currentMesh.color?m=b.currentMesh.color:(c7[0]=e[0]*b.color.r*g.r,c7[1]=e[1]*b.color.g*g.g,c7[2]=e[2]*b.color.b*g.b,b.currentMesh.tint=c$.rgb2hex(c7)),b.currentMesh.blendMode=b.blendMode,b.hackRegion||this.setMeshRegion(d,b.currentMesh,n);break;case a.AttachmentType.Clipping:b.currentGraphics||(this.createGraphics(b,d),c.addChild(b.clippingContainer),c.addChild(b.currentGraphics)),this.updateGraphics(b,d),c.alpha=1,c.visible=!0;continue;default:c.visible=!1;continue}if(c.visible=!0,m){var j=b.color.r*g.r,k=b.color.g*g.g,l=b.color.b*g.b;m.setLight(e[0]*j+h[0]*(1-j),e[1]*k+h[1]*(1-k),e[2]*l+h[2]*(1-l)),b.darkColor?(j=b.darkColor.r,k=b.darkColor.g,l=b.darkColor.b):(j=0,k=0,l=0),m.setDark(e[0]*j+h[0]*(1-j),e[1]*k+h[1]*(1-k),e[2]*l+h[2]*(1-l))}c.alpha=b.color.a}for(var w=this.skeleton.drawOrder,p=null,i=null,f=0,u=w.length;f<u;f++){var b=s[w[f].data.index],c=this.slotContainers[w[f].data.index];if(i||null===c.parent||c.parent===this||(c.parent.removeChild(c),c.parent=this),b.currentGraphics&&b.getAttachment())i=b.clippingContainer,p=b.getAttachment(),i.children.length=0,this.children[f]=c,p.endSlot===b.data&&(p.endSlot=null);else if(i){var x=this.tempClipContainers[f];x||((x=this.tempClipContainers[f]=this.newContainer()).visible=!1),this.children[f]=x,c.parent=null,i.addChild(c),p.endSlot==b.data&&(i.renderable=!0,i=null,p=null)}else this.children[f]=c}}},b.prototype.setSpriteRegion=function(b,a,c){(a.attachment!==b||a.region!==c)&&(a.region=c,a.attachment=b,a.texture=c.texture,a.rotation=b.rotation*ak.degRad,a.position.x=b.x,a.position.y=b.y,a.alpha=b.color.a,c.size?(a.scale.x=c.size.width/c.originalWidth,a.scale.y=-c.size.height/c.originalHeight):(a.scale.x=b.scaleX*b.width/c.originalWidth,a.scale.y=-b.scaleY*b.height/c.originalHeight))},b.prototype.setMeshRegion=function(c,a,b){(a.attachment!==c||a.region!==b)&&(a.region=b,a.attachment=c,a.texture=b.texture,b.texture.updateUvs(),a.uvBuffer.update(c.regionUVs))},b.prototype.autoUpdateTransform=function(){if(as.GLOBAL_AUTO_UPDATE){this.lastTime=this.lastTime||Date.now();var a=(Date.now()-this.lastTime)*.001;this.lastTime=Date.now(),this.update(a)}else this.lastTime=0;Z.Container.prototype.updateTransform.call(this)},b.prototype.createSprite=function(a,b,e){var c=b.region;a.hackAttachment===b&&(c=a.hackRegion);var f=c?c.texture:null,d=this.newSprite(f);return d.anchor.set(.5),c&&this.setSpriteRegion(b,d,b.region),a.sprites=a.sprites||{},a.sprites[e]=d,d},b.prototype.createMesh=function(b,a){var d=a.region;b.hackAttachment===a&&(d=b.hackRegion,b.hackAttachment=null,b.hackRegion=null);var c=this.newMesh(d?d.texture:null,new Float32Array(a.regionUVs.length),a.regionUVs,new Uint16Array(a.triangles),cX.DRAW_MODES.TRIANGLES);return void 0!==c._canvasPadding&&(c._canvasPadding=1.5),c.alpha=a.color.a,c.region=a.region,d&&this.setMeshRegion(a,c,d),b.meshes=b.meshes||{},b.meshes[a.id]=c,c},b.prototype.createGraphics=function(b,d){var a=this.newGraphics(),c=new cY.Polygon([]);return a.clear(),a.beginFill(16777215,1),a.drawPolygon(c),a.renderable=!1,b.currentGraphics=a,b.clippingContainer=this.newContainer(),b.clippingContainer.mask=b.currentGraphics,a},b.prototype.updateGraphics=function(a,b){var c=a.currentGraphics.geometry,d=c.graphicsData[0].shape.points,e=b.worldVerticesLength;d.length=e,b.computeWorldVertices(a,0,e,d,0,2),c.invalidate()},b.prototype.hackTextureBySlotIndex=function(f,c,e){void 0===c&&(c=null),void 0===e&&(e=null);var a=this.skeleton.slots[f];if(!a)return!1;var d=a.getAttachment(),b=d.region;return c?((b=new S).texture=c,b.size=e,a.hackRegion=b,a.hackAttachment=d):(a.hackRegion=null,a.hackAttachment=null),a.currentSprite?this.setSpriteRegion(d,a.currentSprite,b):a.currentMesh&&this.setMeshRegion(d,a.currentMesh,b),!0},b.prototype.hackTextureBySlotName=function(d,a,b){void 0===a&&(a=null),void 0===b&&(b=null);var c=this.skeleton.findSlotIndex(d);return -1!=c&&this.hackTextureBySlotIndex(c,a,b)},b.prototype.hackTextureAttachment=function(f,g,d,e){void 0===e&&(e=null);var i=this.skeleton.findSlotIndex(f),h=this.skeleton.getAttachmentByName(f,g);h.region.texture=d;var a=this.skeleton.slots[i];if(!a)return!1;var c=a.getAttachment();if(g===c.name){var b=h.region;return d?((b=new S).texture=d,b.size=e,a.hackRegion=b,a.hackAttachment=c):(a.hackRegion=null,a.hackAttachment=null),a.currentSprite&&a.currentSprite.region!=b?(this.setSpriteRegion(c,a.currentSprite,b),a.currentSprite.region=b):a.currentMesh&&a.currentMesh.region!=b&&this.setMeshRegion(c,a.currentMesh,b),!0}return!1},b.prototype.newContainer=function(){return new Z.Container},b.prototype.newSprite=function(a){return new at(a)},b.prototype.newGraphics=function(){return new cZ.Graphics},b.prototype.newMesh=function(a,b,c,d,e){return new au(a,b,c,d,e)},b.prototype.transformHack=function(){return 1},b.prototype.hackAttachmentGroups=function(d,h,e){if(d){for(var f=[],g=[],c=0,i=this.skeleton.slots.length;c<i;c++){var b=this.skeleton.slots[c],j=b.currentSpriteName||b.currentMeshName||"",a=b.currentSprite||b.currentMesh;j.endsWith(d)?(a.parentGroup=h,g.push(a)):e&&a&&(a.parentGroup=e,f.push(a))}return[f,g]}},b.prototype.destroy=function(d){for(var a=0,e=this.skeleton.slots.length;a<e;a++){var b=this.skeleton.slots[a];for(var f in b.meshes)b.meshes[f].destroy(d);for(var g in b.meshes=null,b.sprites)b.sprites[g].destroy(d);b.sprites=null}for(var a=0,e=this.slotContainers.length;a<e;a++)this.slotContainers[a].destroy(d);this.spineData=null,this.skeleton=null,this.slotContainers=null,this.stateData=null,this.state=null,this.tempClipContainers=null,c.prototype.destroy.call(this,d)},b.clippingPolygon=[],b}(Z.Container);Object.defineProperty(r.prototype,"visible",{get:function(){return this._visible},set:function(a){a!==this._visible&&(this._visible=a,a&&(this.lastTime=0))}}),Q.LoaderResource.setExtensionXhrType("skel",Q.LoaderResource.XHR_RESPONSE_TYPE.BUFFER);var av=function(){function a(){}return a.prototype.genMiddleware=function(){var a=this;return{use:function(b,e){if(!b.data)return e();var s,t,i=b.type===Q.LoaderResource.TYPE.JSON&&b.data.bones,o=b.xhrType===Q.LoaderResource.XHR_RESPONSE_TYPE.BUFFER&&("skel"===b.extension||b.metadata&&b.metadata.spineMetadata);if(!i&&!o)return e();var f=null,j=b.data;i?f=a.createJsonParser():(f=a.createBinaryParser(),b.data instanceof ArrayBuffer&&(j=new Uint8Array(b.data)));var c=b.metadata||{},k=c?c.spineSkeletonScale:null;k&&(f.scale=k);var g=c.spineAtlas;if(!1===g)return e();if(g&&g.pages)return a.parseData(b,f,g,j),e();var p=c.spineAtlasSuffix||".atlas",d=b.url,l=d.indexOf("?");l>0&&(d=d.substr(0,l)),d=d.substr(0,d.lastIndexOf("."))+p,c.spineAtlasFile&&(d=c.spineAtlasFile),d=d.replace(this.baseUrl,"");var q={crossOrigin:b.crossOrigin,xhrType:Q.LoaderResource.XHR_RESPONSE_TYPE.TEXT,metadata:c.spineMetadata||null,parentResource:b},m={crossOrigin:b.crossOrigin,metadata:c.imageMetadata||null,parentResource:b},h=b.url.substr(0,b.url.lastIndexOf("/")+1);h=h.replace(this.baseUrl,"");var n=c.imageNamePrefix||b.name+"_atlas_page_",u=c.images?c9(c.images):c.image?c9({default:c.image}):c.imageLoader?c.imageLoader(this,n,h,m):c8(this,n,h,m);function r(c){new ad(c,u,function(c){c&&a.parseData(b,f,c,j),e()})}c.atlasRawData?r(c.atlasRawData):this.add(b.name+"_atlas",d,q,function(a){a.error?e():r(a.data)})}}},a}();function c8(b,c,a,d){return a&&a.lastIndexOf("/")!==a.length-1&&(a+="/"),function(f,i){var g=c+f,e=b.resources[g];if(e){var h=function(){i(e.texture.baseTexture)};e.texture?h():e.onAfterMiddleware.add(h)}else b.add(g,a+f,d,function(a){a.error?i(null):(f.indexOf("-pma.")>=0&&(a.texture.baseTexture.alphaMode=cX.ALPHA_MODES.PMA),i(a.texture.baseTexture))})}}function c9(a){return function(c,d){var b=a[c]||a.default;d(b&&b.baseTexture?b.baseTexture:b)}}/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */ var da=function(a,b){return(da=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(c,a){for(var b in a)Object.prototype.hasOwnProperty.call(a,b)&&(c[b]=a[b])})(a,b)};function db(b,a){if("function"!=typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");function c(){this.constructor=b}da(b,a),b.prototype=null===a?Object.create(a):(c.prototype=a.prototype,new c)}var b,L=function(a){if(null==a)throw new Error("name cannot be null.");this.name=a},s=function(b){function a(d){var c=b.call(this,d)||this;return c.id=(65535&a.nextID++)<<11,c.worldVerticesLength=0,c.deformAttachment=c,c}return db(a,b),a.prototype.computeWorldVerticesOld=function(a,b){this.computeWorldVertices(a,0,this.worldVerticesLength,b,0,2)},a.prototype.computeWorldVertices=function(s,v,k,i,o,p){k=o+(k>>1)*p;var z=s.bone.skeleton,q=s.deform,e=this.vertices,j=this.bones;if(null==j){q.length>0&&(e=q);for(var a=s.bone.matrix,A=a.tx,B=a.ty,C=a.a,d=a.c,D=a.b,E=a.d,t=v,b=o;b<k;t+=2,b+=p){var f=e[t],g=e[t+1];i[b]=f*C+g*d+A,i[b+1]=f*D+g*E+B}return}for(var c=0,r=0,w=0;w<v;w+=2){var h=j[c];c+=h+1,r+=h}var x=z.bones;if(0==q.length)for(var b=o,d=3*r;b<k;b+=p){var l=0,m=0,h=j[c++];for(h+=c;c<h;c++,d+=3){var a=x[j[c]].matrix,f=e[d],g=e[d+1],n=e[d+2];l+=(f*a.a+g*a.c+a.tx)*n,m+=(f*a.b+g*a.d+a.ty)*n}i[b]=l,i[b+1]=m}else for(var y=q,b=o,d=3*r,u=r<<1;b<k;b+=p){var l=0,m=0,h=j[c++];for(h+=c;c<h;c++,d+=3,u+=2){var a=x[j[c]].matrix,f=e[d]+y[u],g=e[d+1]+y[u+1],n=e[d+2];l+=(f*a.a+g*a.c+a.tx)*n,m+=(f*a.b+g*a.d+a.ty)*n}i[b]=l,i[b+1]=m}},a.prototype.copyTo=function(a){null!=this.bones?(a.bones=new Array(this.bones.length),am.arrayCopy(this.bones,0,a.bones,0,this.bones.length)):a.bones=null,null!=this.vertices?(a.vertices=am.newFloatArray(this.vertices.length),am.arrayCopy(this.vertices,0,a.vertices,0,this.vertices.length)):a.vertices=null,a.worldVerticesLength=this.worldVerticesLength,a.deformAttachment=this.deformAttachment},a.nextID=0,a}(L),aw=function(c){function b(d){var b=c.call(this,d)||this;return b.type=a.AttachmentType.BoundingBox,b.color=new aj(1,1,1,1),b}return db(b,c),b.prototype.copy=function(){var a=new b(this.name);return this.copyTo(a),a.color.setFromColor(this.color),a},b}(s),ax=function(c){function b(d){var b=c.call(this,d)||this;return b.type=a.AttachmentType.Clipping,b.color=new aj(.2275,.2275,.8078,1),b}return db(b,c),b.prototype.copy=function(){var a=new b(this.name);return this.copyTo(a),a.endSlot=this.endSlot,a.color.setFromColor(this.color),a},b}(s),ay=function(c){function b(d){var b=c.call(this,d)||this;return b.type=a.AttachmentType.Mesh,b.color=new aj(1,1,1,1),b.tempColor=new aj(0,0,0,0),b}return db(b,c),b.prototype.getParentMesh=function(){return this.parentMesh},b.prototype.setParentMesh=function(a){this.parentMesh=a,null!=a&&(this.bones=a.bones,this.vertices=a.vertices,this.worldVerticesLength=a.worldVerticesLength,this.regionUVs=a.regionUVs,this.triangles=a.triangles,this.hullLength=a.hullLength,this.worldVerticesLength=a.worldVerticesLength)},b.prototype.copy=function(){if(null!=this.parentMesh)return this.newLinkedMesh();var a=new b(this.name);return a.region=this.region,a.path=this.path,a.color.setFromColor(this.color),this.copyTo(a),a.regionUVs=new Float32Array(this.regionUVs.length),am.arrayCopy(this.regionUVs,0,a.regionUVs,0,this.regionUVs.length),a.triangles=new Array(this.triangles.length),am.arrayCopy(this.triangles,0,a.triangles,0,this.triangles.length),a.hullLength=this.hullLength,null!=this.edges&&(a.edges=new Array(this.edges.length),am.arrayCopy(this.edges,0,a.edges,0,this.edges.length)),a.width=this.width,a.height=this.height,a},b.prototype.newLinkedMesh=function(){var a=new b(this.name);return a.region=this.region,a.path=this.path,a.color.setFromColor(this.color),a.deformAttachment=this.deformAttachment,a.setParentMesh(null!=this.parentMesh?this.parentMesh:this),a},b}(s),az=function(c){function b(d){var b=c.call(this,d)||this;return b.type=a.AttachmentType.Path,b.closed=!1,b.constantSpeed=!1,b.color=new aj(1,1,1,1),b}return db(b,c),b.prototype.copy=function(){var a=new b(this.name);return this.copyTo(a),a.lengths=new Array(this.lengths.length),am.arrayCopy(this.lengths,0,a.lengths,0,this.lengths.length),a.closed=closed,a.constantSpeed=this.constantSpeed,a.color.setFromColor(this.color),a},b}(s),aA=function(c){function b(d){var b=c.call(this,d)||this;return b.type=a.AttachmentType.Point,b.color=new aj(.38,.94,0,1),b}return db(b,c),b.prototype.computeWorldPosition=function(b,c){var a=b.matrix;return c.x=this.x*a.a+this.y*a.c+b.worldX,c.y=this.x*a.b+this.y*a.d+b.worldY,c},b.prototype.computeWorldRotation=function(d){var a=d.matrix,b=ak.cosDeg(this.rotation),c=ak.sinDeg(this.rotation),e=b*a.a+c*a.c,f=b*a.b+c*a.d;return Math.atan2(f,e)*ak.radDeg},b.prototype.copy=function(){var a=new b(this.name);return a.x=this.x,a.y=this.y,a.rotation=this.rotation,a.color.setFromColor(this.color),a},b}(s),aB=function(c){function b(d){var b=c.call(this,d)||this;return b.type=a.AttachmentType.Region,b.x=0,b.y=0,b.scaleX=1,b.scaleY=1,b.rotation=0,b.width=0,b.height=0,b.color=new aj(1,1,1,1),b.offset=am.newFloatArray(8),b.uvs=am.newFloatArray(8),b.tempColor=new aj(1,1,1,1),b}return db(b,c),b.prototype.updateOffset=function(){var g=this.width/this.region.originalWidth*this.scaleX,h=this.height/this.region.originalHeight*this.scaleY,e=-this.width/2*this.scaleX+this.region.offsetX*g,f=-this.height/2*this.scaleY+this.region.offsetY*h,i=e+this.region.width*g,j=f+this.region.height*h,k=this.rotation*Math.PI/180,c=Math.cos(k),d=Math.sin(k),l=e*c+this.x,m=e*d,n=f*c+this.y,o=f*d,p=i*c+this.x,q=i*d,r=j*c+this.y,s=j*d,a=this.offset;a[b.OX1]=l-o,a[b.OY1]=n+m,a[b.OX2]=l-s,a[b.OY2]=r+m,a[b.OX3]=p-s,a[b.OY3]=r+q,a[b.OX4]=p-o,a[b.OY4]=n+q},b.prototype.setRegion=function(a){this.region=a;var b=this.uvs;a.rotate?(b[2]=a.u,b[3]=a.v2,b[4]=a.u,b[5]=a.v,b[6]=a.u2,b[7]=a.v,b[0]=a.u2,b[1]=a.v2):(b[0]=a.u,b[1]=a.v2,b[2]=a.u,b[3]=a.v,b[4]=a.u2,b[5]=a.v,b[6]=a.u2,b[7]=a.v2)},b.prototype.computeWorldVertices=function(o,e,d,n){var f=this.offset,g=o.matrix,h=g.tx,i=g.ty,j=g.a,k=g.c,l=g.b,m=g.d,a=0,c=0;a=f[b.OX1],c=f[b.OY1],e[d]=a*j+c*k+h,e[d+1]=a*l+c*m+i,d+=n,a=f[b.OX2],c=f[b.OY2],e[d]=a*j+c*k+h,e[d+1]=a*l+c*m+i,d+=n,a=f[b.OX3],c=f[b.OY3],e[d]=a*j+c*k+h,e[d+1]=a*l+c*m+i,d+=n,a=f[b.OX4],c=f[b.OY4],e[d]=a*j+c*k+h,e[d+1]=a*l+c*m+i},b.prototype.copy=function(){var a=new b(this.name);return a.region=this.region,a.rendererObject=this.rendererObject,a.path=this.path,a.x=this.x,a.y=this.y,a.scaleX=this.scaleX,a.scaleY=this.scaleY,a.rotation=this.rotation,a.width=this.width,a.height=this.height,am.arrayCopy(this.uvs,0,a.uvs,0,8),am.arrayCopy(this.offset,0,a.offset,0,8),a.color.setFromColor(this.color),a},b.OX1=0,b.OY1=1,b.OX2=2,b.OY2=3,b.OX3=4,b.OY3=5,b.OX4=6,b.OY4=7,b.X1=0,b.Y1=1,b.C1R=2,b.C1G=3,b.C1B=4,b.C1A=5,b.U1=6,b.V1=7,b.X2=8,b.Y2=9,b.C2R=10,b.C2G=11,b.C2B=12,b.C2A=13,b.U2=14,b.V2=15,b.X3=16,b.Y3=17,b.C3R=18,b.C3G=19,b.C3B=20,b.C3A=21,b.U3=22,b.V3=23,b.X4=24,b.Y4=25,b.C4R=26,b.C4G=27,b.C4B=28,b.C4A=29,b.U4=30,b.V4=31,b}(L),aC=function(){function a(a,b){this.jitterX=0,this.jitterY=0,this.jitterX=a,this.jitterY=b}return a.prototype.begin=function(a){},a.prototype.transform=function(a,b,c,d){a.x+=ak.randomTriangular(-this.jitterX,this.jitterY),a.y+=ak.randomTriangular(-this.jitterX,this.jitterY)},a.prototype.end=function(){},a}(),aD=function(){function a(a){this.centerX=0,this.centerY=0,this.radius=0,this.angle=0,this.worldX=0,this.worldY=0,this.radius=a}return a.prototype.begin=function(a){this.worldX=a.x+this.centerX,this.worldY=a.y+this.centerY},a.prototype.transform=function(b,j,k,l){var i=this.angle*ak.degreesToRadians,c=b.x-this.worldX,d=b.y-this.worldY,e=Math.sqrt(c*c+d*d);if(e<this.radius){var f=a.interpolation.apply(0,i,(this.radius-e)/this.radius),g=Math.cos(f),h=Math.sin(f);b.x=g*c-h*d+this.worldX,b.y=h*c+g*d+this.worldY}},a.prototype.end=function(){},a.interpolation=new al(2),a}(),aE=function(){function a(c,a,d){if(null==c)throw new Error("name cannot be null.");if(null==a)throw new Error("timelines cannot be null.");this.name=c,this.timelines=a,this.timelineIds=[];for(var b=0;b<a.length;b++)this.timelineIds[a[b].getPropertyId()]=!0;this.duration=d}return a.prototype.hasTimeline=function(a){return!0==this.timelineIds[a]},a.prototype.apply=function(c,a,d,f,g,h,i,j){if(null==c)throw new Error("skeleton cannot be null.");f&&0!=this.duration&&(d%=this.duration,a>0&&(a%=this.duration));for(var e=this.timelines,b=0,k=e.length;b<k;b++)e[b].apply(c,a,d,g,h,i,j)},a.binarySearch=function(e,f,a){void 0===a&&(a=1);var c=0,b=e.length/a-2;if(0==b)return a;for(var d=b>>>1;;){if(e[(d+1)*a]<=f?c=d+1:b=d,c==b)return(c+1)*a;d=c+b>>>1}},a.linearSearch=function(b,d,c){for(var a=0,e=b.length-c;a<=e;a+=c)if(b[a]>d)return a;return -1},a}();(b=D||(D={}))[b.rotate=0]="rotate",b[b.translate=1]="translate",b[b.scale=2]="scale",b[b.shear=3]="shear",b[b.attachment=4]="attachment",b[b.color=5]="color",b[b.deform=6]="deform",b[b.event=7]="event",b[b.drawOrder=8]="drawOrder",b[b.ikConstraint=9]="ikConstraint",b[b.transformConstraint=10]="transformConstraint",b[b.pathConstraintPosition=11]="pathConstraintPosition",b[b.pathConstraintSpacing=12]="pathConstraintSpacing",b[b.pathConstraintMix=13]="pathConstraintMix",b[b.twoColor=14]="twoColor";var e,m=function(){function a(b){if(b<=0)throw new Error("frameCount must be > 0: "+b);this.curves=am.newFloatArray((b-1)*a.BEZIER_SIZE)}return a.prototype.getFrameCount=function(){return this.curves.length/a.BEZIER_SIZE+1},a.prototype.setLinear=function(b){this.curves[b*a.BEZIER_SIZE]=a.LINEAR},a.prototype.setStepped=function(b){this.curves[b*a.BEZIER_SIZE]=a.STEPPED},a.prototype.getCurveType=function(d){var b=d*a.BEZIER_SIZE;if(b==this.curves.length)return a.LINEAR;var c=this.curves[b];return c==a.LINEAR?a.LINEAR:c==a.STEPPED?a.STEPPED:a.BEZIER},a.prototype.setCurve=function(r,c,d,j,k){var l=(-(2*c)+j)*.03,m=(-(2*d)+k)*.03,e=((c-j)*3+1)*.006,f=((d-k)*3+1)*.006,n=2*l+e,o=2*m+f,g=.3*c+l+.16666667*e,h=.3*d+m+.16666667*f,b=r*a.BEZIER_SIZE,i=this.curves;i[b++]=a.BEZIER;for(var p=g,q=h,s=b+a.BEZIER_SIZE-1;b<s;b+=2)i[b]=p,i[b+1]=q,g+=n,h+=o,n+=e,o+=f,p+=g,q+=h},a.prototype.getCurvePercent=function(j,c){c=ak.clamp(c,0,1);var d=this.curves,b=j*a.BEZIER_SIZE,h=d[b];if(h==a.LINEAR)return c;if(h==a.STEPPED)return 0;b++;for(var e=0,k=b,l=b+a.BEZIER_SIZE-1;b<l;b+=2)if((e=d[b])>=c){var f=void 0,g=void 0;return b==k?(f=0,g=0):(f=d[b-2],g=d[b-1]),g+(d[b+1]-g)*(c-f)/(e-f)}var i=d[b-1];return i+(1-i)*(c-e)/(1-e)},a.LINEAR=0,a.STEPPED=1,a.BEZIER=2,a.BEZIER_SIZE=19,a}(),aF=function(c){function b(a){var b=c.call(this,a)||this;return b.frames=am.newFloatArray(a<<1),b}return db(b,c),b.prototype.getPropertyId=function(){return(D.rotate<<24)+this.boneIndex},b.prototype.setFrame=function(a,c,d){a<<=1,this.frames[a]=c,this.frames[a+b.ROTATION]=d},b.prototype.apply=function(n,p,i,q,f,j,r){var d=this.frames,c=n.bones[this.boneIndex];if(c.active){if(i<d[0]){switch(j){case a.MixBlend.setup:c.rotation=c.data.rotation;break;case a.MixBlend.first:var k=c.data.rotation-c.rotation;c.rotation+=(k-(16384-(16384.499999999996-k/360|0))*360)*f}return}if(i>=d[d.length-b.ENTRIES]){var g=d[d.length+b.PREV_ROTATION];switch(j){case a.MixBlend.setup:c.rotation=c.data.rotation+g*f;break;case a.MixBlend.first:case a.MixBlend.replace:g+=c.data.rotation-c.rotation,g-=(16384-(16384.499999999996-g/360|0))*360;case a.MixBlend.add:c.rotation+=g*f}return}var h=aE.binarySearch(d,i,b.ENTRIES),l=d[h+b.PREV_ROTATION],m=d[h],o=this.getCurvePercent((h>>1)-1,1-(i-m)/(d[h+b.PREV_TIME]-m)),e=d[h+b.ROTATION]-l;switch(e=l+(e-(16384-(16384.499999999996-e/360|0))*360)*o,j){case a.MixBlend.setup:c.rotation=c.data.rotation+(e-(16384-(16384.499999999996-e/360|0))*360)*f;break;case a.MixBlend.first:case a.MixBlend.replace:e+=c.data.rotation-c.rotation;case a.MixBlend.add:c.rotation+=(e-(16384-(16384.499999999996-e/360|0))*360)*f}}},b.ENTRIES=2,b.PREV_TIME=-2,b.PREV_ROTATION=-1,b.ROTATION=1,b}(m),M=function(c){function b(a){var d=c.call(this,a)||this;return d.frames=am.newFloatArray(a*b.ENTRIES),d}return db(b,c),b.prototype.getPropertyId=function(){return(D.translate<<24)+this.boneIndex},b.prototype.setFrame=function(a,c,d,e){a*=b.ENTRIES,this.frames[a]=c,this.frames[a+b.X]=d,this.frames[a+b.Y]=e},b.prototype.apply=function(m,n,i,o,e,j,p){var d=this.frames,c=m.bones[this.boneIndex];if(c.active){if(i<d[0]){switch(j){case a.MixBlend.setup:c.x=c.data.x,c.y=c.data.y;break;case a.MixBlend.first:c.x+=(c.data.x-c.x)*e,c.y+=(c.data.y-c.y)*e}return}var f=0,g=0;if(i>=d[d.length-b.ENTRIES])f=d[d.length+b.PREV_X],g=d[d.length+b.PREV_Y];else{var h=aE.binarySearch(d,i,b.ENTRIES);f=d[h+b.PREV_X],g=d[h+b.PREV_Y];var k=d[h],l=this.getCurvePercent(h/b.ENTRIES-1,1-(i-k)/(d[h+b.PREV_TIME]-k));f+=(d[h+b.X]-f)*l,g+=(d[h+b.Y]-g)*l}switch(j){case a.MixBlend.setup:c.x=c.data.x+f*e,c.y=c.data.y+g*e;break;case a.MixBlend.first:case a.MixBlend.replace:c.x+=(c.data.x+f-c.x)*e,c.y+=(c.data.y+g-c.y)*e;break;case a.MixBlend.add:c.x+=f*e,c.y+=g*e}}},b.ENTRIES=3,b.PREV_TIME=-3,b.PREV_X=-2,b.PREV_Y=-1,b.X=1,b.Y=2,b}(m),aG=function(c){function b(a){return c.call(this,a)||this}return db(b,c),b.prototype.getPropertyId=function(){return(D.scale<<24)+this.boneIndex},b.prototype.apply=function(o,q,k,r,h,l,p){var i=this.frames,c=o.bones[this.boneIndex];if(c.active){if(k<i[0]){switch(l){case a.MixBlend.setup:c.scaleX=c.data.scaleX,c.scaleY=c.data.scaleY;break;case a.MixBlend.first:c.scaleX+=(c.data.scaleX-c.scaleX)*h,c.scaleY+=(c.data.scaleY-c.scaleY)*h}return}var f=0,g=0;if(k>=i[i.length-b.ENTRIES])f=i[i.length+b.PREV_X]*c.data.scaleX,g=i[i.length+b.PREV_Y]*c.data.scaleY;else{var j=aE.binarySearch(i,k,b.ENTRIES);f=i[j+b.PREV_X],g=i[j+b.PREV_Y];var m=i[j],n=this.getCurvePercent(j/b.ENTRIES-1,1-(k-m)/(i[j+b.PREV_TIME]-m));f=(f+(i[j+b.X]-f)*n)*c.data.scaleX,g=(g+(i[j+b.Y]-g)*n)*c.data.scaleY}if(1==h)l==a.MixBlend.add?(c.scaleX+=f-c.data.scaleX,c.scaleY+=g-c.data.scaleY):(c.scaleX=f,c.scaleY=g);else{var d=0,e=0;if(p==a.MixDirection.mixOut)switch(l){case a.MixBlend.setup:d=c.data.scaleX,e=c.data.scaleY,c.scaleX=d+(Math.abs(f)*ak.signum(d)-d)*h,c.scaleY=e+(Math.abs(g)*ak.signum(e)-e)*h;break;case a.MixBlend.first:case a.MixBlend.replace:d=c.scaleX,e=c.scaleY,c.scaleX=d+(Math.abs(f)*ak.signum(d)-d)*h,c.scaleY=e+(Math.abs(g)*ak.signum(e)-e)*h;break;case a.MixBlend.add:d=c.scaleX,e=c.scaleY,c.scaleX=d+(Math.abs(f)*ak.signum(d)-c.data.scaleX)*h,c.scaleY=e+(Math.abs(g)*ak.signum(e)-c.data.scaleY)*h}else switch(l){case a.MixBlend.setup:d=Math.abs(c.data.scaleX)*ak.signum(f),e=Math.abs(c.data.scaleY)*ak.signum(g),c.scaleX=d+(f-d)*h,c.scaleY=e+(g-e)*h;break;case a.MixBlend.first:case a.MixBlend.replace:d=Math.abs(c.scaleX)*ak.signum(f),e=Math.abs(c.scaleY)*ak.signum(g),c.scaleX=d+(f-d)*h,c.scaleY=e+(g-e)*h;break;case a.MixBlend.add:d=ak.signum(f),e=ak.signum(g),c.scaleX=Math.abs(c.scaleX)*d+(f-Math.abs(c.data.scaleX)*d)*h,c.scaleY=Math.abs(c.scaleY)*e+(g-Math.abs(c.data.scaleY)*e)*h}}}},b}(M),aH=function(c){function b(a){return c.call(this,a)||this}return db(b,c),b.prototype.getPropertyId=function(){return(D.shear<<24)+this.boneIndex},b.prototype.apply=function(m,n,i,o,e,j,p){var d=this.frames,c=m.bones[this.boneIndex];if(c.active){if(i<d[0]){switch(j){case a.MixBlend.setup:c.shearX=c.data.shearX,c.shearY=c.data.shearY;break;case a.MixBlend.first:c.shearX+=(c.data.shearX-c.shearX)*e,c.shearY+=(c.data.shearY-c.shearY)*e}return}var f=0,g=0;if(i>=d[d.length-b.ENTRIES])f=d[d.length+b.PREV_X],g=d[d.length+b.PREV_Y];else{var h=aE.binarySearch(d,i,b.ENTRIES);f=d[h+b.PREV_X],g=d[h+b.PREV_Y];var k=d[h],l=this.getCurvePercent(h/b.ENTRIES-1,1-(i-k)/(d[h+b.PREV_TIME]-k));f+=(d[h+b.X]-f)*l,g+=(d[h+b.Y]-g)*l}switch(j){case a.MixBlend.setup:c.shearX=c.data.shearX+f*e,c.shearY=c.data.shearY+g*e;break;case a.MixBlend.first:case a.MixBlend.replace:c.shearX+=(c.data.shearX+f-c.shearX)*e,c.shearY+=(c.data.shearY+g-c.shearY)*e;break;case a.MixBlend.add:c.shearX+=f*e,c.shearY+=g*e}}},b}(M),aI=function(c){function b(a){var d=c.call(this,a)||this;return d.frames=am.newFloatArray(a*b.ENTRIES),d}return db(b,c),b.prototype.getPropertyId=function(){return(D.color<<24)+this.slotIndex},b.prototype.setFrame=function(a,c,d,e,f,g){a*=b.ENTRIES,this.frames[a]=c,this.frames[a+b.R]=d,this.frames[a+b.G]=e,this.frames[a+b.B]=f,this.frames[a+b.A]=g},b.prototype.apply=function(r,s,l,t,f,p,u){var g=r.slots[this.slotIndex];if(g.bone.active){var c=this.frames;if(l<c[0]){switch(p){case a.MixBlend.setup:g.color.setFromColor(g.data.color);break;case a.MixBlend.first:var d=g.color,m=g.data.color;d.add((m.r-d.r)*f,(m.g-d.g)*f,(m.b-d.b)*f,(m.a-d.a)*f)}return}var h=0,i=0,j=0,k=0;if(l>=c[c.length-b.ENTRIES]){var n=c.length;h=c[n+b.PREV_R],i=c[n+b.PREV_G],j=c[n+b.PREV_B],k=c[n+b.PREV_A]}else{var e=aE.binarySearch(c,l,b.ENTRIES);h=c[e+b.PREV_R],i=c[e+b.PREV_G],j=c[e+b.PREV_B],k=c[e+b.PREV_A];var q=c[e],o=this.getCurvePercent(e/b.ENTRIES-1,1-(l-q)/(c[e+b.PREV_TIME]-q));h+=(c[e+b.R]-h)*o,i+=(c[e+b.G]-i)*o,j+=(c[e+b.B]-j)*o,k+=(c[e+b.A]-k)*o}if(1==f)g.color.set(h,i,j,k);else{var d=g.color;p==a.MixBlend.setup&&d.setFromColor(g.data.color),d.add((h-d.r)*f,(i-d.g)*f,(j-d.b)*f,(k-d.a)*f)}}},b.ENTRIES=5,b.PREV_TIME=-5,b.PREV_R=-4,b.PREV_G=-3,b.PREV_B=-2,b.PREV_A=-1,b.R=1,b.G=2,b.B=3,b.A=4,b}(m),aJ=function(c){function b(a){var d=c.call(this,a)||this;return d.frames=am.newFloatArray(a*b.ENTRIES),d}return db(b,c),b.prototype.getPropertyId=function(){return(D.twoColor<<24)+this.slotIndex},b.prototype.setFrame=function(a,c,d,e,f,g,h,i,j){a*=b.ENTRIES,this.frames[a]=c,this.frames[a+b.R]=d,this.frames[a+b.G]=e,this.frames[a+b.B]=f,this.frames[a+b.A]=g,this.frames[a+b.R2]=h,this.frames[a+b.G2]=i,this.frames[a+b.B2]=j},b.prototype.apply=function(w,x,r,y,e,u,z){var f=w.slots[this.slotIndex];if(f.bone.active){var c=this.frames;if(r<c[0]){switch(u){case a.MixBlend.setup:f.color.setFromColor(f.data.color),f.darkColor.setFromColor(f.data.darkColor);break;case a.MixBlend.first:var g=f.color,h=f.darkColor,s=f.data.color,t=f.data.darkColor;g.add((s.r-g.r)*e,(s.g-g.g)*e,(s.b-g.b)*e,(s.a-g.a)*e),h.add((t.r-h.r)*e,(t.g-h.g)*e,(t.b-h.b)*e,0)}return}var k=0,l=0,m=0,n=0,o=0,p=0,q=0;if(r>=c[c.length-b.ENTRIES]){var i=c.length;k=c[i+b.PREV_R],l=c[i+b.PREV_G],m=c[i+b.PREV_B],n=c[i+b.PREV_A],o=c[i+b.PREV_R2],p=c[i+b.PREV_G2],q=c[i+b.PREV_B2]}else{var d=aE.binarySearch(c,r,b.ENTRIES);k=c[d+b.PREV_R],l=c[d+b.PREV_G],m=c[d+b.PREV_B],n=c[d+b.PREV_A],o=c[d+b.PREV_R2],p=c[d+b.PREV_G2],q=c[d+b.PREV_B2];var v=c[d],j=this.getCurvePercent(d/b.ENTRIES-1,1-(r-v)/(c[d+b.PREV_TIME]-v));k+=(c[d+b.R]-k)*j,l+=(c[d+b.G]-l)*j,m+=(c[d+b.B]-m)*j,n+=(c[d+b.A]-n)*j,o+=(c[d+b.R2]-o)*j,p+=(c[d+b.G2]-p)*j,q+=(c[d+b.B2]-q)*j}if(1==e)f.color.set(k,l,m,n),f.darkColor.set(o,p,q,1);else{var g=f.color,h=f.darkColor;u==a.MixBlend.setup&&(g.setFromColor(f.data.color),h.setFromColor(f.data.darkColor)),g.add((k-g.r)*e,(l-g.g)*e,(m-g.b)*e,(n-g.a)*e),h.add((o-h.r)*e,(p-h.g)*e,(q-h.b)*e,0)}}},b.ENTRIES=8,b.PREV_TIME=-8,b.PREV_R=-7,b.PREV_G=-6,b.PREV_B=-5,b.PREV_A=-4,b.PREV_R2=-3,b.PREV_G2=-2,b.PREV_B2=-1,b.R=1,b.G=2,b.B=3,b.A=4,b.R2=5,b.G2=6,b.B2=7,b}(m),aK=function(){function b(a){this.frames=am.newFloatArray(a),this.attachmentNames=new Array(a)}return b.prototype.getPropertyId=function(){return(D.attachment<<24)+this.slotIndex},b.prototype.getFrameCount=function(){return this.frames.length},b.prototype.setFrame=function(a,b,c){this.frames[a]=b,this.attachmentNames[a]=c},b.prototype.apply=function(b,j,e,k,l,f,i){var c=b.slots[this.slotIndex];if(c.bone.active){if(i==a.MixDirection.mixOut){f==a.MixBlend.setup&&this.setAttachment(b,c,c.data.attachmentName);return}var d=this.frames;if(e<d[0]){(f==a.MixBlend.setup||f==a.MixBlend.first)&&this.setAttachment(b,c,c.data.attachmentName);return}var g=0;g=e>=d[d.length-1]?d.length-1:aE.binarySearch(d,e,1)-1;var h=this.attachmentNames[g];b.slots[this.slotIndex].setAttachment(null==h?null:b.getAttachment(this.slotIndex,h))}},b.prototype.setAttachment=function(b,c,a){c.setAttachment(null==a?null:b.getAttachment(this.slotIndex,a))},b}(),dc=null,aL=function(c){function b(a){var b=c.call(this,a)||this;return b.frames=am.newFloatArray(a),b.frameVertices=new Array(a),null==dc&&(dc=am.newFloatArray(64)),b}return db(b,c),b.prototype.getPropertyId=function(){return(D.deform<<27)+ +this.attachment.id+this.slotIndex},b.prototype.setFrame=function(a,b,c){this.frames[a]=b,this.frameVertices[a]=c},b.prototype.apply=function(P,Q,F,R,e,o,S){var K=P.slots[this.slotIndex];if(K.bone.active){var h=K.getAttachment();if(h instanceof s&&h.deformAttachment==this.attachment){var u=K.deform;0==u.length&&(o=a.MixBlend.setup);var G=this.frameVertices,c=G[0].length,n=this.frames;if(F<n[0]){var f=h;switch(o){case a.MixBlend.setup:u.length=0;break;case a.MixBlend.first:if(1==e){u.length=0;break}var L=am.setArraySize(u,c);if(null==f.bones)for(var g=f.vertices,i=0;i<c;i++)L[i]+=(g[i]-L[i])*e;else{e=1-e;for(var i=0;i<c;i++)L[i]*=e}}return}var d=am.setArraySize(u,c);if(F>=n[n.length-1]){var j=G[n.length-1];if(1==e){if(o==a.MixBlend.add){var f=h;if(null==f.bones)for(var g=f.vertices,v=0;v<c;v++)d[v]+=j[v]-g[v];else for(var H=0;H<c;H++)d[H]+=j[H]}else am.arrayCopy(j,0,d,0,c)}else switch(o){case a.MixBlend.setup:var M=h;if(null==M.bones)for(var g=M.vertices,w=0;w<c;w++){var x=g[w];d[w]=x+(j[w]-x)*e}else for(var I=0;I<c;I++)d[I]=j[I]*e;break;case a.MixBlend.first:case a.MixBlend.replace:for(var y=0;y<c;y++)d[y]+=(j[y]-d[y])*e;break;case a.MixBlend.add:var f=h;if(null==f.bones)for(var g=f.vertices,z=0;z<c;z++)d[z]+=(j[z]-g[z])*e;else for(var J=0;J<c;J++)d[J]+=j[J]*e}return}var A=aE.binarySearch(n,F),k=G[A-1],l=G[A],N=n[A],m=this.getCurvePercent(A-1,1-(F-N)/(n[A-1]-N));if(1==e){if(o==a.MixBlend.add){var f=h;if(null==f.bones)for(var g=f.vertices,p=0;p<c;p++){var b=k[p];d[p]+=b+(l[p]-b)*m-g[p]}else for(var B=0;B<c;B++){var b=k[B];d[B]+=b+(l[B]-b)*m}}else for(var C=0;C<c;C++){var b=k[C];d[C]=b+(l[C]-b)*m}}else switch(o){case a.MixBlend.setup:var O=h;if(null==O.bones)for(var g=O.vertices,q=0;q<c;q++){var b=k[q],x=g[q];d[q]=x+(b+(l[q]-b)*m-x)*e}else for(var D=0;D<c;D++){var b=k[D];d[D]=(b+(l[D]-b)*m)*e}break;case a.MixBlend.first:case a.MixBlend.replace:for(var r=0;r<c;r++){var b=k[r];d[r]+=(b+(l[r]-b)*m-d[r])*e}break;case a.MixBlend.add:var f=h;if(null==f.bones)for(var g=f.vertices,t=0;t<c;t++){var b=k[t];d[t]+=(b+(l[t]-b)*m-g[t])*e}else for(var E=0;E<c;E++){var b=k[E];d[E]+=(b+(l[E]-b)*m)*e}}}}},b}(m),aM=function(){function a(a){this.frames=am.newFloatArray(a),this.events=new Array(a)}return a.prototype.getPropertyId=function(){return D.event<<24},a.prototype.getFrameCount=function(){return this.frames.length},a.prototype.setFrame=function(a,b){this.frames[a]=b.time,this.events[a]=b},a.prototype.apply=function(g,c,d,e,h,i,j){if(null!=e){var b=this.frames,f=this.frames.length;if(c>d)this.apply(g,c,Number.MAX_VALUE,e,h,i,j),c=-1;else if(c>=b[f-1])return;if(!(d<b[0])){var a=0;if(c<b[0])a=0;else{a=aE.binarySearch(b,c);for(var k=b[a];a>0&&b[a-1]==k;)a--}for(;a<f&&d>=b[a];a++)e.push(this.events[a])}}},a}(),aN=function(){function b(a){this.frames=am.newFloatArray(a),this.drawOrders=new Array(a)}return b.prototype.getPropertyId=function(){return D.drawOrder<<24},b.prototype.getFrameCount=function(){return this.frames.length},b.prototype.setFrame=function(a,b,c){this.frames[a]=b,this.drawOrders[a]=c},b.prototype.apply=function(b,m,e,n,o,f,k){var i=b.drawOrder,g=b.slots;if(k==a.MixDirection.mixOut&&f==a.MixBlend.setup){am.arrayCopy(b.slots,0,b.drawOrder,0,b.slots.length);return}var c=this.frames;if(e<c[0]){(f==a.MixBlend.setup||f==a.MixBlend.first)&&am.arrayCopy(b.slots,0,b.drawOrder,0,b.slots.length);return}var j=0;j=e>=c[c.length-1]?c.length-1:aE.binarySearch(c,e)-1;var h=this.drawOrders[j];if(null==h)am.arrayCopy(g,0,i,0,g.length);else for(var d=0,l=h.length;d<l;d++)i[d]=g[h[d]]},b}(),aO=function(c){function b(a){var d=c.call(this,a)||this;return d.frames=am.newFloatArray(a*b.ENTRIES),d}return db(b,c),b.prototype.getPropertyId=function(){return(D.ikConstraint<<24)+this.ikConstraintIndex},b.prototype.setFrame=function(a,c,d,e,f,g,h){a*=b.ENTRIES,this.frames[a]=c,this.frames[a+b.MIX]=d,this.frames[a+b.SOFTNESS]=e,this.frames[a+b.BEND_DIRECTION]=f,this.frames[a+b.COMPRESS]=g?1:0,this.frames[a+b.STRETCH]=h?1:0},b.prototype.apply=function(n,o,g,p,f,l,h){var d=this.frames,c=n.ikConstraints[this.ikConstraintIndex];if(c.active){if(g<d[0]){switch(l){case a.MixBlend.setup:c.mix=c.data.mix,c.softness=c.data.softness,c.bendDirection=c.data.bendDirection,c.compress=c.data.compress,c.stretch=c.data.stretch;break;case a.MixBlend.first:c.mix+=(c.data.mix-c.mix)*f,c.softness+=(c.data.softness-c.softness)*f,c.bendDirection=c.data.bendDirection,c.compress=c.data.compress,c.stretch=c.data.stretch}return}if(g>=d[d.length-b.ENTRIES]){l==a.MixBlend.setup?(c.mix=c.data.mix+(d[d.length+b.PREV_MIX]-c.data.mix)*f,c.softness=c.data.softness+(d[d.length+b.PREV_SOFTNESS]-c.data.softness)*f,h==a.MixDirection.mixOut?(c.bendDirection=c.data.bendDirection,c.compress=c.data.compress,c.stretch=c.data.stretch):(c.bendDirection=d[d.length+b.PREV_BEND_DIRECTION],c.compress=0!=d[d.length+b.PREV_COMPRESS],c.stretch=0!=d[d.length+b.PREV_STRETCH])):(c.mix+=(d[d.length+b.PREV_MIX]-c.mix)*f,c.softness+=(d[d.length+b.PREV_SOFTNESS]-c.softness)*f,h==a.MixDirection.mixIn&&(c.bendDirection=d[d.length+b.PREV_BEND_DIRECTION],c.compress=0!=d[d.length+b.PREV_COMPRESS],c.stretch=0!=d[d.length+b.PREV_STRETCH]));return}var e=aE.binarySearch(d,g,b.ENTRIES),i=d[e+b.PREV_MIX],j=d[e+b.PREV_SOFTNESS],m=d[e],k=this.getCurvePercent(e/b.ENTRIES-1,1-(g-m)/(d[e+b.PREV_TIME]-m));l==a.MixBlend.setup?(c.mix=c.data.mix+(i+(d[e+b.MIX]-i)*k-c.data.mix)*f,c.softness=c.data.softness+(j+(d[e+b.SOFTNESS]-j)*k-c.data.softness)*f,h==a.MixDirection.mixOut?(c.bendDirection=c.data.bendDirection,c.compress=c.data.compress,c.stretch=c.data.stretch):(c.bendDirection=d[e+b.PREV_BEND_DIRECTION],c.compress=0!=d[e+b.PREV_COMPRESS],c.stretch=0!=d[e+b.PREV_STRETCH])):(c.mix+=(i+(d[e+b.MIX]-i)*k-c.mix)*f,c.softness+=(j+(d[e+b.SOFTNESS]-j)*k-c.softness)*f,h==a.MixDirection.mixIn&&(c.bendDirection=d[e+b.PREV_BEND_DIRECTION],c.compress=0!=d[e+b.PREV_COMPRESS],c.stretch=0!=d[e+b.PREV_STRETCH]))}},b.ENTRIES=6,b.PREV_TIME=-6,b.PREV_MIX=-5,b.PREV_SOFTNESS=-4,b.PREV_BEND_DIRECTION=-3,b.PREV_COMPRESS=-2,b.PREV_STRETCH=-1,b.MIX=1,b.SOFTNESS=2,b.BEND_DIRECTION=3,b.COMPRESS=4,b.STRETCH=5,b}(m),aP=function(c){function b(a){var d=c.call(this,a)||this;return d.frames=am.newFloatArray(a*b.ENTRIES),d}return db(b,c),b.prototype.getPropertyId=function(){return(D.transformConstraint<<24)+this.transformConstraintIndex},b.prototype.setFrame=function(a,c,d,e,f,g){a*=b.ENTRIES,this.frames[a]=c,this.frames[a+b.ROTATE]=d,this.frames[a+b.TRANSLATE]=e,this.frames[a+b.SCALE]=f,this.frames[a+b.SHEAR]=g},b.prototype.apply=function(q,r,l,s,f,o,t){var d=this.frames,c=q.transformConstraints[this.transformConstraintIndex];if(c.active){if(l<d[0]){var e=c.data;switch(o){case a.MixBlend.setup:c.rotateMix=e.rotateMix,c.translateMix=e.translateMix,c.scaleMix=e.scaleMix,c.shearMix=e.shearMix;break;case a.MixBlend.first:c.rotateMix+=(e.rotateMix-c.rotateMix)*f,c.translateMix+=(e.translateMix-c.translateMix)*f,c.scaleMix+=(e.scaleMix-c.scaleMix)*f,c.shearMix+=(e.shearMix-c.shearMix)*f}return}var h=0,i=0,j=0,k=0;if(l>=d[d.length-b.ENTRIES]){var m=d.length;h=d[m+b.PREV_ROTATE],i=d[m+b.PREV_TRANSLATE],j=d[m+b.PREV_SCALE],k=d[m+b.PREV_SHEAR]}else{var g=aE.binarySearch(d,l,b.ENTRIES);h=d[g+b.PREV_ROTATE],i=d[g+b.PREV_TRANSLATE],j=d[g+b.PREV_SCALE],k=d[g+b.PREV_SHEAR];var p=d[g],n=this.getCurvePercent(g/b.ENTRIES-1,1-(l-p)/(d[g+b.PREV_TIME]-p));h+=(d[g+b.ROTATE]-h)*n,i+=(d[g+b.TRANSLATE]-i)*n,j+=(d[g+b.SCALE]-j)*n,k+=(d[g+b.SHEAR]-k)*n}if(o==a.MixBlend.setup){var e=c.data;c.rotateMix=e.rotateMix+(h-e.rotateMix)*f,c.translateMix=e.translateMix+(i-e.translateMix)*f,c.scaleMix=e.scaleMix+(j-e.scaleMix)*f,c.shearMix=e.shearMix+(k-e.shearMix)*f}else c.rotateMix+=(h-c.rotateMix)*f,c.translateMix+=(i-c.translateMix)*f,c.scaleMix+=(j-c.scaleMix)*f,c.shearMix+=(k-c.shearMix)*f}},b.ENTRIES=5,b.PREV_TIME=-5,b.PREV_ROTATE=-4,b.PREV_TRANSLATE=-3,b.PREV_SCALE=-2,b.PREV_SHEAR=-1,b.ROTATE=1,b.TRANSLATE=2,b.SCALE=3,b.SHEAR=4,b}(m),V=function(c){function b(a){var d=c.call(this,a)||this;return d.frames=am.newFloatArray(a*b.ENTRIES),d}return db(b,c),b.prototype.getPropertyId=function(){return(D.pathConstraintPosition<<24)+this.pathConstraintIndex},b.prototype.setFrame=function(a,c,d){a*=b.ENTRIES,this.frames[a]=c,this.frames[a+b.VALUE]=d},b.prototype.apply=function(k,m,g,n,h,i,o){var d=this.frames,c=k.pathConstraints[this.pathConstraintIndex];if(c.active){if(g<d[0]){switch(i){case a.MixBlend.setup:c.position=c.data.position;break;case a.MixBlend.first:c.position+=(c.data.position-c.position)*h}return}var e=0;if(g>=d[d.length-b.ENTRIES])e=d[d.length+b.PREV_VALUE];else{var f=aE.binarySearch(d,g,b.ENTRIES);e=d[f+b.PREV_VALUE];var j=d[f],l=this.getCurvePercent(f/b.ENTRIES-1,1-(g-j)/(d[f+b.PREV_TIME]-j));e+=(d[f+b.VALUE]-e)*l}i==a.MixBlend.setup?c.position=c.data.position+(e-c.data.position)*h:c.position+=(e-c.position)*h}},b.ENTRIES=2,b.PREV_TIME=-2,b.PREV_VALUE=-1,b.VALUE=1,b}(m),aQ=function(c){function b(a){return c.call(this,a)||this}return db(b,c),b.prototype.getPropertyId=function(){return(D.pathConstraintSpacing<<24)+this.pathConstraintIndex},b.prototype.apply=function(k,m,g,n,h,i,o){var d=this.frames,c=k.pathConstraints[this.pathConstraintIndex];if(c.active){if(g<d[0]){switch(i){case a.MixBlend.setup:c.spacing=c.data.spacing;break;case a.MixBlend.first:c.spacing+=(c.data.spacing-c.spacing)*h}return}var e=0;if(g>=d[d.length-b.ENTRIES])e=d[d.length+b.PREV_VALUE];else{var f=aE.binarySearch(d,g,b.ENTRIES);e=d[f+b.PREV_VALUE];var j=d[f],l=this.getCurvePercent(f/b.ENTRIES-1,1-(g-j)/(d[f+b.PREV_TIME]-j));e+=(d[f+b.VALUE]-e)*l}i==a.MixBlend.setup?c.spacing=c.data.spacing+(e-c.data.spacing)*h:c.spacing+=(e-c.spacing)*h}},b}(V),aR=function(c){function b(a){var d=c.call(this,a)||this;return d.frames=am.newFloatArray(a*b.ENTRIES),d}return db(b,c),b.prototype.getPropertyId=function(){return(D.pathConstraintMix<<24)+this.pathConstraintIndex},b.prototype.setFrame=function(a,c,d,e){a*=b.ENTRIES,this.frames[a]=c,this.frames[a+b.ROTATE]=d,this.frames[a+b.TRANSLATE]=e},b.prototype.apply=function(m,n,i,o,f,j,p){var d=this.frames,c=m.pathConstraints[this.pathConstraintIndex];if(c.active){if(i<d[0]){switch(j){case a.MixBlend.setup:c.rotateMix=c.data.rotateMix,c.translateMix=c.data.translateMix;break;case a.MixBlend.first:c.rotateMix+=(c.data.rotateMix-c.rotateMix)*f,c.translateMix+=(c.data.translateMix-c.translateMix)*f}return}var g=0,h=0;if(i>=d[d.length-b.ENTRIES])g=d[d.length+b.PREV_ROTATE],h=d[d.length+b.PREV_TRANSLATE];else{var e=aE.binarySearch(d,i,b.ENTRIES);g=d[e+b.PREV_ROTATE],h=d[e+b.PREV_TRANSLATE];var k=d[e],l=this.getCurvePercent(e/b.ENTRIES-1,1-(i-k)/(d[e+b.PREV_TIME]-k));g+=(d[e+b.ROTATE]-g)*l,h+=(d[e+b.TRANSLATE]-h)*l}j==a.MixBlend.setup?(c.rotateMix=c.data.rotateMix+(g-c.data.rotateMix)*f,c.translateMix=c.data.translateMix+(h-c.data.translateMix)*f):(c.rotateMix+=(g-c.rotateMix)*f,c.translateMix+=(h-c.translateMix)*f)}},b.ENTRIES=3,b.PREV_TIME=-3,b.PREV_ROTATE=-2,b.PREV_TRANSLATE=-1,b.ROTATE=1,b.TRANSLATE=2,b}(m),aS=function(){function b(a){this.tracks=new Array,this.timeScale=1,this.unkeyedState=0,this.events=new Array,this.listeners=new Array,this.queue=new aU(this),this.propertyIDs=new ah,this.animationsChanged=!1,this.trackEntryPool=new ao(function(){return new aT}),this.data=a}return b.prototype.update=function(d){d*=this.timeScale;for(var g=this.tracks,e=0,i=g.length;e<i;e++){var a=g[e];if(null!=a){a.animationLast=a.nextAnimationLast,a.trackLast=a.nextTrackLast;var f=d*a.timeScale;if(a.delay>0){if(a.delay-=f,a.delay>0)continue;f=-a.delay,a.delay=0}var b=a.next;if(null!=b){var h=a.trackLast-b.delay;if(h>=0){for(b.delay=0,b.trackTime+=0==a.timeScale?0:(h/a.timeScale+d)*b.timeScale,a.trackTime+=f,this.setCurrent(e,b,!0);null!=b.mixingFrom;)b.mixTime+=d,b=b.mixingFrom;continue}}else if(a.trackLast>=a.trackEnd&&null==a.mixingFrom){g[e]=null,this.queue.end(a),this.disposeNext(a);continue}if(null!=a.mixingFrom&&this.updateMixingFrom(a,d)){var c=a.mixingFrom;for(a.mixingFrom=null,null!=c&&(c.mixingTo=null);null!=c;)this.queue.end(c),c=c.mixingFrom}a.trackTime+=f}}this.queue.drain()},b.prototype.updateMixingFrom=function(b,c){var a=b.mixingFrom;if(null==a)return!0;var d=this.updateMixingFrom(a,c);return(a.animationLast=a.nextAnimationLast,a.trackLast=a.nextTrackLast,b.mixTime>0&&b.mixTime>=b.mixDuration)?((0==a.totalAlpha||0==b.mixDuration)&&(b.mixingFrom=a.mixingFrom,null!=a.mixingFrom&&(a.mixingFrom.mixingTo=b),b.interruptAlpha=a.interruptAlpha,this.queue.end(a)),d):(a.trackTime+=c*a.timeScale,b.mixTime+=c,!1)},b.prototype.apply=function(d){if(null==d)throw new Error("skeleton cannot be null.");this.animationsChanged&&this._animationsChanged();for(var l=this.events,p=this.tracks,q=!1,i=0,w=p.length;i<w;i++){var c=p[i];if(null!=c&&!(c.delay>0)){q=!0;var f=0==i?a.MixBlend.first:c.mixBlend,g=c.alpha;null!=c.mixingFrom?g*=this.applyMixingFrom(c,d,f):c.trackTime>=c.trackEnd&&null==c.next&&(g=0);var r=c.animationLast,h=c.getAnimationTime(),m=c.animation.timelines.length,s=c.animation.timelines;if(0==i&&1==g||f==a.MixBlend.add)for(var e=0;e<m;e++){am.webkit602BugfixHelper(g,f);var n=s[e];n instanceof aK?this.applyAttachmentTimeline(n,d,h,f,!0):n.apply(d,r,h,l,g,f,a.MixDirection.mixIn)}else{var x=c.timelineMode,t=0==c.timelinesRotation.length;t&&am.setArraySize(c.timelinesRotation,m<<1,null);for(var y=c.timelinesRotation,e=0;e<m;e++){var j=s[e],u=x[e]==b.SUBSEQUENT?f:a.MixBlend.setup;j instanceof aF?this.applyRotateTimeline(j,d,h,g,u,y,e<<1,t):j instanceof aK?this.applyAttachmentTimeline(j,d,h,f,!0):(am.webkit602BugfixHelper(g,f),j.apply(d,r,h,l,g,u,a.MixDirection.mixIn))}}this.queueEvents(c,h),l.length=0,c.nextAnimationLast=h,c.nextTrackLast=c.trackTime}}for(var z=this.unkeyedState+b.SETUP,A=d.slots,o=0,B=d.slots.length;o<B;o++){var k=A[o];if(k.attachmentState==z){var v=k.data.attachmentName;k.setAttachment(null==v?null:d.getAttachment(k.data.index,v))}}return this.unkeyedState+=2,this.queue.drain(),q},b.prototype.applyMixingFrom=function(j,l,d){var c=j.mixingFrom;null!=c.mixingFrom&&this.applyMixingFrom(c,l,d);var h=0;0==j.mixDuration?(h=1,d==a.MixBlend.first&&(d=a.MixBlend.setup)):((h=j.mixTime/j.mixDuration)>1&&(h=1),d!=a.MixBlend.first&&(d=c.mixBlend));var p=h<c.eventThreshold?this.events:null,w=h<c.attachmentThreshold,q=h<c.drawOrderThreshold,r=c.animationLast,k=c.getAnimationTime(),n=c.animation.timelines.length,s=c.animation.timelines,m=c.alpha*j.interruptAlpha,o=m*(1-h);if(d==a.MixBlend.add)for(var e=0;e<n;e++)s[e].apply(l,r,k,p,o,d,a.MixDirection.mixOut);else{var x=c.timelineMode,y=c.timelineHoldMix,t=0==c.timelinesRotation.length;t&&am.setArraySize(c.timelinesRotation,n<<1,null);var z=c.timelinesRotation;c.totalAlpha=0;for(var e=0;e<n;e++){var i=s[e],u=a.MixDirection.mixOut,f=void 0,g=0;switch(x[e]){case b.SUBSEQUENT:if(!q&&i instanceof aN)continue;f=d,g=o;break;case b.FIRST:f=a.MixBlend.setup,g=o;break;case b.HOLD_SUBSEQUENT:f=d,g=m;break;case b.HOLD_FIRST:f=a.MixBlend.setup,g=m;break;default:f=a.MixBlend.setup;var v=y[e];g=m*Math.max(0,1-v.mixTime/v.mixDuration)}c.totalAlpha+=g,i instanceof aF?this.applyRotateTimeline(i,l,k,g,f,z,e<<1,t):i instanceof aK?this.applyAttachmentTimeline(i,l,k,f,w):(am.webkit602BugfixHelper(g,d),q&&i instanceof aN&&f==a.MixBlend.setup&&(u=a.MixDirection.mixIn),i.apply(l,r,k,p,g,f,u))}}return j.mixDuration>0&&this.queueEvents(c,k),this.events.length=0,c.nextAnimationLast=k,c.nextTrackLast=c.trackTime,h},b.prototype.applyAttachmentTimeline=function(e,f,g,h,i){var j,c=f.slots[e.slotIndex];if(c.bone.active){var d=e.frames;g<d[0]?(h==a.MixBlend.setup||h==a.MixBlend.first)&&this.setAttachment(f,c,c.data.attachmentName,i):(j=g>=d[d.length-1]?d.length-1:aE.binarySearch(d,g)-1,this.setAttachment(f,c,e.attachmentNames[j],i)),c.attachmentState<=this.unkeyedState&&(c.attachmentState=this.unkeyedState+b.SETUP)}},b.prototype.setAttachment=function(d,a,c,e){a.setAttachment(null==c?null:d.getAttachment(a.data.index,c)),e&&(a.attachmentState=this.unkeyedState+b.CURRENT)},b.prototype.applyRotateTimeline=function(p,q,j,r,n,g,h,s){if(s&&(g[h]=0),1==r){p.apply(q,0,j,null,1,n,a.MixDirection.mixIn);return}var o=p,b=o.frames,c=q.bones[o.boneIndex];if(c.active){var i=0,d=0;if(j<b[0])switch(n){case a.MixBlend.setup:c.rotation=c.data.rotation;default:return;case a.MixBlend.first:i=c.rotation,d=c.data.rotation}else if(i=n==a.MixBlend.setup?c.data.rotation:c.rotation,j>=b[b.length-aF.ENTRIES])d=c.data.rotation+b[b.length+aF.PREV_ROTATION];else{var k=aE.binarySearch(b,j,aF.ENTRIES),t=b[k+aF.PREV_ROTATION],u=b[k],x=o.getCurvePercent((k>>1)-1,1-(j-u)/(b[k+aF.PREV_TIME]-u));d=b[k+aF.ROTATION]-t,d-=(16384-(16384.499999999996-d/360|0))*360,d=t+d*x+c.data.rotation,d-=(16384-(16384.499999999996-d/360|0))*360}var l=0,f=d-i;if(0==(f-=(16384-(16384.499999999996-f/360|0))*360))l=g[h];else{var e=0,m=0;s?(e=0,m=f):(e=g[h],m=g[h+1]);var v=f>0,w=e>=0;ak.signum(m)!=ak.signum(f)&&90>=Math.abs(m)&&(Math.abs(e)>180&&(e+=360*ak.signum(e)),w=v),l=f+e-e%360,w!=v&&(l+=360*ak.signum(e)),g[h]=l}g[h+1]=f,i+=l*r,c.rotation=i-(16384-(16384.499999999996-i/360|0))*360}},b.prototype.queueEvents=function(a,j){for(var g=a.animationStart,c=a.animationEnd,e=c-g,h=a.trackLast%e,d=this.events,b=0,i=d.length;b<i;b++){var f=d[b];if(f.time<h)break;f.time>c||this.queue.event(a,f)}for((a.loop?0==e||h>a.trackTime%e:j>=c&&a.animationLast<c)&&this.queue.complete(a);b<i;b++)d[b].time<g||this.queue.event(a,d[b])},b.prototype.clearTracks=function(){var b=this.queue.drainDisabled;this.queue.drainDisabled=!0;for(var a=0,c=this.tracks.length;a<c;a++)this.clearTrack(a);this.tracks.length=0,this.queue.drainDisabled=b,this.queue.drain()},b.prototype.clearTrack=function(d){if(!(d>=this.tracks.length)){var a=this.tracks[d];if(null!=a){this.queue.end(a),this.disposeNext(a);for(var b=a;;){var c=b.mixingFrom;if(null==c)break;this.queue.end(c),b.mixingFrom=null,b.mixingTo=null,b=c}this.tracks[a.trackIndex]=null,this.queue.drain()}}},b.prototype.setCurrent=function(c,b,d){var a=this.expandToIndex(c);this.tracks[c]=b,null!=a&&(d&&this.queue.interrupt(a),b.mixingFrom=a,a.mixingTo=b,b.mixTime=0,null!=a.mixingFrom&&a.mixDuration>0&&(b.interruptAlpha*=Math.min(1,a.mixTime/a.mixDuration)),a.timelinesRotation.length=0),this.queue.start(b)},b.prototype.setAnimation=function(c,a,d){var b=this.data.skeletonData.findAnimation(a);if(null==b)throw new Error("Animation not found: "+a);return this.setAnimationWith(c,b,d)},b.prototype.setAnimationWith=function(b,c,f){if(null==c)throw new Error("animation cannot be null.");var d=!0,a=this.expandToIndex(b);null!=a&&(-1==a.nextTrackLast?(this.tracks[b]=a.mixingFrom,this.queue.interrupt(a),this.queue.end(a),this.disposeNext(a),a=a.mixingFrom,d=!1):this.disposeNext(a));var e=this.trackEntry(b,c,f,a);return this.setCurrent(b,e,d),this.queue.drain(),e},b.prototype.addAnimation=function(c,a,d,e){var b=this.data.skeletonData.findAnimation(a);if(null==b)throw new Error("Animation not found: "+a);return this.addAnimationWith(c,b,d,e)},b.prototype.addAnimationWith=function(e,f,g,b){if(null==f)throw new Error("animation cannot be null.");var a=this.expandToIndex(e);if(null!=a)for(;null!=a.next;)a=a.next;var c=this.trackEntry(e,f,g,a);if(null==a)this.setCurrent(e,c,!0),this.queue.drain();else if(a.next=c,b<=0){var d=a.animationEnd-a.animationStart;0!=d?(a.loop?b+=d*(1+(a.trackTime/d|0)):b+=Math.max(d,a.trackTime),b-=this.data.getMix(a.animation,f)):b=a.trackTime}return c.delay=b,c},b.prototype.setEmptyAnimation=function(d,c){var a=this.setAnimationWith(d,b.emptyAnimation,!1);return a.mixDuration=c,a.trackEnd=c,a},b.prototype.addEmptyAnimation=function(e,a,c){c<=0&&(c-=a);var d=this.addAnimationWith(e,b.emptyAnimation,!1,c);return d.mixDuration=a,d.trackEnd=a,d},b.prototype.setEmptyAnimations=function(c){var d=this.queue.drainDisabled;this.queue.drainDisabled=!0;for(var a=0,e=this.tracks.length;a<e;a++){var b=this.tracks[a];null!=b&&this.setEmptyAnimation(b.trackIndex,c)}this.queue.drainDisabled=d,this.queue.drain()},b.prototype.expandToIndex=function(a){return a<this.tracks.length?this.tracks[a]:(am.ensureArrayCapacity(this.tracks,a+1,null),this.tracks.length=a+1,null)},b.prototype.trackEntry=function(e,c,f,d){var b=this.trackEntryPool.obtain();return b.trackIndex=e,b.animation=c,b.loop=f,b.holdPrevious=!1,b.eventThreshold=0,b.attachmentThreshold=0,b.drawOrderThreshold=0,b.animationStart=0,b.animationEnd=c.duration,b.animationLast=-1,b.nextAnimationLast=-1,b.delay=0,b.trackTime=0,b.trackLast=-1,b.nextTrackLast=-1,b.trackEnd=Number.MAX_VALUE,b.timeScale=1,b.alpha=1,b.interruptAlpha=1,b.mixTime=0,b.mixDuration=null==d?0:this.data.getMix(d.animation,c),b.mixBlend=a.MixBlend.replace,b},b.prototype.disposeNext=function(b){for(var a=b.next;null!=a;)this.queue.dispose(a),a=a.next;b.next=null},b.prototype._animationsChanged=function(){this.animationsChanged=!1,this.propertyIDs.clear();for(var c=0,d=this.tracks.length;c<d;c++){var b=this.tracks[c];if(null!=b){for(;null!=b.mixingFrom;)b=b.mixingFrom;do(null==b.mixingFrom||b.mixBlend!=a.MixBlend.add)&&this.computeHold(b),b=b.mixingTo;while(null!=b)}}},b.prototype.computeHold=function(c){var d=c.mixingTo,j=c.animation.timelines,g=c.animation.timelines.length,e=am.setArraySize(c.timelineMode,g);c.timelineHoldMix.length=0;var l=am.setArraySize(c.timelineHoldMix,g),k=this.propertyIDs;if(null!=d&&d.holdPrevious){for(var a=0;a<g;a++)e[a]=k.add(j[a].getPropertyId())?b.HOLD_FIRST:b.HOLD_SUBSEQUENT;return}outer:for(var a=0;a<g;a++){var h=j[a],i=h.getPropertyId();if(k.add(i)){if(null==d||h instanceof aK||h instanceof aN||h instanceof aM||!d.animation.hasTimeline(i))e[a]=b.FIRST;else{for(var f=d.mixingTo;null!=f;f=f.mixingTo)if(!f.animation.hasTimeline(i)){if(c.mixDuration>0){e[a]=b.HOLD_MIX,l[a]=f;continue outer}break}e[a]=b.HOLD_FIRST}}else e[a]=b.SUBSEQUENT}},b.prototype.getCurrent=function(a){return a>=this.tracks.length?null:this.tracks[a]},b.prototype.addListener=function(a){if(null==a)throw new Error("listener cannot be null.");this.listeners.push(a)},b.prototype.removeListener=function(b){var a=this.listeners.indexOf(b);a>=0&&this.listeners.splice(a,1)},b.prototype.clearListeners=function(){this.listeners.length=0},b.prototype.clearListenerNotifications=function(){this.queue.clear()},b.prototype.setAnimationByName=function(a,c,d){b.deprecatedWarning1||(b.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: AnimationState.setAnimationByName is deprecated, please use setAnimation from now on.")),this.setAnimation(a,c,d)},b.prototype.addAnimationByName=function(a,c,d,e){b.deprecatedWarning2||(b.deprecatedWarning2=!0,console.warn("Spine Deprecation Warning: AnimationState.addAnimationByName is deprecated, please use addAnimation from now on.")),this.addAnimation(a,c,d,e)},b.prototype.hasAnimation=function(a){return null!==this.data.skeletonData.findAnimation(a)},b.prototype.hasAnimationByName=function(a){return b.deprecatedWarning3||(b.deprecatedWarning3=!0,console.warn("Spine Deprecation Warning: AnimationState.hasAnimationByName is deprecated, please use hasAnimation from now on.")),this.hasAnimation(a)},b.emptyAnimation=new aE("<empty>",[],0),b.SUBSEQUENT=0,b.FIRST=1,b.HOLD_SUBSEQUENT=2,b.HOLD_FIRST=3,b.HOLD_MIX=4,b.SETUP=1,b.CURRENT=2,b.deprecatedWarning1=!1,b.deprecatedWarning2=!1,b.deprecatedWarning3=!1,b}(),aT=function(){function b(){this.mixBlend=a.MixBlend.replace,this.timelineMode=new Array,this.timelineHoldMix=new Array,this.timelinesRotation=new Array}return b.prototype.reset=function(){this.next=null,this.mixingFrom=null,this.mixingTo=null,this.animation=null,this.listener=null,this.timelineMode.length=0,this.timelineHoldMix.length=0,this.timelinesRotation.length=0},b.prototype.getAnimationTime=function(){if(this.loop){var a=this.animationEnd-this.animationStart;return 0==a?this.animationStart:this.trackTime%a+this.animationStart}return Math.min(this.trackTime+this.animationStart,this.animationEnd)},b.prototype.setAnimationLast=function(a){this.animationLast=a,this.nextAnimationLast=a},b.prototype.isComplete=function(){return this.trackTime>=this.animationEnd-this.animationStart},b.prototype.resetRotationDirections=function(){this.timelinesRotation.length=0},Object.defineProperty(b.prototype,"time",{get:function(){return b.deprecatedWarning1||(b.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: TrackEntry.time is deprecated, please use trackTime from now on.")),this.trackTime},set:function(a){b.deprecatedWarning1||(b.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: TrackEntry.time is deprecated, please use trackTime from now on.")),this.trackTime=a},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"endTime",{get:function(){return b.deprecatedWarning2||(b.deprecatedWarning2=!0,console.warn("Spine Deprecation Warning: TrackEntry.endTime is deprecated, please use trackEnd from now on.")),this.trackTime},set:function(a){b.deprecatedWarning2||(b.deprecatedWarning2=!0,console.warn("Spine Deprecation Warning: TrackEntry.endTime is deprecated, please use trackEnd from now on.")),this.trackTime=a},enumerable:!1,configurable:!0}),b.prototype.loopsCount=function(){return Math.floor(this.trackTime/this.trackEnd)},b.deprecatedWarning1=!1,b.deprecatedWarning2=!1,b}(),aU=function(){function a(a){this.objects=[],this.drainDisabled=!1,this.animState=a}return a.prototype.start=function(a){this.objects.push(E.start),this.objects.push(a),this.animState.animationsChanged=!0},a.prototype.interrupt=function(a){this.objects.push(E.interrupt),this.objects.push(a)},a.prototype.end=function(a){this.objects.push(E.end),this.objects.push(a),this.animState.animationsChanged=!0},a.prototype.dispose=function(a){this.objects.push(E.dispose),this.objects.push(a)},a.prototype.complete=function(a){this.objects.push(E.complete),this.objects.push(a)},a.prototype.event=function(a,b){this.objects.push(E.event),this.objects.push(a),this.objects.push(b)},a.prototype.deprecateStuff=function(){return a.deprecatedWarning1||(a.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: onComplete, onStart, onEnd, onEvent art deprecated, please use listeners from now on. 'state.addListener({ complete: function(track, event) { } })'")),!0},a.prototype.drain=function(){if(!this.drainDisabled){this.drainDisabled=!0;for(var e=this.objects,c=this.animState.listeners,d=0;d<e.length;d+=2){var h=e[d],a=e[d+1];switch(h){case E.start:null!=a.listener&&a.listener.start&&a.listener.start(a);for(var b=0;b<c.length;b++)c[b].start&&c[b].start(a);a.onStart&&this.deprecateStuff()&&a.onStart(a.trackIndex),this.animState.onStart&&this.deprecateStuff()&&this.deprecateStuff&&this.animState.onStart(a.trackIndex);break;case E.interrupt:null!=a.listener&&a.listener.interrupt&&a.listener.interrupt(a);for(var b=0;b<c.length;b++)c[b].interrupt&&c[b].interrupt(a);break;case E.end:null!=a.listener&&a.listener.end&&a.listener.end(a);for(var b=0;b<c.length;b++)c[b].end&&c[b].end(a);a.onEnd&&this.deprecateStuff()&&a.onEnd(a.trackIndex),this.animState.onEnd&&this.deprecateStuff()&&this.animState.onEnd(a.trackIndex);case E.dispose:null!=a.listener&&a.listener.dispose&&a.listener.dispose(a);for(var b=0;b<c.length;b++)c[b].dispose&&c[b].dispose(a);this.animState.trackEntryPool.free(a);break;case E.complete:null!=a.listener&&a.listener.complete&&a.listener.complete(a);for(var b=0;b<c.length;b++)c[b].complete&&c[b].complete(a);var g=ak.toInt(a.loopsCount());a.onComplete&&this.deprecateStuff()&&a.onComplete(a.trackIndex,g),this.animState.onComplete&&this.deprecateStuff()&&this.animState.onComplete(a.trackIndex,g);break;case E.event:var f=e[(d++)+2];null!=a.listener&&a.listener.event&&a.listener.event(a,f);for(var b=0;b<c.length;b++)c[b].event&&c[b].event(a,f);a.onEvent&&this.deprecateStuff()&&a.onEvent(a.trackIndex,f),this.animState.onEvent&&this.deprecateStuff()&&this.animState.onEvent(a.trackIndex,f)}}this.clear(),this.drainDisabled=!1}},a.prototype.clear=function(){this.objects.length=0},a.deprecatedWarning1=!1,a}();(e=E||(E={}))[e.start=0]="start",e[e.interrupt=1]="interrupt",e[e.end=2]="end",e[e.dispose=3]="dispose",e[e.complete=4]="complete",e[e.event=5]="event";var t,aV=function(){function a(){}return a.prototype.start=function(a){},a.prototype.interrupt=function(a){},a.prototype.end=function(a){},a.prototype.dispose=function(a){},a.prototype.complete=function(a){},a.prototype.event=function(a,b){},a}(),aW=function(){function a(a){if(this.animationToMixTime={},this.defaultMix=0,null==a)throw new Error("skeletonData cannot be null.");this.skeletonData=a}return a.prototype.setMix=function(a,b,e){var c=this.skeletonData.findAnimation(a);if(null==c)throw new Error("Animation not found: "+a);var d=this.skeletonData.findAnimation(b);if(null==d)throw new Error("Animation not found: "+b);this.setMixWith(c,d,e)},a.prototype.setMixByName=function(b,c,d){a.deprecatedWarning1||(a.deprecatedWarning1=!0,console.warn("Deprecation Warning: AnimationStateData.setMixByName is deprecated, please use setMix from now on.")),this.setMix(b,c,d)},a.prototype.setMixWith=function(a,b,c){if(null==a)throw new Error("from cannot be null.");if(null==b)throw new Error("to cannot be null.");var d=a.name+"."+b.name;this.animationToMixTime[d]=c},a.prototype.getMix=function(b,c){var d=b.name+"."+c.name,a=this.animationToMixTime[d];return void 0===a?this.defaultMix:a},a.deprecatedWarning1=!1,a}(),aX=function(){function a(a){this.atlas=a}return a.prototype.newRegionAttachment=function(e,a,b){var c=this.atlas.findRegion(b);if(null==c)throw new Error("Region not found in atlas: "+b+" (region attachment: "+a+")");var d=new aB(a);return d.region=c,d},a.prototype.newMeshAttachment=function(e,a,b){var c=this.atlas.findRegion(b);if(null==c)throw new Error("Region not found in atlas: "+b+" (mesh attachment: "+a+")");var d=new ay(a);return d.region=c,d},a.prototype.newBoundingBoxAttachment=function(b,a){return new aw(a)},a.prototype.newPathAttachment=function(b,a){return new az(a)},a.prototype.newPointAttachment=function(b,a){return new aA(a)},a.prototype.newClippingAttachment=function(b,a){return new ax(a)},a}(),aY=function(){function b(a,b,c){if(this.matrix=new cY.Matrix,this.children=new Array,this.x=0,this.y=0,this.rotation=0,this.scaleX=0,this.scaleY=0,this.shearX=0,this.shearY=0,this.ax=0,this.ay=0,this.arotation=0,this.ascaleX=0,this.ascaleY=0,this.ashearX=0,this.ashearY=0,this.appliedValid=!1,this.sorted=!1,this.active=!1,null==a)throw new Error("data cannot be null.");if(null==b)throw new Error("skeleton cannot be null.");this.data=a,this.skeleton=b,this.parent=c,this.setToSetupPose()}return Object.defineProperty(b.prototype,"worldX",{get:function(){return this.matrix.tx},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"worldY",{get:function(){return this.matrix.ty},enumerable:!1,configurable:!0}),b.prototype.isActive=function(){return this.active},b.prototype.update=function(){this.updateWorldTransformWith(this.x,this.y,this.rotation,this.scaleX,this.scaleY,this.shearX,this.shearY)},b.prototype.updateWorldTransform=function(){this.updateWorldTransformWith(this.x,this.y,this.rotation,this.scaleX,this.scaleY,this.shearX,this.shearY)},b.prototype.updateWorldTransformWith=function(w,x,d,g,h,i,s){this.ax=w,this.ay=x,this.arotation=d,this.ascaleX=g,this.ascaleY=h,this.ashearX=i,this.ashearY=s,this.appliedValid=!0;var t=this.parent,b=this.matrix,u=this.skeleton.scaleX,v=as.yDown?-this.skeleton.scaleY:this.skeleton.scaleY;if(null==t){var z=this.skeleton,l=d+90+s;b.a=ak.cosDeg(d+i)*g*u,b.c=ak.cosDeg(l)*h*u,b.b=ak.sinDeg(d+i)*g*v,b.d=ak.sinDeg(l)*h*v,b.tx=w*u+z.x,b.ty=x*v+z.y;return}var e=t.matrix.a,j=t.matrix.c,f=t.matrix.b,k=t.matrix.d;switch(b.tx=e*w+j*x+t.matrix.tx,b.ty=f*w+k*x+t.matrix.ty,this.data.transformMode){case a.TransformMode.Normal:var l=d+90+s,m=ak.cosDeg(d+i)*g,n=ak.cosDeg(l)*h,o=ak.sinDeg(d+i)*g,p=ak.sinDeg(l)*h;b.a=e*m+j*o,b.c=e*n+j*p,b.b=f*m+k*o,b.d=f*n+k*p;return;case a.TransformMode.OnlyTranslation:var l=d+90+s;b.a=ak.cosDeg(d+i)*g,b.c=ak.cosDeg(l)*h,b.b=ak.sinDeg(d+i)*g,b.d=ak.sinDeg(l)*h;break;case a.TransformMode.NoRotationOrReflection:var c=e*e+f*f,y=0;c>1e-4?(c=Math.abs(e*k-j*f)/c,e/=this.skeleton.scaleX,f/=this.skeleton.scaleY,j=f*c,k=e*c,y=Math.atan2(f,e)*ak.radDeg):(e=0,f=0,y=90-Math.atan2(k,j)*ak.radDeg);var A=d+i-y,B=d+s-y+90,m=ak.cosDeg(A)*g,n=ak.cosDeg(B)*h,o=ak.sinDeg(A)*g,p=ak.sinDeg(B)*h;b.a=e*m-j*o,b.c=e*n-j*p,b.b=f*m+k*o,b.d=f*n+k*p;break;case a.TransformMode.NoScale:case a.TransformMode.NoScaleOrReflection:var C=ak.cosDeg(d),D=ak.sinDeg(d),q=(e*C+j*D)/u,r=(f*C+k*D)/v,c=Math.sqrt(q*q+r*r);c>1e-5&&(c=1/c),q*=c,r*=c,c=Math.sqrt(q*q+r*r),this.data.transformMode==a.TransformMode.NoScale&&e*k-j*f<0!=(as.yDown?this.skeleton.scaleX<0!=this.skeleton.scaleY>0:this.skeleton.scaleX<0!=this.skeleton.scaleY<0)&&(c=-c);var E=Math.PI/2+Math.atan2(r,q),F=Math.cos(E)*c,G=Math.sin(E)*c,m=ak.cosDeg(i)*g,n=ak.cosDeg(90+s)*h,o=ak.sinDeg(i)*g,p=ak.sinDeg(90+s)*h;b.a=q*m+F*o,b.c=q*n+F*p,b.b=r*m+G*o,b.d=r*n+G*p}b.a*=u,b.c*=u,b.b*=v,b.d*=v},b.prototype.setToSetupPose=function(){var a=this.data;this.x=a.x,this.y=a.y,this.rotation=a.rotation,this.scaleX=a.scaleX,this.scaleY=a.scaleY,this.shearX=a.shearX,this.shearY=a.shearY},b.prototype.getWorldRotationX=function(){return Math.atan2(this.matrix.b,this.matrix.a)*ak.radDeg},b.prototype.getWorldRotationY=function(){return Math.atan2(this.matrix.d,this.matrix.c)*ak.radDeg},b.prototype.getWorldScaleX=function(){var a=this.matrix;return Math.sqrt(a.a*a.a+a.c*a.c)},b.prototype.getWorldScaleY=function(){var a=this.matrix;return Math.sqrt(a.b*a.b+a.d*a.d)},b.prototype.updateAppliedTransform=function(){this.appliedValid=!0;var h=this.parent,a=this.matrix;if(null==h){this.ax=a.tx,this.ay=a.ty,this.arotation=Math.atan2(a.b,a.a)*ak.radDeg,this.ascaleX=Math.sqrt(a.a*a.a+a.b*a.b),this.ascaleY=Math.sqrt(a.c*a.c+a.d*a.d),this.ashearX=0,this.ashearY=Math.atan2(a.a*a.c+a.b*a.d,a.a*a.d-a.b*a.c)*ak.radDeg;return}var b=h.matrix,c=1/(b.a*b.d-b.b*b.c),i=a.tx-b.tx,j=a.ty-b.ty;this.ax=i*b.d*c-j*b.c*c,this.ay=j*b.a*c-i*b.b*c;var k=c*b.d,l=c*b.a,m=c*b.c,n=c*b.b,d=k*a.a-m*a.b,e=k*a.c-m*a.d,f=l*a.b-n*a.a,g=l*a.d-n*a.c;if(this.ashearX=0,this.ascaleX=Math.sqrt(d*d+f*f),this.ascaleX>1e-4){var o=d*g-e*f;this.ascaleY=o/this.ascaleX,this.ashearY=Math.atan2(d*e+f*g,o)*ak.radDeg,this.arotation=Math.atan2(f,d)*ak.radDeg}else this.ascaleX=0,this.ascaleY=Math.sqrt(e*e+g*g),this.ashearY=0,this.arotation=90-Math.atan2(g,e)*ak.radDeg},b.prototype.worldToLocal=function(b){var a=this.matrix,d=a.a,e=a.c,f=a.b,g=a.d,c=1/(d*g-e*f),h=b.x-a.tx,i=b.y-a.ty;return b.x=h*g*c-i*e*c,b.y=i*d*c-h*f*c,b},b.prototype.localToWorld=function(b){var a=this.matrix,c=b.x,d=b.y;return b.x=c*a.a+d*a.c+a.tx,b.y=c*a.b+d*a.d+a.ty,b},b.prototype.worldToLocalRotation=function(b){var c=ak.sinDeg(b),d=ak.cosDeg(b),a=this.matrix;return Math.atan2(a.a*c-a.b*d,a.d*d-a.c*c)*ak.radDeg},b.prototype.localToWorldRotation=function(b){var c=ak.sinDeg(b),d=ak.cosDeg(b),a=this.matrix;return Math.atan2(d*a.b+c*a.d,d*a.a+c*a.c)*ak.radDeg},b.prototype.rotateWorld=function(d){var a=this.matrix,e=a.a,f=a.c,g=a.b,h=a.d,b=ak.cosDeg(d),c=ak.sinDeg(d);a.a=b*e-c*g,a.c=b*f-c*h,a.b=c*e+b*g,a.d=c*f+b*h,this.appliedValid=!1},b}(),aZ=function(b,c,d){if(this.x=0,this.y=0,this.rotation=0,this.scaleX=1,this.scaleY=1,this.shearX=0,this.shearY=0,this.transformMode=a.TransformMode.Normal,this.skinRequired=!1,this.color=new aj,b<0)throw new Error("index must be >= 0.");if(null==c)throw new Error("name cannot be null.");this.index=b,this.name=c,this.parent=d},A=function(a,b,c){this.name=a,this.order=b,this.skinRequired=c},a$=function(b,a){if(null==a)throw new Error("data cannot be null.");this.time=b,this.data=a},a_=function(a){this.name=a},a0=function(){function b(a,b){if(this.bendDirection=0,this.compress=!1,this.stretch=!1,this.mix=1,this.softness=0,this.active=!1,null==a)throw new Error("data cannot be null.");if(null==b)throw new Error("skeleton cannot be null.");this.data=a,this.mix=a.mix,this.softness=a.softness,this.bendDirection=a.bendDirection,this.compress=a.compress,this.stretch=a.stretch,this.bones=new Array;for(var c=0;c<a.bones.length;c++)this.bones.push(b.findBone(a.bones[c].name));this.target=b.findBone(a.target.name)}return b.prototype.isActive=function(){return this.active},b.prototype.apply=function(){this.update()},b.prototype.update=function(){var a=this.target,b=this.bones;switch(b.length){case 1:this.apply1(b[0],a.worldX,a.worldY,this.compress,this.stretch,this.data.uniform,this.mix);break;case 2:this.apply2(b[0],b[1],a.worldX,a.worldY,this.bendDirection,this.stretch,this.softness,this.mix)}},b.prototype.apply1=function(b,m,n,q,r,z,s){b.appliedValid||b.updateAppliedTransform();var d=b.parent.matrix,e=d.a,j=d.c,f=d.b,k=d.d,c=-b.ashearX-b.arotation,g=0,h=0;switch(b.data.transformMode){case a.TransformMode.OnlyTranslation:g=m-b.worldX,h=n-b.worldY;break;case a.TransformMode.NoRotationOrReflection:var i=Math.abs(e*k-j*f)/(e*e+f*f),t=e/b.skeleton.scaleX,u=f/b.skeleton.scaleY;j=-u*i*b.skeleton.scaleX,k=t*i*b.skeleton.scaleY,c+=Math.atan2(u,t)*ak.radDeg;default:var v=m-d.tx,w=n-d.ty,x=e*k-j*f;g=(v*k-w*j)/x-b.ax,h=(w*e-v*f)/x-b.ay}c+=Math.atan2(h,g)*ak.radDeg,b.ascaleX<0&&(c+=180),c>180?c-=360:c< -180&&(c+=360);var o=b.ascaleX,y=b.ascaleY;if(q||r){switch(b.data.transformMode){case a.TransformMode.NoScale:case a.TransformMode.NoScaleOrReflection:g=m-b.worldX,h=n-b.worldY}var l=b.data.length*o,p=Math.sqrt(g*g+h*h);if(q&&p<l||r&&p>l&&l>1e-4){var i=(p/l-1)*s+1;o*=i,z&&(y*=i)}}b.updateWorldTransformWith(b.ax,b.ay,b.arotation+c*s,o,y,b.ashearX,b.ashearY)},b.prototype.apply2=function(e,a,V,W,t,X,z,A){if(0==A){a.updateWorldTransform();return}e.appliedValid||e.updateAppliedTransform(),a.appliedValid||a.updateAppliedTransform();var L=e.ax,M=e.ay,i=e.ascaleX,Y=i,u=e.ascaleY,B=a.ascaleX,p=e.matrix,N=0,O=0,v=0;i<0?(i=-i,N=180,v=-1):(N=0,v=1),u<0&&(u=-u,v=-v),B<0?(B=-B,O=180):O=0;var s=a.ax,w=0,P=0,Q=0,c=p.a,f=p.c,b=p.b,j=p.d,Z=1e-4>=Math.abs(i-u);Z?(P=c*s+f*(w=a.ay)+p.tx,Q=b*s+j*w+p.ty):(w=0,P=c*s+p.tx,Q=b*s+p.ty);var q=e.parent.matrix;c=q.a,f=q.c,b=q.b;var k,h,G=1/(c*(j=q.d)-f*b),l=P-q.tx,g=Q-q.ty,$=(l*j-g*f)*G-L,_=(g*c-l*b)*G-M,d=Math.sqrt($*$+_*_),m=a.data.length*B;if(d<1e-4){this.apply1(e,V,W,!1,X,!1,A),a.updateWorldTransformWith(s,w,0,a.ascaleX,a.ascaleY,a.ashearX,a.ashearY);return}var n=((l=V-q.tx)*j-(g=W-q.ty)*f)*G-L,o=(g*c-l*b)*G-M,r=n*n+o*o;if(0!=z){z*=i*(B+1)/2;var aa=Math.sqrt(r),R=aa-d-m*i+z;if(R>0){var C=Math.min(1,R/(2*z))-1;C=(R-z*(1-C*C))/aa,n-=C*n,o-=C*o,r=n*n+o*o}}outer:if(Z){var x=(r-d*d-(m*=i)*m)/(2*d*m);x< -1?x=-1:x>1&&(x=1,X&&(Y*=(Math.sqrt(r)/(d+m)-1)*A+1)),h=Math.acos(x)*t,c=d+m*x,f=m*Math.sin(h),k=Math.atan2(o*c-n*f,n*c+o*f)}else{c=i*m,f=u*m;var H=c*c,D=f*f,S=Math.atan2(o,n);b=D*d*d+H*r-H*D;var I=-2*D*d,ab=D-H;if((j=I*I-4*ab*b)>=0){var E=Math.sqrt(j);I<0&&(E=-E);var ac=(E=-(I+E)/2)/ab,ad=b/E,y=Math.abs(ac)<Math.abs(ad)?ac:ad;if(y*y<=r){g=Math.sqrt(r-y*y)*t,k=S-Math.atan2(g,y),h=Math.atan2(g/u,(y-d)/i);break outer}}var ae=ak.PI,J=d-c,T=J*J,af=0,ag=0,K=d+c,U=K*K,ah=0;(b=-c*d/(H-D))>= -1&&b<=1&&(b=Math.acos(b),l=c*Math.cos(b)+d,g=f*Math.sin(b),(j=l*l+g*g)<T&&(ae=b,T=j,J=l,af=g),j>U&&(ag=b,U=j,K=l,ah=g)),r<=(T+U)/2?(k=S-Math.atan2(af*t,J),h=ae*t):(k=S-Math.atan2(ah*t,K),h=ag*t)}var ai=Math.atan2(w,s)*v,F=e.arotation;(k=(k-ai)*ak.radDeg+N-F)>180?k-=360:k< -180&&(k+=360),e.updateWorldTransformWith(L,M,F+k*A,Y,e.ascaleY,0,0),F=a.arotation,(h=((h+ai)*ak.radDeg-a.ashearX)*v+O-F)>180?h-=360:h< -180&&(h+=360),a.updateWorldTransformWith(s,w,F+h*A,a.ascaleX,a.ascaleY,a.ashearX,a.ashearY)},b}(),a1=function(b){function a(c){var a=b.call(this,c,0,!1)||this;return a.bones=new Array,a.bendDirection=1,a.compress=!1,a.stretch=!1,a.uniform=!1,a.mix=1,a.softness=0,a}return db(a,b),a}(A),a2=function(b){function a(c){var a=b.call(this,c,0,!1)||this;return a.bones=new Array,a}return db(a,b),a}(A);(t=F||(F={}))[t.Length=0]="Length",t[t.Fixed=1]="Fixed",t[t.Percent=2]="Percent";var a3=function(){function b(a,b){if(this.position=0,this.spacing=0,this.rotateMix=0,this.translateMix=0,this.spaces=new Array,this.positions=new Array,this.world=new Array,this.curves=new Array,this.lengths=new Array,this.segments=new Array,this.active=!1,null==a)throw new Error("data cannot be null.");if(null==b)throw new Error("skeleton cannot be null.");this.data=a,this.bones=new Array;for(var c=0,d=a.bones.length;c<d;c++)this.bones.push(b.findBone(a.bones[c].name));this.target=b.findSlot(a.target.name),this.position=a.position,this.spacing=a.spacing,this.rotateMix=a.rotateMix,this.translateMix=a.translateMix}return b.prototype.isActive=function(){return this.active},b.prototype.apply=function(){this.update()},b.prototype.update=function(){var H=this.target.getAttachment();if(H instanceof az){var k=this.rotateMix,A=this.translateMix,I=k>0;if(A>0||I){var r=this.data,J=r.spacingMode,K=J==F.Length,B=r.rotateMode,C=B==a.RotateMode.Tangent,l=B==a.RotateMode.ChainScale,s=this.bones.length,t=C?s:s+1,L=this.bones,u=am.setArraySize(this.spaces,t),v=null,D=this.spacing;if(l||K){l&&(v=am.setArraySize(this.lengths,s));for(var c=0,S=t-1;c<S;){var i=L[c],m=i.data.length;if(m<b.epsilon)l&&(v[c]=0),u[++c]=0;else{var n=m*i.matrix.a,o=m*i.matrix.b,M=Math.sqrt(n*n+o*o);l&&(v[c]=M),u[++c]=(K?m+D:D)*M/m}}}else for(var c=1;c<t;c++)u[c]=D;var j=this.computeWorldPositions(H,t,C,r.positionMode==a.PositionMode.Percent,J==F.Percent),w=j[0],x=j[1],E=r.offsetRotation,G=!1;if(0==E)G=B==a.RotateMode.Chain;else{G=!1;var f=this.target.bone.matrix;E*=f.a*f.d-f.b*f.c>0?ak.degRad:-ak.degRad}for(var c=0,f=3;c<s;c++,f+=3){var i=L[c],d=i.matrix;d.tx+=(w-d.tx)*A,d.ty+=(x-d.ty)*A;var n=j[f],o=j[f+1],y=n-w,z=o-x;if(l){var N=v[c];if(0!=N){var O=(Math.sqrt(y*y+z*z)/N-1)*k+1;d.a*=O,d.b*=O}}if(w=n,x=o,I){var p=d.a,P=d.c,q=d.b,Q=d.d,e=0,g=0,h=0;if(e=C?j[f-1]:0==u[c+1]?j[f+2]:Math.atan2(z,y),e-=Math.atan2(q,p),G){g=Math.cos(e),h=Math.sin(e);var R=i.data.length;w+=(R*(g*p-h*q)-y)*k,x+=(R*(h*p+g*q)-z)*k}else e+=E;e>ak.PI?e-=ak.PI2:e< -ak.PI&&(e+=ak.PI2),e*=k,g=Math.cos(e),h=Math.sin(e),d.a=g*p-h*q,d.c=g*P-h*Q,d.b=h*p+g*q,d.d=h*P+g*Q}i.appliedValid=!1}}}},b.prototype.computeWorldPositions=function(i,J,U,V,W){var v=this.target,N=this.position,O=this.spaces,w=am.setArraySize(this.positions,3*J+2),a=null,K=i.closed,h=i.worldVerticesLength,L=h/6,x=b.NONE;if(!i.constantSpeed){var P=i.lengths,C=P[L-=K?1:2];if(V&&(N*=C),W)for(var f=0;f<J;f++)O[f]*=C;a=am.setArraySize(this.world,8);for(var f=0,p=0,g=0;f<J;f++,p+=3){var M=O[f],c=N+=M;if(K)(c%=C)<0&&(c+=C),g=0;else if(c<0){x!=b.BEFORE&&(x=b.BEFORE,i.computeWorldVertices(v,2,4,a,0,2)),this.addBeforePosition(c,a,0,w,p);continue}else if(c>C){x!=b.AFTER&&(x=b.AFTER,i.computeWorldVertices(v,h-6,4,a,0,2)),this.addAfterPosition(c-C,a,0,w,p);continue}for(;;g++){var Q=P[g];if(!(c>Q)){if(0==g)c/=Q;else{var y=P[g-1];c=(c-y)/(Q-y)}break}}g!=x&&(x=g,K&&g==L?(i.computeWorldVertices(v,h-4,4,a,0,2),i.computeWorldVertices(v,0,4,a,4,2)):i.computeWorldVertices(v,6*g+2,8,a,0,2)),this.addCurvePosition(c,a[0],a[1],a[2],a[3],a[4],a[5],a[6],a[7],w,p,U||f>0&&0==M)}return w}K?(h+=2,a=am.setArraySize(this.world,h),i.computeWorldVertices(v,2,h-4,a,0,2),i.computeWorldVertices(v,0,2,a,h-4,2),a[h-2]=a[0],a[h-1]=a[1]):(L--,h-=4,a=am.setArraySize(this.world,h),i.computeWorldVertices(v,2,h,a,0,2));for(var R=am.setArraySize(this.curves,L),k=0,q=a[0],r=a[1],s=0,t=0,z=0,A=0,D=0,E=0,F=0,G=0,l=0,m=0,n=0,o=0,d=0,e=0,f=0,B=2;f<L;f++,B+=6)s=a[B],t=a[B+1],z=a[B+2],A=a[B+3],D=a[B+4],E=a[B+5],F=(q-2*s+z)*.1875,G=(r-2*t+A)*.1875,l=((s-z)*3-q+D)*.09375,m=((t-A)*3-r+E)*.09375,n=2*F+l,o=2*G+m,d=(s-q)*.75+F+.16666667*l,e=(t-r)*.75+G+.16666667*m,k+=Math.sqrt(d*d+e*e),d+=n,e+=o,n+=l,o+=m,k+=Math.sqrt(d*d+e*e),d+=n,e+=o,k+=Math.sqrt(d*d+e*e),d+=n+l,e+=o+m,k+=Math.sqrt(d*d+e*e),R[f]=k,q=D,r=E;if(V&&(N*=k),W)for(var f=0;f<J;f++)O[f]*=k;for(var H=this.segments,u=0,f=0,p=0,g=0,I=0;f<J;f++,p+=3){var M=O[f],c=N+=M;if(K)(c%=k)<0&&(c+=k),g=0;else if(c<0){this.addBeforePosition(c,a,0,w,p);continue}else if(c>k){this.addAfterPosition(c-k,a,h-4,w,p);continue}for(;;g++){var S=R[g];if(!(c>S)){if(0==g)c/=S;else{var y=R[g-1];c=(c-y)/(S-y)}break}}if(g!=x){x=g;var j=6*g;for(q=a[j],r=a[j+1],s=a[j+2],t=a[j+3],z=a[j+4],A=a[j+5],D=a[j+6],E=a[j+7],F=(q-2*s+z)*.03,G=(r-2*t+A)*.03,l=((s-z)*3-q+D)*.006,m=((t-A)*3-r+E)*.006,n=2*F+l,o=2*G+m,d=(s-q)*.3+F+.16666667*l,e=(t-r)*.3+G+.16666667*m,u=Math.sqrt(d*d+e*e),H[0]=u,j=1;j<8;j++)d+=n,e+=o,n+=l,o+=m,u+=Math.sqrt(d*d+e*e),H[j]=u;d+=n,e+=o,u+=Math.sqrt(d*d+e*e),H[8]=u,d+=n+l,e+=o+m,u+=Math.sqrt(d*d+e*e),H[9]=u,I=0}for(c*=u;;I++){var T=H[I];if(!(c>T)){if(0==I)c/=T;else{var y=H[I-1];c=I+(c-y)/(T-y)}break}}this.addCurvePosition(.1*c,q,r,s,t,z,A,D,E,w,p,U||f>0&&0==M)}return w},b.prototype.addBeforePosition=function(f,a,b,c,d){var g=a[b],h=a[b+1],i=a[b+2]-g,j=a[b+3]-h,e=Math.atan2(j,i);c[d]=g+f*Math.cos(e),c[d+1]=h+f*Math.sin(e),c[d+2]=e},b.prototype.addAfterPosition=function(f,a,b,c,d){var g=a[b+2],h=a[b+3],i=g-a[b],j=h-a[b+1],e=Math.atan2(j,i);c[d]=g+f*Math.cos(e),c[d+1]=h+f*Math.sin(e),c[d+2]=e},b.prototype.addCurvePosition=function(a,h,i,j,k,l,m,u,v,c,d,w){(0==a||isNaN(a))&&(a=1e-4);var e=a*a,n=e*a,b=1-a,f=b*b,o=f*b,g=b*a,p=3*g,q=b*p,r=p*a,s=h*o+j*q+l*r+u*n,t=i*o+k*q+m*r+v*n;c[d]=s,c[d+1]=t,w&&(c[d+2]=Math.atan2(t-(i*f+k*g*2+m*e),s-(h*f+j*g*2+l*e)))},b.NONE=-1,b.BEFORE=-2,b.AFTER=-3,b.epsilon=1e-5,b}(),a4=function(){function a(a,b){if(this.deform=new Array,null==a)throw new Error("data cannot be null.");if(null==b)throw new Error("bone cannot be null.");this.data=a,this.bone=b,this.color=new aj,this.darkColor=null==a.darkColor?null:new aj,this.setToSetupPose(),this.blendMode=this.data.blendMode}return a.prototype.getAttachment=function(){return this.attachment},a.prototype.setAttachment=function(a){this.attachment!=a&&(this.attachment=a,this.attachmentTime=this.bone.skeleton.time,this.deform.length=0)},a.prototype.setAttachmentTime=function(a){this.attachmentTime=this.bone.skeleton.time-a},a.prototype.getAttachmentTime=function(){return this.bone.skeleton.time-this.attachmentTime},a.prototype.setToSetupPose=function(){this.color.setFromColor(this.data.color),null!=this.darkColor&&this.darkColor.setFromColor(this.data.darkColor),null==this.data.attachmentName?this.attachment=null:(this.attachment=null,this.setAttachment(this.bone.skeleton.getAttachment(this.data.index,this.data.attachmentName)))},a}(),a5=function(){function a(a,b){if(this.rotateMix=0,this.translateMix=0,this.scaleMix=0,this.shearMix=0,this.temp=new ap,this.active=!1,null==a)throw new Error("data cannot be null.");if(null==b)throw new Error("skeleton cannot be null.");this.data=a,this.rotateMix=a.rotateMix,this.translateMix=a.translateMix,this.scaleMix=a.scaleMix,this.shearMix=a.shearMix,this.bones=new Array;for(var c=0;c<a.bones.length;c++)this.bones.push(b.findBone(a.bones[c].name));this.target=b.findBone(a.target.name)}return a.prototype.isActive=function(){return this.active},a.prototype.apply=function(){this.update()},a.prototype.update=function(){this.data.local?this.data.relative?this.applyRelativeLocal():this.applyAbsoluteLocal():this.data.relative?this.applyRelativeWorld():this.applyAbsoluteWorld()},a.prototype.applyAbsoluteWorld=function(){for(var u=this.rotateMix,n=this.translateMix,o=this.scaleMix,v=this.shearMix,w=this.target,i=w.matrix,f=i.a,j=i.c,g=i.b,k=i.d,x=f*k-j*g>0?ak.degRad:-ak.degRad,B=this.data.offsetRotation*x,C=this.data.offsetShearY*x,y=this.bones,p=0,D=y.length;p<D;p++){var z=y[p],h=!1,a=z.matrix;if(0!=u){var q=a.a,d=a.c,r=a.b,e=a.d,c=Math.atan2(g,f)-Math.atan2(r,q)+B;c>ak.PI?c-=ak.PI2:c< -ak.PI&&(c+=ak.PI2);var l=Math.cos(c*=u),m=Math.sin(c);a.a=l*q-m*r,a.c=l*d-m*e,a.b=m*q+l*r,a.d=m*d+l*e,h=!0}if(0!=n){var s=this.temp;w.localToWorld(s.set(this.data.offsetX,this.data.offsetY)),a.tx+=(s.x-a.tx)*n,a.ty+=(s.y-a.ty)*n,h=!0}if(o>0){var b=Math.sqrt(a.a*a.a+a.b*a.b),t=Math.sqrt(f*f+g*g);b>1e-5&&(b=(b+(t-b+this.data.offsetScaleX)*o)/b),a.a*=b,a.b*=b,b=Math.sqrt(a.c*a.c+a.d*a.d),t=Math.sqrt(j*j+k*k),b>1e-5&&(b=(b+(t-b+this.data.offsetScaleY)*o)/b),a.c*=b,a.d*=b,h=!0}if(v>0){var d=a.c,e=a.d,A=Math.atan2(e,d),c=Math.atan2(k,j)-Math.atan2(g,f)-(A-Math.atan2(a.b,a.a));c>ak.PI?c-=ak.PI2:c< -ak.PI&&(c+=ak.PI2),c=A+(c+C)*v;var b=Math.sqrt(d*d+e*e);a.c=Math.cos(c)*b,a.d=Math.sin(c)*b,h=!0}h&&(z.appliedValid=!1)}},a.prototype.applyRelativeWorld=function(){for(var r=this.rotateMix,n=this.translateMix,o=this.scaleMix,s=this.shearMix,t=this.target,i=t.matrix,f=i.a,j=i.c,g=i.b,k=i.d,u=f*k-j*g>0?ak.degRad:-ak.degRad,z=this.data.offsetRotation*u,A=this.data.offsetShearY*u,v=this.bones,p=0,B=v.length;p<B;p++){var w=v[p],h=!1,a=w.matrix;if(0!=r){var x=a.a,d=a.c,y=a.b,e=a.d,b=Math.atan2(g,f)+z;b>ak.PI?b-=ak.PI2:b< -ak.PI&&(b+=ak.PI2);var l=Math.cos(b*=r),m=Math.sin(b);a.a=l*x-m*y,a.c=l*d-m*e,a.b=m*x+l*y,a.d=m*d+l*e,h=!0}if(0!=n){var q=this.temp;t.localToWorld(q.set(this.data.offsetX,this.data.offsetY)),a.tx+=q.x*n,a.ty+=q.y*n,h=!0}if(o>0){var c=(Math.sqrt(f*f+g*g)-1+this.data.offsetScaleX)*o+1;a.a*=c,a.b*=c,c=(Math.sqrt(j*j+k*k)-1+this.data.offsetScaleY)*o+1,a.c*=c,a.d*=c,h=!0}if(s>0){var b=Math.atan2(k,j)-Math.atan2(g,f);b>ak.PI?b-=ak.PI2:b< -ak.PI&&(b+=ak.PI2);var d=a.c,e=a.d;b=Math.atan2(e,d)+(b-ak.PI/2+A)*s;var c=Math.sqrt(d*d+e*e);a.c=Math.cos(b)*c,a.d=Math.sin(b)*c,h=!0}h&&(w.appliedValid=!1)}},a.prototype.applyAbsoluteLocal=function(){var l=this.rotateMix,f=this.translateMix,g=this.scaleMix,m=this.shearMix,b=this.target;b.appliedValid||b.updateAppliedTransform();for(var n=this.bones,h=0,p=n.length;h<p;h++){var a=n[h];a.appliedValid||a.updateAppliedTransform();var i=a.arotation;if(0!=l){var c=b.arotation-i+this.data.offsetRotation;c-=(16384-(16384.499999999996-c/360|0))*360,i+=c*l}var j=a.ax,k=a.ay;0!=f&&(j+=(b.ax-j+this.data.offsetX)*f,k+=(b.ay-k+this.data.offsetY)*f);var d=a.ascaleX,e=a.ascaleY;g>0&&(d>1e-5&&(d=(d+(b.ascaleX-d+this.data.offsetScaleX)*g)/d),e>1e-5&&(e=(e+(b.ascaleY-e+this.data.offsetScaleY)*g)/e));var o=a.ashearY;if(m>0){var c=b.ashearY-o+this.data.offsetShearY;c-=(16384-(16384.499999999996-c/360|0))*360,a.shearY+=c*m}a.updateWorldTransformWith(j,k,i,d,e,a.ashearX,o)}},a.prototype.applyRelativeLocal=function(){var h=this.rotateMix,c=this.translateMix,d=this.scaleMix,i=this.shearMix,b=this.target;b.appliedValid||b.updateAppliedTransform();for(var j=this.bones,e=0,o=j.length;e<o;e++){var a=j[e];a.appliedValid||a.updateAppliedTransform();var k=a.arotation;0!=h&&(k+=(b.arotation+this.data.offsetRotation)*h);var l=a.ax,m=a.ay;0!=c&&(l+=(b.ax+this.data.offsetX)*c,m+=(b.ay+this.data.offsetY)*c);var f=a.ascaleX,g=a.ascaleY;d>0&&(f>1e-5&&(f*=(b.ascaleX-1+this.data.offsetScaleX)*d+1),g>1e-5&&(g*=(b.ascaleY-1+this.data.offsetScaleY)*d+1));var n=a.ashearY;i>0&&(n+=(b.ashearY+this.data.offsetShearY)*i),a.updateWorldTransformWith(l,m,k,f,g,a.ashearX,n)}},a}(),a6=function(){function a(b){if(this._updateCache=new Array,this.updateCacheReset=new Array,this.time=0,this.scaleX=1,this.scaleY=1,this.x=0,this.y=0,null==b)throw new Error("data cannot be null.");this.data=b,this.bones=new Array;for(var a=0;a<b.bones.length;a++){var d=b.bones[a],c=void 0;if(null==d.parent)c=new aY(d,this,null);else{var e=this.bones[d.parent.index];c=new aY(d,this,e),e.children.push(c)}this.bones.push(c)}this.slots=new Array,this.drawOrder=new Array;for(var a=0;a<b.slots.length;a++){var f=b.slots[a],c=this.bones[f.boneData.index],g=new a4(f,c);this.slots.push(g),this.drawOrder.push(g)}this.ikConstraints=new Array;for(var a=0;a<b.ikConstraints.length;a++){var h=b.ikConstraints[a];this.ikConstraints.push(new a0(h,this))}this.transformConstraints=new Array;for(var a=0;a<b.transformConstraints.length;a++){var i=b.transformConstraints[a];this.transformConstraints.push(new a5(i,this))}this.pathConstraints=new Array;for(var a=0;a<b.pathConstraints.length;a++){var j=b.pathConstraints[a];this.pathConstraints.push(new a3(j,this))}this.color=new aj(1,1,1,1),this.updateCache()}return a.prototype.updateCache=function(){this._updateCache.length=0,this.updateCacheReset.length=0;for(var f=this.bones,a=0,e=f.length;a<e;a++){var c=f[a];c.sorted=c.data.skinRequired,c.active=!c.sorted}if(null!=this.skin)for(var m=this.skin.bones,a=0,e=this.skin.bones.length;a<e;a++){var c=this.bones[m[a].index];do c.sorted=!1,c.active=!0,c=c.parent;while(null!=c)}var g=this.ikConstraints,h=this.transformConstraints,i=this.pathConstraints,j=g.length,k=h.length,l=i.length,n=j+k+l;outer:for(var a=0;a<n;a++){for(var b=0;b<j;b++){var d=g[b];if(d.data.order==a){this.sortIkConstraint(d);continue outer}}for(var b=0;b<k;b++){var d=h[b];if(d.data.order==a){this.sortTransformConstraint(d);continue outer}}for(var b=0;b<l;b++){var d=i[b];if(d.data.order==a){this.sortPathConstraint(d);continue outer}}}for(var a=0,e=f.length;a<e;a++)this.sortBone(f[a])},a.prototype.sortIkConstraint=function(a){if(a.active=a.target.isActive()&&(!a.data.skinRequired||null!=this.skin&&am.contains(this.skin.constraints,a.data,!0)),a.active){var e=a.target;this.sortBone(e);var b=a.bones,c=b[0];if(this.sortBone(c),b.length>1){var d=b[b.length-1];this._updateCache.indexOf(d)> -1||this.updateCacheReset.push(d)}this._updateCache.push(a),this.sortReset(c.children),b[b.length-1].sorted=!0}},a.prototype.sortPathConstraint=function(b){if(b.active=b.target.bone.isActive()&&(!b.data.skinRequired||null!=this.skin&&am.contains(this.skin.constraints,b.data,!0)),b.active){var e=b.target,f=e.data.index,c=e.bone;null!=this.skin&&this.sortPathConstraintAttachment(this.skin,f,c),null!=this.data.defaultSkin&&this.data.defaultSkin!=this.skin&&this.sortPathConstraintAttachment(this.data.defaultSkin,f,c);for(var a=0,i=this.data.skins.length;a<i;a++)this.sortPathConstraintAttachment(this.data.skins[a],f,c);var h=e.getAttachment();h instanceof az&&this.sortPathConstraintAttachmentWith(h,c);for(var d=b.bones,g=d.length,a=0;a<g;a++)this.sortBone(d[a]);this._updateCache.push(b);for(var a=0;a<g;a++)this.sortReset(d[a].children);for(var a=0;a<g;a++)d[a].sorted=!0}},a.prototype.sortTransformConstraint=function(a){if(a.active=a.target.isActive()&&(!a.data.skinRequired||null!=this.skin&&am.contains(this.skin.constraints,a.data,!0)),a.active){this.sortBone(a.target);var d=a.bones,e=d.length;if(a.data.local)for(var b=0;b<e;b++){var f=d[b];this.sortBone(f.parent),this._updateCache.indexOf(f)> -1||this.updateCacheReset.push(f)}else for(var b=0;b<e;b++)this.sortBone(d[b]);this._updateCache.push(a);for(var c=0;c<e;c++)this.sortReset(d[c].children);for(var c=0;c<e;c++)d[c].sorted=!0}},a.prototype.sortPathConstraintAttachment=function(b,c,d){var a=b.attachments[c];if(a)for(var e in a)this.sortPathConstraintAttachmentWith(a[e],d)},a.prototype.sortPathConstraintAttachmentWith=function(c,d){if(c instanceof az){var b=c.bones;if(null==b)this.sortBone(d);else for(var e=this.bones,a=0;a<b.length;)for(var f=b[a++],g=a+f;a<g;a++){var h=b[a];this.sortBone(e[h])}}},a.prototype.sortBone=function(a){if(!a.sorted){var b=a.parent;null!=b&&this.sortBone(b),a.sorted=!0,this._updateCache.push(a)}},a.prototype.sortReset=function(c){for(var b=0,d=c.length;b<d;b++){var a=c[b];a.active&&(a.sorted&&this.sortReset(a.children),a.sorted=!1)}},a.prototype.updateWorldTransform=function(){for(var d=this.updateCacheReset,b=0,c=d.length;b<c;b++){var a=d[b];a.ax=a.x,a.ay=a.y,a.arotation=a.rotation,a.ascaleX=a.scaleX,a.ascaleY=a.scaleY,a.ashearX=a.shearX,a.ashearY=a.shearY,a.appliedValid=!0}for(var e=this._updateCache,b=0,c=e.length;b<c;b++)e[b].update()},a.prototype.setToSetupPose=function(){this.setBonesToSetupPose(),this.setSlotsToSetupPose()},a.prototype.setBonesToSetupPose=function(){for(var e=this.bones,b=0,d=e.length;b<d;b++)e[b].setToSetupPose();for(var f=this.ikConstraints,b=0,d=f.length;b<d;b++){var a=f[b];a.mix=a.data.mix,a.softness=a.data.softness,a.bendDirection=a.data.bendDirection,a.compress=a.data.compress,a.stretch=a.data.stretch}for(var g=this.transformConstraints,b=0,d=g.length;b<d;b++){var a=g[b],c=a.data;a.rotateMix=c.rotateMix,a.translateMix=c.translateMix,a.scaleMix=c.scaleMix,a.shearMix=c.shearMix}for(var h=this.pathConstraints,b=0,d=h.length;b<d;b++){var a=h[b],c=a.data;a.position=c.position,a.spacing=c.spacing,a.rotateMix=c.rotateMix,a.translateMix=c.translateMix}},a.prototype.setSlotsToSetupPose=function(){var a=this.slots;am.arrayCopy(a,0,this.drawOrder,0,a.length);for(var b=0,c=a.length;b<c;b++)a[b].setToSetupPose()},a.prototype.getRootBone=function(){return 0==this.bones.length?null:this.bones[0]},a.prototype.findBone=function(b){if(null==b)throw new Error("boneName cannot be null.");for(var c=this.bones,a=0,e=c.length;a<e;a++){var d=c[a];if(d.data.name==b)return d}return null},a.prototype.findBoneIndex=function(b){if(null==b)throw new Error("boneName cannot be null.");for(var c=this.bones,a=0,d=c.length;a<d;a++)if(c[a].data.name==b)return a;return -1},a.prototype.findSlot=function(b){if(null==b)throw new Error("slotName cannot be null.");for(var c=this.slots,a=0,e=c.length;a<e;a++){var d=c[a];if(d.data.name==b)return d}return null},a.prototype.findSlotIndex=function(b){if(null==b)throw new Error("slotName cannot be null.");for(var c=this.slots,a=0,d=c.length;a<d;a++)if(c[a].data.name==b)return a;return -1},a.prototype.setSkinByName=function(a){var b=this.data.findSkin(a);if(null==b)throw new Error("Skin not found: "+a);this.setSkin(b)},a.prototype.setSkin=function(a){if(a!=this.skin){if(null!=a){if(null!=this.skin)a.attachAll(this,this.skin);else for(var c=this.slots,b=0,g=c.length;b<g;b++){var d=c[b],e=d.data.attachmentName;if(null!=e){var f=a.getAttachment(b,e);null!=f&&d.setAttachment(f)}}}this.skin=a,this.updateCache()}},a.prototype.getAttachmentByName=function(a,b){return this.getAttachment(this.data.findSlotIndex(a),b)},a.prototype.getAttachment=function(b,a){if(null==a)throw new Error("attachmentName cannot be null.");if(null!=this.skin){var c=this.skin.getAttachment(b,a);if(null!=c)return c}return null!=this.data.defaultSkin?this.data.defaultSkin.getAttachment(b,a):null},a.prototype.setAttachment=function(a,c){if(null==a)throw new Error("slotName cannot be null.");for(var d=this.slots,b=0,g=d.length;b<g;b++){var e=d[b];if(e.data.name==a){var f=null;if(null!=c&&null==(f=this.getAttachment(b,c)))throw new Error("Attachment not found: "+c+", for slot: "+a);e.setAttachment(f);return}}throw new Error("Slot not found: "+a)},a.prototype.findIkConstraint=function(b){if(null==b)throw new Error("constraintName cannot be null.");for(var c=this.ikConstraints,a=0,e=c.length;a<e;a++){var d=c[a];if(d.data.name==b)return d}return null},a.prototype.findTransformConstraint=function(b){if(null==b)throw new Error("constraintName cannot be null.");for(var c=this.transformConstraints,a=0,e=c.length;a<e;a++){var d=c[a];if(d.data.name==b)return d}return null},a.prototype.findPathConstraint=function(b){if(null==b)throw new Error("constraintName cannot be null.");for(var c=this.pathConstraints,a=0,e=c.length;a<e;a++){var d=c[a];if(d.data.name==b)return d}return null},a.prototype.getBounds=function(l,m,c){if(void 0===c&&(c=new Array(2)),null==l)throw new Error("offset cannot be null.");if(null==m)throw new Error("size cannot be null.");for(var n=this.drawOrder,d=Number.POSITIVE_INFINITY,e=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY,j=Number.NEGATIVE_INFINITY,k=0,r=n.length;k<r;k++){var f=n[k];if(f.bone.active){var b=0,a=null,g=f.getAttachment();if(g instanceof aB)b=8,a=am.setArraySize(c,b,0),g.computeWorldVertices(f.bone,a,0,2);else if(g instanceof ay){var o=g;b=o.worldVerticesLength,a=am.setArraySize(c,b,0),o.computeWorldVertices(f,0,b,a,0,2)}if(null!=a)for(var h=0,s=a.length;h<s;h+=2){var p=a[h],q=a[h+1];d=Math.min(d,p),e=Math.min(e,q),i=Math.max(i,p),j=Math.max(j,q)}}}l.set(d,e),m.set(i-d,j-e)},a.prototype.update=function(a){this.time+=a},Object.defineProperty(a.prototype,"flipX",{get:function(){return -1==this.scaleX},set:function(b){a.deprecatedWarning1||(a.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: `Skeleton.flipX/flipY` was deprecated, please use scaleX/scaleY")),this.scaleX=b?1:-1},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"flipY",{get:function(){return -1==this.scaleY},set:function(b){a.deprecatedWarning1||(a.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: `Skeleton.flipX/flipY` was deprecated, please use scaleX/scaleY")),this.scaleY=b?1:-1},enumerable:!1,configurable:!0}),a.deprecatedWarning1=!1,a}(),a7=function(){function a(){this.bones=new Array,this.slots=new Array,this.skins=new Array,this.events=new Array,this.animations=new Array,this.ikConstraints=new Array,this.transformConstraints=new Array,this.pathConstraints=new Array,this.fps=0}return a.prototype.findBone=function(b){if(null==b)throw new Error("boneName cannot be null.");for(var c=this.bones,a=0,e=c.length;a<e;a++){var d=c[a];if(d.name==b)return d}return null},a.prototype.findBoneIndex=function(b){if(null==b)throw new Error("boneName cannot be null.");for(var c=this.bones,a=0,d=c.length;a<d;a++)if(c[a].name==b)return a;return -1},a.prototype.findSlot=function(b){if(null==b)throw new Error("slotName cannot be null.");for(var c=this.slots,a=0,e=c.length;a<e;a++){var d=c[a];if(d.name==b)return d}return null},a.prototype.findSlotIndex=function(b){if(null==b)throw new Error("slotName cannot be null.");for(var c=this.slots,a=0,d=c.length;a<d;a++)if(c[a].name==b)return a;return -1},a.prototype.findSkin=function(b){if(null==b)throw new Error("skinName cannot be null.");for(var c=this.skins,a=0,e=c.length;a<e;a++){var d=c[a];if(d.name==b)return d}return null},a.prototype.findEvent=function(b){if(null==b)throw new Error("eventDataName cannot be null.");for(var c=this.events,a=0,e=c.length;a<e;a++){var d=c[a];if(d.name==b)return d}return null},a.prototype.findAnimation=function(b){if(null==b)throw new Error("animationName cannot be null.");for(var c=this.animations,a=0,e=c.length;a<e;a++){var d=c[a];if(d.name==b)return d}return null},a.prototype.findIkConstraint=function(b){if(null==b)throw new Error("constraintName cannot be null.");for(var c=this.ikConstraints,a=0,e=c.length;a<e;a++){var d=c[a];if(d.name==b)return d}return null},a.prototype.findTransformConstraint=function(b){if(null==b)throw new Error("constraintName cannot be null.");for(var c=this.transformConstraints,a=0,e=c.length;a<e;a++){var d=c[a];if(d.name==b)return d}return null},a.prototype.findPathConstraint=function(b){if(null==b)throw new Error("constraintName cannot be null.");for(var c=this.pathConstraints,a=0,e=c.length;a<e;a++){var d=c[a];if(d.name==b)return d}return null},a.prototype.findPathConstraintIndex=function(b){if(null==b)throw new Error("pathConstraintName cannot be null.");for(var c=this.pathConstraints,a=0,d=c.length;a<d;a++)if(c[a].name==b)return a;return -1},a}(),a8=function(a,b,c){if(this.color=new aj(1,1,1,1),a<0)throw new Error("index must be >= 0.");if(null==b)throw new Error("name cannot be null.");if(null==c)throw new Error("boneData cannot be null.");this.index=a,this.name=b,this.boneData=c},a9=function(b){function a(c){var a=b.call(this,c,0,!1)||this;return a.bones=new Array,a.rotateMix=0,a.translateMix=0,a.scaleMix=0,a.shearMix=0,a.offsetRotation=0,a.offsetX=0,a.offsetY=0,a.offsetScaleX=0,a.offsetScaleY=0,a.offsetShearY=0,a.relative=!1,a.local=!1,a}return db(a,b),a}(A),ba=function(a,b,c){this.slotIndex=a,this.name=b,this.attachment=c},bb=function(){function a(a){if(this.attachments=new Array,this.bones=Array(),this.constraints=new Array,null==a)throw new Error("name cannot be null.");this.name=a}return a.prototype.setAttachment=function(a,d,c){if(null==c)throw new Error("attachment cannot be null.");var b=this.attachments;a>=b.length&&(b.length=a+1),b[a]||(b[a]={}),b[a][d]=c},a.prototype.addSkin=function(c){for(var a=0;a<c.bones.length;a++){for(var f=c.bones[a],d=!1,b=0;b<this.bones.length;b++)if(this.bones[b]==f){d=!0;break}d||this.bones.push(f)}for(var a=0;a<c.constraints.length;a++){for(var g=c.constraints[a],d=!1,b=0;b<this.constraints.length;b++)if(this.constraints[b]==g){d=!0;break}d||this.constraints.push(g)}for(var h=c.getAttachments(),a=0;a<h.length;a++){var e=h[a];this.setAttachment(e.slotIndex,e.name,e.attachment)}},a.prototype.copySkin=function(d){for(var b=0;b<d.bones.length;b++){for(var f=d.bones[b],e=!1,c=0;c<this.bones.length;c++)if(this.bones[c]==f){e=!0;break}e||this.bones.push(f)}for(var b=0;b<d.constraints.length;b++){for(var g=d.constraints[b],e=!1,c=0;c<this.constraints.length;c++)if(this.constraints[c]==g){e=!0;break}e||this.constraints.push(g)}for(var h=d.getAttachments(),b=0;b<h.length;b++){var a=h[b];null!=a.attachment&&(a.attachment instanceof ay?(a.attachment=a.attachment.newLinkedMesh(),this.setAttachment(a.slotIndex,a.name,a.attachment)):(a.attachment=a.attachment.copy(),this.setAttachment(a.slotIndex,a.name,a.attachment)))}},a.prototype.getAttachment=function(b,c){var a=this.attachments[b];return a?a[c]:null},a.prototype.removeAttachment=function(b,c){var a=this.attachments[b];a&&(a[c]=null)},a.prototype.getAttachments=function(){for(var c=new Array,a=0;a<this.attachments.length;a++){var b=this.attachments[a];if(b)for(var d in b){var e=b[d];e&&c.push(new ba(a,d,e))}}return c},a.prototype.getAttachmentsForSlot=function(b,e){var a=this.attachments[b];if(a)for(var c in a){var d=a[c];d&&e.push(new ba(b,c,d))}},a.prototype.clear=function(){this.attachments.length=0,this.bones.length=0,this.constraints.length=0},a.prototype.attachAll=function(c,d){for(var a=0,b=0;b<c.slots.length;b++){var e=c.slots[b],f=e.getAttachment();if(f&&a<d.attachments.length){var g=d.attachments[a];for(var h in g)if(f==g[h]){var i=this.getAttachment(a,h);null!=i&&e.setAttachment(i);break}}a++}},a}(),bc=function(){function b(a){this.scale=1,this.linkedMeshes=new Array,this.attachmentLoader=a}return b.prototype.readSkeletonData=function(q){var i=this.scale,e=new a7;e.name="";var c=new aa(q);if(e.hash=c.readString(),e.version=c.readString(),"3.8.75"===e.version){var r="Unsupported skeleton data, 3.8.75 is deprecated, please export with a newer version of Spine.";console.error(r)}e.x=c.readFloat(),e.y=c.readFloat(),e.width=c.readFloat(),e.height=c.readFloat();var l=c.readBoolean();l&&(e.fps=c.readFloat(),e.imagesPath=c.readString(),e.audioPath=c.readString());var g=0;g=c.readInt(!0);for(var f=0;f<g;f++)c.strings.push(c.readString());g=c.readInt(!0);for(var f=0;f<g;f++){var s=c.readString(),t=0==f?null:e.bones[c.readInt(!0)],d=new aZ(f,s,t);d.rotation=c.readFloat(),d.x=c.readFloat()*i,d.y=c.readFloat()*i,d.scaleX=c.readFloat(),d.scaleY=c.readFloat(),d.shearX=c.readFloat(),d.shearY=c.readFloat(),d.length=c.readFloat()*i,d.transformMode=b.TransformModeValues[c.readInt(!0)],d.skinRequired=c.readBoolean(),l&&aj.rgba8888ToColor(d.color,c.readInt32()),e.bones.push(d)}g=c.readInt(!0);for(var f=0;f<g;f++){var u=c.readString(),v=e.bones[c.readInt(!0)],d=new a8(f,u,v);aj.rgba8888ToColor(d.color,c.readInt32());var o=c.readInt32();-1!=o&&aj.rgb888ToColor(d.darkColor=new aj,o),d.attachmentName=c.readStringRef(),d.blendMode=b.BlendModeValues[c.readInt(!0)],e.slots.push(d)}g=c.readInt(!0);for(var f=0,j=void 0;f<g;f++){var d=new a1(c.readString());d.order=c.readInt(!0),d.skinRequired=c.readBoolean(),j=c.readInt(!0);for(var k=0;k<j;k++)d.bones.push(e.bones[c.readInt(!0)]);d.target=e.bones[c.readInt(!0)],d.mix=c.readFloat(),d.softness=c.readFloat()*i,d.bendDirection=c.readByte(),d.compress=c.readBoolean(),d.stretch=c.readBoolean(),d.uniform=c.readBoolean(),e.ikConstraints.push(d)}g=c.readInt(!0);for(var f=0,j=void 0;f<g;f++){var d=new a9(c.readString());d.order=c.readInt(!0),d.skinRequired=c.readBoolean(),j=c.readInt(!0);for(var k=0;k<j;k++)d.bones.push(e.bones[c.readInt(!0)]);d.target=e.bones[c.readInt(!0)],d.local=c.readBoolean(),d.relative=c.readBoolean(),d.offsetRotation=c.readFloat(),d.offsetX=c.readFloat()*i,d.offsetY=c.readFloat()*i,d.offsetScaleX=c.readFloat(),d.offsetScaleY=c.readFloat(),d.offsetShearY=c.readFloat(),d.rotateMix=c.readFloat(),d.translateMix=c.readFloat(),d.scaleMix=c.readFloat(),d.shearMix=c.readFloat(),e.transformConstraints.push(d)}g=c.readInt(!0);for(var f=0,j=void 0;f<g;f++){var d=new a2(c.readString());d.order=c.readInt(!0),d.skinRequired=c.readBoolean(),j=c.readInt(!0);for(var k=0;k<j;k++)d.bones.push(e.bones[c.readInt(!0)]);d.target=e.slots[c.readInt(!0)],d.positionMode=b.PositionModeValues[c.readInt(!0)],d.spacingMode=b.SpacingModeValues[c.readInt(!0)],d.rotateMode=b.RotateModeValues[c.readInt(!0)],d.offsetRotation=c.readFloat(),d.position=c.readFloat(),d.positionMode==a.PositionMode.Fixed&&(d.position*=i),d.spacing=c.readFloat(),(d.spacingMode==F.Length||d.spacingMode==F.Fixed)&&(d.spacing*=i),d.rotateMix=c.readFloat(),d.translateMix=c.readFloat(),e.pathConstraints.push(d)}var m=this.readSkin(c,e,!0,l);null!=m&&(e.defaultSkin=m,e.skins.push(m));var f=e.skins.length;for(am.setArraySize(e.skins,g=f+c.readInt(!0));f<g;f++)e.skins[f]=this.readSkin(c,e,!1,l);g=this.linkedMeshes.length;for(var f=0;f<g;f++){var h=this.linkedMeshes[f],p=null==h.skin?e.defaultSkin:e.findSkin(h.skin);if(null==p)throw new Error("Skin not found: "+h.skin);var n=p.getAttachment(h.slotIndex,h.parent);if(null==n)throw new Error("Parent mesh not found: "+h.parent);h.mesh.deformAttachment=h.inheritDeform?n:h.mesh,h.mesh.setParentMesh(n)}this.linkedMeshes.length=0,g=c.readInt(!0);for(var f=0;f<g;f++){var d=new a_(c.readStringRef());d.intValue=c.readInt(!1),d.floatValue=c.readFloat(),d.stringValue=c.readString(),d.audioPath=c.readString(),null!=d.audioPath&&(d.volume=c.readFloat(),d.balance=c.readFloat()),e.events.push(d)}g=c.readInt(!0);for(var f=0;f<g;f++)e.animations.push(this.readAnimation(c,c.readString(),e));return e},b.prototype.readSkin=function(a,e,k,l){var c=null,f=0;if(k){if(0==(f=a.readInt(!0)))return null;c=new bb("default")}else{(c=new bb(a.readStringRef())).bones.length=a.readInt(!0);for(var b=0,d=c.bones.length;b<d;b++)c.bones[b]=e.bones[a.readInt(!0)];for(var b=0,d=a.readInt(!0);b<d;b++)c.constraints.push(e.ikConstraints[a.readInt(!0)]);for(var b=0,d=a.readInt(!0);b<d;b++)c.constraints.push(e.transformConstraints[a.readInt(!0)]);for(var b=0,d=a.readInt(!0);b<d;b++)c.constraints.push(e.pathConstraints[a.readInt(!0)]);f=a.readInt(!0)}for(var b=0;b<f;b++)for(var g=a.readInt(!0),h=0,m=a.readInt(!0);h<m;h++){var i=a.readStringRef(),j=this.readAttachment(a,e,c,g,i,l);null!=j&&c.setAttachment(g,i,j)}return c},b.prototype.readAttachment=function(c,y,m,z,A,h){var j=this.scale,i=c.readStringRef();null==i&&(i=A);var B=c.readByte(),C=b.AttachmentTypeValues[B];switch(C){case a.AttachmentType.Region:var d=c.readStringRef(),s=c.readFloat(),t=c.readFloat(),u=c.readFloat(),D=c.readFloat(),E=c.readFloat(),n=c.readFloat(),o=c.readFloat(),f=c.readInt32();null==d&&(d=i);var k=this.attachmentLoader.newRegionAttachment(m,i,d);if(null==k)break;return k.path=d,k.x=t*j,k.y=u*j,k.scaleX=D,k.scaleY=E,k.rotation=s,k.width=n*j,k.height=o*j,aj.rgba8888ToColor(k.color,f),k;case a.AttachmentType.BoundingBox:var g=c.readInt(!0),l=this.readVertices(c,g),f=h?c.readInt32():0,q=this.attachmentLoader.newBoundingBoxAttachment(m,i);if(null==q)break;return q.worldVerticesLength=g<<1,q.vertices=l.vertices,q.bones=l.bones,h&&aj.rgba8888ToColor(q.color,f),q;case a.AttachmentType.Mesh:var d=c.readStringRef(),f=c.readInt32(),g=c.readInt(!0),F=this.readFloatArray(c,g<<1,1),G=this.readShortArray(c),l=this.readVertices(c,g),H=c.readInt(!0),x=null,n=0,o=0;h&&(x=this.readShortArray(c),n=c.readFloat(),o=c.readFloat()),null==d&&(d=i);var e=this.attachmentLoader.newMeshAttachment(m,i,d);if(null==e)break;return e.path=d,aj.rgba8888ToColor(e.color,f),e.bones=l.bones,e.vertices=l.vertices,e.worldVerticesLength=g<<1,e.triangles=G,e.regionUVs=new Float32Array(F),e.hullLength=H<<1,h&&(e.edges=x,e.width=n*j,e.height=o*j),e;case a.AttachmentType.LinkedMesh:var d=c.readStringRef(),f=c.readInt32(),I=c.readStringRef(),J=c.readStringRef(),K=c.readBoolean(),n=0,o=0;h&&(n=c.readFloat(),o=c.readFloat()),null==d&&(d=i);var e=this.attachmentLoader.newMeshAttachment(m,i,d);if(null==e)break;return e.path=d,aj.rgba8888ToColor(e.color,f),h&&(e.width=n*j,e.height=o*j),this.linkedMeshes.push(new dd(e,I,z,J,K)),e;case a.AttachmentType.Path:for(var L=c.readBoolean(),M=c.readBoolean(),g=c.readInt(!0),l=this.readVertices(c,g),v=am.newArray(g/3,0),w=0,N=v.length;w<N;w++)v[w]=c.readFloat()*j;var f=h?c.readInt32():0,d=this.attachmentLoader.newPathAttachment(m,i);if(null==d)break;return d.closed=L,d.constantSpeed=M,d.worldVerticesLength=g<<1,d.vertices=l.vertices,d.bones=l.bones,d.lengths=v,h&&aj.rgba8888ToColor(d.color,f),d;case a.AttachmentType.Point:var s=c.readFloat(),t=c.readFloat(),u=c.readFloat(),f=h?c.readInt32():0,r=this.attachmentLoader.newPointAttachment(m,i);if(null==r)break;return r.x=t*j,r.y=u*j,r.rotation=s,h&&aj.rgba8888ToColor(r.color,f),r;case a.AttachmentType.Clipping:var O=c.readInt(!0),g=c.readInt(!0),l=this.readVertices(c,g),f=h?c.readInt32():0,p=this.attachmentLoader.newClippingAttachment(m,i);if(null==p)break;return p.endSlot=y.slots[O],p.worldVerticesLength=g<<1,p.vertices=l.vertices,p.bones=l.bones,h&&aj.rgba8888ToColor(p.color,f),p}return null},b.prototype.readVertices=function(a,f){var b=new de,d=this.scale;if(!a.readBoolean())return b.vertices=this.readFloatArray(a,f<<1,d),b;for(var c=new Array,e=new Array,g=0;g<f;g++){var h=a.readInt(!0);e.push(h);for(var i=0;i<h;i++)e.push(a.readInt(!0)),c.push(a.readFloat()*d),c.push(a.readFloat()*d),c.push(a.readFloat())}return b.vertices=am.toFloatArray(c),b.bones=e,b},b.prototype.readFloatArray=function(d,b,e){var c=new Array(b);if(1==e)for(var a=0;a<b;a++)c[a]=d.readFloat();else for(var a=0;a<b;a++)c[a]=d.readFloat()*e;return c},b.prototype.readShortArray=function(b){for(var c=b.readInt(!0),d=new Array(c),a=0;a<c;a++)d[a]=b.readShort();return d},b.prototype.readAnimation=function(c,S,z){for(var j=new Array,v=this.scale,g=0,m=new aj,A=new aj,h=0,l=c.readInt(!0);h<l;h++)for(var o=c.readInt(!0),i=0,q=c.readInt(!0);i<q;i++){var p=c.readByte(),f=c.readInt(!0);switch(p){case b.SLOT_ATTACHMENT:var d=new aK(f);d.slotIndex=o;for(var e=0;e<f;e++)d.setFrame(e,c.readFloat(),c.readStringRef());j.push(d),g=Math.max(g,d.frames[f-1]);break;case b.SLOT_COLOR:var d=new aI(f);d.slotIndex=o;for(var e=0;e<f;e++){var n=c.readFloat();aj.rgba8888ToColor(m,c.readInt32()),d.setFrame(e,n,m.r,m.g,m.b,m.a),e<f-1&&this.readCurve(c,e,d)}j.push(d),g=Math.max(g,d.frames[(f-1)*aI.ENTRIES]);break;case b.SLOT_TWO_COLOR:var d=new aJ(f);d.slotIndex=o;for(var e=0;e<f;e++){var n=c.readFloat();aj.rgba8888ToColor(m,c.readInt32()),aj.rgb888ToColor(A,c.readInt32()),d.setFrame(e,n,m.r,m.g,m.b,m.a,A.r,A.g,A.b),e<f-1&&this.readCurve(c,e,d)}j.push(d),g=Math.max(g,d.frames[(f-1)*aJ.ENTRIES])}}for(var h=0,l=c.readInt(!0);h<l;h++)for(var N=c.readInt(!0),i=0,q=c.readInt(!0);i<q;i++){var p=c.readByte(),f=c.readInt(!0);switch(p){case b.BONE_ROTATE:var d=new aF(f);d.boneIndex=N;for(var e=0;e<f;e++)d.setFrame(e,c.readFloat(),c.readFloat()),e<f-1&&this.readCurve(c,e,d);j.push(d),g=Math.max(g,d.frames[(f-1)*aF.ENTRIES]);break;case b.BONE_TRANSLATE:case b.BONE_SCALE:case b.BONE_SHEAR:var d=void 0,r=1;p==b.BONE_SCALE?d=new aG(f):p==b.BONE_SHEAR?d=new aH(f):(d=new M(f),r=v),d.boneIndex=N;for(var e=0;e<f;e++)d.setFrame(e,c.readFloat(),c.readFloat()*r,c.readFloat()*r),e<f-1&&this.readCurve(c,e,d);j.push(d),g=Math.max(g,d.frames[(f-1)*M.ENTRIES])}}for(var h=0,l=c.readInt(!0);h<l;h++){var s=c.readInt(!0),f=c.readInt(!0),d=new aO(f);d.ikConstraintIndex=s;for(var e=0;e<f;e++)d.setFrame(e,c.readFloat(),c.readFloat(),c.readFloat()*v,c.readByte(),c.readBoolean(),c.readBoolean()),e<f-1&&this.readCurve(c,e,d);j.push(d),g=Math.max(g,d.frames[(f-1)*aO.ENTRIES])}for(var h=0,l=c.readInt(!0);h<l;h++){var s=c.readInt(!0),f=c.readInt(!0),d=new aP(f);d.transformConstraintIndex=s;for(var e=0;e<f;e++)d.setFrame(e,c.readFloat(),c.readFloat(),c.readFloat(),c.readFloat(),c.readFloat()),e<f-1&&this.readCurve(c,e,d);j.push(d),g=Math.max(g,d.frames[(f-1)*aP.ENTRIES])}for(var h=0,l=c.readInt(!0);h<l;h++)for(var s=c.readInt(!0),G=z.pathConstraints[s],i=0,q=c.readInt(!0);i<q;i++){var p=c.readByte(),f=c.readInt(!0);switch(p){case b.PATH_POSITION:case b.PATH_SPACING:var d=void 0,r=1;p==b.PATH_SPACING?(d=new aQ(f),(G.spacingMode==F.Length||G.spacingMode==F.Fixed)&&(r=v)):(d=new V(f),G.positionMode==a.PositionMode.Fixed&&(r=v)),d.pathConstraintIndex=s;for(var e=0;e<f;e++)d.setFrame(e,c.readFloat(),c.readFloat()*r),e<f-1&&this.readCurve(c,e,d);j.push(d),g=Math.max(g,d.frames[(f-1)*V.ENTRIES]);break;case b.PATH_MIX:var d=new aR(f);d.pathConstraintIndex=s;for(var e=0;e<f;e++)d.setFrame(e,c.readFloat(),c.readFloat(),c.readFloat()),e<f-1&&this.readCurve(c,e,d);j.push(d),g=Math.max(g,d.frames[(f-1)*aR.ENTRIES])}}for(var h=0,l=c.readInt(!0);h<l;h++)for(var T=z.skins[c.readInt(!0)],i=0,q=c.readInt(!0);i<q;i++)for(var o=c.readInt(!0),O=0,U=c.readInt(!0);O<U;O++){var H=T.getAttachment(o,c.readStringRef()),I=null!=H.bones,B=H.vertices,P=I?B.length/3*2:B.length,f=c.readInt(!0),d=new aL(f);d.slotIndex=o,d.attachment=H;for(var e=0;e<f;e++){var n=c.readFloat(),t=void 0,C=c.readInt(!0);if(0==C)t=I?am.newFloatArray(P):B;else{t=am.newFloatArray(P);var J=c.readInt(!0);if(C+=J,1==v)for(var k=J;k<C;k++)t[k]=c.readFloat();else for(var k=J;k<C;k++)t[k]=c.readFloat()*v;if(!I)for(var k=0,W=t.length;k<W;k++)t[k]+=B[k]}d.setFrame(e,n,t),e<f-1&&this.readCurve(c,e,d)}j.push(d),g=Math.max(g,d.frames[f-1])}var D=c.readInt(!0);if(D>0){for(var d=new aN(D),x=z.slots.length,h=0;h<D;h++){for(var n=c.readFloat(),Q=c.readInt(!0),y=am.newArray(x,0),i=x-1;i>=0;i--)y[i]=-1;for(var K=am.newArray(x-Q,0),w=0,L=0,i=0;i<Q;i++){for(var o=c.readInt(!0);w!=o;)K[L++]=w++;y[w+c.readInt(!0)]=w++}for(;w<x;)K[L++]=w++;for(var i=x-1;i>=0;i--)-1==y[i]&&(y[i]=K[--L]);d.setFrame(h,n,y)}j.push(d),g=Math.max(g,d.frames[D-1])}var E=c.readInt(!0);if(E>0){for(var d=new aM(E),h=0;h<E;h++){var n=c.readFloat(),R=z.events[c.readInt(!0)],u=new a$(n,R);u.intValue=c.readInt(!1),u.floatValue=c.readFloat(),u.stringValue=c.readBoolean()?c.readString():R.stringValue,null!=u.data.audioPath&&(u.volume=c.readFloat(),u.balance=c.readFloat()),d.setFrame(h,u)}j.push(d),g=Math.max(g,d.frames[E-1])}return new aE(S,j,g)},b.prototype.readCurve=function(a,c,d){switch(a.readByte()){case b.CURVE_STEPPED:d.setStepped(c);break;case b.CURVE_BEZIER:this.setCurve(d,c,a.readFloat(),a.readFloat(),a.readFloat(),a.readFloat())}},b.prototype.setCurve=function(a,b,c,d,e,f){a.setCurve(b,c,d,e,f)},b.AttachmentTypeValues=[0,1,2,3,4,5,6],b.TransformModeValues=[a.TransformMode.Normal,a.TransformMode.OnlyTranslation,a.TransformMode.NoRotationOrReflection,a.TransformMode.NoScale,a.TransformMode.NoScaleOrReflection],b.PositionModeValues=[a.PositionMode.Fixed,a.PositionMode.Percent],b.SpacingModeValues=[F.Length,F.Fixed,F.Percent],b.RotateModeValues=[a.RotateMode.Tangent,a.RotateMode.Chain,a.RotateMode.ChainScale],b.BlendModeValues=[cX.BLEND_MODES.NORMAL,cX.BLEND_MODES.ADD,cX.BLEND_MODES.MULTIPLY,cX.BLEND_MODES.SCREEN],b.BONE_ROTATE=0,b.BONE_TRANSLATE=1,b.BONE_SCALE=2,b.BONE_SHEAR=3,b.SLOT_ATTACHMENT=0,b.SLOT_COLOR=1,b.SLOT_TWO_COLOR=2,b.PATH_POSITION=0,b.PATH_SPACING=1,b.PATH_MIX=2,b.CURVE_LINEAR=0,b.CURVE_STEPPED=1,b.CURVE_BEZIER=2,b}(),dd=function(a,b,c,d,e){this.mesh=a,this.skin=b,this.slotIndex=c,this.parent=d,this.inheritDeform=e},de=function(a,b){void 0===a&&(a=null),void 0===b&&(b=null),this.bones=a,this.vertices=b},bd=function(){function a(){this.minX=0,this.minY=0,this.maxX=0,this.maxY=0,this.boundingBoxes=new Array,this.polygons=new Array,this.polygonPool=new ao(function(){return am.newFloatArray(16)})}return a.prototype.update=function(f,k){if(null==f)throw new Error("skeleton cannot be null.");var g=this.boundingBoxes,c=this.polygons,h=this.polygonPool,i=f.slots,l=i.length;g.length=0,h.freeAll(c),c.length=0;for(var d=0;d<l;d++){var e=i[d];if(e.bone.active){var j=e.getAttachment();if(j instanceof aw){var a=j;g.push(a);var b=h.obtain();b.length!=a.worldVerticesLength&&(b=am.newFloatArray(a.worldVerticesLength)),c.push(b),a.computeWorldVertices(e,0,a.worldVerticesLength,b,0,2)}}}k?this.aabbCompute():(this.minX=Number.POSITIVE_INFINITY,this.minY=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY,this.maxY=Number.NEGATIVE_INFINITY)},a.prototype.aabbCompute=function(){for(var b=Number.POSITIVE_INFINITY,c=Number.POSITIVE_INFINITY,d=Number.NEGATIVE_INFINITY,e=Number.NEGATIVE_INFINITY,g=this.polygons,f=0,l=g.length;f<l;f++)for(var h=g[f],i=h,a=0,m=h.length;a<m;a+=2){var j=i[a],k=i[a+1];b=Math.min(b,j),c=Math.min(c,k),d=Math.max(d,j),e=Math.max(e,k)}this.minX=b,this.minY=c,this.maxX=d,this.maxY=e},a.prototype.aabbContainsPoint=function(a,b){return a>=this.minX&&a<=this.maxX&&b>=this.minY&&b<=this.maxY},a.prototype.aabbIntersectsSegment=function(a,b,j,k){var c=this.minX,d=this.minY,e=this.maxX,f=this.maxY;if(a<=c&&j<=c||b<=d&&k<=d||a>=e&&j>=e||b>=f&&k>=f)return!1;var g=(k-b)/(j-a),h=g*(c-a)+b;if(h>d&&h<f||(h=g*(e-a)+b)>d&&h<f)return!0;var i=(d-b)/g+a;return i>c&&i<e||(i=(f-b)/g+a)>c&&i<e},a.prototype.aabbIntersectsSkeleton=function(a){return this.minX<a.maxX&&this.maxX>a.minX&&this.minY<a.maxY&&this.maxY>a.minY},a.prototype.containsPoint=function(c,d){for(var b=this.polygons,a=0,e=b.length;a<e;a++)if(this.containsPointPolygon(b[a],c,d))return this.boundingBoxes[a];return null},a.prototype.containsPointPolygon=function(h,k,a){for(var c=h,i=h.length,e=i-2,f=!1,b=0;b<i;b+=2){var d=c[b+1],g=c[e+1];if(d<a&&g>=a||g<a&&d>=a){var j=c[b];j+(a-d)/(g-d)*(c[e]-j)<k&&(f=!f)}e=b}return f},a.prototype.intersectsSegment=function(c,d,e,f){for(var b=this.polygons,a=0,g=b.length;a<g;a++)if(this.intersectsSegmentPolygon(b[a],c,d,e,f))return this.boundingBoxes[a];return null},a.prototype.intersectsSegmentPolygon=function(n,g,h,i,j){for(var k=n,m=n.length,o=g-i,p=h-j,q=g*j-h*i,c=k[m-2],d=k[m-1],l=0;l<m;l+=2){var e=k[l],f=k[l+1],r=c*f-d*e,s=c-e,t=d-f,u=o*t-p*s,a=(q*s-o*r)/u;if((a>=c&&a<=e||a>=e&&a<=c)&&(a>=g&&a<=i||a>=i&&a<=g)){var b=(q*t-p*r)/u;if((b>=d&&b<=f||b>=f&&b<=d)&&(b>=h&&b<=j||b>=j&&b<=h))return!0}c=e,d=f}return!1},a.prototype.getPolygon=function(a){if(null==a)throw new Error("boundingBox cannot be null.");var b=this.boundingBoxes.indexOf(a);return -1==b?null:this.polygons[b]},a.prototype.getWidth=function(){return this.maxX-this.minX},a.prototype.getHeight=function(){return this.maxY-this.minY},a}(),be=function(){function b(a){this.scale=1,this.linkedMeshes=new Array,this.attachmentLoader=a}return b.prototype.readSkeletonData=function(w){var r=this.scale,e=new a7,g="string"==typeof w?JSON.parse(w):w,o=g.skeleton;if(null!=o){if(e.hash=o.hash,e.version=o.spine,"3.8"!==e.version.substr(0,3)){var x="Spine 3.8 loader cant load version "+o.spine+". Please configure your pixi-spine bundle";console.error(x)}if("3.8.75"===e.version){var x="Unsupported skeleton data, 3.8.75 is deprecated, please export with a newer version of Spine.";console.error(x)}e.x=o.x,e.y=o.y,e.width=o.width,e.height=o.height,e.fps=o.fps,e.imagesPath=o.images}if(g.bones)for(var f=0;f<g.bones.length;f++){var j=g.bones[f],C=null,y=this.getValue(j,"parent",null);if(null!=y&&null==(C=e.findBone(y)))throw new Error("Parent bone not found: "+y);var c=new aZ(e.bones.length,j.name,C);c.length=this.getValue(j,"length",0)*r,c.x=this.getValue(j,"x",0)*r,c.y=this.getValue(j,"y",0)*r,c.rotation=this.getValue(j,"rotation",0),c.scaleX=this.getValue(j,"scaleX",1),c.scaleY=this.getValue(j,"scaleY",1),c.shearX=this.getValue(j,"shearX",0),c.shearY=this.getValue(j,"shearY",0),c.transformMode=b.transformModeFromString(this.getValue(j,"transform","normal")),c.skinRequired=this.getValue(j,"skin",!1),e.bones.push(c)}if(g.slots)for(var f=0;f<g.slots.length;f++){var q=g.slots[f],v=q.name,l=q.bone,D=e.findBone(l);if(null==D)throw new Error("Slot bone not found: "+l);var c=new a8(e.slots.length,v,D),E=this.getValue(q,"color",null);null!=E&&c.color.setFromString(E);var G=this.getValue(q,"dark",null);null!=G&&(c.darkColor=new aj(1,1,1,1),c.darkColor.setFromString(G)),c.attachmentName=this.getValue(q,"attachment",null),c.blendMode=b.blendModeFromString(this.getValue(q,"blend","normal")),e.slots.push(c)}if(g.ik)for(var f=0;f<g.ik.length;f++){var d=g.ik[f],c=new a1(d.name);c.order=this.getValue(d,"order",0),c.skinRequired=this.getValue(d,"skin",!1);for(var m=0;m<d.bones.length;m++){var l=d.bones[m],n=e.findBone(l);if(null==n)throw new Error("IK bone not found: "+l);c.bones.push(n)}var s=d.target;if(c.target=e.findBone(s),null==c.target)throw new Error("IK target bone not found: "+s);c.mix=this.getValue(d,"mix",1),c.softness=this.getValue(d,"softness",0)*r,c.bendDirection=this.getValue(d,"bendPositive",!0)?1:-1,c.compress=this.getValue(d,"compress",!1),c.stretch=this.getValue(d,"stretch",!1),c.uniform=this.getValue(d,"uniform",!1),e.ikConstraints.push(c)}if(g.transform)for(var f=0;f<g.transform.length;f++){var d=g.transform[f],c=new a9(d.name);c.order=this.getValue(d,"order",0),c.skinRequired=this.getValue(d,"skin",!1);for(var m=0;m<d.bones.length;m++){var l=d.bones[m],n=e.findBone(l);if(null==n)throw new Error("Transform constraint bone not found: "+l);c.bones.push(n)}var s=d.target;if(c.target=e.findBone(s),null==c.target)throw new Error("Transform constraint target bone not found: "+s);c.local=this.getValue(d,"local",!1),c.relative=this.getValue(d,"relative",!1),c.offsetRotation=this.getValue(d,"rotation",0),c.offsetX=this.getValue(d,"x",0)*r,c.offsetY=this.getValue(d,"y",0)*r,c.offsetScaleX=this.getValue(d,"scaleX",0),c.offsetScaleY=this.getValue(d,"scaleY",0),c.offsetShearY=this.getValue(d,"shearY",0),c.rotateMix=this.getValue(d,"rotateMix",1),c.translateMix=this.getValue(d,"translateMix",1),c.scaleMix=this.getValue(d,"scaleMix",1),c.shearMix=this.getValue(d,"shearMix",1),e.transformConstraints.push(c)}if(g.path)for(var f=0;f<g.path.length;f++){var d=g.path[f],c=new a2(d.name);c.order=this.getValue(d,"order",0),c.skinRequired=this.getValue(d,"skin",!1);for(var m=0;m<d.bones.length;m++){var l=d.bones[m],n=e.findBone(l);if(null==n)throw new Error("Transform constraint bone not found: "+l);c.bones.push(n)}var s=d.target;if(c.target=e.findSlot(s),null==c.target)throw new Error("Path target slot not found: "+s);c.positionMode=b.positionModeFromString(this.getValue(d,"positionMode","percent")),c.spacingMode=b.spacingModeFromString(this.getValue(d,"spacingMode","length")),c.rotateMode=b.rotateModeFromString(this.getValue(d,"rotateMode","tangent")),c.offsetRotation=this.getValue(d,"rotation",0),c.position=this.getValue(d,"position",0),c.positionMode==a.PositionMode.Fixed&&(c.position*=r),c.spacing=this.getValue(d,"spacing",0),(c.spacingMode==F.Length||c.spacingMode==F.Fixed)&&(c.spacing*=r),c.rotateMix=this.getValue(d,"rotateMix",1),c.translateMix=this.getValue(d,"translateMix",1),e.pathConstraints.push(c)}if(g.skins)for(var f=0;f<g.skins.length;f++){var h=g.skins[f],k=new bb(h.name);if(h.bones)for(var i=0;i<h.bones.length;i++){var n=e.findBone(h.bones[i]);if(null==n)throw new Error("Skin bone not found: "+h.bones[f]);k.bones.push(n)}if(h.ik)for(var i=0;i<h.ik.length;i++){var t=e.findIkConstraint(h.ik[i]);if(null==t)throw new Error("Skin IK constraint not found: "+h.ik[f]);k.constraints.push(t)}if(h.transform)for(var i=0;i<h.transform.length;i++){var t=e.findTransformConstraint(h.transform[i]);if(null==t)throw new Error("Skin transform constraint not found: "+h.transform[f]);k.constraints.push(t)}if(h.path)for(var i=0;i<h.path.length;i++){var t=e.findPathConstraint(h.path[i]);if(null==t)throw new Error("Skin path constraint not found: "+h.path[f]);k.constraints.push(t)}for(var v in h.attachments){var z=e.findSlot(v);if(null==z)throw new Error("Slot not found: "+v);var q=h.attachments[v];for(var A in q){var H=this.readAttachment(q[A],k,z.index,A,e);null!=H&&k.setAttachment(z.index,A,H)}}e.skins.push(k),"default"==k.name&&(e.defaultSkin=k)}for(var f=0,K=this.linkedMeshes.length;f<K;f++){var p=this.linkedMeshes[f],k=null==p.skin?e.defaultSkin:e.findSkin(p.skin);if(null==k)throw new Error("Skin not found: "+p.skin);var B=k.getAttachment(p.slotIndex,p.parent);if(null==B)throw new Error("Parent mesh not found: "+p.parent);p.mesh.deformAttachment=p.inheritDeform?B:p.mesh,p.mesh.setParentMesh(B)}if(this.linkedMeshes.length=0,g.events)for(var I in g.events){var u=g.events[I],c=new a_(I);c.intValue=this.getValue(u,"int",0),c.floatValue=this.getValue(u,"float",0),c.stringValue=this.getValue(u,"string",""),c.audioPath=this.getValue(u,"audio",null),null!=c.audioPath&&(c.volume=this.getValue(u,"volume",1),c.balance=this.getValue(u,"balance",0)),e.events.push(c)}if(g.animations)for(var J in g.animations){var L=g.animations[J];this.readAnimation(L,J,e)}return e},b.prototype.readAttachment=function(a,h,s,f,t){var g=this.scale;f=this.getValue(a,"name",f);var u=this.getValue(a,"type","region");switch(u){case"region":var c=this.getValue(a,"path",f),e=this.attachmentLoader.newRegionAttachment(h,f,c);if(null==e)break;e.path=c,e.x=this.getValue(a,"x",0)*g,e.y=this.getValue(a,"y",0)*g,e.scaleX=this.getValue(a,"scaleX",1),e.scaleY=this.getValue(a,"scaleY",1),e.rotation=this.getValue(a,"rotation",0),e.width=a.width*g,e.height=a.height*g;var b=this.getValue(a,"color",null);return null!=b&&e.color.setFromString(b),e;case"boundingbox":var k=this.attachmentLoader.newBoundingBoxAttachment(h,f);if(null==k)break;this.readVertices(a,k,a.vertexCount<<1);var b=this.getValue(a,"color",null);return null!=b&&k.color.setFromString(b),k;case"mesh":case"linkedmesh":var c=this.getValue(a,"path",f),d=this.attachmentLoader.newMeshAttachment(h,f,c);if(null==d)break;d.path=c;var b=this.getValue(a,"color",null);null!=b&&d.color.setFromString(b),d.width=this.getValue(a,"width",0)*g,d.height=this.getValue(a,"height",0)*g;var o=this.getValue(a,"parent",null);if(null!=o)return this.linkedMeshes.push(new df(d,this.getValue(a,"skin",null),s,o,this.getValue(a,"deform",!0))),d;var p=a.uvs;return this.readVertices(a,d,p.length),d.triangles=a.triangles,d.regionUVs=new Float32Array(p),d.edges=this.getValue(a,"edges",null),d.hullLength=2*this.getValue(a,"hull",0),d;case"path":var c=this.attachmentLoader.newPathAttachment(h,f);if(null==c)break;c.closed=this.getValue(a,"closed",!1),c.constantSpeed=this.getValue(a,"constantSpeed",!0);var l=a.vertexCount;this.readVertices(a,c,l<<1);for(var q=am.newArray(l/3,0),m=0;m<a.lengths.length;m++)q[m]=a.lengths[m]*g;c.lengths=q;var b=this.getValue(a,"color",null);return null!=b&&c.color.setFromString(b),c;case"point":var i=this.attachmentLoader.newPointAttachment(h,f);if(null==i)break;i.x=this.getValue(a,"x",0)*g,i.y=this.getValue(a,"y",0)*g,i.rotation=this.getValue(a,"rotation",0);var b=this.getValue(a,"color",null);return null!=b&&i.color.setFromString(b),i;case"clipping":var j=this.attachmentLoader.newClippingAttachment(h,f);if(null==j)break;var n=this.getValue(a,"end",null);if(null!=n){var r=t.findSlot(n);if(null==r)throw new Error("Clipping end slot not found: "+n);j.endSlot=r}var l=a.vertexCount;this.readVertices(a,j,l<<1);var b=this.getValue(a,"color",null);return null!=b&&j.color.setFromString(b),j}return null},b.prototype.readVertices=function(k,c,h){var d=this.scale;c.worldVerticesLength=h;var b=k.vertices;if(h==b.length){var i=am.toFloatArray(b);if(1!=d)for(var a=0,f=b.length;a<f;a++)i[a]*=d;c.vertices=i;return}for(var e=new Array,g=new Array,a=0,f=b.length;a<f;){var j=b[a++];g.push(j);for(var l=a+4*j;a<l;a+=4)g.push(b[a]),e.push(b[a+1]*d),e.push(b[a+2]*d),e.push(b[a+3])}c.bones=g,c.vertices=am.toFloatArray(e)},b.prototype.readAnimation=function(h,aa,j){var t=this.scale,k=new Array,g=0;if(h.slots)for(var p in h.slots){var u=h.slots[p],l=j.findSlotIndex(p);if(-1==l)throw new Error("Slot not found: "+p);for(var i in u){var f=u[i];if("attachment"==i){var b=new aK(f.length);b.slotIndex=l;for(var e=0,c=0;c<f.length;c++){var d=f[c];b.setFrame(e++,this.getValue(d,"time",0),d.name)}k.push(b),g=Math.max(g,b.frames[b.getFrameCount()-1])}else if("color"==i){var b=new aI(f.length);b.slotIndex=l;for(var e=0,c=0;c<f.length;c++){var d=f[c],y=new aj;y.setFromString(d.color||"ffffffff"),b.setFrame(e,this.getValue(d,"time",0),y.r,y.g,y.b,y.a),this.readCurve(d,b,e),e++}k.push(b),g=Math.max(g,b.frames[(b.getFrameCount()-1)*aI.ENTRIES])}else if("twoColor"==i){var b=new aJ(f.length);b.slotIndex=l;for(var e=0,c=0;c<f.length;c++){var d=f[c],z=new aj,C=new aj;z.setFromString(d.light),C.setFromString(d.dark),b.setFrame(e,this.getValue(d,"time",0),z.r,z.g,z.b,z.a,C.r,C.g,C.b),this.readCurve(d,b,e),e++}k.push(b),g=Math.max(g,b.frames[(b.getFrameCount()-1)*aJ.ENTRIES])}else throw new Error("Invalid timeline type for a slot: "+i+" ("+p+")")}}if(h.bones)for(var D in h.bones){var X=h.bones[D],L=j.findBoneIndex(D);if(-1==L)throw new Error("Bone not found: "+D);for(var i in X){var f=X[i];if("rotate"===i){var b=new aF(f.length);b.boneIndex=L;for(var e=0,c=0;c<f.length;c++){var d=f[c];b.setFrame(e,this.getValue(d,"time",0),this.getValue(d,"angle",0)),this.readCurve(d,b,e),e++}k.push(b),g=Math.max(g,b.frames[(b.getFrameCount()-1)*aF.ENTRIES])}else if("translate"===i||"scale"===i||"shear"===i){var b=null,q=1,N=0;"scale"===i?(b=new aG(f.length),N=1):"shear"===i?b=new aH(f.length):(b=new M(f.length),q=t),b.boneIndex=L;for(var e=0,c=0;c<f.length;c++){var d=f[c],ab=this.getValue(d,"x",N),ac=this.getValue(d,"y",N);b.setFrame(e,this.getValue(d,"time",0),ab*q,ac*q),this.readCurve(d,b,e),e++}k.push(b),g=Math.max(g,b.frames[(b.getFrameCount()-1)*M.ENTRIES])}else throw new Error("Invalid timeline type for a bone: "+i+" ("+D+")")}}if(h.ik)for(var n in h.ik){var m=h.ik[n],O=j.findIkConstraint(n),b=new aO(m.length);b.ikConstraintIndex=j.ikConstraints.indexOf(O);for(var e=0,c=0;c<m.length;c++){var d=m[c];b.setFrame(e,this.getValue(d,"time",0),this.getValue(d,"mix",1),this.getValue(d,"softness",0)*t,this.getValue(d,"bendPositive",!0)?1:-1,this.getValue(d,"compress",!1),this.getValue(d,"stretch",!1)),this.readCurve(d,b,e),e++}k.push(b),g=Math.max(g,b.frames[(b.getFrameCount()-1)*aO.ENTRIES])}if(h.transform)for(var n in h.transform){var m=h.transform[n],O=j.findTransformConstraint(n),b=new aP(m.length);b.transformConstraintIndex=j.transformConstraints.indexOf(O);for(var e=0,c=0;c<m.length;c++){var d=m[c];b.setFrame(e,this.getValue(d,"time",0),this.getValue(d,"rotateMix",1),this.getValue(d,"translateMix",1),this.getValue(d,"scaleMix",1),this.getValue(d,"shearMix",1)),this.readCurve(d,b,e),e++}k.push(b),g=Math.max(g,b.frames[(b.getFrameCount()-1)*aP.ENTRIES])}if(h.path)for(var n in h.path){var m=h.path[n],E=j.findPathConstraintIndex(n);if(-1==E)throw new Error("Path constraint not found: "+n);var P=j.pathConstraints[E];for(var i in m){var f=m[i];if("position"===i||"spacing"===i){var b=null,q=1;"spacing"===i?(b=new aQ(f.length),(P.spacingMode==F.Length||P.spacingMode==F.Fixed)&&(q=t)):(b=new V(f.length),P.positionMode==a.PositionMode.Fixed&&(q=t)),b.pathConstraintIndex=E;for(var e=0,c=0;c<f.length;c++){var d=f[c];b.setFrame(e,this.getValue(d,"time",0),this.getValue(d,i,0)*q),this.readCurve(d,b,e),e++}k.push(b),g=Math.max(g,b.frames[(b.getFrameCount()-1)*V.ENTRIES])}else if("mix"===i){var b=new aR(f.length);b.pathConstraintIndex=E;for(var e=0,c=0;c<f.length;c++){var d=f[c];b.setFrame(e,this.getValue(d,"time",0),this.getValue(d,"rotateMix",1),this.getValue(d,"translateMix",1)),this.readCurve(d,b,e),e++}k.push(b),g=Math.max(g,b.frames[(b.getFrameCount()-1)*aR.ENTRIES])}}}if(h.deform)for(var Q in h.deform){var Y=h.deform[Q],Z=j.findSkin(Q);if(null==Z){if(!as.FAIL_ON_NON_EXISTING_SKIN)continue;throw new Error("Skin not found: "+Q)}for(var p in Y){var u=Y[p],l=j.findSlotIndex(p);if(-1==l)throw new Error("Slot not found: "+u.name);for(var i in u){var f=u[i],G=Z.getAttachment(l,i);if(null==G)throw new Error("Deform attachment not found: "+f.name);var R=null!=G.bones,H=G.vertices,S=R?H.length/3*2:H.length,b=new aL(f.length);b.slotIndex=l,b.attachment=G;for(var e=0,r=0;r<f.length;r++){var d=f[r],v=void 0,I=this.getValue(d,"vertices",null);if(null==I)v=R?am.newFloatArray(S):H;else{v=am.newFloatArray(S);var $=this.getValue(d,"offset",0);if(am.arrayCopy(I,0,v,$,I.length),1!=t)for(var c=$,ad=c+I.length;c<ad;c++)v[c]*=t;if(!R)for(var c=0;c<S;c++)v[c]+=H[c]}b.setFrame(e,this.getValue(d,"time",0),v),this.readCurve(d,b,e),e++}k.push(b),g=Math.max(g,b.frames[b.getFrameCount()-1])}}}var w=h.drawOrder;if(null==w&&(w=h.draworder),null!=w){for(var b=new aN(w.length),J=j.slots.length,e=0,r=0;r<w.length;r++){var _=w[r],A=null,K=this.getValue(_,"offsets",null);if(null!=K){A=am.newArray(J,-1);for(var T=am.newArray(J-K.length,0),x=0,U=0,c=0;c<K.length;c++){var W=K[c],l=j.findSlotIndex(W.slot);if(-1==l)throw new Error("Slot not found: "+W.slot);for(;x!=l;)T[U++]=x++;A[x+W.offset]=x++}for(;x<J;)T[U++]=x++;for(var c=J-1;c>=0;c--)-1==A[c]&&(A[c]=T[--U])}b.setFrame(e++,this.getValue(_,"time",0),A)}k.push(b),g=Math.max(g,b.frames[b.getFrameCount()-1])}if(h.events){for(var b=new aM(h.events.length),e=0,c=0;c<h.events.length;c++){var o=h.events[c],B=j.findEvent(o.name);if(null==B)throw new Error("Event not found: "+o.name);var s=new a$(am.toSinglePrecision(this.getValue(o,"time",0)),B);s.intValue=this.getValue(o,"int",B.intValue),s.floatValue=this.getValue(o,"float",B.floatValue),s.stringValue=this.getValue(o,"string",B.stringValue),null!=s.data.audioPath&&(s.volume=this.getValue(o,"volume",1),s.balance=this.getValue(o,"balance",0)),b.setFrame(e++,s)}k.push(b),g=Math.max(g,b.frames[b.getFrameCount()-1])}if(isNaN(g))throw new Error("Error while parsing animation, duration is NaN");j.animations.push(new aE(aa,k,g))},b.prototype.readCurve=function(a,b,c){if(a.hasOwnProperty("curve")){if("stepped"===a.curve)b.setStepped(c);else{var d=a.curve;b.setCurve(c,d,this.getValue(a,"c2",0),this.getValue(a,"c3",1),this.getValue(a,"c4",1))}}},b.prototype.getValue=function(a,b,c){return void 0!==a[b]?a[b]:c},b.blendModeFromString=function(a){if("normal"==(a=a.toLowerCase()))return cX.BLEND_MODES.NORMAL;if("additive"==a)return cX.BLEND_MODES.ADD;if("multiply"==a)return cX.BLEND_MODES.MULTIPLY;if("screen"==a)return cX.BLEND_MODES.SCREEN;throw new Error("Unknown blend mode: "+a)},b.positionModeFromString=function(b){if("fixed"==(b=b.toLowerCase()))return a.PositionMode.Fixed;if("percent"==b)return a.PositionMode.Percent;throw new Error("Unknown position mode: "+b)},b.spacingModeFromString=function(a){if("length"==(a=a.toLowerCase()))return F.Length;if("fixed"==a)return F.Fixed;if("percent"==a)return F.Percent;throw new Error("Unknown position mode: "+a)},b.rotateModeFromString=function(b){if("tangent"==(b=b.toLowerCase()))return a.RotateMode.Tangent;if("chain"==b)return a.RotateMode.Chain;if("chainscale"==b)return a.RotateMode.ChainScale;throw new Error("Unknown rotate mode: "+b)},b.transformModeFromString=function(b){if("normal"==(b=b.toLowerCase()))return a.TransformMode.Normal;if("onlytranslation"==b)return a.TransformMode.OnlyTranslation;if("norotationorreflection"==b)return a.TransformMode.NoRotationOrReflection;if("noscale"==b)return a.TransformMode.NoScale;if("noscaleorreflection"==b)return a.TransformMode.NoScaleOrReflection;throw new Error("Unknown transform mode: "+b)},b}(),df=function(a,b,c,d,e){this.mesh=a,this.skin=b,this.slotIndex=c,this.parent=d,this.inheritDeform=e},bf=function(b){function a(){return null!==b&&b.apply(this,arguments)||this}return db(a,b),a.prototype.createSkeleton=function(a){this.skeleton=new a6(a),this.skeleton.updateWorldTransform(),this.stateData=new aW(a),this.state=new aS(this.stateData)},a}(r),dg=Object.freeze({__proto__:null,Animation:aE,AnimationState:aS,AnimationStateAdapter:aV,AnimationStateData:aW,AtlasAttachmentLoader:aX,Attachment:L,AttachmentTimeline:aK,Bone:aY,BoneData:aZ,BoundingBoxAttachment:aw,ClippingAttachment:ax,ColorTimeline:aI,ConstraintData:A,CurveTimeline:m,DeformTimeline:aL,DrawOrderTimeline:aN,Event:a$,EventData:a_,EventQueue:aU,EventTimeline:aM,get EventType(){return E},IkConstraint:a0,IkConstraintData:a1,IkConstraintTimeline:aO,JitterEffect:aC,MeshAttachment:ay,PathAttachment:az,PathConstraint:a3,PathConstraintData:a2,PathConstraintMixTimeline:aR,PathConstraintPositionTimeline:V,PathConstraintSpacingTimeline:aQ,PointAttachment:aA,RegionAttachment:aB,RotateTimeline:aF,ScaleTimeline:aG,ShearTimeline:aH,Skeleton:a6,SkeletonBinary:bc,SkeletonBounds:bd,SkeletonData:a7,SkeletonJson:be,Skin:bb,SkinEntry:ba,Slot:a4,SlotData:a8,get SpacingMode(){return F},Spine:bf,SwirlEffect:aD,get TimelineType(){return D},TrackEntry:aT,TransformConstraint:a5,TransformConstraintData:a9,TransformConstraintTimeline:aP,TranslateTimeline:M,TwoColorTimeline:aJ,VertexAttachment:s}),dh=function(a,b){return(dh=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(c,a){for(var b in a)Object.prototype.hasOwnProperty.call(a,b)&&(c[b]=a[b])})(a,b)};function di(b,a){if("function"!=typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");function c(){this.constructor=b}dh(b,a),b.prototype=null===a?Object.create(a):(c.prototype=a.prototype,new c)}var c,N=function(a){if(null==a)throw new Error("name cannot be null.");this.name=a},u=function(b){function a(d){var c=b.call(this,d)||this;return c.id=(65535&a.nextID++)<<11,c.worldVerticesLength=0,c}return di(a,b),a.prototype.computeWorldVerticesOld=function(a,b){this.computeWorldVertices(a,0,this.worldVerticesLength,b,0,2)},a.prototype.computeWorldVertices=function(s,v,k,i,o,p){k=o+(k>>1)*p;var z=s.bone.skeleton,q=s.attachmentVertices,e=this.vertices,j=this.bones;if(null==j){q.length>0&&(e=q);for(var a=s.bone.matrix,A=a.tx,B=a.ty,C=a.a,d=a.c,D=a.b,E=a.d,t=v,b=o;b<k;t+=2,b+=p){var f=e[t],g=e[t+1];i[b]=f*C+g*d+A,i[b+1]=f*D+g*E+B}return}for(var c=0,r=0,w=0;w<v;w+=2){var h=j[c];c+=h+1,r+=h}var x=z.bones;if(0==q.length)for(var b=o,d=3*r;b<k;b+=p){var l=0,m=0,h=j[c++];for(h+=c;c<h;c++,d+=3){var a=x[j[c]].matrix,f=e[d],g=e[d+1],n=e[d+2];l+=(f*a.a+g*a.c+a.tx)*n,m+=(f*a.b+g*a.d+a.ty)*n}i[b]=l,i[b+1]=m}else for(var y=q,b=o,d=3*r,u=r<<1;b<k;b+=p){var l=0,m=0,h=j[c++];for(h+=c;c<h;c++,d+=3,u+=2){var a=x[j[c]].matrix,f=e[d]+y[u],g=e[d+1]+y[u+1],n=e[d+2];l+=(f*a.a+g*a.c+a.tx)*n,m+=(f*a.b+g*a.d+a.ty)*n}i[b]=l,i[b+1]=m}},a.prototype.applyDeform=function(a){return this==a},a.nextID=0,a}(N),bg=function(c){function b(d){var b=c.call(this,d)||this;return b.type=a.AttachmentType.BoundingBox,b.color=new aj(1,1,1,1),b}return di(b,c),b}(u),bh=function(c){function b(d){var b=c.call(this,d)||this;return b.type=a.AttachmentType.Clipping,b.color=new aj(.2275,.2275,.8078,1),b}return di(b,c),b}(u),bi=function(c){function b(d){var b=c.call(this,d)||this;return b.type=a.AttachmentType.Mesh,b.color=new aj(1,1,1,1),b.inheritDeform=!1,b.tempColor=new aj(0,0,0,0),b}return di(b,c),b.prototype.applyDeform=function(a){return this==a||this.inheritDeform&&this.parentMesh==a},b.prototype.getParentMesh=function(){return this.parentMesh},b.prototype.setParentMesh=function(a){this.parentMesh=a,null!=a&&(this.bones=a.bones,this.vertices=a.vertices,this.worldVerticesLength=a.worldVerticesLength,this.regionUVs=a.regionUVs,this.triangles=a.triangles,this.hullLength=a.hullLength,this.worldVerticesLength=a.worldVerticesLength)},b}(u),bj=function(c){function b(d){var b=c.call(this,d)||this;return b.type=a.AttachmentType.Path,b.closed=!1,b.constantSpeed=!1,b.color=new aj(1,1,1,1),b}return di(b,c),b}(u),bk=function(c){function b(d){var b=c.call(this,d)||this;return b.type=a.AttachmentType.Point,b.color=new aj(.38,.94,0,1),b}return di(b,c),b.prototype.computeWorldPosition=function(b,c){var a=b.matrix;return c.x=this.x*a.a+this.y*a.c+b.worldX,c.y=this.x*a.b+this.y*a.d+b.worldY,c},b.prototype.computeWorldRotation=function(d){var a=d.matrix,b=ak.cosDeg(this.rotation),c=ak.sinDeg(this.rotation),e=b*a.a+c*a.c,f=b*a.b+c*a.d;return Math.atan2(f,e)*ak.radDeg},b}(u),bl=function(c){function b(d){var b=c.call(this,d)||this;return b.type=a.AttachmentType.Region,b.x=0,b.y=0,b.scaleX=1,b.scaleY=1,b.rotation=0,b.width=0,b.height=0,b.color=new aj(1,1,1,1),b.offset=am.newFloatArray(8),b.uvs=am.newFloatArray(8),b.tempColor=new aj(1,1,1,1),b}return di(b,c),b.prototype.updateOffset=function(){var g=this.width/this.region.originalWidth*this.scaleX,h=this.height/this.region.originalHeight*this.scaleY,e=-this.width/2*this.scaleX+this.region.offsetX*g,f=-this.height/2*this.scaleY+this.region.offsetY*h,i=e+this.region.width*g,j=f+this.region.height*h,k=this.rotation*Math.PI/180,c=Math.cos(k),d=Math.sin(k),l=e*c+this.x,m=e*d,n=f*c+this.y,o=f*d,p=i*c+this.x,q=i*d,r=j*c+this.y,s=j*d,a=this.offset;a[b.OX1]=l-o,a[b.OY1]=n+m,a[b.OX2]=l-s,a[b.OY2]=r+m,a[b.OX3]=p-s,a[b.OY3]=r+q,a[b.OX4]=p-o,a[b.OY4]=n+q},b.prototype.setRegion=function(a){this.region=a;var b=this.uvs;a.rotate?(b[2]=a.u,b[3]=a.v2,b[4]=a.u,b[5]=a.v,b[6]=a.u2,b[7]=a.v,b[0]=a.u2,b[1]=a.v2):(b[0]=a.u,b[1]=a.v2,b[2]=a.u,b[3]=a.v,b[4]=a.u2,b[5]=a.v,b[6]=a.u2,b[7]=a.v2)},b.prototype.computeWorldVertices=function(o,e,d,n){var f=this.offset,g=o.matrix,h=g.tx,i=g.ty,j=g.a,k=g.c,l=g.b,m=g.d,a=0,c=0;a=f[b.OX1],c=f[b.OY1],e[d]=a*j+c*k+h,e[d+1]=a*l+c*m+i,d+=n,a=f[b.OX2],c=f[b.OY2],e[d]=a*j+c*k+h,e[d+1]=a*l+c*m+i,d+=n,a=f[b.OX3],c=f[b.OY3],e[d]=a*j+c*k+h,e[d+1]=a*l+c*m+i,d+=n,a=f[b.OX4],c=f[b.OY4],e[d]=a*j+c*k+h,e[d+1]=a*l+c*m+i},b.OX1=0,b.OY1=1,b.OX2=2,b.OY2=3,b.OX3=4,b.OY3=5,b.OX4=6,b.OY4=7,b.X1=0,b.Y1=1,b.C1R=2,b.C1G=3,b.C1B=4,b.C1A=5,b.U1=6,b.V1=7,b.X2=8,b.Y2=9,b.C2R=10,b.C2G=11,b.C2B=12,b.C2A=13,b.U2=14,b.V2=15,b.X3=16,b.Y3=17,b.C3R=18,b.C3G=19,b.C3B=20,b.C3A=21,b.U3=22,b.V3=23,b.X4=24,b.Y4=25,b.C4R=26,b.C4G=27,b.C4B=28,b.C4A=29,b.U4=30,b.V4=31,b}(N),bm=function(){function a(a,b){this.jitterX=0,this.jitterY=0,this.jitterX=a,this.jitterY=b}return a.prototype.begin=function(a){},a.prototype.transform=function(a,b,c,d){a.x+=ak.randomTriangular(-this.jitterX,this.jitterY),a.y+=ak.randomTriangular(-this.jitterX,this.jitterY)},a.prototype.end=function(){},a}(),bn=function(){function a(a){this.centerX=0,this.centerY=0,this.radius=0,this.angle=0,this.worldX=0,this.worldY=0,this.radius=a}return a.prototype.begin=function(a){this.worldX=a.x+this.centerX,this.worldY=a.y+this.centerY},a.prototype.transform=function(b,j,k,l){var i=this.angle*ak.degreesToRadians,c=b.x-this.worldX,d=b.y-this.worldY,e=Math.sqrt(c*c+d*d);if(e<this.radius){var f=a.interpolation.apply(0,i,(this.radius-e)/this.radius),g=Math.cos(f),h=Math.sin(f);b.x=g*c-h*d+this.worldX,b.y=h*c+g*d+this.worldY}},a.prototype.end=function(){},a.interpolation=new al(2),a}(),bo=function(){function a(a,b,c){if(null==a)throw new Error("name cannot be null.");if(null==b)throw new Error("timelines cannot be null.");this.name=a,this.timelines=b,this.duration=c}return a.prototype.apply=function(c,a,d,f,g,h,i,j){if(null==c)throw new Error("skeleton cannot be null.");f&&0!=this.duration&&(d%=this.duration,a>0&&(a%=this.duration));for(var e=this.timelines,b=0,k=e.length;b<k;b++)e[b].apply(c,a,d,g,h,i,j)},a.binarySearch=function(e,f,a){void 0===a&&(a=1);var c=0,b=e.length/a-2;if(0==b)return a;for(var d=b>>>1;;){if(e[(d+1)*a]<=f?c=d+1:b=d,c==b)return(c+1)*a;d=c+b>>>1}},a.linearSearch=function(b,d,c){for(var a=0,e=b.length-c;a<=e;a+=c)if(b[a]>d)return a;return -1},a}();(c=G||(G={}))[c.rotate=0]="rotate",c[c.translate=1]="translate",c[c.scale=2]="scale",c[c.shear=3]="shear",c[c.attachment=4]="attachment",c[c.color=5]="color",c[c.deform=6]="deform",c[c.event=7]="event",c[c.drawOrder=8]="drawOrder",c[c.ikConstraint=9]="ikConstraint",c[c.transformConstraint=10]="transformConstraint",c[c.pathConstraintPosition=11]="pathConstraintPosition",c[c.pathConstraintSpacing=12]="pathConstraintSpacing",c[c.pathConstraintMix=13]="pathConstraintMix",c[c.twoColor=14]="twoColor";var f,n=function(){function a(b){if(b<=0)throw new Error("frameCount must be > 0: "+b);this.curves=am.newFloatArray((b-1)*a.BEZIER_SIZE)}return a.prototype.getFrameCount=function(){return this.curves.length/a.BEZIER_SIZE+1},a.prototype.setLinear=function(b){this.curves[b*a.BEZIER_SIZE]=a.LINEAR},a.prototype.setStepped=function(b){this.curves[b*a.BEZIER_SIZE]=a.STEPPED},a.prototype.getCurveType=function(d){var b=d*a.BEZIER_SIZE;if(b==this.curves.length)return a.LINEAR;var c=this.curves[b];return c==a.LINEAR?a.LINEAR:c==a.STEPPED?a.STEPPED:a.BEZIER},a.prototype.setCurve=function(r,c,d,j,k){var l=(-(2*c)+j)*.03,m=(-(2*d)+k)*.03,e=((c-j)*3+1)*.006,f=((d-k)*3+1)*.006,n=2*l+e,o=2*m+f,g=.3*c+l+.16666667*e,h=.3*d+m+.16666667*f,b=r*a.BEZIER_SIZE,i=this.curves;i[b++]=a.BEZIER;for(var p=g,q=h,s=b+a.BEZIER_SIZE-1;b<s;b+=2)i[b]=p,i[b+1]=q,g+=n,h+=o,n+=e,o+=f,p+=g,q+=h},a.prototype.getCurvePercent=function(j,c){c=ak.clamp(c,0,1);var d=this.curves,b=j*a.BEZIER_SIZE,h=d[b];if(h==a.LINEAR)return c;if(h==a.STEPPED)return 0;b++;for(var e=0,k=b,l=b+a.BEZIER_SIZE-1;b<l;b+=2)if((e=d[b])>=c){var f=void 0,g=void 0;return b==k?(f=0,g=0):(f=d[b-2],g=d[b-1]),g+(d[b+1]-g)*(c-f)/(e-f)}var i=d[b-1];return i+(1-i)*(c-e)/(1-e)},a.LINEAR=0,a.STEPPED=1,a.BEZIER=2,a.BEZIER_SIZE=19,a}(),bp=function(c){function b(a){var b=c.call(this,a)||this;return b.frames=am.newFloatArray(a<<1),b}return di(b,c),b.prototype.getPropertyId=function(){return(G.rotate<<24)+this.boneIndex},b.prototype.setFrame=function(a,c,d){a<<=1,this.frames[a]=c,this.frames[a+b.ROTATION]=d},b.prototype.apply=function(n,p,i,q,f,j,r){var d=this.frames,c=n.bones[this.boneIndex];if(i<d[0]){switch(j){case a.MixBlend.setup:c.rotation=c.data.rotation;break;case a.MixBlend.first:var k=c.data.rotation-c.rotation;c.rotation+=(k-(16384-(16384.499999999996-k/360|0))*360)*f}return}if(i>=d[d.length-b.ENTRIES]){var g=d[d.length+b.PREV_ROTATION];switch(j){case a.MixBlend.setup:c.rotation=c.data.rotation+g*f;break;case a.MixBlend.first:case a.MixBlend.replace:g+=c.data.rotation-c.rotation,g-=(16384-(16384.499999999996-g/360|0))*360;case a.MixBlend.add:c.rotation+=g*f}return}var h=bo.binarySearch(d,i,b.ENTRIES),l=d[h+b.PREV_ROTATION],m=d[h],o=this.getCurvePercent((h>>1)-1,1-(i-m)/(d[h+b.PREV_TIME]-m)),e=d[h+b.ROTATION]-l;switch(e=l+(e-(16384-(16384.499999999996-e/360|0))*360)*o,j){case a.MixBlend.setup:c.rotation=c.data.rotation+(e-(16384-(16384.499999999996-e/360|0))*360)*f;break;case a.MixBlend.first:case a.MixBlend.replace:e+=c.data.rotation-c.rotation;case a.MixBlend.add:c.rotation+=(e-(16384-(16384.499999999996-e/360|0))*360)*f}},b.ENTRIES=2,b.PREV_TIME=-2,b.PREV_ROTATION=-1,b.ROTATION=1,b}(n),O=function(c){function b(a){var d=c.call(this,a)||this;return d.frames=am.newFloatArray(a*b.ENTRIES),d}return di(b,c),b.prototype.getPropertyId=function(){return(G.translate<<24)+this.boneIndex},b.prototype.setFrame=function(a,c,d,e){a*=b.ENTRIES,this.frames[a]=c,this.frames[a+b.X]=d,this.frames[a+b.Y]=e},b.prototype.apply=function(m,n,i,o,e,j,p){var d=this.frames,c=m.bones[this.boneIndex];if(i<d[0]){switch(j){case a.MixBlend.setup:c.x=c.data.x,c.y=c.data.y;break;case a.MixBlend.first:c.x+=(c.data.x-c.x)*e,c.y+=(c.data.y-c.y)*e}return}var f=0,g=0;if(i>=d[d.length-b.ENTRIES])f=d[d.length+b.PREV_X],g=d[d.length+b.PREV_Y];else{var h=bo.binarySearch(d,i,b.ENTRIES);f=d[h+b.PREV_X],g=d[h+b.PREV_Y];var k=d[h],l=this.getCurvePercent(h/b.ENTRIES-1,1-(i-k)/(d[h+b.PREV_TIME]-k));f+=(d[h+b.X]-f)*l,g+=(d[h+b.Y]-g)*l}switch(j){case a.MixBlend.setup:c.x=c.data.x+f*e,c.y=c.data.y+g*e;break;case a.MixBlend.first:case a.MixBlend.replace:c.x+=(c.data.x+f-c.x)*e,c.y+=(c.data.y+g-c.y)*e;break;case a.MixBlend.add:c.x+=f*e,c.y+=g*e}},b.ENTRIES=3,b.PREV_TIME=-3,b.PREV_X=-2,b.PREV_Y=-1,b.X=1,b.Y=2,b}(n),bq=function(c){function b(a){return c.call(this,a)||this}return di(b,c),b.prototype.getPropertyId=function(){return(G.scale<<24)+this.boneIndex},b.prototype.apply=function(o,q,k,r,h,l,p){var i=this.frames,c=o.bones[this.boneIndex];if(k<i[0]){switch(l){case a.MixBlend.setup:c.scaleX=c.data.scaleX,c.scaleY=c.data.scaleY;break;case a.MixBlend.first:c.scaleX+=(c.data.scaleX-c.scaleX)*h,c.scaleY+=(c.data.scaleY-c.scaleY)*h}return}var f=0,g=0;if(k>=i[i.length-b.ENTRIES])f=i[i.length+b.PREV_X]*c.data.scaleX,g=i[i.length+b.PREV_Y]*c.data.scaleY;else{var j=bo.binarySearch(i,k,b.ENTRIES);f=i[j+b.PREV_X],g=i[j+b.PREV_Y];var m=i[j],n=this.getCurvePercent(j/b.ENTRIES-1,1-(k-m)/(i[j+b.PREV_TIME]-m));f=(f+(i[j+b.X]-f)*n)*c.data.scaleX,g=(g+(i[j+b.Y]-g)*n)*c.data.scaleY}if(1==h)l==a.MixBlend.add?(c.scaleX+=f-c.data.scaleX,c.scaleY+=g-c.data.scaleY):(c.scaleX=f,c.scaleY=g);else{var d=0,e=0;if(p==a.MixDirection.mixOut)switch(l){case a.MixBlend.setup:d=c.data.scaleX,e=c.data.scaleY,c.scaleX=d+(Math.abs(f)*ak.signum(d)-d)*h,c.scaleY=e+(Math.abs(g)*ak.signum(e)-e)*h;break;case a.MixBlend.first:case a.MixBlend.replace:d=c.scaleX,e=c.scaleY,c.scaleX=d+(Math.abs(f)*ak.signum(d)-d)*h,c.scaleY=e+(Math.abs(g)*ak.signum(e)-e)*h;break;case a.MixBlend.add:d=c.scaleX,e=c.scaleY,c.scaleX=d+(Math.abs(f)*ak.signum(d)-c.data.scaleX)*h,c.scaleY=e+(Math.abs(g)*ak.signum(e)-c.data.scaleY)*h}else switch(l){case a.MixBlend.setup:d=Math.abs(c.data.scaleX)*ak.signum(f),e=Math.abs(c.data.scaleY)*ak.signum(g),c.scaleX=d+(f-d)*h,c.scaleY=e+(g-e)*h;break;case a.MixBlend.first:case a.MixBlend.replace:d=Math.abs(c.scaleX)*ak.signum(f),e=Math.abs(c.scaleY)*ak.signum(g),c.scaleX=d+(f-d)*h,c.scaleY=e+(g-e)*h;break;case a.MixBlend.add:d=ak.signum(f),e=ak.signum(g),c.scaleX=Math.abs(c.scaleX)*d+(f-Math.abs(c.data.scaleX)*d)*h,c.scaleY=Math.abs(c.scaleY)*e+(g-Math.abs(c.data.scaleY)*e)*h}}},b}(O),br=function(c){function b(a){return c.call(this,a)||this}return di(b,c),b.prototype.getPropertyId=function(){return(G.shear<<24)+this.boneIndex},b.prototype.apply=function(m,n,i,o,e,j,p){var d=this.frames,c=m.bones[this.boneIndex];if(i<d[0]){switch(j){case a.MixBlend.setup:c.shearX=c.data.shearX,c.shearY=c.data.shearY;break;case a.MixBlend.first:c.shearX+=(c.data.shearX-c.shearX)*e,c.shearY+=(c.data.shearY-c.shearY)*e}return}var f=0,g=0;if(i>=d[d.length-b.ENTRIES])f=d[d.length+b.PREV_X],g=d[d.length+b.PREV_Y];else{var h=bo.binarySearch(d,i,b.ENTRIES);f=d[h+b.PREV_X],g=d[h+b.PREV_Y];var k=d[h],l=this.getCurvePercent(h/b.ENTRIES-1,1-(i-k)/(d[h+b.PREV_TIME]-k));f+=(d[h+b.X]-f)*l,g+=(d[h+b.Y]-g)*l}switch(j){case a.MixBlend.setup:c.shearX=c.data.shearX+f*e,c.shearY=c.data.shearY+g*e;break;case a.MixBlend.first:case a.MixBlend.replace:c.shearX+=(c.data.shearX+f-c.shearX)*e,c.shearY+=(c.data.shearY+g-c.shearY)*e;break;case a.MixBlend.add:c.shearX+=f*e,c.shearY+=g*e}},b}(O),bs=function(c){function b(a){var d=c.call(this,a)||this;return d.frames=am.newFloatArray(a*b.ENTRIES),d}return di(b,c),b.prototype.getPropertyId=function(){return(G.color<<24)+this.slotIndex},b.prototype.setFrame=function(a,c,d,e,f,g){a*=b.ENTRIES,this.frames[a]=c,this.frames[a+b.R]=d,this.frames[a+b.G]=e,this.frames[a+b.B]=f,this.frames[a+b.A]=g},b.prototype.apply=function(r,s,l,t,f,p,u){var g=r.slots[this.slotIndex],c=this.frames;if(l<c[0]){switch(p){case a.MixBlend.setup:g.color.setFromColor(g.data.color);break;case a.MixBlend.first:var d=g.color,m=g.data.color;d.add((m.r-d.r)*f,(m.g-d.g)*f,(m.b-d.b)*f,(m.a-d.a)*f)}return}var h=0,i=0,j=0,k=0;if(l>=c[c.length-b.ENTRIES]){var n=c.length;h=c[n+b.PREV_R],i=c[n+b.PREV_G],j=c[n+b.PREV_B],k=c[n+b.PREV_A]}else{var e=bo.binarySearch(c,l,b.ENTRIES);h=c[e+b.PREV_R],i=c[e+b.PREV_G],j=c[e+b.PREV_B],k=c[e+b.PREV_A];var q=c[e],o=this.getCurvePercent(e/b.ENTRIES-1,1-(l-q)/(c[e+b.PREV_TIME]-q));h+=(c[e+b.R]-h)*o,i+=(c[e+b.G]-i)*o,j+=(c[e+b.B]-j)*o,k+=(c[e+b.A]-k)*o}if(1==f)g.color.set(h,i,j,k);else{var d=g.color;p==a.MixBlend.setup&&d.setFromColor(g.data.color),d.add((h-d.r)*f,(i-d.g)*f,(j-d.b)*f,(k-d.a)*f)}},b.ENTRIES=5,b.PREV_TIME=-5,b.PREV_R=-4,b.PREV_G=-3,b.PREV_B=-2,b.PREV_A=-1,b.R=1,b.G=2,b.B=3,b.A=4,b}(n),bt=function(c){function b(a){var d=c.call(this,a)||this;return d.frames=am.newFloatArray(a*b.ENTRIES),d}return di(b,c),b.prototype.getPropertyId=function(){return(G.twoColor<<24)+this.slotIndex},b.prototype.setFrame=function(a,c,d,e,f,g,h,i,j){a*=b.ENTRIES,this.frames[a]=c,this.frames[a+b.R]=d,this.frames[a+b.G]=e,this.frames[a+b.B]=f,this.frames[a+b.A]=g,this.frames[a+b.R2]=h,this.frames[a+b.G2]=i,this.frames[a+b.B2]=j},b.prototype.apply=function(w,x,r,y,e,u,z){var f=w.slots[this.slotIndex],c=this.frames;if(r<c[0]){switch(u){case a.MixBlend.setup:f.color.setFromColor(f.data.color),f.darkColor.setFromColor(f.data.darkColor);break;case a.MixBlend.first:var g=f.color,h=f.darkColor,s=f.data.color,t=f.data.darkColor;g.add((s.r-g.r)*e,(s.g-g.g)*e,(s.b-g.b)*e,(s.a-g.a)*e),h.add((t.r-h.r)*e,(t.g-h.g)*e,(t.b-h.b)*e,0)}return}var k=0,l=0,m=0,n=0,o=0,p=0,q=0;if(r>=c[c.length-b.ENTRIES]){var i=c.length;k=c[i+b.PREV_R],l=c[i+b.PREV_G],m=c[i+b.PREV_B],n=c[i+b.PREV_A],o=c[i+b.PREV_R2],p=c[i+b.PREV_G2],q=c[i+b.PREV_B2]}else{var d=bo.binarySearch(c,r,b.ENTRIES);k=c[d+b.PREV_R],l=c[d+b.PREV_G],m=c[d+b.PREV_B],n=c[d+b.PREV_A],o=c[d+b.PREV_R2],p=c[d+b.PREV_G2],q=c[d+b.PREV_B2];var v=c[d],j=this.getCurvePercent(d/b.ENTRIES-1,1-(r-v)/(c[d+b.PREV_TIME]-v));k+=(c[d+b.R]-k)*j,l+=(c[d+b.G]-l)*j,m+=(c[d+b.B]-m)*j,n+=(c[d+b.A]-n)*j,o+=(c[d+b.R2]-o)*j,p+=(c[d+b.G2]-p)*j,q+=(c[d+b.B2]-q)*j}if(1==e)f.color.set(k,l,m,n),f.darkColor.set(o,p,q,1);else{var g=f.color,h=f.darkColor;u==a.MixBlend.setup&&(g.setFromColor(f.data.color),h.setFromColor(f.data.darkColor)),g.add((k-g.r)*e,(l-g.g)*e,(m-g.b)*e,(n-g.a)*e),h.add((o-h.r)*e,(p-h.g)*e,(q-h.b)*e,0)}},b.ENTRIES=8,b.PREV_TIME=-8,b.PREV_R=-7,b.PREV_G=-6,b.PREV_B=-5,b.PREV_A=-4,b.PREV_R2=-3,b.PREV_G2=-2,b.PREV_B2=-1,b.R=1,b.G=2,b.B=3,b.A=4,b.R2=5,b.G2=6,b.B2=7,b}(n),bu=function(){function b(a){this.frames=am.newFloatArray(a),this.attachmentNames=new Array(a)}return b.prototype.getPropertyId=function(){return(G.attachment<<24)+this.slotIndex},b.prototype.getFrameCount=function(){return this.frames.length},b.prototype.setFrame=function(a,b,c){this.frames[a]=b,this.attachmentNames[a]=c},b.prototype.apply=function(b,l,e,m,n,f,k){var d=b.slots[this.slotIndex];if(k==a.MixDirection.mixOut&&f==a.MixBlend.setup){var g=d.data.attachmentName;d.setAttachment(null==g?null:b.getAttachment(this.slotIndex,g));return}var c=this.frames;if(e<c[0]){if(f==a.MixBlend.setup||f==a.MixBlend.first){var h=d.data.attachmentName;d.setAttachment(null==h?null:b.getAttachment(this.slotIndex,h))}return}var i=0;i=e>=c[c.length-1]?c.length-1:bo.binarySearch(c,e,1)-1;var j=this.attachmentNames[i];b.slots[this.slotIndex].setAttachment(null==j?null:b.getAttachment(this.slotIndex,j))},b}(),dj=null,bv=function(c){function b(a){var b=c.call(this,a)||this;return b.frames=am.newFloatArray(a),b.frameVertices=new Array(a),null==dj&&(dj=am.newFloatArray(64)),b}return di(b,c),b.prototype.getPropertyId=function(){return(G.deform<<27)+ +this.attachment.id+this.slotIndex},b.prototype.setFrame=function(a,b,c){this.frames[a]=b,this.frameVertices[a]=c},b.prototype.apply=function(A,B,s,C,f,o,D){var w=A.slots[this.slotIndex],i=w.getAttachment();if(i instanceof u&&i.applyDeform(this.attachment)){var p=w.attachmentVertices;0==p.length&&(o=a.MixBlend.setup);var t=this.frameVertices,d=t[0].length,n=this.frames;if(s<n[0]){var g=i;switch(o){case a.MixBlend.setup:p.length=0;break;case a.MixBlend.first:if(1==f){p.length=0;break}var v=am.setArraySize(p,d);if(null==g.bones)for(var h=g.vertices,b=0;b<d;b++)v[b]+=(h[b]-v[b])*f;else{f=1-f;for(var b=0;b<d;b++)v[b]*=f}}return}var e=am.setArraySize(p,d);if(s>=n[n.length-1]){var j=t[n.length-1];if(1==f){if(o==a.MixBlend.add){var g=i;if(null==g.bones)for(var h=g.vertices,b=0;b<d;b++)e[b]+=j[b]-h[b];else for(var b=0;b<d;b++)e[b]+=j[b]}else am.arrayCopy(j,0,e,0,d)}else switch(o){case a.MixBlend.setup:var x=i;if(null==x.bones)for(var h=x.vertices,b=0;b<d;b++){var q=h[b];e[b]=q+(j[b]-q)*f}else for(var b=0;b<d;b++)e[b]=j[b]*f;break;case a.MixBlend.first:case a.MixBlend.replace:for(var b=0;b<d;b++)e[b]+=(j[b]-e[b])*f;case a.MixBlend.add:var g=i;if(null==g.bones)for(var h=g.vertices,b=0;b<d;b++)e[b]+=(j[b]-h[b])*f;else for(var b=0;b<d;b++)e[b]+=j[b]*f}return}var r=bo.binarySearch(n,s),k=t[r-1],l=t[r],y=n[r],m=this.getCurvePercent(r-1,1-(s-y)/(n[r-1]-y));if(1==f){if(o==a.MixBlend.add){var g=i;if(null==g.bones)for(var h=g.vertices,b=0;b<d;b++){var c=k[b];e[b]+=c+(l[b]-c)*m-h[b]}else for(var b=0;b<d;b++){var c=k[b];e[b]+=c+(l[b]-c)*m}}else for(var b=0;b<d;b++){var c=k[b];e[b]=c+(l[b]-c)*m}}else switch(o){case a.MixBlend.setup:var z=i;if(null==z.bones)for(var h=z.vertices,b=0;b<d;b++){var c=k[b],q=h[b];e[b]=q+(c+(l[b]-c)*m-q)*f}else for(var b=0;b<d;b++){var c=k[b];e[b]=(c+(l[b]-c)*m)*f}break;case a.MixBlend.first:case a.MixBlend.replace:for(var b=0;b<d;b++){var c=k[b];e[b]+=(c+(l[b]-c)*m-e[b])*f}break;case a.MixBlend.add:var g=i;if(null==g.bones)for(var h=g.vertices,b=0;b<d;b++){var c=k[b];e[b]+=(c+(l[b]-c)*m-h[b])*f}else for(var b=0;b<d;b++){var c=k[b];e[b]+=(c+(l[b]-c)*m)*f}}}},b}(n),bw=function(){function a(a){this.frames=am.newFloatArray(a),this.events=new Array(a)}return a.prototype.getPropertyId=function(){return G.event<<24},a.prototype.getFrameCount=function(){return this.frames.length},a.prototype.setFrame=function(a,b){this.frames[a]=b.time,this.events[a]=b},a.prototype.apply=function(g,c,d,e,h,i,j){if(null!=e){var b=this.frames,f=this.frames.length;if(c>d)this.apply(g,c,Number.MAX_VALUE,e,h,i,j),c=-1;else if(c>=b[f-1])return;if(!(d<b[0])){var a=0;if(c<b[0])a=0;else{a=bo.binarySearch(b,c);for(var k=b[a];a>0&&b[a-1]==k;)a--}for(;a<f&&d>=b[a];a++)e.push(this.events[a])}}},a}(),bx=function(){function b(a){this.frames=am.newFloatArray(a),this.drawOrders=new Array(a)}return b.prototype.getPropertyId=function(){return G.drawOrder<<24},b.prototype.getFrameCount=function(){return this.frames.length},b.prototype.setFrame=function(a,b,c){this.frames[a]=b,this.drawOrders[a]=c},b.prototype.apply=function(b,m,e,n,o,f,k){var i=b.drawOrder,g=b.slots;if(k==a.MixDirection.mixOut&&f==a.MixBlend.setup){am.arrayCopy(b.slots,0,b.drawOrder,0,b.slots.length);return}var c=this.frames;if(e<c[0]){(f==a.MixBlend.setup||f==a.MixBlend.first)&&am.arrayCopy(b.slots,0,b.drawOrder,0,b.slots.length);return}var j=0;j=e>=c[c.length-1]?c.length-1:bo.binarySearch(c,e)-1;var h=this.drawOrders[j];if(null==h)am.arrayCopy(g,0,i,0,g.length);else for(var d=0,l=h.length;d<l;d++)i[d]=g[h[d]]},b}(),by=function(c){function b(a){var d=c.call(this,a)||this;return d.frames=am.newFloatArray(a*b.ENTRIES),d}return di(b,c),b.prototype.getPropertyId=function(){return(G.ikConstraint<<24)+this.ikConstraintIndex},b.prototype.setFrame=function(a,c,d,e,f,g){a*=b.ENTRIES,this.frames[a]=c,this.frames[a+b.MIX]=d,this.frames[a+b.BEND_DIRECTION]=e,this.frames[a+b.COMPRESS]=f?1:0,this.frames[a+b.STRETCH]=g?1:0},b.prototype.apply=function(m,n,g,o,f,j,h){var d=this.frames,c=m.ikConstraints[this.ikConstraintIndex];if(g<d[0]){switch(j){case a.MixBlend.setup:c.mix=c.data.mix,c.bendDirection=c.data.bendDirection,c.compress=c.data.compress,c.stretch=c.data.stretch;break;case a.MixBlend.first:c.mix+=(c.data.mix-c.mix)*f,c.bendDirection=c.data.bendDirection,c.compress=c.data.compress,c.stretch=c.data.stretch}return}if(g>=d[d.length-b.ENTRIES]){j==a.MixBlend.setup?(c.mix=c.data.mix+(d[d.length+b.PREV_MIX]-c.data.mix)*f,h==a.MixDirection.mixOut?(c.bendDirection=c.data.bendDirection,c.compress=c.data.compress,c.stretch=c.data.stretch):(c.bendDirection=d[d.length+b.PREV_BEND_DIRECTION],c.compress=0!=d[d.length+b.PREV_COMPRESS],c.stretch=0!=d[d.length+b.PREV_STRETCH])):(c.mix+=(d[d.length+b.PREV_MIX]-c.mix)*f,h==a.MixDirection.mixIn&&(c.bendDirection=d[d.length+b.PREV_BEND_DIRECTION],c.compress=0!=d[d.length+b.PREV_COMPRESS],c.stretch=0!=d[d.length+b.PREV_STRETCH]));return}var e=bo.binarySearch(d,g,b.ENTRIES),i=d[e+b.PREV_MIX],k=d[e],l=this.getCurvePercent(e/b.ENTRIES-1,1-(g-k)/(d[e+b.PREV_TIME]-k));j==a.MixBlend.setup?(c.mix=c.data.mix+(i+(d[e+b.MIX]-i)*l-c.data.mix)*f,h==a.MixDirection.mixOut?(c.bendDirection=c.data.bendDirection,c.compress=c.data.compress,c.stretch=c.data.stretch):(c.bendDirection=d[e+b.PREV_BEND_DIRECTION],c.compress=0!=d[e+b.PREV_COMPRESS],c.stretch=0!=d[e+b.PREV_STRETCH])):(c.mix+=(i+(d[e+b.MIX]-i)*l-c.mix)*f,h==a.MixDirection.mixIn&&(c.bendDirection=d[e+b.PREV_BEND_DIRECTION],c.compress=0!=d[e+b.PREV_COMPRESS],c.stretch=0!=d[e+b.PREV_STRETCH]))},b.ENTRIES=5,b.PREV_TIME=-5,b.PREV_MIX=-4,b.PREV_BEND_DIRECTION=-3,b.PREV_COMPRESS=-2,b.PREV_STRETCH=-1,b.MIX=1,b.BEND_DIRECTION=2,b.COMPRESS=3,b.STRETCH=4,b}(n),bz=function(c){function b(a){var d=c.call(this,a)||this;return d.frames=am.newFloatArray(a*b.ENTRIES),d}return di(b,c),b.prototype.getPropertyId=function(){return(G.transformConstraint<<24)+this.transformConstraintIndex},b.prototype.setFrame=function(a,c,d,e,f,g){a*=b.ENTRIES,this.frames[a]=c,this.frames[a+b.ROTATE]=d,this.frames[a+b.TRANSLATE]=e,this.frames[a+b.SCALE]=f,this.frames[a+b.SHEAR]=g},b.prototype.apply=function(q,r,l,s,f,o,t){var d=this.frames,c=q.transformConstraints[this.transformConstraintIndex];if(l<d[0]){var e=c.data;switch(o){case a.MixBlend.setup:c.rotateMix=e.rotateMix,c.translateMix=e.translateMix,c.scaleMix=e.scaleMix,c.shearMix=e.shearMix;break;case a.MixBlend.first:c.rotateMix+=(e.rotateMix-c.rotateMix)*f,c.translateMix+=(e.translateMix-c.translateMix)*f,c.scaleMix+=(e.scaleMix-c.scaleMix)*f,c.shearMix+=(e.shearMix-c.shearMix)*f}return}var h=0,i=0,j=0,k=0;if(l>=d[d.length-b.ENTRIES]){var m=d.length;h=d[m+b.PREV_ROTATE],i=d[m+b.PREV_TRANSLATE],j=d[m+b.PREV_SCALE],k=d[m+b.PREV_SHEAR]}else{var g=bo.binarySearch(d,l,b.ENTRIES);h=d[g+b.PREV_ROTATE],i=d[g+b.PREV_TRANSLATE],j=d[g+b.PREV_SCALE],k=d[g+b.PREV_SHEAR];var p=d[g],n=this.getCurvePercent(g/b.ENTRIES-1,1-(l-p)/(d[g+b.PREV_TIME]-p));h+=(d[g+b.ROTATE]-h)*n,i+=(d[g+b.TRANSLATE]-i)*n,j+=(d[g+b.SCALE]-j)*n,k+=(d[g+b.SHEAR]-k)*n}if(o==a.MixBlend.setup){var e=c.data;c.rotateMix=e.rotateMix+(h-e.rotateMix)*f,c.translateMix=e.translateMix+(i-e.translateMix)*f,c.scaleMix=e.scaleMix+(j-e.scaleMix)*f,c.shearMix=e.shearMix+(k-e.shearMix)*f}else c.rotateMix+=(h-c.rotateMix)*f,c.translateMix+=(i-c.translateMix)*f,c.scaleMix+=(j-c.scaleMix)*f,c.shearMix+=(k-c.shearMix)*f},b.ENTRIES=5,b.PREV_TIME=-5,b.PREV_ROTATE=-4,b.PREV_TRANSLATE=-3,b.PREV_SCALE=-2,b.PREV_SHEAR=-1,b.ROTATE=1,b.TRANSLATE=2,b.SCALE=3,b.SHEAR=4,b}(n),W=function(c){function b(a){var d=c.call(this,a)||this;return d.frames=am.newFloatArray(a*b.ENTRIES),d}return di(b,c),b.prototype.getPropertyId=function(){return(G.pathConstraintPosition<<24)+this.pathConstraintIndex},b.prototype.setFrame=function(a,c,d){a*=b.ENTRIES,this.frames[a]=c,this.frames[a+b.VALUE]=d},b.prototype.apply=function(k,m,g,n,h,i,o){var c=this.frames,d=k.pathConstraints[this.pathConstraintIndex];if(g<c[0]){switch(i){case a.MixBlend.setup:d.position=d.data.position;break;case a.MixBlend.first:d.position+=(d.data.position-d.position)*h}return}var e=0;if(g>=c[c.length-b.ENTRIES])e=c[c.length+b.PREV_VALUE];else{var f=bo.binarySearch(c,g,b.ENTRIES);e=c[f+b.PREV_VALUE];var j=c[f],l=this.getCurvePercent(f/b.ENTRIES-1,1-(g-j)/(c[f+b.PREV_TIME]-j));e+=(c[f+b.VALUE]-e)*l}i==a.MixBlend.setup?d.position=d.data.position+(e-d.data.position)*h:d.position+=(e-d.position)*h},b.ENTRIES=2,b.PREV_TIME=-2,b.PREV_VALUE=-1,b.VALUE=1,b}(n),bA=function(c){function b(a){return c.call(this,a)||this}return di(b,c),b.prototype.getPropertyId=function(){return(G.pathConstraintSpacing<<24)+this.pathConstraintIndex},b.prototype.apply=function(k,m,g,n,h,i,o){var c=this.frames,d=k.pathConstraints[this.pathConstraintIndex];if(g<c[0]){switch(i){case a.MixBlend.setup:d.spacing=d.data.spacing;break;case a.MixBlend.first:d.spacing+=(d.data.spacing-d.spacing)*h}return}var e=0;if(g>=c[c.length-b.ENTRIES])e=c[c.length+b.PREV_VALUE];else{var f=bo.binarySearch(c,g,b.ENTRIES);e=c[f+b.PREV_VALUE];var j=c[f],l=this.getCurvePercent(f/b.ENTRIES-1,1-(g-j)/(c[f+b.PREV_TIME]-j));e+=(c[f+b.VALUE]-e)*l}i==a.MixBlend.setup?d.spacing=d.data.spacing+(e-d.data.spacing)*h:d.spacing+=(e-d.spacing)*h},b}(W),bB=function(c){function b(a){var d=c.call(this,a)||this;return d.frames=am.newFloatArray(a*b.ENTRIES),d}return di(b,c),b.prototype.getPropertyId=function(){return(G.pathConstraintMix<<24)+this.pathConstraintIndex},b.prototype.setFrame=function(a,c,d,e){a*=b.ENTRIES,this.frames[a]=c,this.frames[a+b.ROTATE]=d,this.frames[a+b.TRANSLATE]=e},b.prototype.apply=function(m,n,i,o,f,j,p){var d=this.frames,c=m.pathConstraints[this.pathConstraintIndex];if(i<d[0]){switch(j){case a.MixBlend.setup:c.rotateMix=c.data.rotateMix,c.translateMix=c.data.translateMix;break;case a.MixBlend.first:c.rotateMix+=(c.data.rotateMix-c.rotateMix)*f,c.translateMix+=(c.data.translateMix-c.translateMix)*f}return}var g=0,h=0;if(i>=d[d.length-b.ENTRIES])g=d[d.length+b.PREV_ROTATE],h=d[d.length+b.PREV_TRANSLATE];else{var e=bo.binarySearch(d,i,b.ENTRIES);g=d[e+b.PREV_ROTATE],h=d[e+b.PREV_TRANSLATE];var k=d[e],l=this.getCurvePercent(e/b.ENTRIES-1,1-(i-k)/(d[e+b.PREV_TIME]-k));g+=(d[e+b.ROTATE]-g)*l,h+=(d[e+b.TRANSLATE]-h)*l}j==a.MixBlend.setup?(c.rotateMix=c.data.rotateMix+(g-c.data.rotateMix)*f,c.translateMix=c.data.translateMix+(h-c.data.translateMix)*f):(c.rotateMix+=(g-c.rotateMix)*f,c.translateMix+=(h-c.translateMix)*f)},b.ENTRIES=3,b.PREV_TIME=-3,b.PREV_ROTATE=-2,b.PREV_TRANSLATE=-1,b.ROTATE=1,b.TRANSLATE=2,b}(n),bC=function(){function b(a){this.tracks=new Array,this.events=new Array,this.listeners=new Array,this.queue=new bE(this),this.propertyIDs=new ah,this.animationsChanged=!1,this.timeScale=1,this.trackEntryPool=new ao(function(){return new bD}),this.data=a}return b.prototype.update=function(d){d*=this.timeScale;for(var g=this.tracks,e=0,i=g.length;e<i;e++){var a=g[e];if(null!=a){a.animationLast=a.nextAnimationLast,a.trackLast=a.nextTrackLast;var f=d*a.timeScale;if(a.delay>0){if(a.delay-=f,a.delay>0)continue;f=-a.delay,a.delay=0}var b=a.next;if(null!=b){var h=a.trackLast-b.delay;if(h>=0){for(b.delay=0,b.trackTime=0==a.timeScale?0:(h/a.timeScale+d)*b.timeScale,a.trackTime+=f,this.setCurrent(e,b,!0);null!=b.mixingFrom;)b.mixTime+=d,b=b.mixingFrom;continue}}else if(a.trackLast>=a.trackEnd&&null==a.mixingFrom){g[e]=null,this.queue.end(a),this.disposeNext(a);continue}if(null!=a.mixingFrom&&this.updateMixingFrom(a,d)){var c=a.mixingFrom;for(a.mixingFrom=null,null!=c&&(c.mixingTo=null);null!=c;)this.queue.end(c),c=c.mixingFrom}a.trackTime+=f}}this.queue.drain()},b.prototype.updateMixingFrom=function(b,c){var a=b.mixingFrom;if(null==a)return!0;var d=this.updateMixingFrom(a,c);return(a.animationLast=a.nextAnimationLast,a.trackLast=a.nextTrackLast,b.mixTime>0&&b.mixTime>=b.mixDuration)?((0==a.totalAlpha||0==b.mixDuration)&&(b.mixingFrom=a.mixingFrom,null!=a.mixingFrom&&(a.mixingFrom.mixingTo=b),b.interruptAlpha=a.interruptAlpha,this.queue.end(a)),d):(a.trackTime+=c*a.timeScale,b.mixTime+=c,!1)},b.prototype.apply=function(g){if(null==g)throw new Error("skeleton cannot be null.");this.animationsChanged&&this._animationsChanged();for(var j=this.events,m=this.tracks,n=!1,h=0,s=m.length;h<s;h++){var c=m[h];if(null!=c&&!(c.delay>0)){n=!0;var f=0==h?a.MixBlend.first:c.mixBlend,e=c.alpha;null!=c.mixingFrom?e*=this.applyMixingFrom(c,g,f):c.trackTime>=c.trackEnd&&null==c.next&&(e=0);var o=c.animationLast,i=c.getAnimationTime(),k=c.animation.timelines.length,p=c.animation.timelines;if(0==h&&1==e||f==a.MixBlend.add)for(var d=0;d<k;d++)am.webkit602BugfixHelper(e,f),p[d].apply(g,o,i,j,e,f,a.MixDirection.mixIn);else{var t=c.timelineMode,q=0==c.timelinesRotation.length;q&&am.setArraySize(c.timelinesRotation,k<<1,null);for(var u=c.timelinesRotation,d=0;d<k;d++){var l=p[d],r=t[d]==b.SUBSEQUENT?f:a.MixBlend.setup;l instanceof bp?this.applyRotateTimeline(l,g,i,e,r,u,d<<1,q):(am.webkit602BugfixHelper(e,f),l.apply(g,o,i,j,e,r,a.MixDirection.mixIn))}}this.queueEvents(c,i),j.length=0,c.nextAnimationLast=i,c.nextTrackLast=c.trackTime}}return this.queue.drain(),n},b.prototype.applyMixingFrom=function(j,l,e){var c=j.mixingFrom;null!=c.mixingFrom&&this.applyMixingFrom(c,l,e);var f=0;0==j.mixDuration?(f=1,e==a.MixBlend.first&&(e=a.MixBlend.setup)):((f=j.mixTime/j.mixDuration)>1&&(f=1),e!=a.MixBlend.first&&(e=c.mixBlend));var q=f<c.eventThreshold?this.events:null,r=f<c.attachmentThreshold,s=f<c.drawOrderThreshold,t=c.animationLast,k=c.getAnimationTime(),m=c.animation.timelines.length,u=c.animation.timelines,n=c.alpha*j.interruptAlpha,o=n*(1-f);if(e==a.MixBlend.add)for(var d=0;d<m;d++)u[d].apply(l,t,k,q,o,e,a.MixDirection.mixOut);else{var x=c.timelineMode,y=c.timelineHoldMix,v=0==c.timelinesRotation.length;v&&am.setArraySize(c.timelinesRotation,m<<1,null);var z=c.timelinesRotation;c.totalAlpha=0;for(var d=0;d<m;d++){var h=u[d],p=a.MixDirection.mixOut,i=void 0,g=0;switch(x[d]){case b.SUBSEQUENT:if(!r&&h instanceof bu|| !s&&h instanceof bx)continue;i=e,g=o;break;case b.FIRST:i=a.MixBlend.setup,g=o;break;case b.HOLD:i=a.MixBlend.setup,g=n;break;default:i=a.MixBlend.setup;var w=y[d];g=n*Math.max(0,1-w.mixTime/w.mixDuration)}c.totalAlpha+=g,h instanceof bp?this.applyRotateTimeline(h,l,k,g,i,z,d<<1,v):(am.webkit602BugfixHelper(g,e),i==a.MixBlend.setup&&(h instanceof bu?r&&(p=a.MixDirection.mixOut):h instanceof bx&&s&&(p=a.MixDirection.mixOut)),h.apply(l,t,k,q,g,i,p))}}return j.mixDuration>0&&this.queueEvents(c,k),this.events.length=0,c.nextAnimationLast=k,c.nextTrackLast=c.trackTime,f},b.prototype.applyRotateTimeline=function(p,q,j,r,n,g,h,s){if(s&&(g[h]=0),1==r){p.apply(q,0,j,null,1,n,a.MixDirection.mixIn);return}var o=p,b=o.frames,d=q.bones[o.boneIndex],i=0,c=0;if(j<b[0])switch(n){case a.MixBlend.setup:d.rotation=d.data.rotation;default:return;case a.MixBlend.first:i=d.rotation,c=d.data.rotation}else if(i=n==a.MixBlend.setup?d.data.rotation:d.rotation,j>=b[b.length-bp.ENTRIES])c=d.data.rotation+b[b.length+bp.PREV_ROTATION];else{var k=bo.binarySearch(b,j,bp.ENTRIES),t=b[k+bp.PREV_ROTATION],u=b[k],x=o.getCurvePercent((k>>1)-1,1-(j-u)/(b[k+bp.PREV_TIME]-u));c=b[k+bp.ROTATION]-t,c-=(16384-(16384.499999999996-c/360|0))*360,c=t+c*x+d.data.rotation,c-=(16384-(16384.499999999996-c/360|0))*360}var l=0,f=c-i;if(0==(f-=(16384-(16384.499999999996-f/360|0))*360))l=g[h];else{var e=0,m=0;s?(e=0,m=f):(e=g[h],m=g[h+1]);var v=f>0,w=e>=0;ak.signum(m)!=ak.signum(f)&&90>=Math.abs(m)&&(Math.abs(e)>180&&(e+=360*ak.signum(e)),w=v),l=f+e-e%360,w!=v&&(l+=360*ak.signum(e)),g[h]=l}g[h+1]=f,i+=l*r,d.rotation=i-(16384-(16384.499999999996-i/360|0))*360},b.prototype.queueEvents=function(a,j){for(var g=a.animationStart,c=a.animationEnd,e=c-g,h=a.trackLast%e,d=this.events,b=0,i=d.length;b<i;b++){var f=d[b];if(f.time<h)break;f.time>c||this.queue.event(a,f)}for((a.loop?0==e||h>a.trackTime%e:j>=c&&a.animationLast<c)&&this.queue.complete(a);b<i;b++)d[b].time<g||this.queue.event(a,d[b])},b.prototype.clearTracks=function(){var b=this.queue.drainDisabled;this.queue.drainDisabled=!0;for(var a=0,c=this.tracks.length;a<c;a++)this.clearTrack(a);this.tracks.length=0,this.queue.drainDisabled=b,this.queue.drain()},b.prototype.clearTrack=function(d){if(!(d>=this.tracks.length)){var a=this.tracks[d];if(null!=a){this.queue.end(a),this.disposeNext(a);for(var b=a;;){var c=b.mixingFrom;if(null==c)break;this.queue.end(c),b.mixingFrom=null,b.mixingTo=null,b=c}this.tracks[a.trackIndex]=null,this.queue.drain()}}},b.prototype.setCurrent=function(c,b,d){var a=this.expandToIndex(c);this.tracks[c]=b,null!=a&&(d&&this.queue.interrupt(a),b.mixingFrom=a,a.mixingTo=b,b.mixTime=0,null!=a.mixingFrom&&a.mixDuration>0&&(b.interruptAlpha*=Math.min(1,a.mixTime/a.mixDuration)),a.timelinesRotation.length=0),this.queue.start(b)},b.prototype.setAnimation=function(c,a,d){var b=this.data.skeletonData.findAnimation(a);if(null==b)throw new Error("Animation not found: "+a);return this.setAnimationWith(c,b,d)},b.prototype.setAnimationWith=function(b,c,f){if(null==c)throw new Error("animation cannot be null.");var d=!0,a=this.expandToIndex(b);null!=a&&(-1==a.nextTrackLast?(this.tracks[b]=a.mixingFrom,this.queue.interrupt(a),this.queue.end(a),this.disposeNext(a),a=a.mixingFrom,d=!1):this.disposeNext(a));var e=this.trackEntry(b,c,f,a);return this.setCurrent(b,e,d),this.queue.drain(),e},b.prototype.addAnimation=function(c,a,d,e){var b=this.data.skeletonData.findAnimation(a);if(null==b)throw new Error("Animation not found: "+a);return this.addAnimationWith(c,b,d,e)},b.prototype.addAnimationWith=function(e,f,g,b){if(null==f)throw new Error("animation cannot be null.");var a=this.expandToIndex(e);if(null!=a)for(;null!=a.next;)a=a.next;var c=this.trackEntry(e,f,g,a);if(null==a)this.setCurrent(e,c,!0),this.queue.drain();else if(a.next=c,b<=0){var d=a.animationEnd-a.animationStart;0!=d?(a.loop?b+=d*(1+(a.trackTime/d|0)):b+=Math.max(d,a.trackTime),b-=this.data.getMix(a.animation,f)):b=a.trackTime}return c.delay=b,c},b.prototype.setEmptyAnimation=function(d,c){var a=this.setAnimationWith(d,b.emptyAnimation,!1);return a.mixDuration=c,a.trackEnd=c,a},b.prototype.addEmptyAnimation=function(e,a,c){c<=0&&(c-=a);var d=this.addAnimationWith(e,b.emptyAnimation,!1,c);return d.mixDuration=a,d.trackEnd=a,d},b.prototype.setEmptyAnimations=function(c){var d=this.queue.drainDisabled;this.queue.drainDisabled=!0;for(var a=0,e=this.tracks.length;a<e;a++){var b=this.tracks[a];null!=b&&this.setEmptyAnimation(b.trackIndex,c)}this.queue.drainDisabled=d,this.queue.drain()},b.prototype.expandToIndex=function(a){return a<this.tracks.length?this.tracks[a]:(am.ensureArrayCapacity(this.tracks,a-this.tracks.length+1,null),this.tracks.length=a+1,null)},b.prototype.trackEntry=function(d,b,e,c){var a=this.trackEntryPool.obtain();return a.trackIndex=d,a.animation=b,a.loop=e,a.holdPrevious=!1,a.eventThreshold=0,a.attachmentThreshold=0,a.drawOrderThreshold=0,a.animationStart=0,a.animationEnd=b.duration,a.animationLast=-1,a.nextAnimationLast=-1,a.delay=0,a.trackTime=0,a.trackLast=-1,a.nextTrackLast=-1,a.trackEnd=Number.MAX_VALUE,a.timeScale=1,a.alpha=1,a.interruptAlpha=1,a.mixTime=0,a.mixDuration=null==c?0:this.data.getMix(c.animation,b),a},b.prototype.disposeNext=function(b){for(var a=b.next;null!=a;)this.queue.dispose(a),a=a.next;b.next=null},b.prototype._animationsChanged=function(){this.animationsChanged=!1,this.propertyIDs.clear();for(var c=0,d=this.tracks.length;c<d;c++){var b=this.tracks[c];if(null!=b){for(;null!=b.mixingFrom;)b=b.mixingFrom;do(null==b.mixingFrom||b.mixBlend!=a.MixBlend.add)&&this.setTimelineModes(b),b=b.mixingTo;while(null!=b)}}},b.prototype.setTimelineModes=function(c){var d=c.mixingTo,i=c.animation.timelines,g=c.animation.timelines.length,e=am.setArraySize(c.timelineMode,g);c.timelineHoldMix.length=0;var k=am.setArraySize(c.timelineHoldMix,g),j=this.propertyIDs;if(null!=d&&d.holdPrevious){for(var a=0;a<g;a++)j.add(i[a].getPropertyId()),e[a]=b.HOLD;return}outer:for(var a=0;a<g;a++){var h=i[a].getPropertyId();if(j.add(h)){if(null!=d&&this.hasTimeline(d,h)){for(var f=d.mixingTo;null!=f;f=f.mixingTo)if(!this.hasTimeline(f,h)){if(c.mixDuration>0){e[a]=b.HOLD_MIX,k[a]=f;continue outer}break}e[a]=b.HOLD}else e[a]=b.FIRST}else e[a]=b.SUBSEQUENT}},b.prototype.hasTimeline=function(c,d){for(var b=c.animation.timelines,a=0,e=b.length;a<e;a++)if(b[a].getPropertyId()==d)return!0;return!1},b.prototype.getCurrent=function(a){return a>=this.tracks.length?null:this.tracks[a]},b.prototype.addListener=function(a){if(null==a)throw new Error("listener cannot be null.");this.listeners.push(a)},b.prototype.removeListener=function(b){var a=this.listeners.indexOf(b);a>=0&&this.listeners.splice(a,1)},b.prototype.clearListeners=function(){this.listeners.length=0},b.prototype.clearListenerNotifications=function(){this.queue.clear()},b.prototype.setAnimationByName=function(a,c,d){b.deprecatedWarning1||(b.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: AnimationState.setAnimationByName is deprecated, please use setAnimation from now on.")),this.setAnimation(a,c,d)},b.prototype.addAnimationByName=function(a,c,d,e){b.deprecatedWarning2||(b.deprecatedWarning2=!0,console.warn("Spine Deprecation Warning: AnimationState.addAnimationByName is deprecated, please use addAnimation from now on.")),this.addAnimation(a,c,d,e)},b.prototype.hasAnimation=function(a){return null!==this.data.skeletonData.findAnimation(a)},b.prototype.hasAnimationByName=function(a){return b.deprecatedWarning3||(b.deprecatedWarning3=!0,console.warn("Spine Deprecation Warning: AnimationState.hasAnimationByName is deprecated, please use hasAnimation from now on.")),this.hasAnimation(a)},b.emptyAnimation=new bo("<empty>",[],0),b.SUBSEQUENT=0,b.FIRST=1,b.HOLD=2,b.HOLD_MIX=3,b.deprecatedWarning1=!1,b.deprecatedWarning2=!1,b.deprecatedWarning3=!1,b}(),bD=function(){function b(){this.mixBlend=a.MixBlend.replace,this.timelineMode=new Array,this.timelineHoldMix=new Array,this.timelinesRotation=new Array}return b.prototype.reset=function(){this.next=null,this.mixingFrom=null,this.mixingTo=null,this.animation=null,this.listener=null,this.timelineMode.length=0,this.timelineHoldMix.length=0,this.timelinesRotation.length=0},b.prototype.getAnimationTime=function(){if(this.loop){var a=this.animationEnd-this.animationStart;return 0==a?this.animationStart:this.trackTime%a+this.animationStart}return Math.min(this.trackTime+this.animationStart,this.animationEnd)},b.prototype.setAnimationLast=function(a){this.animationLast=a,this.nextAnimationLast=a},b.prototype.isComplete=function(){return this.trackTime>=this.animationEnd-this.animationStart},b.prototype.resetRotationDirections=function(){this.timelinesRotation.length=0},Object.defineProperty(b.prototype,"time",{get:function(){return b.deprecatedWarning1||(b.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: TrackEntry.time is deprecated, please use trackTime from now on.")),this.trackTime},set:function(a){b.deprecatedWarning1||(b.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: TrackEntry.time is deprecated, please use trackTime from now on.")),this.trackTime=a},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"endTime",{get:function(){return b.deprecatedWarning2||(b.deprecatedWarning2=!0,console.warn("Spine Deprecation Warning: TrackEntry.endTime is deprecated, please use trackEnd from now on.")),this.trackTime},set:function(a){b.deprecatedWarning2||(b.deprecatedWarning2=!0,console.warn("Spine Deprecation Warning: TrackEntry.endTime is deprecated, please use trackEnd from now on.")),this.trackTime=a},enumerable:!1,configurable:!0}),b.prototype.loopsCount=function(){return Math.floor(this.trackTime/this.trackEnd)},b.deprecatedWarning1=!1,b.deprecatedWarning2=!1,b}(),bE=function(){function a(a){this.objects=[],this.drainDisabled=!1,this.animState=a}return a.prototype.start=function(a){this.objects.push(H.start),this.objects.push(a),this.animState.animationsChanged=!0},a.prototype.interrupt=function(a){this.objects.push(H.interrupt),this.objects.push(a)},a.prototype.end=function(a){this.objects.push(H.end),this.objects.push(a),this.animState.animationsChanged=!0},a.prototype.dispose=function(a){this.objects.push(H.dispose),this.objects.push(a)},a.prototype.complete=function(a){this.objects.push(H.complete),this.objects.push(a)},a.prototype.event=function(a,b){this.objects.push(H.event),this.objects.push(a),this.objects.push(b)},a.prototype.deprecateStuff=function(){return a.deprecatedWarning1||(a.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: onComplete, onStart, onEnd, onEvent art deprecated, please use listeners from now on. 'state.addListener({ complete: function(track, event) { } })'")),!0},a.prototype.drain=function(){if(!this.drainDisabled){this.drainDisabled=!0;for(var e=this.objects,c=this.animState.listeners,d=0;d<e.length;d+=2){var h=e[d],a=e[d+1];switch(h){case H.start:null!=a.listener&&a.listener.start&&a.listener.start(a);for(var b=0;b<c.length;b++)c[b].start&&c[b].start(a);a.onStart&&this.deprecateStuff()&&a.onStart(a.trackIndex),this.animState.onStart&&this.deprecateStuff()&&this.deprecateStuff&&this.animState.onStart(a.trackIndex);break;case H.interrupt:null!=a.listener&&a.listener.interrupt&&a.listener.interrupt(a);for(var b=0;b<c.length;b++)c[b].interrupt&&c[b].interrupt(a);break;case H.end:null!=a.listener&&a.listener.end&&a.listener.end(a);for(var b=0;b<c.length;b++)c[b].end&&c[b].end(a);a.onEnd&&this.deprecateStuff()&&a.onEnd(a.trackIndex),this.animState.onEnd&&this.deprecateStuff()&&this.animState.onEnd(a.trackIndex);case H.dispose:null!=a.listener&&a.listener.dispose&&a.listener.dispose(a);for(var b=0;b<c.length;b++)c[b].dispose&&c[b].dispose(a);this.animState.trackEntryPool.free(a);break;case H.complete:null!=a.listener&&a.listener.complete&&a.listener.complete(a);for(var b=0;b<c.length;b++)c[b].complete&&c[b].complete(a);var g=ak.toInt(a.loopsCount());a.onComplete&&this.deprecateStuff()&&a.onComplete(a.trackIndex,g),this.animState.onComplete&&this.deprecateStuff()&&this.animState.onComplete(a.trackIndex,g);break;case H.event:var f=e[(d++)+2];null!=a.listener&&a.listener.event&&a.listener.event(a,f);for(var b=0;b<c.length;b++)c[b].event&&c[b].event(a,f);a.onEvent&&this.deprecateStuff()&&a.onEvent(a.trackIndex,f),this.animState.onEvent&&this.deprecateStuff()&&this.animState.onEvent(a.trackIndex,f)}}this.clear(),this.drainDisabled=!1}},a.prototype.clear=function(){this.objects.length=0},a.deprecatedWarning1=!1,a}();(f=H||(H={}))[f.start=0]="start",f[f.interrupt=1]="interrupt",f[f.end=2]="end",f[f.dispose=3]="dispose",f[f.complete=4]="complete",f[f.event=5]="event";var v,bF=function(){function a(){}return a.prototype.start=function(a){},a.prototype.interrupt=function(a){},a.prototype.end=function(a){},a.prototype.dispose=function(a){},a.prototype.complete=function(a){},a.prototype.event=function(a,b){},a}(),bG=function(){function a(a){if(this.animationToMixTime={},this.defaultMix=0,null==a)throw new Error("skeletonData cannot be null.");this.skeletonData=a}return a.prototype.setMix=function(a,b,e){var c=this.skeletonData.findAnimation(a);if(null==c)throw new Error("Animation not found: "+a);var d=this.skeletonData.findAnimation(b);if(null==d)throw new Error("Animation not found: "+b);this.setMixWith(c,d,e)},a.prototype.setMixByName=function(b,c,d){a.deprecatedWarning1||(a.deprecatedWarning1=!0,console.warn("Deprecation Warning: AnimationStateData.setMixByName is deprecated, please use setMix from now on.")),this.setMix(b,c,d)},a.prototype.setMixWith=function(a,b,c){if(null==a)throw new Error("from cannot be null.");if(null==b)throw new Error("to cannot be null.");var d=a.name+"."+b.name;this.animationToMixTime[d]=c},a.prototype.getMix=function(b,c){var d=b.name+"."+c.name,a=this.animationToMixTime[d];return void 0===a?this.defaultMix:a},a.deprecatedWarning1=!1,a}(),bH=function(){function a(a){this.atlas=a}return a.prototype.newRegionAttachment=function(e,a,b){var c=this.atlas.findRegion(b);if(null==c)throw new Error("Region not found in atlas: "+b+" (region attachment: "+a+")");var d=new bl(a);return d.region=c,d},a.prototype.newMeshAttachment=function(e,a,b){var c=this.atlas.findRegion(b);if(null==c)throw new Error("Region not found in atlas: "+b+" (mesh attachment: "+a+")");var d=new bi(a);return d.region=c,d},a.prototype.newBoundingBoxAttachment=function(b,a){return new bg(a)},a.prototype.newPathAttachment=function(b,a){return new bj(a)},a.prototype.newPointAttachment=function(b,a){return new bk(a)},a.prototype.newClippingAttachment=function(b,a){return new bh(a)},a}(),bI=function(){function b(a,b,c){if(this.matrix=new cY.Matrix,this.children=new Array,this.x=0,this.y=0,this.rotation=0,this.scaleX=0,this.scaleY=0,this.shearX=0,this.shearY=0,this.ax=0,this.ay=0,this.arotation=0,this.ascaleX=0,this.ascaleY=0,this.ashearX=0,this.ashearY=0,this.appliedValid=!1,this.sorted=!1,null==a)throw new Error("data cannot be null.");if(null==b)throw new Error("skeleton cannot be null.");this.data=a,this.skeleton=b,this.parent=c,this.setToSetupPose()}return Object.defineProperty(b.prototype,"worldX",{get:function(){return this.matrix.tx},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"worldY",{get:function(){return this.matrix.ty},enumerable:!1,configurable:!0}),b.prototype.update=function(){this.updateWorldTransformWith(this.x,this.y,this.rotation,this.scaleX,this.scaleY,this.shearX,this.shearY)},b.prototype.updateWorldTransform=function(){this.updateWorldTransformWith(this.x,this.y,this.rotation,this.scaleX,this.scaleY,this.shearX,this.shearY)},b.prototype.updateWorldTransformWith=function(w,x,d,g,h,i,s){this.ax=w,this.ay=x,this.arotation=d,this.ascaleX=g,this.ascaleY=h,this.ashearX=i,this.ashearY=s,this.appliedValid=!0;var t=this.parent,b=this.matrix,u=this.skeleton.scaleX,v=as.yDown?-this.skeleton.scaleY:this.skeleton.scaleY;if(null==t){var z=this.skeleton,l=d+90+s;b.a=ak.cosDeg(d+i)*g*u,b.c=ak.cosDeg(l)*h*u,b.b=ak.sinDeg(d+i)*g*v,b.d=ak.sinDeg(l)*h*v,b.tx=w*u+z.x,b.ty=x*v+z.y;return}var e=t.matrix.a,j=t.matrix.c,f=t.matrix.b,k=t.matrix.d;switch(b.tx=e*w+j*x+t.matrix.tx,b.ty=f*w+k*x+t.matrix.ty,this.data.transformMode){case a.TransformMode.Normal:var l=d+90+s,m=ak.cosDeg(d+i)*g,n=ak.cosDeg(l)*h,o=ak.sinDeg(d+i)*g,p=ak.sinDeg(l)*h;b.a=e*m+j*o,b.c=e*n+j*p,b.b=f*m+k*o,b.d=f*n+k*p;return;case a.TransformMode.OnlyTranslation:var l=d+90+s;b.a=ak.cosDeg(d+i)*g,b.c=ak.cosDeg(l)*h,b.b=ak.sinDeg(d+i)*g,b.d=ak.sinDeg(l)*h;break;case a.TransformMode.NoRotationOrReflection:var c=e*e+f*f,y=0;c>1e-4?(c=Math.abs(e*k-j*f)/c,j=f*c,k=e*c,y=Math.atan2(f,e)*ak.radDeg):(e=0,f=0,y=90-Math.atan2(k,j)*ak.radDeg);var A=d+i-y,B=d+s-y+90,m=ak.cosDeg(A)*g,n=ak.cosDeg(B)*h,o=ak.sinDeg(A)*g,p=ak.sinDeg(B)*h;b.a=e*m-j*o,b.c=e*n-j*p,b.b=f*m+k*o,b.d=f*n+k*p;break;case a.TransformMode.NoScale:case a.TransformMode.NoScaleOrReflection:var C=ak.cosDeg(d),D=ak.sinDeg(d),q=(e*C+j*D)/u,r=(f*C+k*D)/v,c=Math.sqrt(q*q+r*r);c>1e-5&&(c=1/c),q*=c,r*=c,c=Math.sqrt(q*q+r*r),this.data.transformMode==a.TransformMode.NoScale&&e*k-j*f<0!=(as.yDown?this.skeleton.scaleX<0!=this.skeleton.scaleY>0:this.skeleton.scaleX<0!=this.skeleton.scaleY<0)&&(c=-c);var E=Math.PI/2+Math.atan2(r,q),F=Math.cos(E)*c,G=Math.sin(E)*c,m=ak.cosDeg(i)*g,n=ak.cosDeg(90+s)*h,o=ak.sinDeg(i)*g,p=ak.sinDeg(90+s)*h;b.a=q*m+F*o,b.c=q*n+F*p,b.b=r*m+G*o,b.d=r*n+G*p}b.a*=u,b.c*=u,b.b*=v,b.d*=v},b.prototype.setToSetupPose=function(){var a=this.data;this.x=a.x,this.y=a.y,this.rotation=a.rotation,this.scaleX=a.scaleX,this.scaleY=a.scaleY,this.shearX=a.shearX,this.shearY=a.shearY},b.prototype.getWorldRotationX=function(){return Math.atan2(this.matrix.b,this.matrix.a)*ak.radDeg},b.prototype.getWorldRotationY=function(){return Math.atan2(this.matrix.d,this.matrix.c)*ak.radDeg},b.prototype.getWorldScaleX=function(){var a=this.matrix;return Math.sqrt(a.a*a.a+a.c*a.c)},b.prototype.getWorldScaleY=function(){var a=this.matrix;return Math.sqrt(a.b*a.b+a.d*a.d)},b.prototype.updateAppliedTransform=function(){this.appliedValid=!0;var h=this.parent,a=this.matrix;if(null==h){this.ax=a.tx,this.ay=a.ty,this.arotation=Math.atan2(a.b,a.a)*ak.radDeg,this.ascaleX=Math.sqrt(a.a*a.a+a.b*a.b),this.ascaleY=Math.sqrt(a.c*a.c+a.d*a.d),this.ashearX=0,this.ashearY=Math.atan2(a.a*a.c+a.b*a.d,a.a*a.d-a.b*a.c)*ak.radDeg;return}var b=h.matrix,c=1/(b.a*b.d-b.b*b.c),i=a.tx-b.tx,j=a.ty-b.ty;this.ax=i*b.d*c-j*b.c*c,this.ay=j*b.a*c-i*b.b*c;var k=c*b.d,l=c*b.a,m=c*b.c,n=c*b.b,d=k*a.a-m*a.b,e=k*a.c-m*a.d,f=l*a.b-n*a.a,g=l*a.d-n*a.c;if(this.ashearX=0,this.ascaleX=Math.sqrt(d*d+f*f),this.ascaleX>1e-4){var o=d*g-e*f;this.ascaleY=o/this.ascaleX,this.ashearY=Math.atan2(d*e+f*g,o)*ak.radDeg,this.arotation=Math.atan2(f,d)*ak.radDeg}else this.ascaleX=0,this.ascaleY=Math.sqrt(e*e+g*g),this.ashearY=0,this.arotation=90-Math.atan2(g,e)*ak.radDeg},b.prototype.worldToLocal=function(b){var a=this.matrix,d=a.a,e=a.c,f=a.b,g=a.d,c=1/(d*g-e*f),h=b.x-a.tx,i=b.y-a.ty;return b.x=h*g*c-i*e*c,b.y=i*d*c-h*f*c,b},b.prototype.localToWorld=function(b){var a=this.matrix,c=b.x,d=b.y;return b.x=c*a.a+d*a.c+a.tx,b.y=c*a.b+d*a.d+a.ty,b},b.prototype.worldToLocalRotation=function(b){var c=ak.sinDeg(b),d=ak.cosDeg(b),a=this.matrix;return Math.atan2(a.a*c-a.b*d,a.d*d-a.c*c)*ak.radDeg},b.prototype.localToWorldRotation=function(b){var c=ak.sinDeg(b),d=ak.cosDeg(b),a=this.matrix;return Math.atan2(d*a.b+c*a.d,d*a.a+c*a.c)*ak.radDeg},b.prototype.rotateWorld=function(d){var a=this.matrix,e=a.a,f=a.c,g=a.b,h=a.d,b=ak.cosDeg(d),c=ak.sinDeg(d);a.a=b*e-c*g,a.c=b*f-c*h,a.b=c*e+b*g,a.d=c*f+b*h,this.appliedValid=!1},b}(),bJ=function(b,c,d){if(this.x=0,this.y=0,this.rotation=0,this.scaleX=1,this.scaleY=1,this.shearX=0,this.shearY=0,this.transformMode=a.TransformMode.Normal,b<0)throw new Error("index must be >= 0.");if(null==c)throw new Error("name cannot be null.");this.index=b,this.name=c,this.parent=d},bK=function(b,a){if(null==a)throw new Error("data cannot be null.");this.time=b,this.data=a},bL=function(a){this.name=a},bM=function(){function a(a,b){if(this.bendDirection=0,this.compress=!1,this.stretch=!1,this.mix=1,null==a)throw new Error("data cannot be null.");if(null==b)throw new Error("skeleton cannot be null.");this.data=a,this.mix=a.mix,this.bendDirection=a.bendDirection,this.compress=a.compress,this.stretch=a.stretch,this.bones=new Array;for(var c=0;c<a.bones.length;c++)this.bones.push(b.findBone(a.bones[c].name));this.target=b.findBone(a.target.name)}return a.prototype.getOrder=function(){return this.data.order},a.prototype.apply=function(){this.update()},a.prototype.update=function(){var a=this.target,b=this.bones;switch(b.length){case 1:this.apply1(b[0],a.worldX,a.worldY,this.compress,this.stretch,this.data.uniform,this.mix);break;case 2:this.apply2(b[0],b[1],a.worldX,a.worldY,this.bendDirection,this.stretch,this.mix)}},a.prototype.apply1=function(a,q,r,i,j,s,k){a.appliedValid||a.updateAppliedTransform();var b=a.parent.matrix,l=1/(b.a*b.d-b.b*b.c),m=q-b.tx,n=r-b.ty,e=(m*b.d-n*b.c)*l-a.ax,f=(n*b.a-m*b.b)*l-a.ay,c=Math.atan2(f,e)*ak.radDeg-a.ashearX-a.arotation;a.ascaleX<0&&(c+=180),c>180?c-=360:c< -180&&(c+=360);var g=a.ascaleX,o=a.ascaleY;if(i||j){var d=a.data.length*g,h=Math.sqrt(e*e+f*f);if(i&&h<d||j&&h>d&&d>1e-4){var p=(h/d-1)*k+1;g*=p,s&&(o*=p)}}a.updateWorldTransformWith(a.ax,a.ay,a.arotation+c*k,g,o,a.ashearX,a.ashearY)},a.prototype.apply2=function(g,c,ac,ad,p,ae,C){if(0==C){c.updateWorldTransform();return}g.appliedValid||g.updateAppliedTransform(),c.appliedValid||c.updateAppliedTransform();var J=g.ax,K=g.ay,m=g.ascaleX,S=m,q=g.ascaleY,D=c.ascaleX,n=g.matrix,L=0,M=0,r=0;m<0?(m=-m,L=180,r=-1):(L=0,r=1),q<0&&(q=-q,r=-r),D<0?(D=-D,M=180):M=0;var s=c.ax,w=0,N=0,O=0,b=n.a,e=n.c,a=n.b,i=n.d,T=1e-4>=Math.abs(m-q);T?(N=b*s+e*(w=c.ay)+n.tx,O=a*s+i*w+n.ty):(w=0,N=b*s+n.tx,O=a*s+n.ty);var o=g.parent.matrix;b=o.a,e=o.c,a=o.b;var E=1/(b*(i=o.d)-e*a),j=ac-o.tx,f=ad-o.ty,x=(j*i-f*e)*E-J,y=(f*b-j*a)*E-K,t=x*x+y*y;j=N-o.tx;var U=(j*i-(f=O-o.ty)*e)*E-J,V=(f*b-j*a)*E-K,d=Math.sqrt(U*U+V*V),l=c.data.length*D,k=0,h=0;outer:if(T){var u=(t-d*d-(l*=m)*l)/(2*d*l);u< -1?u=-1:u>1&&(u=1,ae&&d+l>1e-4&&(S*=(Math.sqrt(t)/(d+l)-1)*C+1)),h=Math.acos(u)*p,b=d+l*u,e=l*Math.sin(h),k=Math.atan2(y*b-x*e,x*b+y*e)}else{b=m*l,e=q*l;var F=b*b,z=e*e,P=Math.atan2(y,x);a=z*d*d+F*t-F*z;var G=-2*z*d,W=z-F;if((i=G*G-4*W*a)>=0){var A=Math.sqrt(i);G<0&&(A=-A);var X=(A=-(G+A)/2)/W,Y=a/A,v=Math.abs(X)<Math.abs(Y)?X:Y;if(v*v<=t){f=Math.sqrt(t-v*v)*p,k=P-Math.atan2(f,v),h=Math.atan2(f/q,(v-d)/m);break outer}}var Z=ak.PI,H=d-b,Q=H*H,$=0,_=0,I=d+b,R=I*I,aa=0;(a=-b*d/(F-z))>= -1&&a<=1&&(a=Math.acos(a),j=b*Math.cos(a)+d,f=e*Math.sin(a),(i=j*j+f*f)<Q&&(Z=a,Q=i,H=j,$=f),i>R&&(_=a,R=i,I=j,aa=f)),t<=(Q+R)/2?(k=P-Math.atan2($*p,H),h=Z*p):(k=P-Math.atan2(aa*p,I),h=_*p)}var ab=Math.atan2(w,s)*r,B=g.arotation;(k=(k-ab)*ak.radDeg+L-B)>180?k-=360:k< -180&&(k+=360),g.updateWorldTransformWith(J,K,B+k*C,S,g.ascaleY,0,0),B=c.arotation,(h=((h+ab)*ak.radDeg-c.ashearX)*r+M-B)>180?h-=360:h< -180&&(h+=360),c.updateWorldTransformWith(s,w,B+h*C,c.ascaleX,c.ascaleY,c.ashearX,c.ashearY)},a}(),bN=function(a){this.order=0,this.bones=new Array,this.bendDirection=1,this.compress=!1,this.stretch=!1,this.uniform=!1,this.mix=1,this.name=a},bO=function(a){this.order=0,this.bones=new Array,this.name=a};(v=I||(I={}))[v.Length=0]="Length",v[v.Fixed=1]="Fixed",v[v.Percent=2]="Percent";var bP=function(){function b(a,b){if(this.position=0,this.spacing=0,this.rotateMix=0,this.translateMix=0,this.spaces=new Array,this.positions=new Array,this.world=new Array,this.curves=new Array,this.lengths=new Array,this.segments=new Array,null==a)throw new Error("data cannot be null.");if(null==b)throw new Error("skeleton cannot be null.");this.data=a,this.bones=new Array;for(var c=0,d=a.bones.length;c<d;c++)this.bones.push(b.findBone(a.bones[c].name));this.target=b.findSlot(a.target.name),this.position=a.position,this.spacing=a.spacing,this.rotateMix=a.rotateMix,this.translateMix=a.translateMix}return b.prototype.apply=function(){this.update()},b.prototype.update=function(){var G=this.target.getAttachment();if(G instanceof bj){var k=this.rotateMix,A=this.translateMix,H=k>0;if(A>0||H){var r=this.data,J=r.spacingMode,K=J==I.Length,B=r.rotateMode,C=B==a.RotateMode.Tangent,l=B==a.RotateMode.ChainScale,s=this.bones.length,t=C?s:s+1,L=this.bones,u=am.setArraySize(this.spaces,t),v=null,D=this.spacing;if(l||K){l&&(v=am.setArraySize(this.lengths,s));for(var c=0,S=t-1;c<S;){var i=L[c],m=i.data.length;if(m<b.epsilon)l&&(v[c]=0),u[++c]=0;else{var n=m*i.matrix.a,o=m*i.matrix.b,M=Math.sqrt(n*n+o*o);l&&(v[c]=M),u[++c]=(K?m+D:D)*M/m}}}else for(var c=1;c<t;c++)u[c]=D;var j=this.computeWorldPositions(G,t,C,r.positionMode==a.PositionMode.Percent,J==I.Percent),w=j[0],x=j[1],E=r.offsetRotation,F=!1;if(0==E)F=B==a.RotateMode.Chain;else{F=!1;var f=this.target.bone.matrix;E*=f.a*f.d-f.b*f.c>0?ak.degRad:-ak.degRad}for(var c=0,f=3;c<s;c++,f+=3){var i=L[c],d=i.matrix;d.tx+=(w-d.tx)*A,d.ty+=(x-d.ty)*A;var n=j[f],o=j[f+1],y=n-w,z=o-x;if(l){var N=v[c];if(0!=N){var O=(Math.sqrt(y*y+z*z)/N-1)*k+1;d.a*=O,d.b*=O}}if(w=n,x=o,H){var p=d.a,P=d.c,q=d.b,Q=d.d,e=0,g=0,h=0;if(e=C?j[f-1]:0==u[c+1]?j[f+2]:Math.atan2(z,y),e-=Math.atan2(q,p),F){g=Math.cos(e),h=Math.sin(e);var R=i.data.length;w+=(R*(g*p-h*q)-y)*k,x+=(R*(h*p+g*q)-z)*k}else e+=E;e>ak.PI?e-=ak.PI2:e< -ak.PI&&(e+=ak.PI2),e*=k,g=Math.cos(e),h=Math.sin(e),d.a=g*p-h*q,d.c=g*P-h*Q,d.b=h*p+g*q,d.d=h*P+g*Q}i.appliedValid=!1}}}},b.prototype.computeWorldPositions=function(i,J,U,V,W){var v=this.target,N=this.position,O=this.spaces,w=am.setArraySize(this.positions,3*J+2),a=null,K=i.closed,h=i.worldVerticesLength,L=h/6,x=b.NONE;if(!i.constantSpeed){var P=i.lengths,C=P[L-=K?1:2];if(V&&(N*=C),W)for(var f=0;f<J;f++)O[f]*=C;a=am.setArraySize(this.world,8);for(var f=0,p=0,g=0;f<J;f++,p+=3){var M=O[f],c=N+=M;if(K)(c%=C)<0&&(c+=C),g=0;else if(c<0){x!=b.BEFORE&&(x=b.BEFORE,i.computeWorldVertices(v,2,4,a,0,2)),this.addBeforePosition(c,a,0,w,p);continue}else if(c>C){x!=b.AFTER&&(x=b.AFTER,i.computeWorldVertices(v,h-6,4,a,0,2)),this.addAfterPosition(c-C,a,0,w,p);continue}for(;;g++){var Q=P[g];if(!(c>Q)){if(0==g)c/=Q;else{var y=P[g-1];c=(c-y)/(Q-y)}break}}g!=x&&(x=g,K&&g==L?(i.computeWorldVertices(v,h-4,4,a,0,2),i.computeWorldVertices(v,0,4,a,4,2)):i.computeWorldVertices(v,6*g+2,8,a,0,2)),this.addCurvePosition(c,a[0],a[1],a[2],a[3],a[4],a[5],a[6],a[7],w,p,U||f>0&&0==M)}return w}K?(h+=2,a=am.setArraySize(this.world,h),i.computeWorldVertices(v,2,h-4,a,0,2),i.computeWorldVertices(v,0,2,a,h-4,2),a[h-2]=a[0],a[h-1]=a[1]):(L--,h-=4,a=am.setArraySize(this.world,h),i.computeWorldVertices(v,2,h,a,0,2));for(var R=am.setArraySize(this.curves,L),k=0,q=a[0],r=a[1],s=0,t=0,z=0,A=0,D=0,E=0,F=0,G=0,l=0,m=0,n=0,o=0,d=0,e=0,f=0,B=2;f<L;f++,B+=6)s=a[B],t=a[B+1],z=a[B+2],A=a[B+3],D=a[B+4],E=a[B+5],F=(q-2*s+z)*.1875,G=(r-2*t+A)*.1875,l=((s-z)*3-q+D)*.09375,m=((t-A)*3-r+E)*.09375,n=2*F+l,o=2*G+m,d=(s-q)*.75+F+.16666667*l,e=(t-r)*.75+G+.16666667*m,k+=Math.sqrt(d*d+e*e),d+=n,e+=o,n+=l,o+=m,k+=Math.sqrt(d*d+e*e),d+=n,e+=o,k+=Math.sqrt(d*d+e*e),d+=n+l,e+=o+m,k+=Math.sqrt(d*d+e*e),R[f]=k,q=D,r=E;if(V&&(N*=k),W)for(var f=0;f<J;f++)O[f]*=k;for(var H=this.segments,u=0,f=0,p=0,g=0,I=0;f<J;f++,p+=3){var M=O[f],c=N+=M;if(K)(c%=k)<0&&(c+=k),g=0;else if(c<0){this.addBeforePosition(c,a,0,w,p);continue}else if(c>k){this.addAfterPosition(c-k,a,h-4,w,p);continue}for(;;g++){var S=R[g];if(!(c>S)){if(0==g)c/=S;else{var y=R[g-1];c=(c-y)/(S-y)}break}}if(g!=x){x=g;var j=6*g;for(q=a[j],r=a[j+1],s=a[j+2],t=a[j+3],z=a[j+4],A=a[j+5],D=a[j+6],E=a[j+7],F=(q-2*s+z)*.03,G=(r-2*t+A)*.03,l=((s-z)*3-q+D)*.006,m=((t-A)*3-r+E)*.006,n=2*F+l,o=2*G+m,d=(s-q)*.3+F+.16666667*l,e=(t-r)*.3+G+.16666667*m,u=Math.sqrt(d*d+e*e),H[0]=u,j=1;j<8;j++)d+=n,e+=o,n+=l,o+=m,u+=Math.sqrt(d*d+e*e),H[j]=u;d+=n,e+=o,u+=Math.sqrt(d*d+e*e),H[8]=u,d+=n+l,e+=o+m,u+=Math.sqrt(d*d+e*e),H[9]=u,I=0}for(c*=u;;I++){var T=H[I];if(!(c>T)){if(0==I)c/=T;else{var y=H[I-1];c=I+(c-y)/(T-y)}break}}this.addCurvePosition(.1*c,q,r,s,t,z,A,D,E,w,p,U||f>0&&0==M)}return w},b.prototype.addBeforePosition=function(f,a,b,c,d){var g=a[b],h=a[b+1],i=a[b+2]-g,j=a[b+3]-h,e=Math.atan2(j,i);c[d]=g+f*Math.cos(e),c[d+1]=h+f*Math.sin(e),c[d+2]=e},b.prototype.addAfterPosition=function(f,a,b,c,d){var g=a[b+2],h=a[b+3],i=g-a[b],j=h-a[b+1],e=Math.atan2(j,i);c[d]=g+f*Math.cos(e),c[d+1]=h+f*Math.sin(e),c[d+2]=e},b.prototype.addCurvePosition=function(a,h,i,j,k,l,m,u,v,c,d,w){(0==a||isNaN(a))&&(a=1e-4);var e=a*a,n=e*a,b=1-a,f=b*b,o=f*b,g=b*a,p=3*g,q=b*p,r=p*a,s=h*o+j*q+l*r+u*n,t=i*o+k*q+m*r+v*n;c[d]=s,c[d+1]=t,w&&(c[d+2]=Math.atan2(t-(i*f+k*g*2+m*e),s-(h*f+j*g*2+l*e)))},b.prototype.getOrder=function(){return this.data.order},b.NONE=-1,b.BEFORE=-2,b.AFTER=-3,b.epsilon=1e-5,b}(),bQ=function(){function a(a,b){if(this.attachmentVertices=new Array,null==a)throw new Error("data cannot be null.");if(null==b)throw new Error("bone cannot be null.");this.data=a,this.bone=b,this.color=new aj,this.darkColor=null==a.darkColor?null:new aj,this.setToSetupPose(),this.blendMode=this.data.blendMode}return a.prototype.getAttachment=function(){return this.attachment},a.prototype.setAttachment=function(a){this.attachment!=a&&(this.attachment=a,this.attachmentTime=this.bone.skeleton.time,this.attachmentVertices.length=0)},a.prototype.setAttachmentTime=function(a){this.attachmentTime=this.bone.skeleton.time-a},a.prototype.getAttachmentTime=function(){return this.bone.skeleton.time-this.attachmentTime},a.prototype.setToSetupPose=function(){this.color.setFromColor(this.data.color),null!=this.darkColor&&this.darkColor.setFromColor(this.data.darkColor),null==this.data.attachmentName?this.attachment=null:(this.attachment=null,this.setAttachment(this.bone.skeleton.getAttachment(this.data.index,this.data.attachmentName)))},a}(),bR=function(){function a(a,b){if(this.rotateMix=0,this.translateMix=0,this.scaleMix=0,this.shearMix=0,this.temp=new ap,null==a)throw new Error("data cannot be null.");if(null==b)throw new Error("skeleton cannot be null.");this.data=a,this.rotateMix=a.rotateMix,this.translateMix=a.translateMix,this.scaleMix=a.scaleMix,this.shearMix=a.shearMix,this.bones=new Array;for(var c=0;c<a.bones.length;c++)this.bones.push(b.findBone(a.bones[c].name));this.target=b.findBone(a.target.name)}return a.prototype.apply=function(){this.update()},a.prototype.update=function(){this.data.local?this.data.relative?this.applyRelativeLocal():this.applyAbsoluteLocal():this.data.relative?this.applyRelativeWorld():this.applyAbsoluteWorld()},a.prototype.applyAbsoluteWorld=function(){for(var u=this.rotateMix,n=this.translateMix,o=this.scaleMix,v=this.shearMix,w=this.target,i=w.matrix,f=i.a,j=i.c,g=i.b,k=i.d,x=f*k-j*g>0?ak.degRad:-ak.degRad,B=this.data.offsetRotation*x,C=this.data.offsetShearY*x,y=this.bones,p=0,D=y.length;p<D;p++){var z=y[p],h=!1,a=z.matrix;if(0!=u){var q=a.a,d=a.c,r=a.b,e=a.d,c=Math.atan2(g,f)-Math.atan2(r,q)+B;c>ak.PI?c-=ak.PI2:c< -ak.PI&&(c+=ak.PI2);var l=Math.cos(c*=u),m=Math.sin(c);a.a=l*q-m*r,a.c=l*d-m*e,a.b=m*q+l*r,a.d=m*d+l*e,h=!0}if(0!=n){var s=this.temp;w.localToWorld(s.set(this.data.offsetX,this.data.offsetY)),a.tx+=(s.x-a.tx)*n,a.ty+=(s.y-a.ty)*n,h=!0}if(o>0){var b=Math.sqrt(a.a*a.a+a.b*a.b),t=Math.sqrt(f*f+g*g);b>1e-5&&(b=(b+(t-b+this.data.offsetScaleX)*o)/b),a.a*=b,a.b*=b,b=Math.sqrt(a.c*a.c+a.d*a.d),t=Math.sqrt(j*j+k*k),b>1e-5&&(b=(b+(t-b+this.data.offsetScaleY)*o)/b),a.c*=b,a.d*=b,h=!0}if(v>0){var d=a.c,e=a.d,A=Math.atan2(e,d),c=Math.atan2(k,j)-Math.atan2(g,f)-(A-Math.atan2(a.b,a.a));c>ak.PI?c-=ak.PI2:c< -ak.PI&&(c+=ak.PI2),c=A+(c+C)*v;var b=Math.sqrt(d*d+e*e);a.c=Math.cos(c)*b,a.d=Math.sin(c)*b,h=!0}h&&(z.appliedValid=!1)}},a.prototype.applyRelativeWorld=function(){for(var r=this.rotateMix,n=this.translateMix,o=this.scaleMix,s=this.shearMix,t=this.target,i=t.matrix,f=i.a,j=i.c,g=i.b,k=i.d,u=f*k-j*g>0?ak.degRad:-ak.degRad,z=this.data.offsetRotation*u,A=this.data.offsetShearY*u,v=this.bones,p=0,B=v.length;p<B;p++){var w=v[p],h=!1,a=w.matrix;if(0!=r){var x=a.a,d=a.c,y=a.b,e=a.d,b=Math.atan2(g,f)+z;b>ak.PI?b-=ak.PI2:b< -ak.PI&&(b+=ak.PI2);var l=Math.cos(b*=r),m=Math.sin(b);a.a=l*x-m*y,a.c=l*d-m*e,a.b=m*x+l*y,a.d=m*d+l*e,h=!0}if(0!=n){var q=this.temp;t.localToWorld(q.set(this.data.offsetX,this.data.offsetY)),a.tx+=q.x*n,a.ty+=q.y*n,h=!0}if(o>0){var c=(Math.sqrt(f*f+g*g)-1+this.data.offsetScaleX)*o+1;a.a*=c,a.b*=c,c=(Math.sqrt(j*j+k*k)-1+this.data.offsetScaleY)*o+1,a.c*=c,a.d*=c,h=!0}if(s>0){var b=Math.atan2(k,j)-Math.atan2(g,f);b>ak.PI?b-=ak.PI2:b< -ak.PI&&(b+=ak.PI2);var d=a.c,e=a.d;b=Math.atan2(e,d)+(b-ak.PI/2+A)*s;var c=Math.sqrt(d*d+e*e);a.c=Math.cos(b)*c,a.d=Math.sin(b)*c,h=!0}h&&(w.appliedValid=!1)}},a.prototype.applyAbsoluteLocal=function(){var l=this.rotateMix,f=this.translateMix,g=this.scaleMix,m=this.shearMix,b=this.target;b.appliedValid||b.updateAppliedTransform();for(var n=this.bones,h=0,p=n.length;h<p;h++){var a=n[h];a.appliedValid||a.updateAppliedTransform();var i=a.arotation;if(0!=l){var c=b.arotation-i+this.data.offsetRotation;c-=(16384-(16384.499999999996-c/360|0))*360,i+=c*l}var j=a.ax,k=a.ay;0!=f&&(j+=(b.ax-j+this.data.offsetX)*f,k+=(b.ay-k+this.data.offsetY)*f);var d=a.ascaleX,e=a.ascaleY;g>0&&(d>1e-5&&(d=(d+(b.ascaleX-d+this.data.offsetScaleX)*g)/d),e>1e-5&&(e=(e+(b.ascaleY-e+this.data.offsetScaleY)*g)/e));var o=a.ashearY;if(m>0){var c=b.ashearY-o+this.data.offsetShearY;c-=(16384-(16384.499999999996-c/360|0))*360,a.shearY+=c*m}a.updateWorldTransformWith(j,k,i,d,e,a.ashearX,o)}},a.prototype.applyRelativeLocal=function(){var h=this.rotateMix,c=this.translateMix,d=this.scaleMix,i=this.shearMix,b=this.target;b.appliedValid||b.updateAppliedTransform();for(var j=this.bones,e=0,o=j.length;e<o;e++){var a=j[e];a.appliedValid||a.updateAppliedTransform();var k=a.arotation;0!=h&&(k+=(b.arotation+this.data.offsetRotation)*h);var l=a.ax,m=a.ay;0!=c&&(l+=(b.ax+this.data.offsetX)*c,m+=(b.ay+this.data.offsetY)*c);var f=a.ascaleX,g=a.ascaleY;d>0&&(f>1e-5&&(f*=(b.ascaleX-1+this.data.offsetScaleX)*d+1),g>1e-5&&(g*=(b.ascaleY-1+this.data.offsetScaleY)*d+1));var n=a.ashearY;i>0&&(n+=(b.ashearY+this.data.offsetShearY)*i),a.updateWorldTransformWith(l,m,k,f,g,a.ashearX,n)}},a.prototype.getOrder=function(){return this.data.order},a}(),bS=function(){function a(b){if(this._updateCache=new Array,this.updateCacheReset=new Array,this.time=0,this.scaleX=1,this.scaleY=1,this.x=0,this.y=0,null==b)throw new Error("data cannot be null.");this.data=b,this.bones=new Array;for(var a=0;a<b.bones.length;a++){var d=b.bones[a],c=void 0;if(null==d.parent)c=new bI(d,this,null);else{var e=this.bones[d.parent.index];c=new bI(d,this,e),e.children.push(c)}this.bones.push(c)}this.slots=new Array,this.drawOrder=new Array;for(var a=0;a<b.slots.length;a++){var f=b.slots[a],c=this.bones[f.boneData.index],g=new bQ(f,c);this.slots.push(g),this.drawOrder.push(g)}this.ikConstraints=new Array;for(var a=0;a<b.ikConstraints.length;a++){var h=b.ikConstraints[a];this.ikConstraints.push(new bM(h,this))}this.transformConstraints=new Array;for(var a=0;a<b.transformConstraints.length;a++){var i=b.transformConstraints[a];this.transformConstraints.push(new bR(i,this))}this.pathConstraints=new Array;for(var a=0;a<b.pathConstraints.length;a++){var j=b.pathConstraints[a];this.pathConstraints.push(new bP(j,this))}this.color=new aj(1,1,1,1),this.updateCache()}return a.prototype.updateCache=function(){this._updateCache.length=0,this.updateCacheReset.length=0;for(var d=this.bones,a=0,e=d.length;a<e;a++)d[a].sorted=!1;var f=this.ikConstraints,g=this.transformConstraints,h=this.pathConstraints,i=f.length,j=g.length,k=h.length,l=i+j+k;outer:for(var a=0;a<l;a++){for(var b=0;b<i;b++){var c=f[b];if(c.data.order==a){this.sortIkConstraint(c);continue outer}}for(var b=0;b<j;b++){var c=g[b];if(c.data.order==a){this.sortTransformConstraint(c);continue outer}}for(var b=0;b<k;b++){var c=h[b];if(c.data.order==a){this.sortPathConstraint(c);continue outer}}}for(var a=0,e=d.length;a<e;a++)this.sortBone(d[a])},a.prototype.sortIkConstraint=function(b){var e=b.target;this.sortBone(e);var a=b.bones,c=a[0];if(this.sortBone(c),a.length>1){var d=a[a.length-1];this._updateCache.indexOf(d)> -1||this.updateCacheReset.push(d)}this._updateCache.push(b),this.sortReset(c.children),a[a.length-1].sorted=!0},a.prototype.sortPathConstraint=function(d){var e=d.target,f=e.data.index,b=e.bone;null!=this.skin&&this.sortPathConstraintAttachment(this.skin,f,b),null!=this.data.defaultSkin&&this.data.defaultSkin!=this.skin&&this.sortPathConstraintAttachment(this.data.defaultSkin,f,b);for(var a=0,i=this.data.skins.length;a<i;a++)this.sortPathConstraintAttachment(this.data.skins[a],f,b);var h=e.getAttachment();h instanceof bj&&this.sortPathConstraintAttachmentWith(h,b);for(var c=d.bones,g=c.length,a=0;a<g;a++)this.sortBone(c[a]);this._updateCache.push(d);for(var a=0;a<g;a++)this.sortReset(c[a].children);for(var a=0;a<g;a++)c[a].sorted=!0},a.prototype.sortTransformConstraint=function(d){this.sortBone(d.target);var c=d.bones,e=c.length;if(d.data.local)for(var a=0;a<e;a++){var f=c[a];this.sortBone(f.parent),this._updateCache.indexOf(f)> -1||this.updateCacheReset.push(f)}else for(var a=0;a<e;a++)this.sortBone(c[a]);this._updateCache.push(d);for(var b=0;b<e;b++)this.sortReset(c[b].children);for(var b=0;b<e;b++)c[b].sorted=!0},a.prototype.sortPathConstraintAttachment=function(b,c,d){var a=b.attachments[c];if(a)for(var e in a)this.sortPathConstraintAttachmentWith(a[e],d)},a.prototype.sortPathConstraintAttachmentWith=function(c,d){if(c instanceof bj){var b=c.bones;if(null==b)this.sortBone(d);else for(var e=this.bones,a=0;a<b.length;)for(var f=b[a++],g=a+f;a<g;a++){var h=b[a];this.sortBone(e[h])}}},a.prototype.sortBone=function(a){if(!a.sorted){var b=a.parent;null!=b&&this.sortBone(b),a.sorted=!0,this._updateCache.push(a)}},a.prototype.sortReset=function(c){for(var a=0,d=c.length;a<d;a++){var b=c[a];b.sorted&&this.sortReset(b.children),b.sorted=!1}},a.prototype.updateWorldTransform=function(){for(var d=this.updateCacheReset,b=0,c=d.length;b<c;b++){var a=d[b];a.ax=a.x,a.ay=a.y,a.arotation=a.rotation,a.ascaleX=a.scaleX,a.ascaleY=a.scaleY,a.ashearX=a.shearX,a.ashearY=a.shearY,a.appliedValid=!0}for(var e=this._updateCache,b=0,c=e.length;b<c;b++)e[b].update()},a.prototype.setToSetupPose=function(){this.setBonesToSetupPose(),this.setSlotsToSetupPose()},a.prototype.setBonesToSetupPose=function(){for(var e=this.bones,b=0,d=e.length;b<d;b++)e[b].setToSetupPose();for(var f=this.ikConstraints,b=0,d=f.length;b<d;b++){var a=f[b];a.bendDirection=a.data.bendDirection,a.mix=a.data.mix}for(var g=this.transformConstraints,b=0,d=g.length;b<d;b++){var a=g[b],c=a.data;a.rotateMix=c.rotateMix,a.translateMix=c.translateMix,a.scaleMix=c.scaleMix,a.shearMix=c.shearMix}for(var h=this.pathConstraints,b=0,d=h.length;b<d;b++){var a=h[b],c=a.data;a.position=c.position,a.spacing=c.spacing,a.rotateMix=c.rotateMix,a.translateMix=c.translateMix}},a.prototype.setSlotsToSetupPose=function(){var a=this.slots;am.arrayCopy(a,0,this.drawOrder,0,a.length);for(var b=0,c=a.length;b<c;b++)a[b].setToSetupPose()},a.prototype.getRootBone=function(){return 0==this.bones.length?null:this.bones[0]},a.prototype.findBone=function(b){if(null==b)throw new Error("boneName cannot be null.");for(var c=this.bones,a=0,e=c.length;a<e;a++){var d=c[a];if(d.data.name==b)return d}return null},a.prototype.findBoneIndex=function(b){if(null==b)throw new Error("boneName cannot be null.");for(var c=this.bones,a=0,d=c.length;a<d;a++)if(c[a].data.name==b)return a;return -1},a.prototype.findSlot=function(b){if(null==b)throw new Error("slotName cannot be null.");for(var c=this.slots,a=0,e=c.length;a<e;a++){var d=c[a];if(d.data.name==b)return d}return null},a.prototype.findSlotIndex=function(b){if(null==b)throw new Error("slotName cannot be null.");for(var c=this.slots,a=0,d=c.length;a<d;a++)if(c[a].data.name==b)return a;return -1},a.prototype.setSkinByName=function(a){var b=this.data.findSkin(a);if(null==b)throw new Error("Skin not found: "+a);this.setSkin(b)},a.prototype.setSkin=function(a){if(null!=a){if(null!=this.skin)a.attachAll(this,this.skin);else for(var c=this.slots,b=0,g=c.length;b<g;b++){var d=c[b],e=d.data.attachmentName;if(null!=e){var f=a.getAttachment(b,e);null!=f&&d.setAttachment(f)}}}this.skin=a},a.prototype.getAttachmentByName=function(a,b){return this.getAttachment(this.data.findSlotIndex(a),b)},a.prototype.getAttachment=function(b,a){if(null==a)throw new Error("attachmentName cannot be null.");if(null!=this.skin){var c=this.skin.getAttachment(b,a);if(null!=c)return c}return null!=this.data.defaultSkin?this.data.defaultSkin.getAttachment(b,a):null},a.prototype.setAttachment=function(a,c){if(null==a)throw new Error("slotName cannot be null.");for(var d=this.slots,b=0,g=d.length;b<g;b++){var e=d[b];if(e.data.name==a){var f=null;if(null!=c&&null==(f=this.getAttachment(b,c)))throw new Error("Attachment not found: "+c+", for slot: "+a);e.setAttachment(f);return}}throw new Error("Slot not found: "+a)},a.prototype.findIkConstraint=function(b){if(null==b)throw new Error("constraintName cannot be null.");for(var c=this.ikConstraints,a=0,e=c.length;a<e;a++){var d=c[a];if(d.data.name==b)return d}return null},a.prototype.findTransformConstraint=function(b){if(null==b)throw new Error("constraintName cannot be null.");for(var c=this.transformConstraints,a=0,e=c.length;a<e;a++){var d=c[a];if(d.data.name==b)return d}return null},a.prototype.findPathConstraint=function(b){if(null==b)throw new Error("constraintName cannot be null.");for(var c=this.pathConstraints,a=0,e=c.length;a<e;a++){var d=c[a];if(d.data.name==b)return d}return null},a.prototype.getBounds=function(k,l,m){if(null==k)throw new Error("offset cannot be null.");if(null==l)throw new Error("size cannot be null.");for(var n=this.drawOrder,c=Number.POSITIVE_INFINITY,d=Number.POSITIVE_INFINITY,g=Number.NEGATIVE_INFINITY,h=Number.NEGATIVE_INFINITY,i=0,r=n.length;i<r;i++){var j=n[i],b=0,a=null,e=j.getAttachment();if(e instanceof bl)b=8,a=am.setArraySize(m,b,0),e.computeWorldVertices(j.bone,a,0,2);else if(e instanceof bi){var o=e;b=o.worldVerticesLength,a=am.setArraySize(m,b,0),o.computeWorldVertices(j,0,b,a,0,2)}if(null!=a)for(var f=0,s=a.length;f<s;f+=2){var p=a[f],q=a[f+1];c=Math.min(c,p),d=Math.min(d,q),g=Math.max(g,p),h=Math.max(h,q)}}k.set(c,d),l.set(g-c,h-d)},a.prototype.update=function(a){this.time+=a},Object.defineProperty(a.prototype,"flipX",{get:function(){return -1==this.scaleX},set:function(b){a.deprecatedWarning1||(a.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: `Skeleton.flipX/flipY` was deprecated, please use scaleX/scaleY")),this.scaleX=b?1:-1},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"flipY",{get:function(){return -1==this.scaleY},set:function(b){a.deprecatedWarning1||(a.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: `Skeleton.flipX/flipY` was deprecated, please use scaleX/scaleY")),this.scaleY=b?1:-1},enumerable:!1,configurable:!0}),a.deprecatedWarning1=!1,a}(),bT=function(){function a(){this.minX=0,this.minY=0,this.maxX=0,this.maxY=0,this.boundingBoxes=new Array,this.polygons=new Array,this.polygonPool=new ao(function(){return am.newFloatArray(16)})}return a.prototype.update=function(e,k){if(null==e)throw new Error("skeleton cannot be null.");var f=this.boundingBoxes,c=this.polygons,g=this.polygonPool,h=e.slots,l=h.length;f.length=0,g.freeAll(c),c.length=0;for(var d=0;d<l;d++){var i=h[d],j=i.getAttachment();if(j instanceof bg){var a=j;f.push(a);var b=g.obtain();b.length!=a.worldVerticesLength&&(b=am.newFloatArray(a.worldVerticesLength)),c.push(b),a.computeWorldVertices(i,0,a.worldVerticesLength,b,0,2)}}k?this.aabbCompute():(this.minX=Number.POSITIVE_INFINITY,this.minY=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY,this.maxY=Number.NEGATIVE_INFINITY)},a.prototype.aabbCompute=function(){for(var b=Number.POSITIVE_INFINITY,c=Number.POSITIVE_INFINITY,d=Number.NEGATIVE_INFINITY,e=Number.NEGATIVE_INFINITY,g=this.polygons,f=0,l=g.length;f<l;f++)for(var h=g[f],i=h,a=0,m=h.length;a<m;a+=2){var j=i[a],k=i[a+1];b=Math.min(b,j),c=Math.min(c,k),d=Math.max(d,j),e=Math.max(e,k)}this.minX=b,this.minY=c,this.maxX=d,this.maxY=e},a.prototype.aabbContainsPoint=function(a,b){return a>=this.minX&&a<=this.maxX&&b>=this.minY&&b<=this.maxY},a.prototype.aabbIntersectsSegment=function(a,b,j,k){var c=this.minX,d=this.minY,e=this.maxX,f=this.maxY;if(a<=c&&j<=c||b<=d&&k<=d||a>=e&&j>=e||b>=f&&k>=f)return!1;var g=(k-b)/(j-a),h=g*(c-a)+b;if(h>d&&h<f||(h=g*(e-a)+b)>d&&h<f)return!0;var i=(d-b)/g+a;return i>c&&i<e||(i=(f-b)/g+a)>c&&i<e},a.prototype.aabbIntersectsSkeleton=function(a){return this.minX<a.maxX&&this.maxX>a.minX&&this.minY<a.maxY&&this.maxY>a.minY},a.prototype.containsPoint=function(c,d){for(var b=this.polygons,a=0,e=b.length;a<e;a++)if(this.containsPointPolygon(b[a],c,d))return this.boundingBoxes[a];return null},a.prototype.containsPointPolygon=function(h,k,a){for(var c=h,i=h.length,e=i-2,f=!1,b=0;b<i;b+=2){var d=c[b+1],g=c[e+1];if(d<a&&g>=a||g<a&&d>=a){var j=c[b];j+(a-d)/(g-d)*(c[e]-j)<k&&(f=!f)}e=b}return f},a.prototype.intersectsSegment=function(c,d,e,f){for(var b=this.polygons,a=0,g=b.length;a<g;a++)if(this.intersectsSegmentPolygon(b[a],c,d,e,f))return this.boundingBoxes[a];return null},a.prototype.intersectsSegmentPolygon=function(n,g,h,i,j){for(var k=n,m=n.length,o=g-i,p=h-j,q=g*j-h*i,c=k[m-2],d=k[m-1],l=0;l<m;l+=2){var e=k[l],f=k[l+1],r=c*f-d*e,s=c-e,t=d-f,u=o*t-p*s,a=(q*s-o*r)/u;if((a>=c&&a<=e||a>=e&&a<=c)&&(a>=g&&a<=i||a>=i&&a<=g)){var b=(q*t-p*r)/u;if((b>=d&&b<=f||b>=f&&b<=d)&&(b>=h&&b<=j||b>=j&&b<=h))return!0}c=e,d=f}return!1},a.prototype.getPolygon=function(a){if(null==a)throw new Error("boundingBox cannot be null.");var b=this.boundingBoxes.indexOf(a);return -1==b?null:this.polygons[b]},a.prototype.getWidth=function(){return this.maxX-this.minX},a.prototype.getHeight=function(){return this.maxY-this.minY},a}(),bU=function(){function a(){this.bones=new Array,this.slots=new Array,this.skins=new Array,this.events=new Array,this.animations=new Array,this.ikConstraints=new Array,this.transformConstraints=new Array,this.pathConstraints=new Array,this.fps=0}return a.prototype.findBone=function(b){if(null==b)throw new Error("boneName cannot be null.");for(var c=this.bones,a=0,e=c.length;a<e;a++){var d=c[a];if(d.name==b)return d}return null},a.prototype.findBoneIndex=function(b){if(null==b)throw new Error("boneName cannot be null.");for(var c=this.bones,a=0,d=c.length;a<d;a++)if(c[a].name==b)return a;return -1},a.prototype.findSlot=function(b){if(null==b)throw new Error("slotName cannot be null.");for(var c=this.slots,a=0,e=c.length;a<e;a++){var d=c[a];if(d.name==b)return d}return null},a.prototype.findSlotIndex=function(b){if(null==b)throw new Error("slotName cannot be null.");for(var c=this.slots,a=0,d=c.length;a<d;a++)if(c[a].name==b)return a;return -1},a.prototype.findSkin=function(b){if(null==b)throw new Error("skinName cannot be null.");for(var c=this.skins,a=0,e=c.length;a<e;a++){var d=c[a];if(d.name==b)return d}return null},a.prototype.findEvent=function(b){if(null==b)throw new Error("eventDataName cannot be null.");for(var c=this.events,a=0,e=c.length;a<e;a++){var d=c[a];if(d.name==b)return d}return null},a.prototype.findAnimation=function(b){if(null==b)throw new Error("animationName cannot be null.");for(var c=this.animations,a=0,e=c.length;a<e;a++){var d=c[a];if(d.name==b)return d}return null},a.prototype.findIkConstraint=function(b){if(null==b)throw new Error("constraintName cannot be null.");for(var c=this.ikConstraints,a=0,e=c.length;a<e;a++){var d=c[a];if(d.name==b)return d}return null},a.prototype.findTransformConstraint=function(b){if(null==b)throw new Error("constraintName cannot be null.");for(var c=this.transformConstraints,a=0,e=c.length;a<e;a++){var d=c[a];if(d.name==b)return d}return null},a.prototype.findPathConstraint=function(b){if(null==b)throw new Error("constraintName cannot be null.");for(var c=this.pathConstraints,a=0,e=c.length;a<e;a++){var d=c[a];if(d.name==b)return d}return null},a.prototype.findPathConstraintIndex=function(b){if(null==b)throw new Error("pathConstraintName cannot be null.");for(var c=this.pathConstraints,a=0,d=c.length;a<d;a++)if(c[a].name==b)return a;return -1},a}(),bV=function(a,b,c){if(this.color=new aj(1,1,1,1),a<0)throw new Error("index must be >= 0.");if(null==b)throw new Error("name cannot be null.");if(null==c)throw new Error("boneData cannot be null.");this.index=a,this.name=b,this.boneData=c},bW=function(a){if(this.order=0,this.bones=new Array,this.rotateMix=0,this.translateMix=0,this.scaleMix=0,this.shearMix=0,this.offsetRotation=0,this.offsetX=0,this.offsetY=0,this.offsetScaleX=0,this.offsetScaleY=0,this.offsetShearY=0,this.relative=!1,this.local=!1,null==a)throw new Error("name cannot be null.");this.name=a},bX=function(){function a(a){if(this.attachments=new Array,null==a)throw new Error("name cannot be null.");this.name=a}return a.prototype.addAttachment=function(a,d,c){if(null==c)throw new Error("attachment cannot be null.");var b=this.attachments;a>=b.length&&(b.length=a+1),b[a]||(b[a]={}),b[a][d]=c},a.prototype.getAttachment=function(b,c){var a=this.attachments[b];return a?a[c]:null},a.prototype.attachAll=function(c,d){for(var a=0,b=0;b<c.slots.length;b++){var e=c.slots[b],f=e.getAttachment();if(f&&a<d.attachments.length){var g=d.attachments[a];for(var h in g)if(f==g[h]){var i=this.getAttachment(a,h);null!=i&&e.setAttachment(i);break}}a++}},a}(),bY=function(){function b(a){this.scale=1,this.linkedMeshes=new Array,this.attachmentLoader=a}return b.prototype.readSkeletonData=function(t){var o=this.scale,e=new bU,f="string"==typeof t?JSON.parse(t):t,p=f.skeleton;if(null!=p&&(e.hash=p.hash,e.version=p.spine,e.width=p.width,e.height=p.height,e.fps=p.fps,e.imagesPath=p.images),f.bones)for(var g=0;g<f.bones.length;g++){var h=f.bones[g],x=null,u=this.getValue(h,"parent",null);if(null!=u&&null==(x=e.findBone(u)))throw new Error("Parent bone not found: "+u);var c=new bJ(e.bones.length,h.name,x);c.length=this.getValue(h,"length",0)*o,c.x=this.getValue(h,"x",0)*o,c.y=this.getValue(h,"y",0)*o,c.rotation=this.getValue(h,"rotation",0),c.scaleX=this.getValue(h,"scaleX",1),c.scaleY=this.getValue(h,"scaleY",1),c.shearX=this.getValue(h,"shearX",0),c.shearY=this.getValue(h,"shearY",0),c.transformMode=b.transformModeFromString(this.getValue(h,"transform","normal")),e.bones.push(c)}if(f.slots)for(var g=0;g<f.slots.length;g++){var k=f.slots[g],s=k.name,i=k.bone,y=e.findBone(i);if(null==y)throw new Error("Slot bone not found: "+i);var c=new bV(e.slots.length,s,y),z=this.getValue(k,"color",null);null!=z&&c.color.setFromString(z);var A=this.getValue(k,"dark",null);null!=A&&(c.darkColor=new aj(1,1,1,1),c.darkColor.setFromString(A)),c.attachmentName=this.getValue(k,"attachment",null),c.blendMode=b.blendModeFromString(this.getValue(k,"blend","normal")),e.slots.push(c)}if(f.ik)for(var g=0;g<f.ik.length;g++){var d=f.ik[g],c=new bN(d.name);c.order=this.getValue(d,"order",0);for(var j=0;j<d.bones.length;j++){var i=d.bones[j],l=e.findBone(i);if(null==l)throw new Error("IK bone not found: "+i);c.bones.push(l)}var m=d.target;if(c.target=e.findBone(m),null==c.target)throw new Error("IK target bone not found: "+m);c.bendDirection=this.getValue(d,"bendPositive",!0)?1:-1,c.mix=this.getValue(d,"mix",1),e.ikConstraints.push(c)}if(f.transform)for(var g=0;g<f.transform.length;g++){var d=f.transform[g],c=new bW(d.name);c.order=this.getValue(d,"order",0);for(var j=0;j<d.bones.length;j++){var i=d.bones[j],l=e.findBone(i);if(null==l)throw new Error("Transform constraint bone not found: "+i);c.bones.push(l)}var m=d.target;if(c.target=e.findBone(m),null==c.target)throw new Error("Transform constraint target bone not found: "+m);c.local=this.getValue(d,"local",!1),c.relative=this.getValue(d,"relative",!1),c.offsetRotation=this.getValue(d,"rotation",0),c.offsetX=this.getValue(d,"x",0)*o,c.offsetY=this.getValue(d,"y",0)*o,c.offsetScaleX=this.getValue(d,"scaleX",0),c.offsetScaleY=this.getValue(d,"scaleY",0),c.offsetShearY=this.getValue(d,"shearY",0),c.rotateMix=this.getValue(d,"rotateMix",1),c.translateMix=this.getValue(d,"translateMix",1),c.scaleMix=this.getValue(d,"scaleMix",1),c.shearMix=this.getValue(d,"shearMix",1),e.transformConstraints.push(c)}if(f.path)for(var g=0;g<f.path.length;g++){var d=f.path[g],c=new bO(d.name);c.order=this.getValue(d,"order",0);for(var j=0;j<d.bones.length;j++){var i=d.bones[j],l=e.findBone(i);if(null==l)throw new Error("Transform constraint bone not found: "+i);c.bones.push(l)}var m=d.target;if(c.target=e.findSlot(m),null==c.target)throw new Error("Path target slot not found: "+m);c.positionMode=b.positionModeFromString(this.getValue(d,"positionMode","percent")),c.spacingMode=b.spacingModeFromString(this.getValue(d,"spacingMode","length")),c.rotateMode=b.rotateModeFromString(this.getValue(d,"rotateMode","tangent")),c.offsetRotation=this.getValue(d,"rotation",0),c.position=this.getValue(d,"position",0),c.positionMode==a.PositionMode.Fixed&&(c.position*=o),c.spacing=this.getValue(d,"spacing",0),(c.spacingMode==I.Length||c.spacingMode==I.Fixed)&&(c.spacing*=o),c.rotateMix=this.getValue(d,"rotateMix",1),c.translateMix=this.getValue(d,"translateMix",1),e.pathConstraints.push(c)}if(f.skins)for(var B in f.skins){var C=f.skins[B],n=new bX(B);for(var s in C){var v=e.findSlotIndex(s);if(-1==v)throw new Error("Slot not found: "+s);var k=C[s];for(var w in k){var D=this.readAttachment(k[w],n,v,w,e);null!=D&&n.addAttachment(v,w,D)}}e.skins.push(n),"default"==n.name&&(e.defaultSkin=n)}for(var g=0,H=this.linkedMeshes.length;g<H;g++){var q=this.linkedMeshes[g],n=null==q.skin?e.defaultSkin:e.findSkin(q.skin);if(null==n)throw new Error("Skin not found: "+q.skin);var E=n.getAttachment(q.slotIndex,q.parent);if(null==E)throw new Error("Parent mesh not found: "+q.parent);q.mesh.setParentMesh(E)}if(this.linkedMeshes.length=0,f.events)for(var F in f.events){var r=f.events[F],c=new bL(F);c.intValue=this.getValue(r,"int",0),c.floatValue=this.getValue(r,"float",0),c.stringValue=this.getValue(r,"string",""),c.audioPath=this.getValue(r,"audio",null),null!=c.audioPath&&(c.volume=this.getValue(r,"volume",1),c.balance=this.getValue(r,"balance",0)),e.events.push(c)}if(f.animations)for(var G in f.animations){var J=f.animations[G];this.readAnimation(J,G,e)}return e},b.prototype.readAttachment=function(a,h,s,f,t){var g=this.scale;f=this.getValue(a,"name",f);var u=this.getValue(a,"type","region");switch(u){case"region":var c=this.getValue(a,"path",f),d=this.attachmentLoader.newRegionAttachment(h,f,c);if(null==d)break;d.path=c,d.x=this.getValue(a,"x",0)*g,d.y=this.getValue(a,"y",0)*g,d.scaleX=this.getValue(a,"scaleX",1),d.scaleY=this.getValue(a,"scaleY",1),d.rotation=this.getValue(a,"rotation",0),d.width=a.width*g,d.height=a.height*g;var b=this.getValue(a,"color",null);return null!=b&&d.color.setFromString(b),d;case"boundingbox":var k=this.attachmentLoader.newBoundingBoxAttachment(h,f);if(null==k)break;this.readVertices(a,k,a.vertexCount<<1);var b=this.getValue(a,"color",null);return null!=b&&k.color.setFromString(b),k;case"mesh":case"linkedmesh":var c=this.getValue(a,"path",f),e=this.attachmentLoader.newMeshAttachment(h,f,c);if(null==e)break;e.path=c;var b=this.getValue(a,"color",null);null!=b&&e.color.setFromString(b);var o=this.getValue(a,"parent",null);if(null!=o)return e.inheritDeform=this.getValue(a,"deform",!0),this.linkedMeshes.push(new dk(e,this.getValue(a,"skin",null),s,o)),e;var p=a.uvs;return this.readVertices(a,e,p.length),e.triangles=a.triangles,e.regionUVs=new Float32Array(p),e.hullLength=2*this.getValue(a,"hull",0),e;case"path":var c=this.attachmentLoader.newPathAttachment(h,f);if(null==c)break;c.closed=this.getValue(a,"closed",!1),c.constantSpeed=this.getValue(a,"constantSpeed",!0);var l=a.vertexCount;this.readVertices(a,c,l<<1);for(var q=am.newArray(l/3,0),m=0;m<a.lengths.length;m++)q[m]=a.lengths[m]*g;c.lengths=q;var b=this.getValue(a,"color",null);return null!=b&&c.color.setFromString(b),c;case"point":var i=this.attachmentLoader.newPointAttachment(h,f);if(null==i)break;i.x=this.getValue(a,"x",0)*g,i.y=this.getValue(a,"y",0)*g,i.rotation=this.getValue(a,"rotation",0);var b=this.getValue(a,"color",null);return null!=b&&i.color.setFromString(b),i;case"clipping":var j=this.attachmentLoader.newClippingAttachment(h,f);if(null==j)break;var n=this.getValue(a,"end",null);if(null!=n){var r=t.findSlot(n);if(null==r)throw new Error("Clipping end slot not found: "+n);j.endSlot=r}var l=a.vertexCount;this.readVertices(a,j,l<<1);var b=this.getValue(a,"color",null);return null!=b&&j.color.setFromString(b),j}return null},b.prototype.readVertices=function(k,c,h){var d=this.scale;c.worldVerticesLength=h;var b=k.vertices;if(h==b.length){var i=am.toFloatArray(b);if(1!=d)for(var a=0,f=b.length;a<f;a++)i[a]*=d;c.vertices=i;return}for(var e=new Array,g=new Array,a=0,f=b.length;a<f;){var j=b[a++];g.push(j);for(var l=a+4*j;a<l;a+=4)g.push(b[a]),e.push(b[a+1]*d),e.push(b[a+2]*d),e.push(b[a+3])}c.bones=g,c.vertices=am.toFloatArray(e)},b.prototype.readAnimation=function(h,_,j){var x=this.scale,k=new Array,g=0;if(h.slots)for(var p in h.slots){var t=h.slots[p],l=j.findSlotIndex(p);if(-1==l)throw new Error("Slot not found: "+p);for(var i in t){var f=t[i];if("attachment"==i){var b=new bu(f.length);b.slotIndex=l;for(var e=0,c=0;c<f.length;c++){var d=f[c];b.setFrame(e++,d.time,d.name)}k.push(b),g=Math.max(g,b.frames[b.getFrameCount()-1])}else if("color"==i){var b=new bs(f.length);b.slotIndex=l;for(var e=0,c=0;c<f.length;c++){var d=f[c],y=new aj;y.setFromString(d.color||"ffffffff"),b.setFrame(e,d.time,y.r,y.g,y.b,y.a),this.readCurve(d,b,e),e++}k.push(b),g=Math.max(g,b.frames[(b.getFrameCount()-1)*bs.ENTRIES])}else if("twoColor"==i){var b=new bt(f.length);b.slotIndex=l;for(var e=0,c=0;c<f.length;c++){var d=f[c],z=new aj,C=new aj;z.setFromString(d.light),C.setFromString(d.dark),b.setFrame(e,d.time,z.r,z.g,z.b,z.a,C.r,C.g,C.b),this.readCurve(d,b,e),e++}k.push(b),g=Math.max(g,b.frames[(b.getFrameCount()-1)*bt.ENTRIES])}else throw new Error("Invalid timeline type for a slot: "+i+" ("+p+")")}}if(h.bones)for(var D in h.bones){var V=h.bones[D],L=j.findBoneIndex(D);if(-1==L)throw new Error("Bone not found: "+D);for(var i in V){var f=V[i];if("rotate"===i){var b=new bp(f.length);b.boneIndex=L;for(var e=0,c=0;c<f.length;c++){var d=f[c];b.setFrame(e,d.time,d.angle),this.readCurve(d,b,e),e++}k.push(b),g=Math.max(g,b.frames[(b.getFrameCount()-1)*bp.ENTRIES])}else if("translate"===i||"scale"===i||"shear"===i){var b=null,q=1;"scale"===i?b=new bq(f.length):"shear"===i?b=new br(f.length):(b=new O(f.length),q=x),b.boneIndex=L;for(var e=0,c=0;c<f.length;c++){var d=f[c],aa=this.getValue(d,"x",0),ab=this.getValue(d,"y",0);b.setFrame(e,d.time,aa*q,ab*q),this.readCurve(d,b,e),e++}k.push(b),g=Math.max(g,b.frames[(b.getFrameCount()-1)*O.ENTRIES])}else throw new Error("Invalid timeline type for a bone: "+i+" ("+D+")")}}if(h.ik)for(var n in h.ik){var m=h.ik[n],M=j.findIkConstraint(n),b=new by(m.length);b.ikConstraintIndex=j.ikConstraints.indexOf(M);for(var e=0,c=0;c<m.length;c++){var d=m[c];b.setFrame(e,d.time,this.getValue(d,"mix",1),this.getValue(d,"bendPositive",!0)?1:-1,this.getValue(d,"compress",!1),this.getValue(d,"stretch",!1)),this.readCurve(d,b,e),e++}k.push(b),g=Math.max(g,b.frames[(b.getFrameCount()-1)*by.ENTRIES])}if(h.transform)for(var n in h.transform){var m=h.transform[n],M=j.findTransformConstraint(n),b=new bz(m.length);b.transformConstraintIndex=j.transformConstraints.indexOf(M);for(var e=0,c=0;c<m.length;c++){var d=m[c];b.setFrame(e,d.time,this.getValue(d,"rotateMix",1),this.getValue(d,"translateMix",1),this.getValue(d,"scaleMix",1),this.getValue(d,"shearMix",1)),this.readCurve(d,b,e),e++}k.push(b),g=Math.max(g,b.frames[(b.getFrameCount()-1)*bz.ENTRIES])}if(h.paths)for(var n in h.paths){var m=h.paths[n],E=j.findPathConstraintIndex(n);if(-1==E)throw new Error("Path constraint not found: "+n);var N=j.pathConstraints[E];for(var i in m){var f=m[i];if("position"===i||"spacing"===i){var b=null,q=1;"spacing"===i?(b=new bA(f.length),(N.spacingMode==I.Length||N.spacingMode==I.Fixed)&&(q=x)):(b=new W(f.length),N.positionMode==a.PositionMode.Fixed&&(q=x)),b.pathConstraintIndex=E;for(var e=0,c=0;c<f.length;c++){var d=f[c];b.setFrame(e,d.time,this.getValue(d,i,0)*q),this.readCurve(d,b,e),e++}k.push(b),g=Math.max(g,b.frames[(b.getFrameCount()-1)*W.ENTRIES])}else if("mix"===i){var b=new bB(f.length);b.pathConstraintIndex=E;for(var e=0,c=0;c<f.length;c++){var d=f[c];b.setFrame(e,d.time,this.getValue(d,"rotateMix",1),this.getValue(d,"translateMix",1)),this.readCurve(d,b,e),e++}k.push(b),g=Math.max(g,b.frames[(b.getFrameCount()-1)*bB.ENTRIES])}}}if(h.deform)for(var P in h.deform){var X=h.deform[P],Y=j.findSkin(P);if(null==Y){if(!as.FAIL_ON_NON_EXISTING_SKIN)continue;throw new Error("Skin not found: "+P)}for(var p in X){var t=X[p],l=j.findSlotIndex(p);if(-1==l)throw new Error("Slot not found: "+t.name);for(var i in t){var f=t[i],F=Y.getAttachment(l,i);if(null==F)throw new Error("Deform attachment not found: "+f.name);var Q=null!=F.bones,G=F.vertices,R=Q?G.length/3*2:G.length,b=new bv(f.length);b.slotIndex=l,b.attachment=F;for(var e=0,r=0;r<f.length;r++){var d=f[r],u=void 0,H=this.getValue(d,"vertices",null);if(null==H)u=Q?am.newFloatArray(R):G;else{u=am.newFloatArray(R);var Z=this.getValue(d,"offset",0);if(am.arrayCopy(H,0,u,Z,H.length),1!=x)for(var c=Z,ac=c+H.length;c<ac;c++)u[c]*=x;if(!Q)for(var c=0;c<R;c++)u[c]+=G[c]}b.setFrame(e,d.time,u),this.readCurve(d,b,e),e++}k.push(b),g=Math.max(g,b.frames[b.getFrameCount()-1])}}}var v=h.drawOrder;if(null==v&&(v=h.draworder),null!=v){for(var b=new bx(v.length),J=j.slots.length,e=0,r=0;r<v.length;r++){var $=v[r],A=null,K=this.getValue($,"offsets",null);if(null!=K){A=am.newArray(J,-1);for(var S=am.newArray(J-K.length,0),w=0,T=0,c=0;c<K.length;c++){var U=K[c],l=j.findSlotIndex(U.slot);if(-1==l)throw new Error("Slot not found: "+U.slot);for(;w!=l;)S[T++]=w++;A[w+U.offset]=w++}for(;w<J;)S[T++]=w++;for(var c=J-1;c>=0;c--)-1==A[c]&&(A[c]=S[--T])}b.setFrame(e++,$.time,A)}k.push(b),g=Math.max(g,b.frames[b.getFrameCount()-1])}if(h.events){for(var b=new bw(h.events.length),e=0,c=0;c<h.events.length;c++){var o=h.events[c],B=j.findEvent(o.name);if(null==B)throw new Error("Event not found: "+o.name);var s=new bK(am.toSinglePrecision(o.time),B);s.intValue=this.getValue(o,"int",B.intValue),s.floatValue=this.getValue(o,"float",B.floatValue),s.stringValue=this.getValue(o,"string",B.stringValue),null!=s.data.audioPath&&(s.volume=this.getValue(o,"volume",1),s.balance=this.getValue(o,"balance",0)),b.setFrame(e++,s)}k.push(b),g=Math.max(g,b.frames[b.getFrameCount()-1])}if(isNaN(g))throw new Error("Error while parsing animation, duration is NaN");j.animations.push(new bo(_,k,g))},b.prototype.readCurve=function(a,c,d){if(a.curve){if("stepped"===a.curve)c.setStepped(d);else if("[object Array]"===Object.prototype.toString.call(a.curve)){var b=a.curve;c.setCurve(d,b[0],b[1],b[2],b[3])}}},b.prototype.getValue=function(a,b,c){return void 0!==a[b]?a[b]:c},b.blendModeFromString=function(a){if("normal"==(a=a.toLowerCase()))return cX.BLEND_MODES.NORMAL;if("additive"==a)return cX.BLEND_MODES.ADD;if("multiply"==a)return cX.BLEND_MODES.MULTIPLY;if("screen"==a)return cX.BLEND_MODES.SCREEN;throw new Error("Unknown blend mode: "+a)},b.positionModeFromString=function(b){if("fixed"==(b=b.toLowerCase()))return a.PositionMode.Fixed;if("percent"==b)return a.PositionMode.Percent;throw new Error("Unknown position mode: "+b)},b.spacingModeFromString=function(a){if("length"==(a=a.toLowerCase()))return I.Length;if("fixed"==a)return I.Fixed;if("percent"==a)return I.Percent;throw new Error("Unknown position mode: "+a)},b.rotateModeFromString=function(b){if("tangent"==(b=b.toLowerCase()))return a.RotateMode.Tangent;if("chain"==b)return a.RotateMode.Chain;if("chainscale"==b)return a.RotateMode.ChainScale;throw new Error("Unknown rotate mode: "+b)},b.transformModeFromString=function(b){if("normal"==(b=b.toLowerCase()))return a.TransformMode.Normal;if("onlytranslation"==b)return a.TransformMode.OnlyTranslation;if("norotationorreflection"==b)return a.TransformMode.NoRotationOrReflection;if("noscale"==b)return a.TransformMode.NoScale;if("noscaleorreflection"==b)return a.TransformMode.NoScaleOrReflection;throw new Error("Unknown transform mode: "+b)},b}(),dk=function(a,b,c,d){this.mesh=a,this.skin=b,this.slotIndex=c,this.parent=d},bZ=function(b){function a(){return null!==b&&b.apply(this,arguments)||this}return di(a,b),a.prototype.createSkeleton=function(a){this.skeleton=new bS(a),this.skeleton.updateWorldTransform(),this.stateData=new bG(a),this.state=new bC(this.stateData)},a}(r),dl=Object.freeze({__proto__:null,Animation:bo,AnimationState:bC,AnimationStateAdapter2:bF,AnimationStateData:bG,AtlasAttachmentLoader:bH,Attachment:N,AttachmentTimeline:bu,Bone:bI,BoneData:bJ,BoundingBoxAttachment:bg,ClippingAttachment:bh,ColorTimeline:bs,CurveTimeline:n,DeformTimeline:bv,DrawOrderTimeline:bx,Event:bK,EventData:bL,EventQueue:bE,EventTimeline:bw,get EventType(){return H},IkConstraint:bM,IkConstraintData:bN,IkConstraintTimeline:by,JitterEffect:bm,MeshAttachment:bi,PathAttachment:bj,PathConstraint:bP,PathConstraintData:bO,PathConstraintMixTimeline:bB,PathConstraintPositionTimeline:W,PathConstraintSpacingTimeline:bA,PointAttachment:bk,RegionAttachment:bl,RotateTimeline:bp,ScaleTimeline:bq,ShearTimeline:br,Skeleton:bS,SkeletonBounds:bT,SkeletonData:bU,SkeletonJson:bY,Skin:bX,Slot:bQ,SlotData:bV,get SpacingMode(){return I},Spine:bZ,SwirlEffect:bn,get TimelineType(){return G},TrackEntry:bD,TransformConstraint:bR,TransformConstraintData:bW,TransformConstraintTimeline:bz,TranslateTimeline:O,TwoColorTimeline:bt,VertexAttachment:u}),dm=function(a,b){return(dm=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(c,a){for(var b in a)Object.prototype.hasOwnProperty.call(a,b)&&(c[b]=a[b])})(a,b)};function dn(b,a){if("function"!=typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");function c(){this.constructor=b}dm(b,a),b.prototype=null===a?Object.create(a):(c.prototype=a.prototype,new c)}var d,P=function(a){if(!a)throw new Error("name cannot be null.");this.name=a},w=function(b){function a(d){var c=b.call(this,d)||this;return c.id=a.nextID++,c.bones=null,c.vertices=[],c.worldVerticesLength=0,c.timelineAttachment=c,c}return dn(a,b),a.prototype.computeWorldVerticesOld=function(a,b){this.computeWorldVertices(a,0,this.worldVerticesLength,b,0,2)},a.prototype.computeWorldVertices=function(s,v,k,i,o,p){k=o+(k>>1)*p;var z=s.bone.skeleton,q=s.deform,e=this.vertices,j=this.bones;if(!j){q.length>0&&(e=q);for(var a=s.bone.matrix,A=a.tx,B=a.ty,C=a.a,d=a.c,D=a.b,E=a.d,t=v,b=o;b<k;t+=2,b+=p){var f=e[t],g=e[t+1];i[b]=f*C+g*d+A,i[b+1]=f*D+g*E+B}return}for(var c=0,r=0,w=0;w<v;w+=2){var h=j[c];c+=h+1,r+=h}var x=z.bones;if(0==q.length)for(var b=o,d=3*r;b<k;b+=p){var l=0,m=0,h=j[c++];for(h+=c;c<h;c++,d+=3){var a=x[j[c]].matrix,f=e[d],g=e[d+1],n=e[d+2];l+=(f*a.a+g*a.c+a.tx)*n,m+=(f*a.b+g*a.d+a.ty)*n}i[b]=l,i[b+1]=m}else for(var y=q,b=o,d=3*r,u=r<<1;b<k;b+=p){var l=0,m=0,h=j[c++];for(h+=c;c<h;c++,d+=3,u+=2){var a=x[j[c]].matrix,f=e[d]+y[u],g=e[d+1]+y[u+1],n=e[d+2];l+=(f*a.a+g*a.c+a.tx)*n,m+=(f*a.b+g*a.d+a.ty)*n}i[b]=l,i[b+1]=m}},a.prototype.copyTo=function(a){this.bones?(a.bones=new Array(this.bones.length),am.arrayCopy(this.bones,0,a.bones,0,this.bones.length)):a.bones=null,this.vertices&&(a.vertices=am.newFloatArray(this.vertices.length),am.arrayCopy(this.vertices,0,a.vertices,0,this.vertices.length)),a.worldVerticesLength=this.worldVerticesLength,a.timelineAttachment=this.timelineAttachment},a.nextID=0,a}(P),b$=function(c){function b(d){var b=c.call(this,d)||this;return b.type=a.AttachmentType.BoundingBox,b.color=new aj(1,1,1,1),b}return dn(b,c),b.prototype.copy=function(){var a=new b(this.name);return this.copyTo(a),a.color.setFromColor(this.color),a},b}(w),b_=function(c){function b(d){var b=c.call(this,d)||this;return b.type=a.AttachmentType.Clipping,b.endSlot=null,b.color=new aj(.2275,.2275,.8078,1),b}return dn(b,c),b.prototype.copy=function(){var a=new b(this.name);return this.copyTo(a),a.endSlot=this.endSlot,a.color.setFromColor(this.color),a},b}(w),b0=function(c){function b(d,e){var b=c.call(this,d)||this;return b.type=a.AttachmentType.Mesh,b.region=null,b.triangles=[],b.color=new aj(1,1,1,1),b.width=0,b.height=0,b.hullLength=0,b.edges=[],b.parentMesh=null,b.sequence=null,b.tempColor=new aj(0,0,0,0),b.path=e,b}return dn(b,c),b.prototype.getParentMesh=function(){return this.parentMesh},b.prototype.setParentMesh=function(a){this.parentMesh=a,a&&(this.bones=a.bones,this.vertices=a.vertices,this.worldVerticesLength=a.worldVerticesLength,this.regionUVs=a.regionUVs,this.triangles=a.triangles,this.hullLength=a.hullLength,this.worldVerticesLength=a.worldVerticesLength)},b.prototype.copy=function(){if(this.parentMesh)return this.newLinkedMesh();var a=new b(this.name,this.path);return a.region=this.region,a.color.setFromColor(this.color),this.copyTo(a),a.regionUVs=new Float32Array(this.regionUVs.length),am.arrayCopy(this.regionUVs,0,a.regionUVs,0,this.regionUVs.length),a.triangles=new Array(this.triangles.length),am.arrayCopy(this.triangles,0,a.triangles,0,this.triangles.length),a.hullLength=this.hullLength,a.sequence=null!=this.sequence?this.sequence.copy():null,this.edges&&(a.edges=new Array(this.edges.length),am.arrayCopy(this.edges,0,a.edges,0,this.edges.length)),a.width=this.width,a.height=this.height,a},b.prototype.computeWorldVertices=function(a,b,d,e,f,g){null!=this.sequence&&this.sequence.apply(a,this),c.prototype.computeWorldVertices.call(this,a,b,d,e,f,g)},b.prototype.newLinkedMesh=function(){var a=new b(this.name,this.path);return a.region=this.region,a.color.setFromColor(this.color),a.timelineAttachment=this.timelineAttachment,a.setParentMesh(this.parentMesh?this.parentMesh:this),a},b}(w),b1=function(c){function b(d){var b=c.call(this,d)||this;return b.type=a.AttachmentType.Path,b.lengths=[],b.closed=!1,b.constantSpeed=!1,b.color=new aj(1,1,1,1),b}return dn(b,c),b.prototype.copy=function(){var a=new b(this.name);return this.copyTo(a),a.lengths=new Array(this.lengths.length),am.arrayCopy(this.lengths,0,a.lengths,0,this.lengths.length),a.closed=closed,a.constantSpeed=this.constantSpeed,a.color.setFromColor(this.color),a},b}(w),b2=function(c){function b(d){var b=c.call(this,d)||this;return b.type=a.AttachmentType.Point,b.x=0,b.y=0,b.rotation=0,b.color=new aj(.38,.94,0,1),b}return dn(b,c),b.prototype.computeWorldPosition=function(b,c){var a=b.matrix;return c.x=this.x*a.a+this.y*a.c+b.worldX,c.y=this.x*a.b+this.y*a.d+b.worldY,c},b.prototype.computeWorldRotation=function(d){var a=d.matrix,b=ak.cosDeg(this.rotation),c=ak.sinDeg(this.rotation),e=b*a.a+c*a.c,f=b*a.b+c*a.d;return Math.atan2(f,e)*ak.radDeg},b.prototype.copy=function(){var a=new b(this.name);return a.x=this.x,a.y=this.y,a.rotation=this.rotation,a.color.setFromColor(this.color),a},b}(w),b3=function(c){function b(d,e){var b=c.call(this,d)||this;return b.type=a.AttachmentType.Region,b.x=0,b.y=0,b.scaleX=1,b.scaleY=1,b.rotation=0,b.width=0,b.height=0,b.color=new aj(1,1,1,1),b.rendererObject=null,b.region=null,b.sequence=null,b.offset=am.newFloatArray(8),b.uvs=am.newFloatArray(8),b.tempColor=new aj(1,1,1,1),b.path=e,b}return dn(b,c),b.prototype.updateRegion=function(){if(!this.region)throw new Error("Region not set.");var a=this.region,h=this.width/this.region.originalWidth*this.scaleX,i=this.height/this.region.originalHeight*this.scaleY,f=-this.width/2*this.scaleX+this.region.offsetX*h,g=-this.height/2*this.scaleY+this.region.offsetY*i,j=f+this.region.width*h,k=g+this.region.height*i,l=this.rotation*Math.PI/180,d=Math.cos(l),e=Math.sin(l),m=this.x,n=this.y,o=f*d+m,p=f*e,q=g*d+n,r=g*e,s=j*d+m,t=j*e,u=k*d+n,v=k*e,c=this.offset;c[0]=o-r,c[1]=q+p,c[2]=o-v,c[3]=u+p,c[4]=s-v,c[5]=u+t,c[6]=s-r,c[7]=q+t;var b=this.uvs;90==a.degrees?(b[2]=a.u,b[3]=a.v2,b[4]=a.u,b[5]=a.v,b[6]=a.u2,b[7]=a.v,b[0]=a.u2,b[1]=a.v2):(b[0]=a.u,b[1]=a.v2,b[2]=a.u,b[3]=a.v,b[4]=a.u2,b[5]=a.v,b[6]=a.u2,b[7]=a.v2)},b.prototype.computeWorldVertices=function(n,d,c,m){null!=this.sequence&&this.sequence.apply(n,this);var o=n.bone,e=this.offset,f=o.matrix,g=f.tx,h=f.ty,i=f.a,j=f.c,k=f.b,l=f.d,a=0,b=0;a=e[0],b=e[1],d[c]=a*i+b*j+g,d[c+1]=a*k+b*l+h,c+=m,a=e[2],b=e[3],d[c]=a*i+b*j+g,d[c+1]=a*k+b*l+h,c+=m,a=e[4],b=e[5],d[c]=a*i+b*j+g,d[c+1]=a*k+b*l+h,c+=m,a=e[6],b=e[7],d[c]=a*i+b*j+g,d[c+1]=a*k+b*l+h},b.prototype.copy=function(){var a=new b(this.name,this.path);return a.region=this.region,a.rendererObject=this.rendererObject,a.x=this.x,a.y=this.y,a.scaleX=this.scaleX,a.scaleY=this.scaleY,a.rotation=this.rotation,a.width=this.width,a.height=this.height,am.arrayCopy(this.uvs,0,a.uvs,0,8),am.arrayCopy(this.offset,0,a.offset,0,8),a.color.setFromColor(this.color),a.sequence=null!=this.sequence?this.sequence.copy():null,a},b.X1=0,b.Y1=1,b.C1R=2,b.C1G=3,b.C1B=4,b.C1A=5,b.U1=6,b.V1=7,b.X2=8,b.Y2=9,b.C2R=10,b.C2G=11,b.C2B=12,b.C2A=13,b.U2=14,b.V2=15,b.X3=16,b.Y3=17,b.C3R=18,b.C3G=19,b.C3B=20,b.C3A=21,b.U3=22,b.V3=23,b.X4=24,b.Y4=25,b.C4R=26,b.C4G=27,b.C4B=28,b.C4A=29,b.U4=30,b.V4=31,b}(P),b4=function(){function a(b){this.id=a.nextID(),this.start=0,this.digits=0,this.setupIndex=0,this.regions=new Array(b)}return a.prototype.copy=function(){var b=new a(this.regions.length);return am.arrayCopy(this.regions,0,b.regions,0,this.regions.length),b.start=this.start,b.digits=this.digits,b.setupIndex=this.setupIndex,b},a.prototype.apply=function(d,b){var a=d.sequenceIndex;-1==a&&(a=this.setupIndex),a>=this.regions.length&&(a=this.regions.length-1);var c=this.regions[a];b.region!=c&&(b.region=c)},a.prototype.getPath=function(d,e){for(var a=d,b=(this.start+e).toString(),c=this.digits-b.length;c>0;c--)a+="0";return a+b},a.nextID=function(){return a._nextID++},a._nextID=0,a}();(d=k||(k={}))[d.hold=0]="hold",d[d.once=1]="once",d[d.loop=2]="loop",d[d.pingpong=3]="pingpong",d[d.onceReverse=4]="onceReverse",d[d.loopReverse=5]="loopReverse",d[d.pingpongReverse=6]="pingpongReverse";var g,b5=[k.hold,k.once,k.loop,k.pingpong,k.onceReverse,k.loopReverse,k.pingpongReverse],b6=function(){function a(a,b,c){if(this.timelines=[],this.timelineIds=new ai,!a)throw new Error("name cannot be null.");this.name=a,this.setTimelines(b),this.duration=c}return a.prototype.setTimelines=function(a){if(!a)throw new Error("timelines cannot be null.");this.timelines=a,this.timelineIds.clear();for(var b=0;b<a.length;b++)this.timelineIds.addAll(a[b].getPropertyIds())},a.prototype.hasTimeline=function(b){for(var a=0;a<b.length;a++)if(this.timelineIds.contains(b[a]))return!0;return!1},a.prototype.apply=function(c,a,d,f,g,h,i,j){if(!c)throw new Error("skeleton cannot be null.");f&&0!=this.duration&&(d%=this.duration,a>0&&(a%=this.duration));for(var e=this.timelines,b=0,k=e.length;b<k;b++)e[b].apply(c,a,d,g,h,i,j)},a}(),dp={rotate:0,x:1,y:2,scaleX:3,scaleY:4,shearX:5,shearY:6,rgb:7,alpha:8,rgb2:9,attachment:10,deform:11,event:12,drawOrder:13,ikConstraint:14,transformConstraint:15,pathConstraintPosition:16,pathConstraintSpacing:17,pathConstraintMix:18,sequence:19},x=function(){function a(a,b){this.propertyIds=b,this.frames=am.newFloatArray(a*this.getFrameEntries())}return a.prototype.getPropertyIds=function(){return this.propertyIds},a.prototype.getFrameEntries=function(){return 1},a.prototype.getFrameCount=function(){return this.frames.length/this.getFrameEntries()},a.prototype.getDuration=function(){return this.frames[this.frames.length-this.getFrameEntries()]},a.search1=function(b,d){for(var c=b.length,a=1;a<c;a++)if(b[a]>d)return a-1;return c-1},a.search=function(c,e,a){for(var d=c.length,b=a;b<d;b+=a)if(c[b]>e)return b-a;return d-a},a}(),h=function(b){function a(a,d,e){var c=b.call(this,a,e)||this;return c.curves=am.newFloatArray(a+18*d),c.curves[a-1]=1,c}return dn(a,b),a.prototype.setLinear=function(a){this.curves[a]=0},a.prototype.setStepped=function(a){this.curves[a]=1},a.prototype.shrink=function(c){var a=this.getFrameCount()+18*c;if(this.curves.length>a){var b=am.newFloatArray(a);am.arrayCopy(this.curves,0,b,0,a),this.curves=b}},a.prototype.setBezier=function(s,t,u,b,c,d,e,k,l,v,w){var f=this.curves,a=this.getFrameCount()+18*s;0==u&&(f[t]=2+a);for(var m=(b-2*d+k)*.03,n=(c-2*e+l)*.03,g=((d-k)*3-b+v)*.006,h=((e-l)*3-c+w)*.006,o=2*m+g,p=2*n+h,i=(d-b)*.3+m+.16666667*g,j=(e-c)*.3+n+.16666667*h,q=b+i,r=c+j,x=a+18;a<x;a+=2)f[a]=q,f[a+1]=r,i+=o,j+=p,o+=g,p+=h,q+=i,r+=j},a.prototype.getBezierValue=function(c,d,f,a){var b=this.curves;if(b[a]>c){var g=this.frames[d],h=this.frames[d+f];return h+(c-g)/(b[a]-g)*(b[a+1]-h)}var e=a+18;for(a+=2;a<e;a+=2)if(b[a]>=c){var i=b[a-2],j=b[a-1];return j+(c-i)/(b[a]-i)*(b[a+1]-j)}d+=this.getFrameEntries();var k=b[e-2],l=b[e-1];return l+(c-k)/(this.frames[d]-k)*(this.frames[d+f]-l)},a}(x),i=function(b){function a(a,c,d){return b.call(this,a,c,[d])||this}return dn(a,b),a.prototype.getFrameEntries=function(){return 2},a.prototype.setFrame=function(a,b,c){a<<=1,this.frames[a]=b,this.frames[a+1]=c},a.prototype.getCurveValue=function(d){for(var b=this.frames,a=b.length-2,c=2;c<=a;c+=2)if(b[c]>d){a=c-2;break}var e=this.curves[a>>1];switch(e){case 0:var f=b[a],g=b[a+1];return g+(d-f)/(b[a+2]-f)*(b[a+2+1]-g);case 1:return b[a+1]}return this.getBezierValue(d,a,1,e-2)},a}(h),B=function(b){function a(a,c,d,e){return b.call(this,a,c,[d,e])||this}return dn(a,b),a.prototype.getFrameEntries=function(){return 3},a.prototype.setFrame=function(a,b,c,d){a*=3,this.frames[a]=b,this.frames[a+1]=c,this.frames[a+2]=d},a}(h),b7=function(c){function b(d,e,b){var a=c.call(this,d,e,dp.rotate+"|"+b)||this;return a.boneIndex=0,a.boneIndex=b,a}return dn(b,c),b.prototype.apply=function(g,h,e,i,c,f,j){var b=g.bones[this.boneIndex];if(b.active){if(e<this.frames[0]){switch(f){case a.MixBlend.setup:b.rotation=b.data.rotation;break;case a.MixBlend.first:b.rotation+=(b.data.rotation-b.rotation)*c}return}var d=this.getCurveValue(e);switch(f){case a.MixBlend.setup:b.rotation=b.data.rotation+d*c;break;case a.MixBlend.first:case a.MixBlend.replace:d+=b.data.rotation-b.rotation;case a.MixBlend.add:b.rotation+=d*c}}},b}(i),b8=function(c){function b(d,e,a){var b=c.call(this,d,e,dp.x+"|"+a,dp.y+"|"+a)||this;return b.boneIndex=0,b.boneIndex=a,b}return dn(b,c),b.prototype.apply=function(m,n,h,o,e,j,p){var b=m.bones[this.boneIndex];if(b.active){var d=this.frames;if(h<d[0]){switch(j){case a.MixBlend.setup:b.x=b.data.x,b.y=b.data.y;break;case a.MixBlend.first:b.x+=(b.data.x-b.x)*e,b.y+=(b.data.y-b.y)*e}return}var f=0,g=0,c=x.search(d,h,3),i=this.curves[c/3];switch(i){case 0:var k=d[c];f=d[c+1],g=d[c+2];var l=(h-k)/(d[c+3]-k);f+=(d[c+3+1]-f)*l,g+=(d[c+3+2]-g)*l;break;case 1:f=d[c+1],g=d[c+2];break;default:f=this.getBezierValue(h,c,1,i-2),g=this.getBezierValue(h,c,2,i+18-2)}switch(j){case a.MixBlend.setup:b.x=b.data.x+f*e,b.y=b.data.y+g*e;break;case a.MixBlend.first:case a.MixBlend.replace:b.x+=(b.data.x+f-b.x)*e,b.y+=(b.data.y+g-b.y)*e;break;case a.MixBlend.add:b.x+=f*e,b.y+=g*e}}},b}(B),b9=function(c){function b(d,e,b){var a=c.call(this,d,e,dp.x+"|"+b)||this;return a.boneIndex=0,a.boneIndex=b,a}return dn(b,c),b.prototype.apply=function(g,h,e,i,c,f,j){var b=g.bones[this.boneIndex];if(b.active){if(e<this.frames[0]){switch(f){case a.MixBlend.setup:b.x=b.data.x;break;case a.MixBlend.first:b.x+=(b.data.x-b.x)*c}return}var d=this.getCurveValue(e);switch(f){case a.MixBlend.setup:b.x=b.data.x+d*c;break;case a.MixBlend.first:case a.MixBlend.replace:b.x+=(b.data.x+d-b.x)*c;break;case a.MixBlend.add:b.x+=d*c}}},b}(i),ca=function(c){function b(d,e,b){var a=c.call(this,d,e,dp.y+"|"+b)||this;return a.boneIndex=0,a.boneIndex=b,a}return dn(b,c),b.prototype.apply=function(g,h,e,i,c,f,j){var b=g.bones[this.boneIndex];if(b.active){if(e<this.frames[0]){switch(f){case a.MixBlend.setup:b.y=b.data.y;break;case a.MixBlend.first:b.y+=(b.data.y-b.y)*c}return}var d=this.getCurveValue(e);switch(f){case a.MixBlend.setup:b.y=b.data.y+d*c;break;case a.MixBlend.first:case a.MixBlend.replace:b.y+=(b.data.y+d-b.y)*c;break;case a.MixBlend.add:b.y+=d*c}}},b}(i),cb=function(c){function b(d,e,a){var b=c.call(this,d,e,dp.scaleX+"|"+a,dp.scaleY+"|"+a)||this;return b.boneIndex=0,b.boneIndex=a,b}return dn(b,c),b.prototype.apply=function(o,q,j,r,e,k,p){var c,d,b=o.bones[this.boneIndex];if(b.active){var i=this.frames;if(j<i[0]){switch(k){case a.MixBlend.setup:b.scaleX=b.data.scaleX,b.scaleY=b.data.scaleY;break;case a.MixBlend.first:b.scaleX+=(b.data.scaleX-b.scaleX)*e,b.scaleY+=(b.data.scaleY-b.scaleY)*e}return}var h=x.search(i,j,3),l=this.curves[h/3];switch(l){case 0:var m=i[h];c=i[h+1],d=i[h+2];var n=(j-m)/(i[h+3]-m);c+=(i[h+3+1]-c)*n,d+=(i[h+3+2]-d)*n;break;case 1:c=i[h+1],d=i[h+2];break;default:c=this.getBezierValue(j,h,1,l-2),d=this.getBezierValue(j,h,2,l+18-2)}if(c*=b.data.scaleX,d*=b.data.scaleY,1==e)k==a.MixBlend.add?(b.scaleX+=c-b.data.scaleX,b.scaleY+=d-b.data.scaleY):(b.scaleX=c,b.scaleY=d);else{var f=0,g=0;if(p==a.MixDirection.mixOut)switch(k){case a.MixBlend.setup:f=b.data.scaleX,g=b.data.scaleY,b.scaleX=f+(Math.abs(c)*ak.signum(f)-f)*e,b.scaleY=g+(Math.abs(d)*ak.signum(g)-g)*e;break;case a.MixBlend.first:case a.MixBlend.replace:f=b.scaleX,g=b.scaleY,b.scaleX=f+(Math.abs(c)*ak.signum(f)-f)*e,b.scaleY=g+(Math.abs(d)*ak.signum(g)-g)*e;break;case a.MixBlend.add:b.scaleX+=(c-b.data.scaleX)*e,b.scaleY+=(d-b.data.scaleY)*e}else switch(k){case a.MixBlend.setup:f=Math.abs(b.data.scaleX)*ak.signum(c),g=Math.abs(b.data.scaleY)*ak.signum(d),b.scaleX=f+(c-f)*e,b.scaleY=g+(d-g)*e;break;case a.MixBlend.first:case a.MixBlend.replace:f=Math.abs(b.scaleX)*ak.signum(c),g=Math.abs(b.scaleY)*ak.signum(d),b.scaleX=f+(c-f)*e,b.scaleY=g+(d-g)*e;break;case a.MixBlend.add:b.scaleX+=(c-b.data.scaleX)*e,b.scaleY+=(d-b.data.scaleY)*e}}}},b}(B),cc=function(c){function b(d,e,b){var a=c.call(this,d,e,dp.scaleX+"|"+b)||this;return a.boneIndex=0,a.boneIndex=b,a}return dn(b,c),b.prototype.apply=function(h,j,g,k,e,f,i){var b=h.bones[this.boneIndex];if(b.active){if(g<this.frames[0]){switch(f){case a.MixBlend.setup:b.scaleX=b.data.scaleX;break;case a.MixBlend.first:b.scaleX+=(b.data.scaleX-b.scaleX)*e}return}var d=this.getCurveValue(g)*b.data.scaleX;if(1==e)f==a.MixBlend.add?b.scaleX+=d-b.data.scaleX:b.scaleX=d;else{var c=0;if(i==a.MixDirection.mixOut)switch(f){case a.MixBlend.setup:c=b.data.scaleX,b.scaleX=c+(Math.abs(d)*ak.signum(c)-c)*e;break;case a.MixBlend.first:case a.MixBlend.replace:c=b.scaleX,b.scaleX=c+(Math.abs(d)*ak.signum(c)-c)*e;break;case a.MixBlend.add:b.scaleX+=(d-b.data.scaleX)*e}else switch(f){case a.MixBlend.setup:c=Math.abs(b.data.scaleX)*ak.signum(d),b.scaleX=c+(d-c)*e;break;case a.MixBlend.first:case a.MixBlend.replace:c=Math.abs(b.scaleX)*ak.signum(d),b.scaleX=c+(d-c)*e;break;case a.MixBlend.add:b.scaleX+=(d-b.data.scaleX)*e}}}},b}(i),cd=function(c){function b(d,e,b){var a=c.call(this,d,e,dp.scaleY+"|"+b)||this;return a.boneIndex=0,a.boneIndex=b,a}return dn(b,c),b.prototype.apply=function(h,j,g,k,e,f,i){var b=h.bones[this.boneIndex];if(b.active){if(g<this.frames[0]){switch(f){case a.MixBlend.setup:b.scaleY=b.data.scaleY;break;case a.MixBlend.first:b.scaleY+=(b.data.scaleY-b.scaleY)*e}return}var d=this.getCurveValue(g)*b.data.scaleY;if(1==e)f==a.MixBlend.add?b.scaleY+=d-b.data.scaleY:b.scaleY=d;else{var c=0;if(i==a.MixDirection.mixOut)switch(f){case a.MixBlend.setup:c=b.data.scaleY,b.scaleY=c+(Math.abs(d)*ak.signum(c)-c)*e;break;case a.MixBlend.first:case a.MixBlend.replace:c=b.scaleY,b.scaleY=c+(Math.abs(d)*ak.signum(c)-c)*e;break;case a.MixBlend.add:b.scaleY+=(d-b.data.scaleY)*e}else switch(f){case a.MixBlend.setup:c=Math.abs(b.data.scaleY)*ak.signum(d),b.scaleY=c+(d-c)*e;break;case a.MixBlend.first:case a.MixBlend.replace:c=Math.abs(b.scaleY)*ak.signum(d),b.scaleY=c+(d-c)*e;break;case a.MixBlend.add:b.scaleY+=(d-b.data.scaleY)*e}}}},b}(i),ce=function(c){function b(d,e,a){var b=c.call(this,d,e,dp.shearX+"|"+a,dp.shearY+"|"+a)||this;return b.boneIndex=0,b.boneIndex=a,b}return dn(b,c),b.prototype.apply=function(m,n,h,o,e,j,p){var b=m.bones[this.boneIndex];if(b.active){var d=this.frames;if(h<d[0]){switch(j){case a.MixBlend.setup:b.shearX=b.data.shearX,b.shearY=b.data.shearY;break;case a.MixBlend.first:b.shearX+=(b.data.shearX-b.shearX)*e,b.shearY+=(b.data.shearY-b.shearY)*e}return}var f=0,g=0,c=x.search(d,h,3),i=this.curves[c/3];switch(i){case 0:var k=d[c];f=d[c+1],g=d[c+2];var l=(h-k)/(d[c+3]-k);f+=(d[c+3+1]-f)*l,g+=(d[c+3+2]-g)*l;break;case 1:f=d[c+1],g=d[c+2];break;default:f=this.getBezierValue(h,c,1,i-2),g=this.getBezierValue(h,c,2,i+18-2)}switch(j){case a.MixBlend.setup:b.shearX=b.data.shearX+f*e,b.shearY=b.data.shearY+g*e;break;case a.MixBlend.first:case a.MixBlend.replace:b.shearX+=(b.data.shearX+f-b.shearX)*e,b.shearY+=(b.data.shearY+g-b.shearY)*e;break;case a.MixBlend.add:b.shearX+=f*e,b.shearY+=g*e}}},b}(B),cf=function(c){function b(d,e,b){var a=c.call(this,d,e,dp.shearX+"|"+b)||this;return a.boneIndex=0,a.boneIndex=b,a}return dn(b,c),b.prototype.apply=function(g,h,e,i,c,f,j){var b=g.bones[this.boneIndex];if(b.active){if(e<this.frames[0]){switch(f){case a.MixBlend.setup:b.shearX=b.data.shearX;break;case a.MixBlend.first:b.shearX+=(b.data.shearX-b.shearX)*c}return}var d=this.getCurveValue(e);switch(f){case a.MixBlend.setup:b.shearX=b.data.shearX+d*c;break;case a.MixBlend.first:case a.MixBlend.replace:b.shearX+=(b.data.shearX+d-b.shearX)*c;break;case a.MixBlend.add:b.shearX+=d*c}}},b}(i),cg=function(c){function b(d,e,b){var a=c.call(this,d,e,dp.shearY+"|"+b)||this;return a.boneIndex=0,a.boneIndex=b,a}return dn(b,c),b.prototype.apply=function(g,h,e,i,c,f,j){var b=g.bones[this.boneIndex];if(b.active){if(e<this.frames[0]){switch(f){case a.MixBlend.setup:b.shearY=b.data.shearY;break;case a.MixBlend.first:b.shearY+=(b.data.shearY-b.shearY)*c}return}var d=this.getCurveValue(e);switch(f){case a.MixBlend.setup:b.shearY=b.data.shearY+d*c;break;case a.MixBlend.first:case a.MixBlend.replace:b.shearY+=(b.data.shearY+d-b.shearY)*c;break;case a.MixBlend.add:b.shearY+=d*c}}},b}(i),ch=function(c){function b(d,e,a){var b=c.call(this,d,e,[dp.rgb+"|"+a,dp.alpha+"|"+a])||this;return b.slotIndex=0,b.slotIndex=a,b}return dn(b,c),b.prototype.getFrameEntries=function(){return 5},b.prototype.setFrame=function(a,b,c,d,e,f){a*=5,this.frames[a]=b,this.frames[a+1]=c,this.frames[a+2]=d,this.frames[a+3]=e,this.frames[a+4]=f},b.prototype.apply=function(q,r,f,s,e,o,t){var m=q.slots[this.slotIndex];if(m.bone.active){var c=this.frames,d=m.color;if(f<c[0]){var k=m.data.color;switch(o){case a.MixBlend.setup:d.setFromColor(k);break;case a.MixBlend.first:d.add((k.r-d.r)*e,(k.g-d.g)*e,(k.b-d.b)*e,(k.a-d.a)*e)}return}var g=0,h=0,i=0,j=0,b=x.search(c,f,5),l=this.curves[b/5];switch(l){case 0:var p=c[b];g=c[b+1],h=c[b+2],i=c[b+3],j=c[b+4];var n=(f-p)/(c[b+5]-p);g+=(c[b+5+1]-g)*n,h+=(c[b+5+2]-h)*n,i+=(c[b+5+3]-i)*n,j+=(c[b+5+4]-j)*n;break;case 1:g=c[b+1],h=c[b+2],i=c[b+3],j=c[b+4];break;default:g=this.getBezierValue(f,b,1,l-2),h=this.getBezierValue(f,b,2,l+18-2),i=this.getBezierValue(f,b,3,l+36-2),j=this.getBezierValue(f,b,4,l+54-2)}1==e?d.set(g,h,i,j):(o==a.MixBlend.setup&&d.setFromColor(m.data.color),d.add((g-d.r)*e,(h-d.g)*e,(i-d.b)*e,(j-d.a)*e))}},b}(h),ci=function(c){function b(d,e,b){var a=c.call(this,d,e,[dp.rgb+"|"+b])||this;return a.slotIndex=0,a.slotIndex=b,a}return dn(b,c),b.prototype.getFrameEntries=function(){return 4},b.prototype.setFrame=function(a,b,c,d,e){a<<=2,this.frames[a]=b,this.frames[a+1]=c,this.frames[a+2]=d,this.frames[a+3]=e},b.prototype.apply=function(p,q,j,r,f,n,s){var k=p.slots[this.slotIndex];if(k.bone.active){var d=this.frames,b=k.color;if(j<d[0]){var e=k.data.color;switch(n){case a.MixBlend.setup:b.r=e.r,b.g=e.g,b.b=e.b;break;case a.MixBlend.first:b.r+=(e.r-b.r)*f,b.g+=(e.g-b.g)*f,b.b+=(e.b-b.b)*f}return}var g=0,h=0,i=0,c=x.search(d,j,4),l=this.curves[c>>2];switch(l){case 0:var o=d[c];g=d[c+1],h=d[c+2],i=d[c+3];var m=(j-o)/(d[c+4]-o);g+=(d[c+4+1]-g)*m,h+=(d[c+4+2]-h)*m,i+=(d[c+4+3]-i)*m;break;case 1:g=d[c+1],h=d[c+2],i=d[c+3];break;default:g=this.getBezierValue(j,c,1,l-2),h=this.getBezierValue(j,c,2,l+18-2),i=this.getBezierValue(j,c,3,l+36-2)}if(1==f)b.r=g,b.g=h,b.b=i;else{if(n==a.MixBlend.setup){var e=k.data.color;b.r=e.r,b.g=e.g,b.b=e.b}b.r+=(g-b.r)*f,b.g+=(h-b.g)*f,b.b+=(i-b.b)*f}}},b}(h),cj=function(c){function b(d,e,b){var a=c.call(this,d,e,dp.alpha+"|"+b)||this;return a.slotIndex=0,a.slotIndex=b,a}return dn(b,c),b.prototype.apply=function(i,j,e,k,d,f,l){var c=i.slots[this.slotIndex];if(c.bone.active){var b=c.color;if(e<this.frames[0]){var g=c.data.color;switch(f){case a.MixBlend.setup:b.a=g.a;break;case a.MixBlend.first:b.a+=(g.a-b.a)*d}return}var h=this.getCurveValue(e);1==d?b.a=h:(f==a.MixBlend.setup&&(b.a=c.data.color.a),b.a+=(h-b.a)*d)}},b}(i),ck=function(c){function b(d,e,a){var b=c.call(this,d,e,[dp.rgb+"|"+a,dp.alpha+"|"+a,dp.rgb2+"|"+a])||this;return b.slotIndex=0,b.slotIndex=a,b}return dn(b,c),b.prototype.getFrameEntries=function(){return 8},b.prototype.setFrame=function(a,b,c,d,e,f,g,h,i){a<<=3,this.frames[a]=b,this.frames[a+1]=c,this.frames[a+2]=d,this.frames[a+3]=e,this.frames[a+4]=f,this.frames[a+5]=g,this.frames[a+6]=h,this.frames[a+7]=i},b.prototype.apply=function(v,w,g,y,e,t,z){var j=v.slots[this.slotIndex];if(j.bone.active){var c=this.frames,f=j.color,d=j.darkColor;if(g<c[0]){var s=j.data.color,h=j.data.darkColor;switch(t){case a.MixBlend.setup:f.setFromColor(s),d.r=h.r,d.g=h.g,d.b=h.b;break;case a.MixBlend.first:f.add((s.r-f.r)*e,(s.g-f.g)*e,(s.b-f.b)*e,(s.a-f.a)*e),d.r+=(h.r-d.r)*e,d.g+=(h.g-d.g)*e,d.b+=(h.b-d.b)*e}return}var k=0,l=0,m=0,n=0,o=0,p=0,q=0,b=x.search(c,g,8),i=this.curves[b>>3];switch(i){case 0:var u=c[b];k=c[b+1],l=c[b+2],m=c[b+3],n=c[b+4],o=c[b+5],p=c[b+6],q=c[b+7];var r=(g-u)/(c[b+8]-u);k+=(c[b+8+1]-k)*r,l+=(c[b+8+2]-l)*r,m+=(c[b+8+3]-m)*r,n+=(c[b+8+4]-n)*r,o+=(c[b+8+5]-o)*r,p+=(c[b+8+6]-p)*r,q+=(c[b+8+7]-q)*r;break;case 1:k=c[b+1],l=c[b+2],m=c[b+3],n=c[b+4],o=c[b+5],p=c[b+6],q=c[b+7];break;default:k=this.getBezierValue(g,b,1,i-2),l=this.getBezierValue(g,b,2,i+18-2),m=this.getBezierValue(g,b,3,i+36-2),n=this.getBezierValue(g,b,4,i+54-2),o=this.getBezierValue(g,b,5,i+72-2),p=this.getBezierValue(g,b,6,i+90-2),q=this.getBezierValue(g,b,7,i+108-2)}if(1==e)f.set(k,l,m,n),d.r=o,d.g=p,d.b=q;else{if(t==a.MixBlend.setup){f.setFromColor(j.data.color);var h=j.data.darkColor;d.r=h.r,d.g=h.g,d.b=h.b}f.add((k-f.r)*e,(l-f.g)*e,(m-f.b)*e,(n-f.a)*e),d.r+=(o-d.r)*e,d.g+=(p-d.g)*e,d.b+=(q-d.b)*e}}},b}(h),cl=function(c){function b(d,e,a){var b=c.call(this,d,e,[dp.rgb+"|"+a,dp.rgb2+"|"+a])||this;return b.slotIndex=0,b.slotIndex=a,b}return dn(b,c),b.prototype.getFrameEntries=function(){return 7},b.prototype.setFrame=function(a,b,c,d,e,f,g,h){a*=7,this.frames[a]=b,this.frames[a+1]=c,this.frames[a+2]=d,this.frames[a+3]=e,this.frames[a+4]=f,this.frames[a+5]=g,this.frames[a+6]=h},b.prototype.apply=function(u,v,i,w,f,s,y){var j=u.slots[this.slotIndex];if(j.bone.active){var c=this.frames,d=j.color,e=j.darkColor;if(i<c[0]){var g=j.data.color,h=j.data.darkColor;switch(s){case a.MixBlend.setup:d.r=g.r,d.g=g.g,d.b=g.b,e.r=h.r,e.g=h.g,e.b=h.b;break;case a.MixBlend.first:d.r+=(g.r-d.r)*f,d.g+=(g.g-d.g)*f,d.b+=(g.b-d.b)*f,e.r+=(h.r-e.r)*f,e.g+=(h.g-e.g)*f,e.b+=(h.b-e.b)*f}return}var k=0,l=0,m=0,n=0,o=0,p=0,b=x.search(c,i,7),q=this.curves[b/7];switch(q){case 0:var t=c[b];k=c[b+1],l=c[b+2],m=c[b+3],n=c[b+4],o=c[b+5],p=c[b+6];var r=(i-t)/(c[b+7]-t);k+=(c[b+7+1]-k)*r,l+=(c[b+7+2]-l)*r,m+=(c[b+7+3]-m)*r,n+=(c[b+7+4]-n)*r,o+=(c[b+7+5]-o)*r,p+=(c[b+7+6]-p)*r;break;case 1:k=c[b+1],l=c[b+2],m=c[b+3],n=c[b+4],o=c[b+5],p=c[b+6];break;default:k=this.getBezierValue(i,b,1,q-2),l=this.getBezierValue(i,b,2,q+18-2),m=this.getBezierValue(i,b,3,q+36-2),n=this.getBezierValue(i,b,4,q+54-2),o=this.getBezierValue(i,b,5,q+72-2),p=this.getBezierValue(i,b,6,q+90-2)}if(1==f)d.r=k,d.g=l,d.b=m,e.r=n,e.g=o,e.b=p;else{if(s==a.MixBlend.setup){var g=j.data.color,h=j.data.darkColor;d.r=g.r,d.g=g.g,d.b=g.b,e.r=h.r,e.g=h.g,e.b=h.b}d.r+=(k-d.r)*f,d.g+=(l-d.g)*f,d.b+=(m-d.b)*f,e.r+=(n-e.r)*f,e.g+=(o-e.g)*f,e.b+=(p-e.b)*f}}},b}(h),cm=function(c){function b(b,d){var a=c.call(this,b,[dp.attachment+"|"+d])||this;return a.slotIndex=0,a.slotIndex=d,a.attachmentNames=new Array(b),a}return dn(b,c),b.prototype.getFrameCount=function(){return this.frames.length},b.prototype.setFrame=function(a,b,c){this.frames[a]=b,this.attachmentNames[a]=c},b.prototype.apply=function(c,g,e,h,i,d,f){var b=c.slots[this.slotIndex];if(b.bone.active){if(f==a.MixDirection.mixOut){d==a.MixBlend.setup&&this.setAttachment(c,b,b.data.attachmentName);return}if(e<this.frames[0]){(d==a.MixBlend.setup||d==a.MixBlend.first)&&this.setAttachment(c,b,b.data.attachmentName);return}this.setAttachment(c,b,this.attachmentNames[x.search1(this.frames,e)])}},b.prototype.setAttachment=function(b,c,a){c.setAttachment(a?b.getAttachment(this.slotIndex,a):null)},b}(x),cn=function(c){function b(b,f,d,e){var a=c.call(this,b,f,[dp.deform+"|"+d+"|"+e.id])||this;return a.slotIndex=0,a.slotIndex=d,a.attachment=e,a.vertices=new Array(b),a}return dn(b,c),b.prototype.getFrameCount=function(){return this.frames.length},b.prototype.setFrame=function(a,b,c){this.frames[a]=b,this.vertices[a]=c},b.prototype.setBezier=function(r,s,t,b,w,c,d,j,k,u,x){var e=this.curves,a=this.getFrameCount()+18*r;0==t&&(e[s]=2+a);for(var l=(b-2*c+j)*.03,m=.03*k-.06*d,f=((c-j)*3-b+u)*.006,g=(d-k+.33333333)*.018,n=2*l+f,o=2*m+g,h=(c-b)*.3+l+.16666667*f,i=.3*d+m+.16666667*g,p=b+h,q=i,v=a+18;a<v;a+=2)e[a]=p,e[a+1]=q,h+=n,i+=o,n+=f,o+=g,p+=h,q+=i},b.prototype.getCurvePercent=function(c,d){var b=this.curves,a=b[d];switch(a){case 0:var f=this.frames[d];return(c-f)/(this.frames[d+this.getFrameEntries()]-f);case 1:return 0}if(b[a-=2]>c){var g=this.frames[d];return b[a+1]*(c-g)/(b[a]-g)}var e=a+18;for(a+=2;a<e;a+=2)if(b[a]>=c){var h=b[a-2],i=b[a-1];return i+(c-h)/(b[a]-h)*(b[a+1]-i)}var j=b[e-2],k=b[e-1];return k+(1-k)*(c-j)/(this.frames[d+this.getFrameEntries()]-j)},b.prototype.apply=function(N,O,E,P,e,n,Q){var J=N.slots[this.slotIndex];if(J.bone.active){var h=J.getAttachment();if(h&&h instanceof w&&h.timelineAttachment==this.attachment){var b=J.deform;0==b.length&&(n=a.MixBlend.setup);var F=this.vertices,d=F[0].length,s=this.frames;if(E<s[0]){switch(n){case a.MixBlend.setup:b.length=0;break;case a.MixBlend.first:if(1==e){b.length=0;break}b.length=d;var f=h;if(f.bones){e=1-e;for(var i=0;i<d;i++)b[i]*=e}else for(var g=f.vertices,i=0;i<d;i++)b[i]+=(g[i]-b[i])*e}return}if(b.length=d,E>=s[s.length-1]){var j=F[s.length-1];if(1==e){if(n==a.MixBlend.add){var f=h;if(f.bones)for(var G=0;G<d;G++)b[G]+=j[G];else for(var g=f.vertices,t=0;t<d;t++)b[t]+=j[t]-g[t]}else am.arrayCopy(j,0,b,0,d)}else switch(n){case a.MixBlend.setup:var L=h;if(L.bones)for(var H=0;H<d;H++)b[H]=j[H]*e;else for(var g=L.vertices,u=0;u<d;u++){var v=g[u];b[u]=v+(j[u]-v)*e}break;case a.MixBlend.first:case a.MixBlend.replace:for(var y=0;y<d;y++)b[y]+=(j[y]-b[y])*e;break;case a.MixBlend.add:var f=h;if(f.bones)for(var I=0;I<d;I++)b[I]+=j[I]*e;else for(var g=f.vertices,z=0;z<d;z++)b[z]+=(j[z]-g[z])*e}return}var K=x.search1(s,E),k=this.getCurvePercent(E,K),l=F[K],m=F[K+1];if(1==e){if(n==a.MixBlend.add){var f=h;if(f.bones)for(var A=0;A<d;A++){var c=l[A];b[A]+=c+(m[A]-c)*k}else for(var g=f.vertices,o=0;o<d;o++){var c=l[o];b[o]+=c+(m[o]-c)*k-g[o]}}else for(var B=0;B<d;B++){var c=l[B];b[B]=c+(m[B]-c)*k}}else switch(n){case a.MixBlend.setup:var M=h;if(M.bones)for(var C=0;C<d;C++){var c=l[C];b[C]=(c+(m[C]-c)*k)*e}else for(var g=M.vertices,p=0;p<d;p++){var c=l[p],v=g[p];b[p]=v+(c+(m[p]-c)*k-v)*e}break;case a.MixBlend.first:case a.MixBlend.replace:for(var q=0;q<d;q++){var c=l[q];b[q]+=(c+(m[q]-c)*k-b[q])*e}break;case a.MixBlend.add:var f=h;if(f.bones)for(var D=0;D<d;D++){var c=l[D];b[D]+=(c+(m[D]-c)*k)*e}else for(var g=f.vertices,r=0;r<d;r++){var c=l[r];b[r]+=(c+(m[r]-c)*k-g[r])*e}}}}},b}(h),co=function(b){function a(c){var d=b.call(this,c,a.propertyIds)||this;return d.events=new Array(c),d}return dn(a,b),a.prototype.getFrameCount=function(){return this.frames.length},a.prototype.setFrame=function(a,b){this.frames[a]=b.time,this.events[a]=b},a.prototype.apply=function(g,c,d,e,h,i,j){if(e){var b=this.frames,f=this.frames.length;if(c>d)this.apply(g,c,Number.MAX_VALUE,e,h,i,j),c=-1;else if(c>=b[f-1])return;if(!(d<b[0])){var a=0;if(c<b[0])a=0;else{a=x.search1(b,c)+1;for(var k=b[a];a>0&&b[a-1]==k;)a--}for(;a<f&&d>=b[a];a++)e.push(this.events[a])}}},a.propertyIds=[""+dp.event],a}(x),cp=function(c){function b(a){var d=c.call(this,a,b.propertyIds)||this;return d.drawOrders=new Array(a),d}return dn(b,c),b.prototype.getFrameCount=function(){return this.frames.length},b.prototype.setFrame=function(a,b,c){this.frames[a]=b,this.drawOrders[a]=c},b.prototype.apply=function(b,l,f,m,n,d,g){if(g==a.MixDirection.mixOut){d==a.MixBlend.setup&&am.arrayCopy(b.slots,0,b.drawOrder,0,b.slots.length);return}if(f<this.frames[0]){(d==a.MixBlend.setup||d==a.MixBlend.first)&&am.arrayCopy(b.slots,0,b.drawOrder,0,b.slots.length);return}var h=x.search1(this.frames,f),e=this.drawOrders[h];if(e)for(var i=b.drawOrder,j=b.slots,c=0,k=e.length;c<k;c++)i[c]=j[e[c]];else am.arrayCopy(b.slots,0,b.drawOrder,0,b.slots.length)},b.propertyIds=[""+dp.drawOrder],b}(x),cq=function(c){function b(d,e,b){var a=c.call(this,d,e,[dp.ikConstraint+"|"+b])||this;return a.ikConstraintIndex=0,a.ikConstraintIndex=b,a}return dn(b,c),b.prototype.getFrameEntries=function(){return 6},b.prototype.setFrame=function(a,b,c,d,e,f,g){a*=6,this.frames[a]=b,this.frames[a+1]=c,this.frames[a+2]=d,this.frames[a+3]=e,this.frames[a+4]=f?1:0,this.frames[a+5]=g?1:0},b.prototype.apply=function(n,o,h,p,g,j,k){var b=n.ikConstraints[this.ikConstraintIndex];if(b.active){var d=this.frames;if(h<d[0]){switch(j){case a.MixBlend.setup:b.mix=b.data.mix,b.softness=b.data.softness,b.bendDirection=b.data.bendDirection,b.compress=b.data.compress,b.stretch=b.data.stretch;break;case a.MixBlend.first:b.mix+=(b.data.mix-b.mix)*g,b.softness+=(b.data.softness-b.softness)*g,b.bendDirection=b.data.bendDirection,b.compress=b.data.compress,b.stretch=b.data.stretch}return}var e=0,f=0,c=x.search(d,h,6),i=this.curves[c/6];switch(i){case 0:var l=d[c];e=d[c+1],f=d[c+2];var m=(h-l)/(d[c+6]-l);e+=(d[c+6+1]-e)*m,f+=(d[c+6+2]-f)*m;break;case 1:e=d[c+1],f=d[c+2];break;default:e=this.getBezierValue(h,c,1,i-2),f=this.getBezierValue(h,c,2,i+18-2)}j==a.MixBlend.setup?(b.mix=b.data.mix+(e-b.data.mix)*g,b.softness=b.data.softness+(f-b.data.softness)*g,k==a.MixDirection.mixOut?(b.bendDirection=b.data.bendDirection,b.compress=b.data.compress,b.stretch=b.data.stretch):(b.bendDirection=d[c+3],b.compress=0!=d[c+4],b.stretch=0!=d[c+5])):(b.mix+=(e-b.mix)*g,b.softness+=(f-b.softness)*g,k==a.MixDirection.mixIn&&(b.bendDirection=d[c+3],b.compress=0!=d[c+4],b.stretch=0!=d[c+5]))}},b}(h),cr=function(c){function b(d,e,b){var a=c.call(this,d,e,[dp.transformConstraint+"|"+b])||this;return a.transformConstraintIndex=0,a.transformConstraintIndex=b,a}return dn(b,c),b.prototype.getFrameEntries=function(){return 7},b.prototype.setFrame=function(a,c,d,e,f,g,h,i){var b=this.frames;b[a*=7]=c,b[a+1]=d,b[a+2]=e,b[a+3]=f,b[a+4]=g,b[a+5]=h,b[a+6]=i},b.prototype.apply=function(r,s,g,t,f,p,u){var h,i,j,k,l,m,b=r.transformConstraints[this.transformConstraintIndex];if(b.active){var e=this.frames;if(g<e[0]){var d=b.data;switch(p){case a.MixBlend.setup:b.mixRotate=d.mixRotate,b.mixX=d.mixX,b.mixY=d.mixY,b.mixScaleX=d.mixScaleX,b.mixScaleY=d.mixScaleY,b.mixShearY=d.mixShearY;break;case a.MixBlend.first:b.mixRotate+=(d.mixRotate-b.mixRotate)*f,b.mixX+=(d.mixX-b.mixX)*f,b.mixY+=(d.mixY-b.mixY)*f,b.mixScaleX+=(d.mixScaleX-b.mixScaleX)*f,b.mixScaleY+=(d.mixScaleY-b.mixScaleY)*f,b.mixShearY+=(d.mixShearY-b.mixShearY)*f}return}var c=x.search(e,g,7),n=this.curves[c/7];switch(n){case 0:var q=e[c];h=e[c+1],i=e[c+2],j=e[c+3],k=e[c+4],l=e[c+5],m=e[c+6];var o=(g-q)/(e[c+7]-q);h+=(e[c+7+1]-h)*o,i+=(e[c+7+2]-i)*o,j+=(e[c+7+3]-j)*o,k+=(e[c+7+4]-k)*o,l+=(e[c+7+5]-l)*o,m+=(e[c+7+6]-m)*o;break;case 1:h=e[c+1],i=e[c+2],j=e[c+3],k=e[c+4],l=e[c+5],m=e[c+6];break;default:h=this.getBezierValue(g,c,1,n-2),i=this.getBezierValue(g,c,2,n+18-2),j=this.getBezierValue(g,c,3,n+36-2),k=this.getBezierValue(g,c,4,n+54-2),l=this.getBezierValue(g,c,5,n+72-2),m=this.getBezierValue(g,c,6,n+90-2)}if(p==a.MixBlend.setup){var d=b.data;b.mixRotate=d.mixRotate+(h-d.mixRotate)*f,b.mixX=d.mixX+(i-d.mixX)*f,b.mixY=d.mixY+(j-d.mixY)*f,b.mixScaleX=d.mixScaleX+(k-d.mixScaleX)*f,b.mixScaleY=d.mixScaleY+(l-d.mixScaleY)*f,b.mixShearY=d.mixShearY+(m-d.mixShearY)*f}else b.mixRotate+=(h-b.mixRotate)*f,b.mixX+=(i-b.mixX)*f,b.mixY+=(j-b.mixY)*f,b.mixScaleX+=(k-b.mixScaleX)*f,b.mixScaleY+=(l-b.mixScaleY)*f,b.mixShearY+=(m-b.mixShearY)*f}},b}(h),cs=function(c){function b(d,e,b){var a=c.call(this,d,e,dp.pathConstraintPosition+"|"+b)||this;return a.pathConstraintIndex=0,a.pathConstraintIndex=b,a}return dn(b,c),b.prototype.apply=function(g,h,d,i,c,e,j){var b=g.pathConstraints[this.pathConstraintIndex];if(b.active){if(d<this.frames[0]){switch(e){case a.MixBlend.setup:b.position=b.data.position;break;case a.MixBlend.first:b.position+=(b.data.position-b.position)*c}return}var f=this.getCurveValue(d);e==a.MixBlend.setup?b.position=b.data.position+(f-b.data.position)*c:b.position+=(f-b.position)*c}},b}(i),ct=function(c){function b(d,e,b){var a=c.call(this,d,e,dp.pathConstraintSpacing+"|"+b)||this;return a.pathConstraintIndex=0,a.pathConstraintIndex=b,a}return dn(b,c),b.prototype.apply=function(g,h,d,i,c,e,j){var b=g.pathConstraints[this.pathConstraintIndex];if(b.active){if(d<this.frames[0]){switch(e){case a.MixBlend.setup:b.spacing=b.data.spacing;break;case a.MixBlend.first:b.spacing+=(b.data.spacing-b.spacing)*c}return}var f=this.getCurveValue(d);e==a.MixBlend.setup?b.spacing=b.data.spacing+(f-b.data.spacing)*c:b.spacing+=(f-b.spacing)*c}},b}(i),cu=function(c){function b(d,e,b){var a=c.call(this,d,e,[dp.pathConstraintMix+"|"+b])||this;return a.pathConstraintIndex=0,a.pathConstraintIndex=b,a}return dn(b,c),b.prototype.getFrameEntries=function(){return 4},b.prototype.setFrame=function(a,c,d,e,f){var b=this.frames;b[a<<=2]=c,b[a+1]=d,b[a+2]=e,b[a+3]=f},b.prototype.apply=function(o,p,i,q,e,m,r){var f,g,h,b=o.pathConstraints[this.pathConstraintIndex];if(b.active){var d=this.frames;if(i<d[0]){switch(m){case a.MixBlend.setup:b.mixRotate=b.data.mixRotate,b.mixX=b.data.mixX,b.mixY=b.data.mixY;break;case a.MixBlend.first:b.mixRotate+=(b.data.mixRotate-b.mixRotate)*e,b.mixX+=(b.data.mixX-b.mixX)*e,b.mixY+=(b.data.mixY-b.mixY)*e}return}var c=x.search(d,i,4),k=this.curves[c>>2];switch(k){case 0:var n=d[c];f=d[c+1],g=d[c+2],h=d[c+3];var l=(i-n)/(d[c+4]-n);f+=(d[c+4+1]-f)*l,g+=(d[c+4+2]-g)*l,h+=(d[c+4+3]-h)*l;break;case 1:f=d[c+1],g=d[c+2],h=d[c+3];break;default:f=this.getBezierValue(i,c,1,k-2),g=this.getBezierValue(i,c,2,k+18-2),h=this.getBezierValue(i,c,3,k+36-2)}if(m==a.MixBlend.setup){var j=b.data;b.mixRotate=j.mixRotate+(f-j.mixRotate)*e,b.mixX=j.mixX+(g-j.mixX)*e,b.mixY=j.mixY+(h-j.mixY)*e}else b.mixRotate+=(f-b.mixRotate)*e,b.mixX+=(g-b.mixX)*e,b.mixY+=(h-b.mixY)*e}},b}(h),cv=function(c){function b(e,b,d){var a=c.call(this,e,[dp.sequence+"|"+b+"|"+d.sequence.id])||this;return a.slotIndex=b,a.attachment=d,a}return dn(b,c),b.prototype.getFrameEntries=function(){return b.ENTRIES},b.prototype.getSlotIndex=function(){return this.slotIndex},b.prototype.getAttachment=function(){return this.attachment},b.prototype.setFrame=function(a,d,e,f,g){var c=this.frames;c[a*=b.ENTRIES]=d,c[a+b.MODE]=e|f<<4,c[a+b.DELAY]=g},b.prototype.apply=function(p,s,h,t,u,l,v){var g=p.slots[this.slotIndex];if(g.bone.active){var i=g.attachment,m=this.attachment;if(i==m||i instanceof w&&i.timelineAttachment==m){var f=this.frames;if(h<f[0]){(l==a.MixBlend.setup||l==a.MixBlend.first)&&(g.sequenceIndex=-1);return}var j=x.search(f,h,b.ENTRIES),q=f[j],n=f[j+b.MODE],r=f[j+b.DELAY];if(this.attachment.sequence){var c=n>>4,d=this.attachment.sequence.regions.length,o=b5[15&n];if(o!=k.hold)switch(c+=(h-q)/r+1e-5|0,o){case k.once:c=Math.min(d-1,c);break;case k.loop:c%=d;break;case k.pingpong:var e=(d<<1)-2;(c=0==e?0:c%e)>=d&&(c=e-c);break;case k.onceReverse:c=Math.max(d-1-c,0);break;case k.loopReverse:c=d-1-c%d;break;case k.pingpongReverse:var e=(d<<1)-2;(c=0==e?0:(c+d-1)%e)>=d&&(c=e-c)}g.sequenceIndex=c}}}},b.ENTRIES=3,b.MODE=1,b.DELAY=2,b}(x),cw=function(){function b(a){this.tracks=new Array,this.timeScale=1,this.unkeyedState=0,this.events=new Array,this.listeners=new Array,this.queue=new cy(this),this.propertyIDs=new ai,this.animationsChanged=!1,this.trackEntryPool=new ao(function(){return new cx}),this.data=a}return b.emptyAnimation=function(){return b._emptyAnimation},b.prototype.update=function(d){d*=this.timeScale;for(var g=this.tracks,e=0,i=g.length;e<i;e++){var a=g[e];if(a){a.animationLast=a.nextAnimationLast,a.trackLast=a.nextTrackLast;var f=d*a.timeScale;if(a.delay>0){if(a.delay-=f,a.delay>0)continue;f=-a.delay,a.delay=0}var b=a.next;if(b){var h=a.trackLast-b.delay;if(h>=0){for(b.delay=0,b.trackTime+=0==a.timeScale?0:(h/a.timeScale+d)*b.timeScale,a.trackTime+=f,this.setCurrent(e,b,!0);b.mixingFrom;)b.mixTime+=d,b=b.mixingFrom;continue}}else if(a.trackLast>=a.trackEnd&&!a.mixingFrom){g[e]=null,this.queue.end(a),this.clearNext(a);continue}if(a.mixingFrom&&this.updateMixingFrom(a,d)){var c=a.mixingFrom;for(a.mixingFrom=null,c&&(c.mixingTo=null);c;)this.queue.end(c),c=c.mixingFrom}a.trackTime+=f}}this.queue.drain()},b.prototype.updateMixingFrom=function(b,c){var a=b.mixingFrom;if(!a)return!0;var d=this.updateMixingFrom(a,c);return(a.animationLast=a.nextAnimationLast,a.trackLast=a.nextTrackLast,b.mixTime>0&&b.mixTime>=b.mixDuration)?((0==a.totalAlpha||0==b.mixDuration)&&(b.mixingFrom=a.mixingFrom,a.mixingFrom&&(a.mixingFrom.mixingTo=b),b.interruptAlpha=a.interruptAlpha,this.queue.end(a)),d):(a.trackTime+=c*a.timeScale,b.mixTime+=c,!1)},b.prototype.apply=function(c){if(!c)throw new Error("skeleton cannot be null.");this.animationsChanged&&this._animationsChanged();for(var q=this.events,r=this.tracks,s=!1,h=0,y=r.length;h<y;h++){var b=r[h];if(b&&!(b.delay>0)){s=!0;var e=0==h?a.MixBlend.first:b.mixBlend,f=b.alpha;b.mixingFrom?f*=this.applyMixingFrom(b,c,e):b.trackTime>=b.trackEnd&&!b.next&&(f=0);var t=b.animationLast,l=b.getAnimationTime(),g=l,m=q;b.reverse&&(g=b.animation.duration-g,m=null);var n=b.animation.timelines,j=n.length;if(0==h&&1==f||e==a.MixBlend.add)for(var d=0;d<j;d++){am.webkit602BugfixHelper(f,e);var o=n[d];o instanceof cm?this.applyAttachmentTimeline(o,c,g,e,!0):o.apply(c,t,g,m,f,e,a.MixDirection.mixIn)}else{var z=b.timelineMode,u=b.shortestRotation,v=!u&&b.timelinesRotation.length!=j<<1;v&&(b.timelinesRotation.length=j<<1);for(var d=0;d<j;d++){var i=n[d],w=z[d]==dq?e:a.MixBlend.setup;!u&&i instanceof b7?this.applyRotateTimeline(i,c,g,f,w,b.timelinesRotation,d<<1,v):i instanceof cm?this.applyAttachmentTimeline(i,c,g,e,!0):(am.webkit602BugfixHelper(f,e),i.apply(c,t,g,m,f,w,a.MixDirection.mixIn))}}this.queueEvents(b,l),q.length=0,b.nextAnimationLast=l,b.nextTrackLast=b.trackTime}}for(var A=this.unkeyedState+dv,B=c.slots,p=0,C=c.slots.length;p<C;p++){var k=B[p];if(k.attachmentState==A){var x=k.data.attachmentName;k.setAttachment(x?c.getAttachment(k.data.index,x):null)}}return this.unkeyedState+=2,this.queue.drain(),s},b.prototype.applyMixingFrom=function(i,k,c){var b=i.mixingFrom;b.mixingFrom&&this.applyMixingFrom(b,k,c);var g=0;0==i.mixDuration?(g=1,c==a.MixBlend.first&&(c=a.MixBlend.setup)):((g=i.mixTime/i.mixDuration)>1&&(g=1),c!=a.MixBlend.first&&(c=b.mixBlend));var x=g<b.attachmentThreshold,r=g<b.drawOrderThreshold,n=b.animation.timelines,l=n.length,m=b.alpha*i.interruptAlpha,o=m*(1-g),s=b.animationLast,p=b.getAnimationTime(),j=p,q=null;if(b.reverse?j=b.animation.duration-j:g<b.eventThreshold&&(q=this.events),c==a.MixBlend.add)for(var d=0;d<l;d++)n[d].apply(k,s,j,q,o,c,a.MixDirection.mixOut);else{var y=b.timelineMode,z=b.timelineHoldMix,t=b.shortestRotation,u=!t&&b.timelinesRotation.length!=l<<1;u&&(b.timelinesRotation.length=l<<1),b.totalAlpha=0;for(var d=0;d<l;d++){var h=n[d],v=a.MixDirection.mixOut,e=void 0,f=0;switch(y[d]){case dq:if(!r&&h instanceof cp)continue;e=c,f=o;break;case dr:e=a.MixBlend.setup,f=o;break;case ds:e=c,f=m;break;case dt:e=a.MixBlend.setup,f=m;break;default:e=a.MixBlend.setup;var w=z[d];f=m*Math.max(0,1-w.mixTime/w.mixDuration)}b.totalAlpha+=f,!t&&h instanceof b7?this.applyRotateTimeline(h,k,j,f,e,b.timelinesRotation,d<<1,u):h instanceof cm?this.applyAttachmentTimeline(h,k,j,e,x):(am.webkit602BugfixHelper(f,c),r&&h instanceof cp&&e==a.MixBlend.setup&&(v=a.MixDirection.mixIn),h.apply(k,s,j,q,f,e,v))}}return i.mixDuration>0&&this.queueEvents(b,p),this.events.length=0,b.nextAnimationLast=p,b.nextTrackLast=b.trackTime,g},b.prototype.applyAttachmentTimeline=function(c,d,e,f,g){var b=d.slots[c.slotIndex];b.bone.active&&(e<c.frames[0]?(f==a.MixBlend.setup||f==a.MixBlend.first)&&this.setAttachment(d,b,b.data.attachmentName,g):this.setAttachment(d,b,c.attachmentNames[x.search1(c.frames,e)],g),b.attachmentState<=this.unkeyedState&&(b.attachmentState=this.unkeyedState+dv))},b.prototype.setAttachment=function(c,a,b,d){a.setAttachment(b?c.getAttachment(a.data.index,b):null),d&&(a.attachmentState=this.unkeyedState+dw)},b.prototype.applyRotateTimeline=function(h,n,k,o,l,e,f,p){if(p&&(e[f]=0),1==o){h.apply(n,0,k,null,1,l,a.MixDirection.mixIn);return}var b=n.bones[h.boneIndex];if(b.active){var s=h.frames,i=0,m=0;if(k<s[0])switch(l){case a.MixBlend.setup:b.rotation=b.data.rotation;default:return;case a.MixBlend.first:i=b.rotation,m=b.data.rotation}else i=l==a.MixBlend.setup?b.data.rotation:b.rotation,m=b.data.rotation+h.getCurveValue(k);var g=0,d=m-i;if(0==(d-=(16384-(16384.499999999996-d/360|0))*360))g=e[f];else{var c=0,j=0;p?(c=0,j=d):(c=e[f],j=e[f+1]);var q=d>0,r=c>=0;ak.signum(j)!=ak.signum(d)&&90>=Math.abs(j)&&(Math.abs(c)>180&&(c+=360*ak.signum(c)),r=q),g=d+c-c%360,r!=q&&(g+=360*ak.signum(c)),e[f]=g}e[f+1]=d,b.rotation=i+g*o}},b.prototype.queueEvents=function(a,k){for(var g=a.animationStart,c=a.animationEnd,d=c-g,h=a.trackLast%d,e=this.events,b=0,i=e.length;b<i;b++){var f=e[b];if(f.time<h)break;f.time>c||this.queue.event(a,f)}for((a.loop?0==d||h>a.trackTime%d:k>=c&&a.animationLast<c)&&this.queue.complete(a);b<i;b++){var j=e[b];j.time<g||this.queue.event(a,j)}},b.prototype.clearTracks=function(){var b=this.queue.drainDisabled;this.queue.drainDisabled=!0;for(var a=0,c=this.tracks.length;a<c;a++)this.clearTrack(a);this.tracks.length=0,this.queue.drainDisabled=b,this.queue.drain()},b.prototype.clearTrack=function(d){if(!(d>=this.tracks.length)){var a=this.tracks[d];if(a){this.queue.end(a),this.clearNext(a);for(var b=a;;){var c=b.mixingFrom;if(!c)break;this.queue.end(c),b.mixingFrom=null,b.mixingTo=null,b=c}this.tracks[a.trackIndex]=null,this.queue.drain()}}},b.prototype.setCurrent=function(c,b,d){var a=this.expandToIndex(c);this.tracks[c]=b,b.previous=null,a&&(d&&this.queue.interrupt(a),b.mixingFrom=a,a.mixingTo=b,b.mixTime=0,a.mixingFrom&&a.mixDuration>0&&(b.interruptAlpha*=Math.min(1,a.mixTime/a.mixDuration)),a.timelinesRotation.length=0),this.queue.start(b)},b.prototype.setAnimation=function(d,b,a){void 0===a&&(a=!1);var c=this.data.skeletonData.findAnimation(b);if(!c)throw new Error("Animation not found: "+b);return this.setAnimationWith(d,c,a)},b.prototype.setAnimationWith=function(b,d,c){if(void 0===c&&(c=!1),!d)throw new Error("animation cannot be null.");var e=!0,a=this.expandToIndex(b);a&&(-1==a.nextTrackLast?(this.tracks[b]=a.mixingFrom,this.queue.interrupt(a),this.queue.end(a),this.clearNext(a),a=a.mixingFrom,e=!1):this.clearNext(a));var f=this.trackEntry(b,d,c,a);return this.setCurrent(b,f,e),this.queue.drain(),f},b.prototype.addAnimation=function(e,c,a,b){void 0===a&&(a=!1),void 0===b&&(b=0);var d=this.data.skeletonData.findAnimation(c);if(!d)throw new Error("Animation not found: "+c);return this.addAnimationWith(e,d,a,b)},b.prototype.addAnimationWith=function(d,f,e,c){if(void 0===e&&(e=!1),void 0===c&&(c=0),!f)throw new Error("animation cannot be null.");var a=this.expandToIndex(d);if(a)for(;a.next;)a=a.next;var b=this.trackEntry(d,f,e,a);return a?(a.next=b,b.previous=a,c<=0&&(c+=a.getTrackComplete()-b.mixDuration)):(this.setCurrent(d,b,!0),this.queue.drain()),b.delay=c,b},b.prototype.setEmptyAnimation=function(d,a){void 0===a&&(a=0);var c=this.setAnimationWith(d,b.emptyAnimation(),!1);return c.mixDuration=a,c.trackEnd=a,c},b.prototype.addEmptyAnimation=function(e,a,d){void 0===a&&(a=0),void 0===d&&(d=0);var c=this.addAnimationWith(e,b.emptyAnimation(),!1,d);return d<=0&&(c.delay+=c.mixDuration-a),c.mixDuration=a,c.trackEnd=a,c},b.prototype.setEmptyAnimations=function(a){void 0===a&&(a=0);var d=this.queue.drainDisabled;this.queue.drainDisabled=!0;for(var b=0,e=this.tracks.length;b<e;b++){var c=this.tracks[b];c&&this.setEmptyAnimation(c.trackIndex,a)}this.queue.drainDisabled=d,this.queue.drain()},b.prototype.expandToIndex=function(a){return a<this.tracks.length?this.tracks[a]:(am.ensureArrayCapacity(this.tracks,a+1,null),this.tracks.length=a+1,null)},b.prototype.trackEntry=function(e,c,f,d){var b=this.trackEntryPool.obtain();return b.reset(),b.trackIndex=e,b.animation=c,b.loop=f,b.holdPrevious=!1,b.reverse=!1,b.shortestRotation=!1,b.eventThreshold=0,b.attachmentThreshold=0,b.drawOrderThreshold=0,b.animationStart=0,b.animationEnd=c.duration,b.animationLast=-1,b.nextAnimationLast=-1,b.delay=0,b.trackTime=0,b.trackLast=-1,b.nextTrackLast=-1,b.trackEnd=Number.MAX_VALUE,b.timeScale=1,b.alpha=1,b.mixTime=0,b.mixDuration=d?this.data.getMix(d.animation,c):0,b.interruptAlpha=1,b.totalAlpha=0,b.mixBlend=a.MixBlend.replace,b},b.prototype.clearNext=function(b){for(var a=b.next;a;)this.queue.dispose(a),a=a.next;b.next=null},b.prototype._animationsChanged=function(){this.animationsChanged=!1,this.propertyIDs.clear();for(var d=this.tracks,c=0,e=d.length;c<e;c++){var b=d[c];if(b){for(;b.mixingFrom;)b=b.mixingFrom;do b.mixingTo&&b.mixBlend==a.MixBlend.add||this.computeHold(b),b=b.mixingTo;while(b)}}},b.prototype.computeHold=function(b){var d=b.mixingTo,i=b.animation.timelines,g=b.animation.timelines.length,c=b.timelineMode;c.length=g;var j=b.timelineHoldMix;j.length=0;var k=this.propertyIDs;if(d&&d.holdPrevious){for(var a=0;a<g;a++)c[a]=k.addAll(i[a].getPropertyIds())?dt:ds;return}outer:for(var a=0;a<g;a++){var f=i[a],h=f.getPropertyIds();if(k.addAll(h)){if(!d||f instanceof cm||f instanceof cp||f instanceof co||!d.animation.hasTimeline(h))c[a]=dr;else{for(var e=d.mixingTo;e;e=e.mixingTo)if(!e.animation.hasTimeline(h)){if(b.mixDuration>0){c[a]=du,j[a]=e;continue outer}break}c[a]=dt}}else c[a]=dq}},b.prototype.getCurrent=function(a){return a>=this.tracks.length?null:this.tracks[a]},b.prototype.addListener=function(a){if(!a)throw new Error("listener cannot be null.");this.listeners.push(a)},b.prototype.removeListener=function(b){var a=this.listeners.indexOf(b);a>=0&&this.listeners.splice(a,1)},b.prototype.clearListeners=function(){this.listeners.length=0},b.prototype.clearListenerNotifications=function(){this.queue.clear()},b.prototype.setAnimationByName=function(a,c,d){b.deprecatedWarning1||(b.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: AnimationState.setAnimationByName is deprecated, please use setAnimation from now on.")),this.setAnimation(a,c,d)},b.prototype.addAnimationByName=function(a,c,d,e){b.deprecatedWarning2||(b.deprecatedWarning2=!0,console.warn("Spine Deprecation Warning: AnimationState.addAnimationByName is deprecated, please use addAnimation from now on.")),this.addAnimation(a,c,d,e)},b.prototype.hasAnimation=function(a){return null!==this.data.skeletonData.findAnimation(a)},b.prototype.hasAnimationByName=function(a){return b.deprecatedWarning3||(b.deprecatedWarning3=!0,console.warn("Spine Deprecation Warning: AnimationState.hasAnimationByName is deprecated, please use hasAnimation from now on.")),this.hasAnimation(a)},b._emptyAnimation=new b6("<empty>",[],0),b.deprecatedWarning1=!1,b.deprecatedWarning2=!1,b.deprecatedWarning3=!1,b}(),cx=function(){function b(){this.animation=null,this.previous=null,this.next=null,this.mixingFrom=null,this.mixingTo=null,this.listener=null,this.trackIndex=0,this.loop=!1,this.holdPrevious=!1,this.reverse=!1,this.shortestRotation=!1,this.eventThreshold=0,this.attachmentThreshold=0,this.drawOrderThreshold=0,this.animationStart=0,this.animationEnd=0,this.animationLast=0,this.nextAnimationLast=0,this.delay=0,this.trackTime=0,this.trackLast=0,this.nextTrackLast=0,this.trackEnd=0,this.timeScale=0,this.alpha=0,this.mixTime=0,this.mixDuration=0,this.interruptAlpha=0,this.totalAlpha=0,this.mixBlend=a.MixBlend.replace,this.timelineMode=new Array,this.timelineHoldMix=new Array,this.timelinesRotation=new Array}return b.prototype.reset=function(){this.next=null,this.previous=null,this.mixingFrom=null,this.mixingTo=null,this.animation=null,this.listener=null,this.timelineMode.length=0,this.timelineHoldMix.length=0,this.timelinesRotation.length=0},b.prototype.getAnimationTime=function(){if(this.loop){var a=this.animationEnd-this.animationStart;return 0==a?this.animationStart:this.trackTime%a+this.animationStart}return Math.min(this.trackTime+this.animationStart,this.animationEnd)},b.prototype.setAnimationLast=function(a){this.animationLast=a,this.nextAnimationLast=a},b.prototype.isComplete=function(){return this.trackTime>=this.animationEnd-this.animationStart},b.prototype.resetRotationDirections=function(){this.timelinesRotation.length=0},b.prototype.getTrackComplete=function(){var a=this.animationEnd-this.animationStart;if(0!=a){if(this.loop)return a*(1+(this.trackTime/a|0));if(this.trackTime<a)return a}return this.trackTime},Object.defineProperty(b.prototype,"time",{get:function(){return b.deprecatedWarning1||(b.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: TrackEntry.time is deprecated, please use trackTime from now on.")),this.trackTime},set:function(a){b.deprecatedWarning1||(b.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: TrackEntry.time is deprecated, please use trackTime from now on.")),this.trackTime=a},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"endTime",{get:function(){return b.deprecatedWarning2||(b.deprecatedWarning2=!0,console.warn("Spine Deprecation Warning: TrackEntry.endTime is deprecated, please use trackEnd from now on.")),this.trackTime},set:function(a){b.deprecatedWarning2||(b.deprecatedWarning2=!0,console.warn("Spine Deprecation Warning: TrackEntry.endTime is deprecated, please use trackEnd from now on.")),this.trackTime=a},enumerable:!1,configurable:!0}),b.prototype.loopsCount=function(){return Math.floor(this.trackTime/this.trackEnd)},b.deprecatedWarning1=!1,b.deprecatedWarning2=!1,b}(),cy=function(){function a(a){this.objects=[],this.drainDisabled=!1,this.animState=a}return a.prototype.start=function(a){this.objects.push(J.start),this.objects.push(a),this.animState.animationsChanged=!0},a.prototype.interrupt=function(a){this.objects.push(J.interrupt),this.objects.push(a)},a.prototype.end=function(a){this.objects.push(J.end),this.objects.push(a),this.animState.animationsChanged=!0},a.prototype.dispose=function(a){this.objects.push(J.dispose),this.objects.push(a)},a.prototype.complete=function(a){this.objects.push(J.complete),this.objects.push(a)},a.prototype.event=function(a,b){this.objects.push(J.event),this.objects.push(a),this.objects.push(b)},a.prototype.drain=function(){if(!this.drainDisabled){this.drainDisabled=!0;for(var f=this.objects,d=this.animState.listeners,e=0;e<f.length;e+=2){var h=f[e],a=f[e+1];switch(h){case J.start:a.listener&&a.listener.start&&a.listener.start(a);for(var b=0;b<d.length;b++){var c=d[b];c.start&&c.start(a)}break;case J.interrupt:a.listener&&a.listener.interrupt&&a.listener.interrupt(a);for(var b=0;b<d.length;b++){var c=d[b];c.interrupt&&c.interrupt(a)}break;case J.end:a.listener&&a.listener.end&&a.listener.end(a);for(var b=0;b<d.length;b++){var c=d[b];c.end&&c.end(a)}case J.dispose:a.listener&&a.listener.dispose&&a.listener.dispose(a);for(var b=0;b<d.length;b++){var c=d[b];c.dispose&&c.dispose(a)}this.animState.trackEntryPool.free(a);break;case J.complete:a.listener&&a.listener.complete&&a.listener.complete(a);for(var b=0;b<d.length;b++){var c=d[b];c.complete&&c.complete(a)}break;case J.event:var g=f[(e++)+2];a.listener&&a.listener.event&&a.listener.event(a,g);for(var b=0;b<d.length;b++){var c=d[b];c.event&&c.event(a,g)}}}this.clear(),this.drainDisabled=!1}},a.prototype.clear=function(){this.objects.length=0},a}();(g=J||(J={}))[g.start=0]="start",g[g.interrupt=1]="interrupt",g[g.end=2]="end",g[g.dispose=3]="dispose",g[g.complete=4]="complete",g[g.event=5]="event";var p,cz=function(){function a(){}return a.prototype.start=function(a){},a.prototype.interrupt=function(a){},a.prototype.end=function(a){},a.prototype.dispose=function(a){},a.prototype.complete=function(a){},a.prototype.event=function(a,b){},a}(),dq=0,dr=1,ds=2,dt=3,du=4,dv=1,dw=2,cA=function(){function a(a){if(this.animationToMixTime={},this.defaultMix=0,!a)throw new Error("skeletonData cannot be null.");this.skeletonData=a}return a.prototype.setMix=function(a,b,e){var c=this.skeletonData.findAnimation(a);if(!c)throw new Error("Animation not found: "+a);var d=this.skeletonData.findAnimation(b);if(!d)throw new Error("Animation not found: "+b);this.setMixWith(c,d,e)},a.prototype.setMixWith=function(a,b,c){if(!a)throw new Error("from cannot be null.");if(!b)throw new Error("to cannot be null.");var d=a.name+"."+b.name;this.animationToMixTime[d]=c},a.prototype.getMix=function(b,c){var d=b.name+"."+c.name,a=this.animationToMixTime[d];return void 0===a?this.defaultMix:a},a}(),cB=function(){function a(a){this.atlas=a}return a.prototype.loadSequence=function(f,g,c){for(var b=c.regions,a=0,h=b.length;a<h;a++){var d=c.getPath(g,a),e=this.atlas.findRegion(d);if(null==e)throw new Error("Region not found in atlas: "+d+" (sequence: "+f+")");b[a]=e,b[a].renderObject=b[a]}},a.prototype.newRegionAttachment=function(f,c,a,d){var e=new b3(c,a);if(null!=d)this.loadSequence(c,a,d);else{var b=this.atlas.findRegion(a);if(!b)throw new Error("Region not found in atlas: "+a+" (region attachment: "+c+")");b.renderObject=b,e.region=b}return e},a.prototype.newMeshAttachment=function(f,c,a,d){var e=new b0(c,a);if(null!=d)this.loadSequence(c,a,d);else{var b=this.atlas.findRegion(a);if(!b)throw new Error("Region not found in atlas: "+a+" (mesh attachment: "+c+")");b.renderObject=b,e.region=b}return e},a.prototype.newBoundingBoxAttachment=function(b,a){return new b$(a)},a.prototype.newPathAttachment=function(b,a){return new b1(a)},a.prototype.newPointAttachment=function(b,a){return new b2(a)},a.prototype.newClippingAttachment=function(b,a){return new b_(a)},a}(),cC=function(){function b(a,b,c){if(this.matrix=new cY.Matrix,this.parent=null,this.children=new Array,this.x=0,this.y=0,this.rotation=0,this.scaleX=0,this.scaleY=0,this.shearX=0,this.shearY=0,this.ax=0,this.ay=0,this.arotation=0,this.ascaleX=0,this.ascaleY=0,this.ashearX=0,this.ashearY=0,this.sorted=!1,this.active=!1,!a)throw new Error("data cannot be null.");if(!b)throw new Error("skeleton cannot be null.");this.data=a,this.skeleton=b,this.parent=c,this.setToSetupPose()}return Object.defineProperty(b.prototype,"worldX",{get:function(){return this.matrix.tx},enumerable:!1,configurable:!0}),Object.defineProperty(b.prototype,"worldY",{get:function(){return this.matrix.ty},enumerable:!1,configurable:!0}),b.prototype.isActive=function(){return this.active},b.prototype.update=function(){this.updateWorldTransformWith(this.ax,this.ay,this.arotation,this.ascaleX,this.ascaleY,this.ashearX,this.ashearY)},b.prototype.updateWorldTransform=function(){this.updateWorldTransformWith(this.x,this.y,this.rotation,this.scaleX,this.scaleY,this.shearX,this.shearY)},b.prototype.updateWorldTransformWith=function(w,x,d,g,h,i,u){this.ax=w,this.ay=x,this.arotation=d,this.ascaleX=g,this.ascaleY=h,this.ashearX=i,this.ashearY=u;var v=this.parent,b=this.matrix,l=this.skeleton.scaleX,m=as.yDown?-this.skeleton.scaleY:this.skeleton.scaleY;if(!v){var z=this.skeleton,n=d+90+u;b.a=ak.cosDeg(d+i)*g*l,b.c=ak.cosDeg(n)*h*l,b.b=ak.sinDeg(d+i)*g*m,b.d=ak.sinDeg(n)*h*m,b.tx=w*l+z.x,b.ty=x*m+z.y;return}var e=v.matrix.a,j=v.matrix.c,f=v.matrix.b,k=v.matrix.d;switch(b.tx=e*w+j*x+v.matrix.tx,b.ty=f*w+k*x+v.matrix.ty,this.data.transformMode){case a.TransformMode.Normal:var n=d+90+u,o=ak.cosDeg(d+i)*g,p=ak.cosDeg(n)*h,q=ak.sinDeg(d+i)*g,r=ak.sinDeg(n)*h;b.a=e*o+j*q,b.c=e*p+j*r,b.b=f*o+k*q,b.d=f*p+k*r;return;case a.TransformMode.OnlyTranslation:var n=d+90+u;b.a=ak.cosDeg(d+i)*g,b.c=ak.cosDeg(n)*h,b.b=ak.sinDeg(d+i)*g,b.d=ak.sinDeg(n)*h;break;case a.TransformMode.NoRotationOrReflection:var c=e*e+f*f,y=0;c>1e-4?(c=Math.abs(e*k-j*f)/c,e/=l,f/=m,j=f*c,k=e*c,y=Math.atan2(f,e)*ak.radDeg):(e=0,f=0,y=90-Math.atan2(k,j)*ak.radDeg);var A=d+i-y,B=d+u-y+90,o=ak.cosDeg(A)*g,p=ak.cosDeg(B)*h,q=ak.sinDeg(A)*g,r=ak.sinDeg(B)*h;b.a=e*o-j*q,b.c=e*p-j*r,b.b=f*o+k*q,b.d=f*p+k*r;break;case a.TransformMode.NoScale:case a.TransformMode.NoScaleOrReflection:var C=ak.cosDeg(d),D=ak.sinDeg(d),s=(e*C+j*D)/l,t=(f*C+k*D)/m,c=Math.sqrt(s*s+t*t);c>1e-5&&(c=1/c),s*=c,t*=c,c=Math.sqrt(s*s+t*t),this.data.transformMode==a.TransformMode.NoScale&&e*k-j*f<0!=(l<0!=m<0)&&(c=-c);var E=Math.PI/2+Math.atan2(t,s),F=Math.cos(E)*c,G=Math.sin(E)*c,o=ak.cosDeg(i)*g,p=ak.cosDeg(90+u)*h,q=ak.sinDeg(i)*g,r=ak.sinDeg(90+u)*h;b.a=s*o+F*q,b.c=s*p+F*r,b.b=t*o+G*q,b.d=t*p+G*r}b.a*=l,b.c*=l,b.b*=m,b.d*=m},b.prototype.setToSetupPose=function(){var a=this.data;this.x=a.x,this.y=a.y,this.rotation=a.rotation,this.scaleX=a.scaleX,this.scaleY=a.scaleY,this.shearX=a.shearX,this.shearY=a.shearY},b.prototype.getWorldRotationX=function(){return Math.atan2(this.matrix.b,this.matrix.a)*ak.radDeg},b.prototype.getWorldRotationY=function(){return Math.atan2(this.matrix.d,this.matrix.c)*ak.radDeg},b.prototype.getWorldScaleX=function(){var a=this.matrix;return Math.sqrt(a.a*a.a+a.b*a.b)},b.prototype.getWorldScaleY=function(){var a=this.matrix;return Math.sqrt(a.c*a.c+a.d*a.d)},b.prototype.updateAppliedTransform=function(){var h=this.parent,a=this.matrix;if(!h){this.ax=a.tx-this.skeleton.x,this.ay=a.ty-this.skeleton.y,this.arotation=Math.atan2(a.b,a.a)*ak.radDeg,this.ascaleX=Math.sqrt(a.a*a.a+a.b*a.b),this.ascaleY=Math.sqrt(a.c*a.c+a.d*a.d),this.ashearX=0,this.ashearY=Math.atan2(a.a*a.c+a.b*a.d,a.a*a.d-a.b*a.c)*ak.radDeg;return}var b=h.matrix,c=1/(b.a*b.d-b.b*b.c),i=a.tx-b.tx,j=a.ty-b.ty;this.ax=i*b.d*c-j*b.c*c,this.ay=j*b.a*c-i*b.b*c;var k=c*b.d,l=c*b.a,m=c*b.c,n=c*b.b,d=k*a.a-m*a.b,e=k*a.c-m*a.d,f=l*a.b-n*a.a,g=l*a.d-n*a.c;if(this.ashearX=0,this.ascaleX=Math.sqrt(d*d+f*f),this.ascaleX>1e-4){var o=d*g-e*f;this.ascaleY=o/this.ascaleX,this.ashearY=Math.atan2(d*e+f*g,o)*ak.radDeg,this.arotation=Math.atan2(f,d)*ak.radDeg}else this.ascaleX=0,this.ascaleY=Math.sqrt(e*e+g*g),this.ashearY=0,this.arotation=90-Math.atan2(g,e)*ak.radDeg},b.prototype.worldToLocal=function(b){var a=this.matrix,d=a.a,e=a.c,f=a.b,g=a.d,c=1/(d*g-e*f),h=b.x-a.tx,i=b.y-a.ty;return b.x=h*g*c-i*e*c,b.y=i*d*c-h*f*c,b},b.prototype.localToWorld=function(b){var a=this.matrix,c=b.x,d=b.y;return b.x=c*a.a+d*a.c+a.tx,b.y=c*a.b+d*a.d+a.ty,b},b.prototype.worldToLocalRotation=function(b){var c=ak.sinDeg(b),d=ak.cosDeg(b),a=this.matrix;return Math.atan2(a.a*c-a.b*d,a.d*d-a.c*c)*ak.radDeg},b.prototype.localToWorldRotation=function(b){b-=this.rotation-this.shearX;var c=ak.sinDeg(b),d=ak.cosDeg(b),a=this.matrix;return Math.atan2(d*a.b+c*a.d,d*a.a+c*a.c)*ak.radDeg},b.prototype.rotateWorld=function(d){var a=this.matrix,e=a.a,f=a.c,g=a.b,h=a.d,b=ak.cosDeg(d),c=ak.sinDeg(d);a.a=b*e-c*g,a.c=b*f-c*h,a.b=c*e+b*g,a.d=c*f+b*h},b}(),cD=function(b,c,d){if(this.index=0,this.parent=null,this.length=0,this.x=0,this.y=0,this.rotation=0,this.scaleX=1,this.scaleY=1,this.shearX=0,this.shearY=0,this.transformMode=a.TransformMode.Normal,this.skinRequired=!1,this.color=new aj,b<0)throw new Error("index must be >= 0.");if(!c)throw new Error("name cannot be null.");this.index=b,this.name=c,this.parent=d},C=function(a,b,c){this.name=a,this.order=b,this.skinRequired=c},cE=function(b,a){if(this.intValue=0,this.floatValue=0,this.stringValue=null,this.time=0,this.volume=0,this.balance=0,!a)throw new Error("data cannot be null.");this.time=b,this.data=a},cF=function(a){this.intValue=0,this.floatValue=0,this.stringValue=null,this.audioPath=null,this.volume=0,this.balance=0,this.name=a},cG=function(){function b(a,c){if(this.bendDirection=0,this.compress=!1,this.stretch=!1,this.mix=1,this.softness=0,this.active=!1,!a)throw new Error("data cannot be null.");if(!c)throw new Error("skeleton cannot be null.");this.data=a,this.mix=a.mix,this.softness=a.softness,this.bendDirection=a.bendDirection,this.compress=a.compress,this.stretch=a.stretch,this.bones=new Array;for(var b=0;b<a.bones.length;b++){var d=c.findBone(a.bones[b].name);if(!d)throw new Error("Couldn't find bone "+a.bones[b].name);this.bones.push(d)}var e=c.findBone(a.target.name);if(!e)throw new Error("Couldn't find bone "+a.target.name);this.target=e}return b.prototype.isActive=function(){return this.active},b.prototype.update=function(){if(0!=this.mix){var a=this.target,b=this.bones;switch(b.length){case 1:this.apply1(b[0],a.worldX,a.worldY,this.compress,this.stretch,this.data.uniform,this.mix);break;case 2:this.apply2(b[0],b[1],a.worldX,a.worldY,this.bendDirection,this.stretch,this.data.uniform,this.softness,this.mix)}}},b.prototype.apply1=function(b,m,n,q,r,B,s){var e=b.parent.matrix;if(!e)throw new Error("IK bone must have parent.");var f=e.a,j=e.c,g=e.b,k=e.d,c=-b.ashearX-b.arotation,h=0,d=0,t=b.skeleton.scaleX,u=as.yDown?-b.skeleton.scaleY:b.skeleton.scaleY;switch(b.data.transformMode){case a.TransformMode.OnlyTranslation:h=m-b.worldX,d=n-b.worldY,as.yDown&&(d=-d);break;case a.TransformMode.NoRotationOrReflection:var i=Math.abs(f*k-j*g)/(f*f+g*g),v=f/t,w=g/u;j=-w*i*t,k=v*i*u,c+=Math.atan2(w,v)*ak.radDeg;default:var x=m-e.tx,y=n-e.ty,z=f*k-j*g;h=(x*k-y*j)/z-b.ax,d=(y*f-x*g)/z-b.ay}c+=Math.atan2(d,h)*ak.radDeg,b.ascaleX<0&&(c+=180),c>180?c-=360:c< -180&&(c+=360);var o=b.ascaleX,A=b.ascaleY;if(q||r){switch(b.data.transformMode){case a.TransformMode.NoScale:case a.TransformMode.NoScaleOrReflection:h=m-b.worldX,d=n-b.worldY}var l=b.data.length*o,p=Math.sqrt(h*h+d*d);if(q&&p<l||r&&p>l&&l>1e-4){var i=(p/l-1)*s+1;o*=i,B&&(A*=i)}}b.updateWorldTransformWith(b.ax,b.ay,b.arotation+c*s,o,A,b.ashearX,b.ashearY)},b.prototype.apply2=function(k,c,W,X,s,L,al,z,F){var M=k.ax,N=k.ay,h=k.ascaleX,t=k.ascaleY,Y=h,Z=t,A=c.ascaleX,q=k.matrix,O=0,P=0,v=0;h<0?(h=-h,O=180,v=-1):(O=0,v=1),t<0&&(t=-t,v=-v),A<0?(A=-A,P=180):P=0;var u=c.ax,w=0,Q=0,R=0,a=q.a,f=q.c,b=q.b,i=q.d,$=1e-4>=Math.abs(h-t);!$||L?(w=0,Q=a*u+q.tx,R=b*u+q.ty):(Q=a*u+f*(w=c.ay)+q.tx,R=b*u+i*w+q.ty);var l=k.parent.matrix;if(!l)throw new Error("IK parent must itself have a parent.");a=l.a,f=l.c,b=l.b;var j,e,G=1/(a*(i=l.d)-f*b),m=Q-l.tx,g=R-l.ty,_=(m*i-g*f)*G-M,aa=(g*a-m*b)*G-N,d=Math.sqrt(_*_+aa*aa),n=c.data.length*A;if(d<1e-4){this.apply1(k,W,X,!1,L,!1,F),c.updateWorldTransformWith(u,w,0,c.ascaleX,c.ascaleY,c.ashearX,c.ashearY);return}var o=((m=W-l.tx)*i-(g=X-l.ty)*f)*G-M,p=(g*a-m*b)*G-N,r=o*o+p*p;if(0!=z){z*=h*(A+1)*.5;var ab=Math.sqrt(r),S=ab-d-n*h+z;if(S>0){var B=Math.min(1,S/(2*z))-1;B=(S-z*(1-B*B))/ab,o-=B*o,p-=B*p,r=o*o+p*p}}outer:if($){var x=(r-d*d-(n*=h)*n)/(2*d*n);x< -1?(x=-1,e=Math.PI*s):x>1?(x=1,e=0,L&&(a=(Math.sqrt(r)/(d+n)-1)*F+1,Y*=a,al&&(Z*=a))):e=Math.acos(x)*s,a=d+n*x,f=n*Math.sin(e),j=Math.atan2(p*a-o*f,o*a+p*f)}else{a=h*n,f=t*n;var H=a*a,C=f*f,T=Math.atan2(p,o);b=C*d*d+H*r-H*C;var I=-2*C*d,ac=C-H;if((i=I*I-4*ac*b)>=0){var D=Math.sqrt(i);I<0&&(D=-D);var ad=(D=-(.5*(I+D)))/ac,ae=b/D,y=Math.abs(ad)<Math.abs(ae)?ad:ae;if(y*y<=r){g=Math.sqrt(r-y*y)*s,j=T-Math.atan2(g,y),e=Math.atan2(g/t,(y-d)/h);break outer}}var af=ak.PI,J=d-a,U=J*J,ag=0,ah=0,K=d+a,V=K*K,ai=0;(b=-a*d/(H-C))>= -1&&b<=1&&(b=Math.acos(b),m=a*Math.cos(b)+d,g=f*Math.sin(b),(i=m*m+g*g)<U&&(af=b,U=i,J=m,ag=g),i>V&&(ah=b,V=i,K=m,ai=g)),r<=(U+V)*.5?(j=T-Math.atan2(ag*s,J),e=af*s):(j=T-Math.atan2(ai*s,K),e=ah*s)}var aj=Math.atan2(w,u)*v,E=k.arotation;(j=(j-aj)*ak.radDeg+O-E)>180?j-=360:j< -180&&(j+=360),k.updateWorldTransformWith(M,N,E+j*F,Y,Z,0,0),E=c.arotation,(e=((e+aj)*ak.radDeg-c.ashearX)*v+P-E)>180?e-=360:e< -180&&(e+=360),c.updateWorldTransformWith(u,w,E+e*F,c.ascaleX,c.ascaleY,c.ashearX,c.ashearY)},b}(),cH=function(b){function a(c){var a=b.call(this,c,0,!1)||this;return a.bones=new Array,a._target=null,a.bendDirection=1,a.compress=!1,a.stretch=!1,a.uniform=!1,a.mix=1,a.softness=0,a}return dn(a,b),Object.defineProperty(a.prototype,"target",{get:function(){if(this._target)return this._target;throw new Error("BoneData not set.")},set:function(a){this._target=a},enumerable:!1,configurable:!0}),a}(C),cI=function(c){function b(d){var b=c.call(this,d,0,!1)||this;return b.bones=new Array,b._target=null,b.positionMode=a.PositionMode.Fixed,b.spacingMode=K.Fixed,b.rotateMode=a.RotateMode.Chain,b.offsetRotation=0,b.position=0,b.spacing=0,b.mixRotate=0,b.mixX=0,b.mixY=0,b}return dn(b,c),Object.defineProperty(b.prototype,"target",{get:function(){if(this._target)return this._target;throw new Error("SlotData not set.")},set:function(a){this._target=a},enumerable:!1,configurable:!0}),b}(C);(p=K||(K={}))[p.Length=0]="Length",p[p.Fixed=1]="Fixed",p[p.Percent=2]="Percent",p[p.Proportional=3]="Proportional";var cJ=function(){function b(a,c){if(this.position=0,this.spacing=0,this.mixRotate=0,this.mixX=0,this.mixY=0,this.spaces=new Array,this.positions=new Array,this.world=new Array,this.curves=new Array,this.lengths=new Array,this.segments=new Array,this.active=!1,!a)throw new Error("data cannot be null.");if(!c)throw new Error("skeleton cannot be null.");this.data=a,this.bones=new Array;for(var b=0,f=a.bones.length;b<f;b++){var d=c.findBone(a.bones[b].name);if(!d)throw new Error("Couldn't find bone "+a.bones[b].name+".");this.bones.push(d)}var e=c.findSlot(a.target.name);if(!e)throw new Error("Couldn't find target bone "+a.target.name);this.target=e,this.position=a.position,this.spacing=a.spacing,this.mixRotate=a.mixRotate,this.mixX=a.mixX,this.mixY=a.mixY}return b.prototype.isActive=function(){return this.active},b.prototype.update=function(){var I=this.target.getAttachment();if(I instanceof b1){var q=this.mixRotate,J=this.mixX,L=this.mixY;if(0!=q||0!=J||0!=L){var r=this.data,E=r.rotateMode==a.RotateMode.Tangent,n=r.rotateMode==a.RotateMode.ChainScale,u=this.bones,z=u.length,k=E?z:z+1,o=am.setArraySize(this.spaces,k),p=n?this.lengths=am.setArraySize(this.lengths,z):[],s=this.spacing;switch(r.spacingMode){case K.Percent:if(n)for(var c=0,v=k-1;c<v;c++){var d=u[c],f=d.data.length;if(f<b.epsilon)p[c]=0;else{var h=f*d.matrix.a,i=f*d.matrix.b;p[c]=Math.sqrt(h*h+i*i)}}am.arrayFill(o,1,k,s);break;case K.Proportional:for(var w=0,c=0,v=k-1;c<v;){var d=u[c],f=d.data.length;if(f<b.epsilon)n&&(p[c]=0),o[++c]=s;else{var h=f*d.matrix.a,i=f*d.matrix.b,F=Math.sqrt(h*h+i*i);n&&(p[c]=F),o[++c]=F,w+=F}}if(w>0){w=k/w*s;for(var c=1;c<k;c++)o[c]*=w}break;default:for(var S=r.spacingMode==K.Length,c=0,v=k-1;c<v;){var d=u[c],f=d.data.length;if(f<b.epsilon)n&&(p[c]=0),o[++c]=s;else{var h=f*d.matrix.a,i=f*d.matrix.b,M=Math.sqrt(h*h+i*i);n&&(p[c]=M),o[++c]=(S?f+s:s)*M/f}}}var t=this.computeWorldPositions(I,k,E),A=t[0],B=t[1],G=r.offsetRotation,H=!1;if(0==G)H=r.rotateMode==a.RotateMode.Chain;else{H=!1;var j=this.target.bone.matrix;G*=j.a*j.d-j.b*j.c>0?ak.degRad:-ak.degRad}for(var c=0,j=3;c<z;c++,j+=3){var d=u[c],e=d.matrix;e.tx+=(A-e.tx)*J,e.ty+=(B-e.ty)*L;var h=t[j],i=t[j+1],C=h-A,D=i-B;if(n){var N=p[c];if(0!=N){var O=(Math.sqrt(C*C+D*D)/N-1)*q+1;e.a*=O,e.b*=O}}if(A=h,B=i,q>0){var x=e.a,P=e.c,y=e.b,Q=e.d,g=0,l=0,m=0;if(g=E?t[j-1]:0==o[c+1]?t[j+2]:Math.atan2(D,C),g-=Math.atan2(y,x),H){l=Math.cos(g),m=Math.sin(g);var R=d.data.length;A+=(R*(l*x-m*y)-C)*q,B+=(R*(m*x+l*y)-D)*q}else g+=G;g>ak.PI?g-=ak.PI2:g< -ak.PI&&(g+=ak.PI2),g*=q,l=Math.cos(g),m=Math.sin(g),e.a=l*x-m*y,e.c=l*P-m*Q,e.b=m*x+l*y,e.d=m*P+l*Q}d.updateAppliedTransform()}}}},b.prototype.computeWorldPositions=function(j,L,X){var P,w=this.target,Q=this.position,Y=this.spaces,x=am.setArraySize(this.positions,3*L+2),c=this.world,M=j.closed,h=j.worldVerticesLength,N=h/6,y=b.NONE;if(!j.constantSpeed){var R,S=j.lengths,A=S[N-=M?1:2];switch(this.data.positionMode==a.PositionMode.Percent&&(Q*=A),this.data.spacingMode){case K.Percent:R=A;break;case K.Proportional:R=A/L;break;default:R=1}c=am.setArraySize(this.world,8);for(var i=0,q=0,g=0;i<L;i++,q+=3){var O=Y[i]*R,d=Q+=O;if(M)(d%=A)<0&&(d+=A),g=0;else if(d<0){y!=b.BEFORE&&(y=b.BEFORE,j.computeWorldVertices(w,2,4,c,0,2)),this.addBeforePosition(d,c,0,x,q);continue}else if(d>A){y!=b.AFTER&&(y=b.AFTER,j.computeWorldVertices(w,h-6,4,c,0,2)),this.addAfterPosition(d-A,c,0,x,q);continue}for(;;g++){var T=S[g];if(!(d>T)){if(0==g)d/=T;else{var z=S[g-1];d=(d-z)/(T-z)}break}}g!=y&&(y=g,M&&g==N?(j.computeWorldVertices(w,h-4,4,c,0,2),j.computeWorldVertices(w,0,4,c,4,2)):j.computeWorldVertices(w,6*g+2,8,c,0,2)),this.addCurvePosition(d,c[0],c[1],c[2],c[3],c[4],c[5],c[6],c[7],x,q,X||i>0&&0==O)}return x}M?(h+=2,c=am.setArraySize(this.world,h),j.computeWorldVertices(w,2,h-4,c,0,2),j.computeWorldVertices(w,0,2,c,h-4,2),c[h-2]=c[0],c[h-1]=c[1]):(N--,h-=4,c=am.setArraySize(this.world,h),j.computeWorldVertices(w,2,h,c,0,2));for(var U=am.setArraySize(this.curves,N),k=0,r=c[0],s=c[1],t=0,u=0,B=0,C=0,E=0,F=0,G=0,H=0,m=0,n=0,o=0,p=0,e=0,f=0,i=0,D=2;i<N;i++,D+=6)t=c[D],u=c[D+1],B=c[D+2],C=c[D+3],E=c[D+4],F=c[D+5],G=(r-2*t+B)*.1875,H=(s-2*u+C)*.1875,m=((t-B)*3-r+E)*.09375,n=((u-C)*3-s+F)*.09375,o=2*G+m,p=2*H+n,e=(t-r)*.75+G+.16666667*m,f=(u-s)*.75+H+.16666667*n,k+=Math.sqrt(e*e+f*f),e+=o,f+=p,o+=m,p+=n,k+=Math.sqrt(e*e+f*f),e+=o,f+=p,k+=Math.sqrt(e*e+f*f),e+=o+m,f+=p+n,k+=Math.sqrt(e*e+f*f),U[i]=k,r=E,s=F;switch(this.data.positionMode==a.PositionMode.Percent&&(Q*=k),this.data.spacingMode){case K.Percent:P=k;break;case K.Proportional:P=k/L;break;default:P=1}for(var I=this.segments,v=0,i=0,q=0,g=0,J=0;i<L;i++,q+=3){var O=Y[i]*P,d=Q+=O;if(M)(d%=k)<0&&(d+=k),g=0;else if(d<0){this.addBeforePosition(d,c,0,x,q);continue}else if(d>k){this.addAfterPosition(d-k,c,h-4,x,q);continue}for(;;g++){var V=U[g];if(!(d>V)){if(0==g)d/=V;else{var z=U[g-1];d=(d-z)/(V-z)}break}}if(g!=y){y=g;var l=6*g;for(r=c[l],s=c[l+1],t=c[l+2],u=c[l+3],B=c[l+4],C=c[l+5],E=c[l+6],F=c[l+7],G=(r-2*t+B)*.03,H=(s-2*u+C)*.03,m=((t-B)*3-r+E)*.006,n=((u-C)*3-s+F)*.006,o=2*G+m,p=2*H+n,e=(t-r)*.3+G+.16666667*m,f=(u-s)*.3+H+.16666667*n,v=Math.sqrt(e*e+f*f),I[0]=v,l=1;l<8;l++)e+=o,f+=p,o+=m,p+=n,v+=Math.sqrt(e*e+f*f),I[l]=v;e+=o,f+=p,v+=Math.sqrt(e*e+f*f),I[8]=v,e+=o+m,f+=p+n,v+=Math.sqrt(e*e+f*f),I[9]=v,J=0}for(d*=v;;J++){var W=I[J];if(!(d>W)){if(0==J)d/=W;else{var z=I[J-1];d=J+(d-z)/(W-z)}break}}this.addCurvePosition(.1*d,r,s,t,u,B,C,E,F,x,q,X||i>0&&0==O)}return x},b.prototype.addBeforePosition=function(f,a,b,c,d){var g=a[b],h=a[b+1],i=a[b+2]-g,j=a[b+3]-h,e=Math.atan2(j,i);c[d]=g+f*Math.cos(e),c[d+1]=h+f*Math.sin(e),c[d+2]=e},b.prototype.addAfterPosition=function(f,a,b,c,d){var g=a[b+2],h=a[b+3],i=g-a[b],j=h-a[b+1],e=Math.atan2(j,i);c[d]=g+f*Math.cos(e),c[d+1]=h+f*Math.sin(e),c[d+2]=e},b.prototype.addCurvePosition=function(a,d,e,g,h,l,m,u,v,b,c,w){if(0==a||isNaN(a)){b[c]=d,b[c+1]=e,b[c+2]=Math.atan2(h-e,g-d);return}var i=a*a,n=i*a,f=1-a,j=f*f,o=j*f,k=f*a,p=3*k,q=f*p,r=p*a,s=d*o+g*q+l*r+u*n,t=e*o+h*q+m*r+v*n;b[c]=s,b[c+1]=t,w&&(a<.001?b[c+2]=Math.atan2(h-e,g-d):b[c+2]=Math.atan2(t-(e*j+h*k*2+m*i),s-(d*j+g*k*2+l*i)))},b.NONE=-1,b.BEFORE=-2,b.AFTER=-3,b.epsilon=1e-5,b}(),cK=function(){function a(a,b){if(this.darkColor=null,this.attachment=null,this.attachmentState=0,this.sequenceIndex=-1,this.deform=new Array,!a)throw new Error("data cannot be null.");if(!b)throw new Error("bone cannot be null.");this.data=a,this.bone=b,this.color=new aj,this.darkColor=a.darkColor?new aj:null,this.setToSetupPose(),this.blendMode=this.data.blendMode}return a.prototype.getSkeleton=function(){return this.bone.skeleton},a.prototype.getAttachment=function(){return this.attachment},a.prototype.setAttachment=function(a){this.attachment!=a&&(a instanceof w&&this.attachment instanceof w&&a.timelineAttachment==this.attachment.timelineAttachment||(this.deform.length=0),this.attachment=a,this.sequenceIndex=-1)},a.prototype.setToSetupPose=function(){this.color.setFromColor(this.data.color),this.darkColor&&this.darkColor.setFromColor(this.data.darkColor),this.data.attachmentName?(this.attachment=null,this.setAttachment(this.bone.skeleton.getAttachment(this.data.index,this.data.attachmentName))):this.attachment=null},a}(),cL=function(){function a(a,c){if(this.mixRotate=0,this.mixX=0,this.mixY=0,this.mixScaleX=0,this.mixScaleY=0,this.mixShearY=0,this.temp=new ap,this.active=!1,!a)throw new Error("data cannot be null.");if(!c)throw new Error("skeleton cannot be null.");this.data=a,this.mixRotate=a.mixRotate,this.mixX=a.mixX,this.mixY=a.mixY,this.mixScaleX=a.mixScaleX,this.mixScaleY=a.mixScaleY,this.mixShearY=a.mixShearY,this.bones=new Array;for(var b=0;b<a.bones.length;b++){var d=c.findBone(a.bones[b].name);if(!d)throw new Error("Couldn't find bone "+a.bones[b].name+".");this.bones.push(d)}var e=c.findBone(a.target.name);if(!e)throw new Error("Couldn't find target bone "+a.target.name+".");this.target=e}return a.prototype.isActive=function(){return this.active},a.prototype.update=function(){(0!=this.mixRotate||0!=this.mixX||0!=this.mixY||0!=this.mixScaleX||0!=this.mixScaleX||0!=this.mixShearY)&&(this.data.local?this.data.relative?this.applyRelativeLocal():this.applyAbsoluteLocal():this.data.relative?this.applyRelativeWorld():this.applyAbsoluteWorld())},a.prototype.applyAbsoluteWorld=function(){for(var q=this.mixRotate,r=this.mixX,s=this.mixY,t=this.mixScaleX,u=this.mixScaleY,v=this.mixShearY,B=0!=r||0!=s,w=this.target,h=w.matrix,f=h.a,i=h.c,g=h.b,j=h.d,x=f*j-i*g>0?ak.degRad:-ak.degRad,C=this.data.offsetRotation*x,D=this.data.offsetShearY*x,y=this.bones,m=0,E=y.length;m<E;m++){var z=y[m],a=z.matrix;if(0!=q){var n=a.a,d=a.c,o=a.b,e=a.d,c=Math.atan2(g,f)-Math.atan2(o,n)+C;c>ak.PI?c-=ak.PI2:c< -ak.PI&&(c+=ak.PI2);var k=Math.cos(c*=q),l=Math.sin(c);a.a=k*n-l*o,a.c=k*d-l*e,a.b=l*n+k*o,a.d=l*d+k*e}if(B){var p=this.temp;w.localToWorld(p.set(this.data.offsetX,this.data.offsetY)),a.tx+=(p.x-a.tx)*r,a.ty+=(p.y-a.ty)*s}if(0!=t){var b=Math.sqrt(a.a*a.a+a.b*a.b);0!=b&&(b=(b+(Math.sqrt(f*f+g*g)-b+this.data.offsetScaleX)*t)/b),a.a*=b,a.b*=b}if(0!=u){var b=Math.sqrt(a.c*a.c+a.d*a.d);0!=b&&(b=(b+(Math.sqrt(i*i+j*j)-b+this.data.offsetScaleY)*u)/b),a.c*=b,a.d*=b}if(v>0){var d=a.c,e=a.d,A=Math.atan2(e,d),c=Math.atan2(j,i)-Math.atan2(g,f)-(A-Math.atan2(a.b,a.a));c>ak.PI?c-=ak.PI2:c< -ak.PI&&(c+=ak.PI2),c=A+(c+D)*v;var b=Math.sqrt(d*d+e*e);a.c=Math.cos(c)*b,a.d=Math.sin(c)*b}z.updateAppliedTransform()}},a.prototype.applyRelativeWorld=function(){for(var o=this.mixRotate,p=this.mixX,q=this.mixY,r=this.mixScaleX,s=this.mixScaleY,t=this.mixShearY,A=0!=p||0!=q,u=this.target,h=u.matrix,f=h.a,i=h.c,g=h.b,j=h.d,v=f*j-i*g>0?ak.degRad:-ak.degRad,B=this.data.offsetRotation*v,C=this.data.offsetShearY*v,w=this.bones,m=0,D=w.length;m<D;m++){var x=w[m],a=x.matrix;if(0!=o){var y=a.a,d=a.c,z=a.b,e=a.d,b=Math.atan2(g,f)+B;b>ak.PI?b-=ak.PI2:b< -ak.PI&&(b+=ak.PI2);var k=Math.cos(b*=o),l=Math.sin(b);a.a=k*y-l*z,a.c=k*d-l*e,a.b=l*y+k*z,a.d=l*d+k*e}if(A){var n=this.temp;u.localToWorld(n.set(this.data.offsetX,this.data.offsetY)),a.tx+=n.x*p,a.ty+=n.y*q}if(0!=r){var c=(Math.sqrt(f*f+g*g)-1+this.data.offsetScaleX)*r+1;a.a*=c,a.b*=c}if(0!=s){var c=(Math.sqrt(i*i+j*j)-1+this.data.offsetScaleY)*s+1;a.c*=c,a.d*=c}if(t>0){var b=Math.atan2(j,i)-Math.atan2(g,f);b>ak.PI?b-=ak.PI2:b< -ak.PI&&(b+=ak.PI2);var d=a.c,e=a.d;b=Math.atan2(e,d)+(b-ak.PI/2+C)*t;var c=Math.sqrt(d*d+e*e);a.c=Math.cos(b)*c,a.d=Math.sin(b)*c}x.updateAppliedTransform()}},a.prototype.applyAbsoluteLocal=function(){for(var k=this.mixRotate,p=this.mixX,q=this.mixY,l=this.mixScaleX,m=this.mixScaleY,n=this.mixShearY,c=this.target,o=this.bones,f=0,r=o.length;f<r;f++){var a=o[f],g=a.arotation;if(0!=k){var b=c.arotation-g+this.data.offsetRotation;b-=(16384-(16384.499999999996-b/360|0))*360,g+=b*k}var h=a.ax,i=a.ay;h+=(c.ax-h+this.data.offsetX)*p,i+=(c.ay-i+this.data.offsetY)*q;var d=a.ascaleX,e=a.ascaleY;0!=l&&0!=d&&(d=(d+(c.ascaleX-d+this.data.offsetScaleX)*l)/d),0!=m&&0!=e&&(e=(e+(c.ascaleY-e+this.data.offsetScaleY)*m)/e);var j=a.ashearY;if(0!=n){var b=c.ashearY-j+this.data.offsetShearY;b-=(16384-(16384.499999999996-b/360|0))*360,j+=b*n}a.updateWorldTransformWith(h,i,g,d,e,a.ashearX,j)}},a.prototype.applyRelativeLocal=function(){for(var e=this.mixRotate,f=this.mixX,g=this.mixY,h=this.mixScaleX,i=this.mixScaleY,j=this.mixShearY,b=this.target,d=this.bones,c=0,k=d.length;c<k;c++){var a=d[c],l=a.arotation+(b.arotation+this.data.offsetRotation)*e,m=a.ax+(b.ax+this.data.offsetX)*f,n=a.ay+(b.ay+this.data.offsetY)*g,o=a.ascaleX*((b.ascaleX-1+this.data.offsetScaleX)*h+1),p=a.ascaleY*((b.ascaleY-1+this.data.offsetScaleY)*i+1),q=a.ashearY+(b.ashearY+this.data.offsetShearY)*j;a.updateWorldTransformWith(m,n,l,o,p,a.ashearX,q)}},a}(),cM=function(){function a(b){if(this._updateCache=new Array,this.skin=null,this.scaleX=1,this.scaleY=1,this.x=0,this.y=0,!b)throw new Error("data cannot be null.");this.data=b,this.bones=new Array;for(var a=0;a<b.bones.length;a++){var d=b.bones[a],c=void 0;if(d.parent){var e=this.bones[d.parent.index];c=new cC(d,this,e),e.children.push(c)}else c=new cC(d,this,null);this.bones.push(c)}this.slots=new Array,this.drawOrder=new Array;for(var a=0;a<b.slots.length;a++){var f=b.slots[a],c=this.bones[f.boneData.index],g=new cK(f,c);this.slots.push(g),this.drawOrder.push(g)}this.ikConstraints=new Array;for(var a=0;a<b.ikConstraints.length;a++){var h=b.ikConstraints[a];this.ikConstraints.push(new cG(h,this))}this.transformConstraints=new Array;for(var a=0;a<b.transformConstraints.length;a++){var i=b.transformConstraints[a];this.transformConstraints.push(new cL(i,this))}this.pathConstraints=new Array;for(var a=0;a<b.pathConstraints.length;a++){var j=b.pathConstraints[a];this.pathConstraints.push(new cJ(j,this))}this.color=new aj(1,1,1,1),this.updateCache()}return a.prototype.updateCache=function(){this._updateCache.length=0;for(var f=this.bones,a=0,e=f.length;a<e;a++){var c=f[a];c.sorted=c.data.skinRequired,c.active=!c.sorted}if(this.skin)for(var m=this.skin.bones,a=0,e=this.skin.bones.length;a<e;a++){var c=this.bones[m[a].index];do c.sorted=!1,c.active=!0,c=c.parent;while(c)}var g=this.ikConstraints,h=this.transformConstraints,i=this.pathConstraints,j=g.length,k=h.length,l=i.length,n=j+k+l;outer:for(var a=0;a<n;a++){for(var b=0;b<j;b++){var d=g[b];if(d.data.order==a){this.sortIkConstraint(d);continue outer}}for(var b=0;b<k;b++){var d=h[b];if(d.data.order==a){this.sortTransformConstraint(d);continue outer}}for(var b=0;b<l;b++){var d=i[b];if(d.data.order==a){this.sortPathConstraint(d);continue outer}}}for(var a=0,e=f.length;a<e;a++)this.sortBone(f[a])},a.prototype.sortIkConstraint=function(a){if(a.active=a.target.isActive()&&(!a.data.skinRequired||this.skin&&am.contains(this.skin.constraints,a.data,!0)),a.active){var e=a.target;this.sortBone(e);var b=a.bones,c=b[0];if(this.sortBone(c),1==b.length)this._updateCache.push(a),this.sortReset(c.children);else{var d=b[b.length-1];this.sortBone(d),this._updateCache.push(a),this.sortReset(c.children),d.sorted=!0}}},a.prototype.sortPathConstraint=function(b){if(b.active=b.target.bone.isActive()&&(!b.data.skinRequired||this.skin&&am.contains(this.skin.constraints,b.data,!0)),b.active){var e=b.target,f=e.data.index,c=e.bone;this.skin&&this.sortPathConstraintAttachment(this.skin,f,c),this.data.defaultSkin&&this.data.defaultSkin!=this.skin&&this.sortPathConstraintAttachment(this.data.defaultSkin,f,c);for(var a=0,i=this.data.skins.length;a<i;a++)this.sortPathConstraintAttachment(this.data.skins[a],f,c);var h=e.getAttachment();h instanceof b1&&this.sortPathConstraintAttachmentWith(h,c);for(var d=b.bones,g=d.length,a=0;a<g;a++)this.sortBone(d[a]);this._updateCache.push(b);for(var a=0;a<g;a++)this.sortReset(d[a].children);for(var a=0;a<g;a++)d[a].sorted=!0}},a.prototype.sortTransformConstraint=function(b){if(b.active=b.target.isActive()&&(!b.data.skinRequired||this.skin&&am.contains(this.skin.constraints,b.data,!0)),b.active){this.sortBone(b.target);var c=b.bones,d=c.length;if(b.data.local)for(var a=0;a<d;a++){var e=c[a];this.sortBone(e.parent),this.sortBone(e)}else for(var a=0;a<d;a++)this.sortBone(c[a]);this._updateCache.push(b);for(var a=0;a<d;a++)this.sortReset(c[a].children);for(var a=0;a<d;a++)c[a].sorted=!0}},a.prototype.sortPathConstraintAttachment=function(b,c,d){var a=b.attachments[c];if(a)for(var e in a)this.sortPathConstraintAttachmentWith(a[e],d)},a.prototype.sortPathConstraintAttachmentWith=function(c,e){if(c instanceof b1){var b=c.bones;if(b)for(var f=this.bones,a=0,g=b.length;a<g;){var d=b[a++];for(d+=a;a<d;)this.sortBone(f[b[a++]])}else this.sortBone(e)}},a.prototype.sortBone=function(a){if(a&&!a.sorted){var b=a.parent;b&&this.sortBone(b),a.sorted=!0,this._updateCache.push(a)}},a.prototype.sortReset=function(c){for(var b=0,d=c.length;b<d;b++){var a=c[b];a.active&&(a.sorted&&this.sortReset(a.children),a.sorted=!1)}},a.prototype.updateWorldTransform=function(){for(var d=this.bones,b=0,c=d.length;b<c;b++){var a=d[b];a.ax=a.x,a.ay=a.y,a.arotation=a.rotation,a.ascaleX=a.scaleX,a.ascaleY=a.scaleY,a.ashearX=a.shearX,a.ashearY=a.shearY}for(var e=this._updateCache,b=0,c=e.length;b<c;b++)e[b].update()},a.prototype.updateWorldTransformWith=function(b){var a=this.getRootBone(),c=b.matrix.a,d=b.matrix.c,e=b.matrix.b,f=b.matrix.d;a.matrix.tx=c*this.x+d*this.y+b.worldX,a.matrix.ty=e*this.x+f*this.y+b.worldY;var h=a.rotation+90+a.shearY,i=ak.cosDeg(a.rotation+a.shearX)*a.scaleX,j=ak.cosDeg(h)*a.scaleY,k=ak.sinDeg(a.rotation+a.shearX)*a.scaleX,l=ak.sinDeg(h)*a.scaleY,m=this.scaleX,n=as.yDown?-this.scaleY:this.scaleY;a.matrix.a=(c*i+d*k)*m,a.matrix.c=(c*j+d*l)*m,a.matrix.b=(e*i+f*k)*n,a.matrix.d=(e*j+f*l)*n;for(var o=this._updateCache,g=0,q=o.length;g<q;g++){var p=o[g];p!=a&&p.update()}},a.prototype.setToSetupPose=function(){this.setBonesToSetupPose(),this.setSlotsToSetupPose()},a.prototype.setBonesToSetupPose=function(){for(var e=this.bones,b=0,d=e.length;b<d;b++)e[b].setToSetupPose();for(var f=this.ikConstraints,b=0,d=f.length;b<d;b++){var a=f[b];a.mix=a.data.mix,a.softness=a.data.softness,a.bendDirection=a.data.bendDirection,a.compress=a.data.compress,a.stretch=a.data.stretch}for(var g=this.transformConstraints,b=0,d=g.length;b<d;b++){var a=g[b],c=a.data;a.mixRotate=c.mixRotate,a.mixX=c.mixX,a.mixY=c.mixY,a.mixScaleX=c.mixScaleX,a.mixScaleY=c.mixScaleY,a.mixShearY=c.mixShearY}for(var h=this.pathConstraints,b=0,d=h.length;b<d;b++){var a=h[b],c=a.data;a.position=c.position,a.spacing=c.spacing,a.mixRotate=c.mixRotate,a.mixX=c.mixX,a.mixY=c.mixY}},a.prototype.setSlotsToSetupPose=function(){var a=this.slots;am.arrayCopy(a,0,this.drawOrder,0,a.length);for(var b=0,c=a.length;b<c;b++)a[b].setToSetupPose()},a.prototype.getRootBone=function(){return 0==this.bones.length?null:this.bones[0]},a.prototype.findBone=function(b){if(!b)throw new Error("boneName cannot be null.");for(var c=this.bones,a=0,e=c.length;a<e;a++){var d=c[a];if(d.data.name==b)return d}return null},a.prototype.findBoneIndex=function(b){if(!b)throw new Error("boneName cannot be null.");for(var c=this.bones,a=0,d=c.length;a<d;a++)if(c[a].data.name==b)return a;return -1},a.prototype.findSlot=function(b){if(!b)throw new Error("slotName cannot be null.");for(var c=this.slots,a=0,e=c.length;a<e;a++){var d=c[a];if(d.data.name==b)return d}return null},a.prototype.findSlotIndex=function(b){if(!b)throw new Error("slotName cannot be null.");for(var c=this.slots,a=0,d=c.length;a<d;a++)if(c[a].data.name==b)return a;return -1},a.prototype.setSkinByName=function(a){var b=this.data.findSkin(a);if(!b)throw new Error("Skin not found: "+a);this.setSkin(b)},a.prototype.setSkin=function(a){if(a!=this.skin){if(a){if(this.skin)a.attachAll(this,this.skin);else for(var c=this.slots,b=0,g=c.length;b<g;b++){var d=c[b],e=d.data.attachmentName;if(e){var f=a.getAttachment(b,e);f&&d.setAttachment(f)}}}this.skin=a,this.updateCache()}},a.prototype.getAttachmentByName=function(a,c){var b=this.data.findSlot(a);if(!b)throw new Error("Can't find slot with name "+a);return this.getAttachment(b.index,c)},a.prototype.getAttachment=function(b,a){if(!a)throw new Error("attachmentName cannot be null.");if(this.skin){var c=this.skin.getAttachment(b,a);if(c)return c}return this.data.defaultSkin?this.data.defaultSkin.getAttachment(b,a):null},a.prototype.setAttachment=function(a,c){if(!a)throw new Error("slotName cannot be null.");for(var d=this.slots,b=0,g=d.length;b<g;b++){var e=d[b];if(e.data.name==a){var f=null;if(c&&!(f=this.getAttachment(b,c)))throw new Error("Attachment not found: "+c+", for slot: "+a);e.setAttachment(f);return}}throw new Error("Slot not found: "+a)},a.prototype.findIkConstraint=function(b){if(!b)throw new Error("constraintName cannot be null.");for(var c=this.ikConstraints,a=0,e=c.length;a<e;a++){var d=c[a];if(d.data.name==b)return d}return null},a.prototype.findTransformConstraint=function(b){if(!b)throw new Error("constraintName cannot be null.");for(var c=this.transformConstraints,a=0,e=c.length;a<e;a++){var d=c[a];if(d.data.name==b)return d}return null},a.prototype.findPathConstraint=function(b){if(!b)throw new Error("constraintName cannot be null.");for(var c=this.pathConstraints,a=0,e=c.length;a<e;a++){var d=c[a];if(d.data.name==b)return d}return null},a.prototype.getBoundsRect=function(){var a=new ap,b=new ap;return this.getBounds(a,b),{x:a.x,y:a.y,width:b.x,height:b.y}},a.prototype.getBounds=function(l,m,c){if(void 0===c&&(c=new Array(2)),!l)throw new Error("offset cannot be null.");if(!m)throw new Error("size cannot be null.");for(var n=this.drawOrder,d=Number.POSITIVE_INFINITY,e=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY,j=Number.NEGATIVE_INFINITY,k=0,r=n.length;k<r;k++){var f=n[k];if(f.bone.active){var b=0,a=null,g=f.getAttachment();if(g instanceof b3)b=8,a=am.setArraySize(c,b,0),g.computeWorldVertices(f,a,0,2);else if(g instanceof b0){var o=g;b=o.worldVerticesLength,a=am.setArraySize(c,b,0),o.computeWorldVertices(f,0,b,a,0,2)}if(a)for(var h=0,s=a.length;h<s;h+=2){var p=a[h],q=a[h+1];d=Math.min(d,p),e=Math.min(e,q),i=Math.max(i,p),j=Math.max(j,q)}}}l.set(d,e),m.set(i-d,j-e)},Object.defineProperty(a.prototype,"flipX",{get:function(){return -1==this.scaleX},set:function(b){a.deprecatedWarning1||(a.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: `Skeleton.flipX/flipY` was deprecated, please use scaleX/scaleY")),this.scaleX=b?1:-1},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"flipY",{get:function(){return -1==this.scaleY},set:function(b){a.deprecatedWarning1||(a.deprecatedWarning1=!0,console.warn("Spine Deprecation Warning: `Skeleton.flipX/flipY` was deprecated, please use scaleX/scaleY")),this.scaleY=b?1:-1},enumerable:!1,configurable:!0}),a.deprecatedWarning1=!1,a}(),cN=function(){function a(){this.name=null,this.bones=new Array,this.slots=new Array,this.skins=new Array,this.defaultSkin=null,this.events=new Array,this.animations=new Array,this.ikConstraints=new Array,this.transformConstraints=new Array,this.pathConstraints=new Array,this.x=0,this.y=0,this.width=0,this.height=0,this.version=null,this.hash=null,this.fps=0,this.imagesPath=null,this.audioPath=null}return a.prototype.findBone=function(b){if(!b)throw new Error("boneName cannot be null.");for(var c=this.bones,a=0,e=c.length;a<e;a++){var d=c[a];if(d.name==b)return d}return null},a.prototype.findBoneIndex=function(b){if(!b)throw new Error("boneName cannot be null.");for(var c=this.bones,a=0,d=c.length;a<d;a++)if(c[a].name==b)return a;return -1},a.prototype.findSlot=function(b){if(!b)throw new Error("slotName cannot be null.");for(var c=this.slots,a=0,e=c.length;a<e;a++){var d=c[a];if(d.name==b)return d}return null},a.prototype.findSlotIndex=function(b){if(!b)throw new Error("slotName cannot be null.");for(var c=this.slots,a=0,d=c.length;a<d;a++)if(c[a].name==b)return a;return -1},a.prototype.findSkin=function(b){if(!b)throw new Error("skinName cannot be null.");for(var c=this.skins,a=0,e=c.length;a<e;a++){var d=c[a];if(d.name==b)return d}return null},a.prototype.findEvent=function(b){if(!b)throw new Error("eventDataName cannot be null.");for(var c=this.events,a=0,e=c.length;a<e;a++){var d=c[a];if(d.name==b)return d}return null},a.prototype.findAnimation=function(b){if(!b)throw new Error("animationName cannot be null.");for(var c=this.animations,a=0,e=c.length;a<e;a++){var d=c[a];if(d.name==b)return d}return null},a.prototype.findIkConstraint=function(b){if(!b)throw new Error("constraintName cannot be null.");for(var c=this.ikConstraints,a=0,e=c.length;a<e;a++){var d=c[a];if(d.name==b)return d}return null},a.prototype.findTransformConstraint=function(b){if(!b)throw new Error("constraintName cannot be null.");for(var c=this.transformConstraints,a=0,e=c.length;a<e;a++){var d=c[a];if(d.name==b)return d}return null},a.prototype.findPathConstraint=function(b){if(!b)throw new Error("constraintName cannot be null.");for(var c=this.pathConstraints,a=0,e=c.length;a<e;a++){var d=c[a];if(d.name==b)return d}return null},a.prototype.findPathConstraintIndex=function(b){if(null==b)throw new Error("pathConstraintName cannot be null.");for(var c=this.pathConstraints,a=0,d=c.length;a<d;a++)if(c[a].name==b)return a;return -1},a}(),cO=function(a,b,c){if(this.index=0,this.color=new aj(1,1,1,1),this.darkColor=null,this.attachmentName=null,this.blendMode=cX.BLEND_MODES.NORMAL,a<0)throw new Error("index must be >= 0.");if(!b)throw new Error("name cannot be null.");if(!c)throw new Error("boneData cannot be null.");this.index=a,this.name=b,this.boneData=c},cP=function(b){function a(c){var a=b.call(this,c,0,!1)||this;return a.bones=new Array,a._target=null,a.mixRotate=0,a.mixX=0,a.mixY=0,a.mixScaleX=0,a.mixScaleY=0,a.mixShearY=0,a.offsetRotation=0,a.offsetX=0,a.offsetY=0,a.offsetScaleX=0,a.offsetScaleY=0,a.offsetShearY=0,a.relative=!1,a.local=!1,a}return dn(a,b),Object.defineProperty(a.prototype,"target",{get:function(){if(this._target)return this._target;throw new Error("BoneData not set.")},set:function(a){this._target=a},enumerable:!1,configurable:!0}),a}(C),cQ=function(a,b,c){this.slotIndex=a,this.name=b,this.attachment=c},cR=function(){function a(a){if(this.attachments=new Array,this.bones=Array(),this.constraints=new Array,!a)throw new Error("name cannot be null.");this.name=a}return a.prototype.setAttachment=function(a,d,c){if(!c)throw new Error("attachment cannot be null.");var b=this.attachments;a>=b.length&&(b.length=a+1),b[a]||(b[a]={}),b[a][d]=c},a.prototype.addSkin=function(c){for(var a=0;a<c.bones.length;a++){for(var f=c.bones[a],d=!1,b=0;b<this.bones.length;b++)if(this.bones[b]==f){d=!0;break}d||this.bones.push(f)}for(var a=0;a<c.constraints.length;a++){for(var g=c.constraints[a],d=!1,b=0;b<this.constraints.length;b++)if(this.constraints[b]==g){d=!0;break}d||this.constraints.push(g)}for(var h=c.getAttachments(),a=0;a<h.length;a++){var e=h[a];this.setAttachment(e.slotIndex,e.name,e.attachment)}},a.prototype.copySkin=function(d){for(var b=0;b<d.bones.length;b++){for(var f=d.bones[b],e=!1,c=0;c<this.bones.length;c++)if(this.bones[c]==f){e=!0;break}e||this.bones.push(f)}for(var b=0;b<d.constraints.length;b++){for(var g=d.constraints[b],e=!1,c=0;c<this.constraints.length;c++)if(this.constraints[c]==g){e=!0;break}e||this.constraints.push(g)}for(var h=d.getAttachments(),b=0;b<h.length;b++){var a=h[b];a.attachment&&(a.attachment instanceof b0?(a.attachment=a.attachment.newLinkedMesh(),this.setAttachment(a.slotIndex,a.name,a.attachment)):(a.attachment=a.attachment.copy(),this.setAttachment(a.slotIndex,a.name,a.attachment)))}},a.prototype.getAttachment=function(b,c){var a=this.attachments[b];return a?a[c]:null},a.prototype.removeAttachment=function(b,c){var a=this.attachments[b];a&&delete a[c]},a.prototype.getAttachments=function(){for(var c=new Array,a=0;a<this.attachments.length;a++){var b=this.attachments[a];if(b)for(var d in b){var e=b[d];e&&c.push(new cQ(a,d,e))}}return c},a.prototype.getAttachmentsForSlot=function(b,e){var a=this.attachments[b];if(a)for(var c in a){var d=a[c];d&&e.push(new cQ(b,c,d))}},a.prototype.clear=function(){this.attachments.length=0,this.bones.length=0,this.constraints.length=0},a.prototype.attachAll=function(c,d){for(var a=0,b=0;b<c.slots.length;b++){var e=c.slots[b],f=e.getAttachment();if(f&&a<d.attachments.length){var g=d.attachments[a];for(var h in g)if(f==g[h]){var i=this.getAttachment(a,h);i&&e.setAttachment(i);break}}a++}},a}(),cS=function(){function b(a){this.ver40=!1,this.scale=1,this.linkedMeshes=new Array,this.attachmentLoader=a}return b.prototype.readSkeletonData=function(A){var h=this.scale,d=new cN;d.name="";var b=new aa(A),p=b.readInt32(),q=b.readInt32();d.hash=0==q&&0==p?null:q.toString(16)+p.toString(16),d.version=b.readString();var m=d.version.substr(0,3);if("4.0"!==m&&"4.1"!==m){var B="Spine 4.1 loader cant load version "+d.version+". Please configure your pixi-spine bundle";console.error(B)}this.ver40="4.0"===m,d.x=b.readFloat(),d.y=b.readFloat(),d.width=b.readFloat(),d.height=b.readFloat();var l=b.readBoolean();l&&(d.fps=b.readFloat(),d.imagesPath=b.readString(),d.audioPath=b.readString());var f=0;f=b.readInt(!0);for(var e=0;e<f;e++){var r=b.readString();if(!r)throw new Error("String in string table must not be null.");b.strings.push(r)}f=b.readInt(!0);for(var e=0;e<f;e++){var s=b.readString();if(!s)throw new Error("Bone name must not be null.");var C=0==e?null:d.bones[b.readInt(!0)],c=new cD(e,s,C);c.rotation=b.readFloat(),c.x=b.readFloat()*h,c.y=b.readFloat()*h,c.scaleX=b.readFloat(),c.scaleY=b.readFloat(),c.shearX=b.readFloat(),c.shearY=b.readFloat(),c.length=b.readFloat()*h,c.transformMode=b.readInt(!0),c.skinRequired=b.readBoolean(),l&&aj.rgba8888ToColor(c.color,b.readInt32()),d.bones.push(c)}f=b.readInt(!0);for(var e=0;e<f;e++){var t=b.readString();if(!t)throw new Error("Slot name must not be null.");var D=d.bones[b.readInt(!0)],c=new cO(e,t,D);aj.rgba8888ToColor(c.color,b.readInt32());var u=b.readInt32();-1!=u&&aj.rgb888ToColor(c.darkColor=new aj,u),c.attachmentName=b.readStringRef(),c.blendMode=b.readInt(!0),d.slots.push(c)}f=b.readInt(!0);for(var e=0,i=void 0;e<f;e++){var v=b.readString();if(!v)throw new Error("IK constraint data name must not be null.");var c=new cH(v);c.order=b.readInt(!0),c.skinRequired=b.readBoolean(),i=b.readInt(!0);for(var j=0;j<i;j++)c.bones.push(d.bones[b.readInt(!0)]);c.target=d.bones[b.readInt(!0)],c.mix=b.readFloat(),c.softness=b.readFloat()*h,c.bendDirection=b.readByte(),c.compress=b.readBoolean(),c.stretch=b.readBoolean(),c.uniform=b.readBoolean(),d.ikConstraints.push(c)}f=b.readInt(!0);for(var e=0,i=void 0;e<f;e++){var w=b.readString();if(!w)throw new Error("Transform constraint data name must not be null.");var c=new cP(w);c.order=b.readInt(!0),c.skinRequired=b.readBoolean(),i=b.readInt(!0);for(var j=0;j<i;j++)c.bones.push(d.bones[b.readInt(!0)]);c.target=d.bones[b.readInt(!0)],c.local=b.readBoolean(),c.relative=b.readBoolean(),c.offsetRotation=b.readFloat(),c.offsetX=b.readFloat()*h,c.offsetY=b.readFloat()*h,c.offsetScaleX=b.readFloat(),c.offsetScaleY=b.readFloat(),c.offsetShearY=b.readFloat(),c.mixRotate=b.readFloat(),c.mixX=b.readFloat(),c.mixY=b.readFloat(),c.mixScaleX=b.readFloat(),c.mixScaleY=b.readFloat(),c.mixShearY=b.readFloat(),d.transformConstraints.push(c)}f=b.readInt(!0);for(var e=0,i=void 0;e<f;e++){var x=b.readString();if(!x)throw new Error("Path constraint data name must not be null.");var c=new cI(x);c.order=b.readInt(!0),c.skinRequired=b.readBoolean(),i=b.readInt(!0);for(var j=0;j<i;j++)c.bones.push(d.bones[b.readInt(!0)]);c.target=d.slots[b.readInt(!0)],c.positionMode=b.readInt(!0),c.spacingMode=b.readInt(!0),c.rotateMode=b.readInt(!0),c.offsetRotation=b.readFloat(),c.position=b.readFloat(),c.positionMode==a.PositionMode.Fixed&&(c.position*=h),c.spacing=b.readFloat(),(c.spacingMode==K.Length||c.spacingMode==K.Fixed)&&(c.spacing*=h),c.mixRotate=b.readFloat(),c.mixX=b.readFloat(),c.mixY=b.readFloat(),d.pathConstraints.push(c)}var n=this.readSkin(b,d,!0,l);n&&(d.defaultSkin=n,d.skins.push(n));var e=d.skins.length;for(am.setArraySize(d.skins,f=e+b.readInt(!0));e<f;e++){var k=this.readSkin(b,d,!1,l);if(!k)throw new Error("readSkin() should not have returned null.");d.skins[e]=k}f=this.linkedMeshes.length;for(var e=0;e<f;e++){var g=this.linkedMeshes[e],k=g.skin?d.findSkin(g.skin):d.defaultSkin;if(!k)throw new Error("Not skin found for linked mesh.");if(!g.parent)throw new Error("Linked mesh parent must not be null");var o=k.getAttachment(g.slotIndex,g.parent);if(!o)throw new Error("Parent mesh not found: "+g.parent);g.mesh.timelineAttachment=g.inheritTimeline?o:g.mesh,g.mesh.setParentMesh(o)}this.linkedMeshes.length=0,f=b.readInt(!0);for(var e=0;e<f;e++){var y=b.readStringRef();if(!y)throw new Error;var c=new cF(y);c.intValue=b.readInt(!1),c.floatValue=b.readFloat(),c.stringValue=b.readString(),c.audioPath=b.readString(),c.audioPath&&(c.volume=b.readFloat(),c.balance=b.readFloat()),d.events.push(c)}f=b.readInt(!0);for(var e=0;e<f;e++){var z=b.readString();if(!z)throw new Error("Animatio name must not be null.");d.animations.push(this.readAnimation(b,z,d))}return d},b.prototype.readSkin=function(a,e,l,m){var c=null,f=0;if(l){if(0==(f=a.readInt(!0)))return null;c=new cR("default")}else{var h=a.readStringRef();if(!h)throw new Error("Skin name must not be null.");(c=new cR(h)).bones.length=a.readInt(!0);for(var b=0,d=c.bones.length;b<d;b++)c.bones[b]=e.bones[a.readInt(!0)];for(var b=0,d=a.readInt(!0);b<d;b++)c.constraints.push(e.ikConstraints[a.readInt(!0)]);for(var b=0,d=a.readInt(!0);b<d;b++)c.constraints.push(e.transformConstraints[a.readInt(!0)]);for(var b=0,d=a.readInt(!0);b<d;b++)c.constraints.push(e.pathConstraints[a.readInt(!0)]);f=a.readInt(!0)}for(var b=0;b<f;b++)for(var i=a.readInt(!0),j=0,n=a.readInt(!0);j<n;j++){var g=a.readStringRef();if(!g)throw new Error("Attachment name must not be null");var k=this.readAttachment(a,e,c,i,g,m);k&&c.setAttachment(i,g,k)}return c},b.prototype.readAttachment=function(b,y,m,z,A,h){var j=this.scale,i=b.readStringRef();switch(i||(i=A),b.readByte()){case a.AttachmentType.Region:var c=b.readStringRef(),s=b.readFloat(),t=b.readFloat(),u=b.readFloat(),B=b.readFloat(),C=b.readFloat(),n=b.readFloat(),o=b.readFloat(),e=b.readInt32(),l=this.readSequence(b);c||(c=i);var f=this.attachmentLoader.newRegionAttachment(m,i,c,l);if(!f)break;return f.path=c,f.x=t*j,f.y=u*j,f.scaleX=B,f.scaleY=C,f.rotation=s,f.width=n*j,f.height=o*j,aj.rgba8888ToColor(f.color,e),f.sequence=l,null==l&&f.updateRegion(),f;case a.AttachmentType.BoundingBox:var g=b.readInt(!0),k=this.readVertices(b,g),e=h?b.readInt32():0,q=this.attachmentLoader.newBoundingBoxAttachment(m,i);if(!q)break;return q.worldVerticesLength=g<<1,q.vertices=k.vertices,q.bones=k.bones,h&&aj.rgba8888ToColor(q.color,e),q;case a.AttachmentType.Mesh:var c=b.readStringRef(),e=b.readInt32(),g=b.readInt(!0),D=this.readFloatArray(b,g<<1,1),E=this.readShortArray(b),k=this.readVertices(b,g),F=b.readInt(!0),l=this.readSequence(b),x=[],n=0,o=0;h&&(x=this.readShortArray(b),n=b.readFloat(),o=b.readFloat()),c||(c=i);var d=this.attachmentLoader.newMeshAttachment(m,i,c,l);if(!d)break;return d.path=c,aj.rgba8888ToColor(d.color,e),d.bones=k.bones,d.vertices=k.vertices,d.worldVerticesLength=g<<1,d.triangles=E,d.regionUVs=new Float32Array(D),d.hullLength=F<<1,d.sequence=l,h&&(d.edges=x,d.width=n*j,d.height=o*j),d;case a.AttachmentType.LinkedMesh:var c=b.readStringRef(),e=b.readInt32(),G=b.readStringRef(),H=b.readStringRef(),I=b.readBoolean(),l=this.readSequence(b),n=0,o=0;h&&(n=b.readFloat(),o=b.readFloat()),c||(c=i);var d=this.attachmentLoader.newMeshAttachment(m,i,c,l);if(!d)break;return d.path=c,aj.rgba8888ToColor(d.color,e),d.sequence=l,h&&(d.width=n*j,d.height=o*j),this.linkedMeshes.push(new dx(d,G,z,H,I)),d;case a.AttachmentType.Path:for(var J=b.readBoolean(),K=b.readBoolean(),g=b.readInt(!0),k=this.readVertices(b,g),v=am.newArray(g/3,0),w=0,L=v.length;w<L;w++)v[w]=b.readFloat()*j;var e=h?b.readInt32():0,c=this.attachmentLoader.newPathAttachment(m,i);if(!c)break;return c.closed=J,c.constantSpeed=K,c.worldVerticesLength=g<<1,c.vertices=k.vertices,c.bones=k.bones,c.lengths=v,h&&aj.rgba8888ToColor(c.color,e),c;case a.AttachmentType.Point:var s=b.readFloat(),t=b.readFloat(),u=b.readFloat(),e=h?b.readInt32():0,r=this.attachmentLoader.newPointAttachment(m,i);if(!r)break;return r.x=t*j,r.y=u*j,r.rotation=s,h&&aj.rgba8888ToColor(r.color,e),r;case a.AttachmentType.Clipping:var M=b.readInt(!0),g=b.readInt(!0),k=this.readVertices(b,g),e=h?b.readInt32():0,p=this.attachmentLoader.newClippingAttachment(m,i);if(!p)break;return p.endSlot=y.slots[M],p.worldVerticesLength=g<<1,p.vertices=k.vertices,p.bones=k.bones,h&&aj.rgba8888ToColor(p.color,e),p}return null},b.prototype.readSequence=function(a){if(this.ver40||!a.readBoolean())return null;var b=new b4(a.readInt(!0));return b.start=a.readInt(!0),b.digits=a.readInt(!0),b.setupIndex=a.readInt(!0),b},b.prototype.readDeformTimelineType=function(a){return this.ver40?dS:a.readByte()},b.prototype.readVertices=function(a,f){var d=this.scale,b=new dy;if(!a.readBoolean())return b.vertices=this.readFloatArray(a,f<<1,d),b;for(var c=new Array,e=new Array,g=0;g<f;g++){var h=a.readInt(!0);e.push(h);for(var i=0;i<h;i++)e.push(a.readInt(!0)),c.push(a.readFloat()*d),c.push(a.readFloat()*d),c.push(a.readFloat())}return b.vertices=am.toFloatArray(c),b.bones=e,b},b.prototype.readFloatArray=function(d,b,e){var c=new Array(b);if(1==e)for(var a=0;a<b;a++)c[a]=d.readFloat();else for(var a=0;a<b;a++)c[a]=d.readFloat()*e;return c},b.prototype.readShortArray=function(b){for(var c=b.readInt(!0),d=new Array(c),a=0;a<c;a++)d[a]=b.readShort();return d},b.prototype.readAnimation=function(b,ay,U){b.readInt(!0);for(var j=new Array,x=this.scale,i=0,p=b.readInt(!0);i<p;i++)for(var u=b.readInt(!0),k=0,A=b.readInt(!0);k<A;k++){var X=b.readByte(),h=b.readInt(!0),q=h-1;switch(X){case dM:for(var d=new cm(h,u),c=0;c<h;c++)d.setFrame(c,b.readFloat(),b.readStringRef());j.push(d);break;case dN:for(var l=b.readInt(!0),d=new ch(h,l,u),e=b.readFloat(),m=b.readUnsignedByte()/255,n=b.readUnsignedByte()/255,o=b.readUnsignedByte()/255,w=b.readUnsignedByte()/255,c=0,g=0;d.setFrame(c,e,m,n,o,w),c!=q;c++){var f=b.readFloat(),r=b.readUnsignedByte()/255,s=b.readUnsignedByte()/255,t=b.readUnsignedByte()/255,H=b.readUnsignedByte()/255;switch(b.readByte()){case dX:d.setStepped(c);break;case dY:dB(b,d,g++,c,0,e,f,m,r,1),dB(b,d,g++,c,1,e,f,n,s,1),dB(b,d,g++,c,2,e,f,o,t,1),dB(b,d,g++,c,3,e,f,w,H,1)}e=f,m=r,n=s,o=t,w=H}j.push(d);break;case dO:for(var l=b.readInt(!0),d=new ci(h,l,u),e=b.readFloat(),m=b.readUnsignedByte()/255,n=b.readUnsignedByte()/255,o=b.readUnsignedByte()/255,c=0,g=0;d.setFrame(c,e,m,n,o),c!=q;c++){var f=b.readFloat(),r=b.readUnsignedByte()/255,s=b.readUnsignedByte()/255,t=b.readUnsignedByte()/255;switch(b.readByte()){case dX:d.setStepped(c);break;case dY:dB(b,d,g++,c,0,e,f,m,r,1),dB(b,d,g++,c,1,e,f,n,s,1),dB(b,d,g++,c,2,e,f,o,t,1)}e=f,m=r,n=s,o=t}j.push(d);break;case dP:for(var l=b.readInt(!0),d=new ck(h,l,u),e=b.readFloat(),m=b.readUnsignedByte()/255,n=b.readUnsignedByte()/255,o=b.readUnsignedByte()/255,w=b.readUnsignedByte()/255,r=b.readUnsignedByte()/255,s=b.readUnsignedByte()/255,t=b.readUnsignedByte()/255,c=0,g=0;d.setFrame(c,e,m,n,o,w,r,s,t),c!=q;c++){var f=b.readFloat(),I=b.readUnsignedByte()/255,J=b.readUnsignedByte()/255,L=b.readUnsignedByte()/255,ak=b.readUnsignedByte()/255,M=b.readUnsignedByte()/255,N=b.readUnsignedByte()/255,O=b.readUnsignedByte()/255;switch(b.readByte()){case dX:d.setStepped(c);break;case dY:dB(b,d,g++,c,0,e,f,m,I,1),dB(b,d,g++,c,1,e,f,n,J,1),dB(b,d,g++,c,2,e,f,o,L,1),dB(b,d,g++,c,3,e,f,w,ak,1),dB(b,d,g++,c,4,e,f,r,M,1),dB(b,d,g++,c,5,e,f,s,N,1),dB(b,d,g++,c,6,e,f,t,O,1)}e=f,m=I,n=J,o=L,w=ak,r=M,s=N,t=O}j.push(d);break;case dQ:for(var l=b.readInt(!0),d=new cl(h,l,u),e=b.readFloat(),m=b.readUnsignedByte()/255,n=b.readUnsignedByte()/255,o=b.readUnsignedByte()/255,r=b.readUnsignedByte()/255,s=b.readUnsignedByte()/255,t=b.readUnsignedByte()/255,c=0,g=0;d.setFrame(c,e,m,n,o,r,s,t),c!=q;c++){var f=b.readFloat(),I=b.readUnsignedByte()/255,J=b.readUnsignedByte()/255,L=b.readUnsignedByte()/255,M=b.readUnsignedByte()/255,N=b.readUnsignedByte()/255,O=b.readUnsignedByte()/255;switch(b.readByte()){case dX:d.setStepped(c);break;case dY:dB(b,d,g++,c,0,e,f,m,I,1),dB(b,d,g++,c,1,e,f,n,J,1),dB(b,d,g++,c,2,e,f,o,L,1),dB(b,d,g++,c,3,e,f,r,M,1),dB(b,d,g++,c,4,e,f,s,N,1),dB(b,d,g++,c,5,e,f,t,O,1)}e=f,m=I,n=J,o=L,r=M,s=N,t=O}j.push(d);break;case dR:for(var d=new cj(h,b.readInt(!0),u),e=b.readFloat(),w=b.readUnsignedByte()/255,c=0,g=0;d.setFrame(c,e,w),c!=q;c++){var f=b.readFloat(),H=b.readUnsignedByte()/255;switch(b.readByte()){case dX:d.setStepped(c);break;case dY:dB(b,d,g++,c,0,e,f,w,H,1)}e=f,w=H}j.push(d)}}for(var i=0,p=b.readInt(!0);i<p;i++)for(var y=b.readInt(!0),k=0,A=b.readInt(!0);k<A;k++){var az=b.readByte(),h=b.readInt(!0),l=b.readInt(!0);switch(az){case dC:j.push(dz(b,new b7(h,l,y),1));break;case dD:j.push(dA(b,new b8(h,l,y),x));break;case dE:j.push(dz(b,new b9(h,l,y),x));break;case dF:j.push(dz(b,new ca(h,l,y),x));break;case dG:j.push(dA(b,new cb(h,l,y),1));break;case dH:j.push(dz(b,new cc(h,l,y),1));break;case dI:j.push(dz(b,new cd(h,l,y),1));break;case dJ:j.push(dA(b,new ce(h,l,y),1));break;case dK:j.push(dz(b,new cf(h,l,y),1));break;case dL:j.push(dz(b,new cg(h,l,y),1))}}for(var i=0,p=b.readInt(!0);i<p;i++){for(var z=b.readInt(!0),h=b.readInt(!0),q=h-1,d=new cq(h,b.readInt(!0),z),e=b.readFloat(),Y=b.readFloat(),Z=b.readFloat()*x,c=0,g=0;d.setFrame(c,e,Y,Z,b.readByte(),b.readBoolean(),b.readBoolean()),c!=q;c++){var f=b.readFloat(),al=b.readFloat(),an=b.readFloat()*x;switch(b.readByte()){case dX:d.setStepped(c);break;case dY:dB(b,d,g++,c,0,e,f,Y,al,1),dB(b,d,g++,c,1,e,f,Z,an,x)}e=f,Y=al,Z=an}j.push(d)}for(var i=0,p=b.readInt(!0);i<p;i++){for(var z=b.readInt(!0),h=b.readInt(!0),q=h-1,d=new cr(h,b.readInt(!0),z),e=b.readFloat(),B=b.readFloat(),C=b.readFloat(),D=b.readFloat(),$=b.readFloat(),_=b.readFloat(),aa=b.readFloat(),c=0,g=0;d.setFrame(c,e,B,C,D,$,_,aa),c!=q;c++){var f=b.readFloat(),P=b.readFloat(),Q=b.readFloat(),R=b.readFloat(),ao=b.readFloat(),ap=b.readFloat(),aq=b.readFloat();switch(b.readByte()){case dX:d.setStepped(c);break;case dY:dB(b,d,g++,c,0,e,f,B,P,1),dB(b,d,g++,c,1,e,f,C,Q,1),dB(b,d,g++,c,2,e,f,D,R,1),dB(b,d,g++,c,3,e,f,$,ao,1),dB(b,d,g++,c,4,e,f,_,ap,1),dB(b,d,g++,c,5,e,f,aa,aq,1)}e=f,B=P,C=Q,D=R,$=ao,_=ap,aa=aq}j.push(d)}for(var i=0,p=b.readInt(!0);i<p;i++)for(var z=b.readInt(!0),ab=U.pathConstraints[z],k=0,A=b.readInt(!0);k<A;k++)switch(b.readByte()){case dU:j.push(dz(b,new cs(b.readInt(!0),b.readInt(!0),z),ab.positionMode==a.PositionMode.Fixed?x:1));break;case dV:j.push(dz(b,new ct(b.readInt(!0),b.readInt(!0),z),ab.spacingMode==K.Length||ab.spacingMode==K.Fixed?x:1));break;case dW:for(var d=new cu(b.readInt(!0),b.readInt(!0),z),e=b.readFloat(),B=b.readFloat(),C=b.readFloat(),D=b.readFloat(),c=0,g=0,q=d.getFrameCount()-1;d.setFrame(c,e,B,C,D),c!=q;c++){var f=b.readFloat(),P=b.readFloat(),Q=b.readFloat(),R=b.readFloat();switch(b.readByte()){case dX:d.setStepped(c);break;case dY:dB(b,d,g++,c,0,e,f,B,P,1),dB(b,d,g++,c,1,e,f,C,Q,1),dB(b,d,g++,c,2,e,f,D,R,1)}e=f,B=P,C=Q,D=R}j.push(d)}for(var i=0,p=b.readInt(!0);i<p;i++)for(var aA=U.skins[b.readInt(!0)],k=0,A=b.readInt(!0);k<A;k++)for(var u=b.readInt(!0),ar=0,aB=b.readInt(!0);ar<aB;ar++){var as=b.readStringRef();if(!as)throw new Error("attachmentName must not be null.");var at=aA.getAttachment(u,as),X=this.readDeformTimelineType(b),h=b.readInt(!0),q=h-1;switch(X){case dS:for(var ac=at,ad=ac.bones,V=ac.vertices,au=ad?V.length/3*2:V.length,l=b.readInt(!0),d=new cn(h,l,u,ac),e=b.readFloat(),c=0,g=0;;c++){var E=void 0,W=b.readInt(!0);if(0==W)E=ad?am.newFloatArray(au):V;else{E=am.newFloatArray(au);var ae=b.readInt(!0);if(W+=ae,1==x)for(var v=ae;v<W;v++)E[v]=b.readFloat();else for(var v=ae;v<W;v++)E[v]=b.readFloat()*x;if(!ad)for(var v=0,aC=E.length;v<aC;v++)E[v]+=V[v]}if(d.setFrame(c,e,E),c==q)break;var f=b.readFloat();switch(b.readByte()){case dX:d.setStepped(c);break;case dY:dB(b,d,g++,c,0,e,f,0,1,1)}e=f}j.push(d);break;case dT:for(var d=new cv(h,u,at),c=0;c<h;c++){var e=b.readFloat(),av=b.readInt32();d.setFrame(c,e,b5[15&av],av>>4,b.readFloat())}j.push(d)}}var af=b.readInt(!0);if(af>0){for(var d=new cp(af),S=U.slots.length,i=0;i<af;i++){for(var e=b.readFloat(),aw=b.readInt(!0),T=am.newArray(S,0),k=S-1;k>=0;k--)T[k]=-1;for(var ag=am.newArray(S-aw,0),G=0,ah=0,k=0;k<aw;k++){for(var u=b.readInt(!0);G!=u;)ag[ah++]=G++;T[G+b.readInt(!0)]=G++}for(;G<S;)ag[ah++]=G++;for(var k=S-1;k>=0;k--)-1==T[k]&&(T[k]=ag[--ah]);d.setFrame(i,e,T)}j.push(d)}var ai=b.readInt(!0);if(ai>0){for(var d=new co(ai),i=0;i<ai;i++){var e=b.readFloat(),ax=U.events[b.readInt(!0)],F=new cE(e,ax);F.intValue=b.readInt(!1),F.floatValue=b.readFloat(),F.stringValue=b.readBoolean()?b.readString():ax.stringValue,F.data.audioPath&&(F.volume=b.readFloat(),F.balance=b.readFloat()),d.setFrame(i,F)}j.push(d)}for(var aj=0,i=0,p=j.length;i<p;i++)aj=Math.max(aj,j[i].getDuration());return new b6(ay,j,aj)},b.BlendModeValues=[cX.BLEND_MODES.NORMAL,cX.BLEND_MODES.ADD,cX.BLEND_MODES.MULTIPLY,cX.BLEND_MODES.SCREEN],b}(),dx=function(a,b,c,d,e){this.mesh=a,this.skin=b,this.slotIndex=c,this.parent=d,this.inheritTimeline=e},dy=function(a,b){void 0===a&&(a=null),void 0===b&&(b=null),this.bones=a,this.vertices=b};function dz(a,b,d){for(var e=a.readFloat(),f=a.readFloat()*d,c=0,i=0,j=b.getFrameCount()-1;b.setFrame(c,e,f),c!=j;c++){var g=a.readFloat(),h=a.readFloat()*d;switch(a.readByte()){case dX:b.setStepped(c);break;case dY:dB(a,b,i++,c,0,e,g,f,h,d)}e=g,f=h}return b}function dA(a,b,c){for(var e=a.readFloat(),f=a.readFloat()*c,g=a.readFloat()*c,d=0,i=0,l=b.getFrameCount()-1;b.setFrame(d,e,f,g),d!=l;d++){var h=a.readFloat(),j=a.readFloat()*c,k=a.readFloat()*c;switch(a.readByte()){case dX:b.setStepped(d);break;case dY:dB(a,b,i++,d,0,e,h,f,j,c),dB(a,b,i++,d,1,e,h,g,k,c)}e=h,f=j,g=k}return b}function dB(a,c,d,e,f,g,h,i,j,b){c.setBezier(d,e,f,g,i,a.readFloat(),a.readFloat()*b,a.readFloat(),a.readFloat()*b,h,j)}var dC=0,dD=1,dE=2,dF=3,dG=4,dH=5,dI=6,dJ=7,dK=8,dL=9,dM=0,dN=1,dO=2,dP=3,dQ=4,dR=5,dS=0,dT=1,dU=0,dV=1,dW=2,dX=1,dY=2,X=function(){function a(){this.minX=0,this.minY=0,this.maxX=0,this.maxY=0,this.boundingBoxes=new Array,this.polygons=new Array,this.polygonPool=new ao(function(){return am.newFloatArray(16)})}return a.prototype.update=function(f,k){if(!f)throw new Error("skeleton cannot be null.");var g=this.boundingBoxes,c=this.polygons,h=this.polygonPool,i=f.slots,l=i.length;g.length=0,h.freeAll(c),c.length=0;for(var d=0;d<l;d++){var e=i[d];if(e.bone.active){var j=e.getAttachment();if(j instanceof b$){var a=j;g.push(a);var b=h.obtain();b.length!=a.worldVerticesLength&&(b=am.newFloatArray(a.worldVerticesLength)),c.push(b),a.computeWorldVertices(e,0,a.worldVerticesLength,b,0,2)}}}k?this.aabbCompute():(this.minX=Number.POSITIVE_INFINITY,this.minY=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY,this.maxY=Number.NEGATIVE_INFINITY)},a.prototype.aabbCompute=function(){for(var b=Number.POSITIVE_INFINITY,c=Number.POSITIVE_INFINITY,d=Number.NEGATIVE_INFINITY,e=Number.NEGATIVE_INFINITY,g=this.polygons,f=0,l=g.length;f<l;f++)for(var h=g[f],i=h,a=0,m=h.length;a<m;a+=2){var j=i[a],k=i[a+1];b=Math.min(b,j),c=Math.min(c,k),d=Math.max(d,j),e=Math.max(e,k)}this.minX=b,this.minY=c,this.maxX=d,this.maxY=e},a.prototype.aabbContainsPoint=function(a,b){return a>=this.minX&&a<=this.maxX&&b>=this.minY&&b<=this.maxY},a.prototype.aabbIntersectsSegment=function(a,b,j,k){var c=this.minX,d=this.minY,e=this.maxX,f=this.maxY;if(a<=c&&j<=c||b<=d&&k<=d||a>=e&&j>=e||b>=f&&k>=f)return!1;var g=(k-b)/(j-a),h=g*(c-a)+b;if(h>d&&h<f||(h=g*(e-a)+b)>d&&h<f)return!0;var i=(d-b)/g+a;return i>c&&i<e||(i=(f-b)/g+a)>c&&i<e},a.prototype.aabbIntersectsSkeleton=function(a){return this.minX<a.maxX&&this.maxX>a.minX&&this.minY<a.maxY&&this.maxY>a.minY},a.prototype.containsPoint=function(c,d){for(var b=this.polygons,a=0,e=b.length;a<e;a++)if(this.containsPointPolygon(b[a],c,d))return this.boundingBoxes[a];return null},a.prototype.containsPointPolygon=function(h,k,a){for(var c=h,i=h.length,e=i-2,f=!1,b=0;b<i;b+=2){var d=c[b+1],g=c[e+1];if(d<a&&g>=a||g<a&&d>=a){var j=c[b];j+(a-d)/(g-d)*(c[e]-j)<k&&(f=!f)}e=b}return f},a.prototype.intersectsSegment=function(c,d,e,f){for(var b=this.polygons,a=0,g=b.length;a<g;a++)if(this.intersectsSegmentPolygon(b[a],c,d,e,f))return this.boundingBoxes[a];return null},a.prototype.intersectsSegmentPolygon=function(n,g,h,i,j){for(var k=n,m=n.length,o=g-i,p=h-j,q=g*j-h*i,c=k[m-2],d=k[m-1],l=0;l<m;l+=2){var e=k[l],f=k[l+1],r=c*f-d*e,s=c-e,t=d-f,u=o*t-p*s,a=(q*s-o*r)/u;if((a>=c&&a<=e||a>=e&&a<=c)&&(a>=g&&a<=i||a>=i&&a<=g)){var b=(q*t-p*r)/u;if((b>=d&&b<=f||b>=f&&b<=d)&&(b>=h&&b<=j||b>=j&&b<=h))return!0}c=e,d=f}return!1},a.prototype.getPolygon=function(a){if(!a)throw new Error("boundingBox cannot be null.");var b=this.boundingBoxes.indexOf(a);return -1==b?null:this.polygons[b]},a.prototype.getWidth=function(){return this.maxX-this.minX},a.prototype.getHeight=function(){return this.maxY-this.minY},a}(),cT=function(){function b(a){this.scale=1,this.linkedMeshes=new Array,this.attachmentLoader=a}return b.prototype.readSkeletonData=function(x){var q=this.scale,e=new cN,h="string"==typeof x?JSON.parse(x):x,o=h.skeleton;if(o){e.hash=o.hash,e.version=o.spine;var D=e.version.substr(0,3);if("4.0"!==D&&"4.1"!==D){var L="Spine 4.1 loader cant load version "+o.spine+". Please configure your pixi-spine bundle";console.error(L)}e.x=o.x,e.y=o.y,e.width=o.width,e.height=o.height,e.fps=o.fps,e.imagesPath=o.images}if(h.bones)for(var f=0;f<h.bones.length;f++){var j=h.bones[f],E=null,y=d1(j,"parent",null);if(null!=y&&null==(E=e.findBone(y)))throw new Error("Parent bone not found: "+y);var c=new cD(e.bones.length,j.name,E);c.length=d1(j,"length",0)*q,c.x=d1(j,"x",0)*q,c.y=d1(j,"y",0)*q,c.rotation=d1(j,"rotation",0),c.scaleX=d1(j,"scaleX",1),c.scaleY=d1(j,"scaleY",1),c.shearX=d1(j,"shearX",0),c.shearY=d1(j,"shearY",0),c.transformMode=am.enumValue(a.TransformMode,d1(j,"transform","Normal")),c.skinRequired=d1(j,"skin",!1);var u=d1(j,"color",null);u&&c.color.setFromString(u),e.bones.push(c)}if(h.slots)for(var f=0;f<h.slots.length;f++){var l=h.slots[f],F=e.findBone(l.bone);if(!F)throw new Error("Couldn't find bone "+l.bone+" for slot "+l.name);var c=new cO(e.slots.length,l.name,F),u=d1(l,"color",null);u&&c.color.setFromString(u);var G=d1(l,"dark",null);G&&(c.darkColor=aj.fromString(G)),c.attachmentName=d1(l,"attachment",null),c.blendMode=b.blendModeFromString(d1(l,"blend","normal")),e.slots.push(c)}if(h.ik)for(var f=0;f<h.ik.length;f++){var d=h.ik[f],c=new cH(d.name);c.order=d1(d,"order",0),c.skinRequired=d1(d,"skin",!1);for(var g=0;g<d.bones.length;g++){var m=d.bones[g],n=e.findBone(m);if(null==n)throw new Error("IK bone not found: "+m);c.bones.push(n)}c.target=e.findBone(d.target),c.mix=d1(d,"mix",1),c.softness=d1(d,"softness",0)*q,c.bendDirection=d1(d,"bendPositive",!0)?1:-1,c.compress=d1(d,"compress",!1),c.stretch=d1(d,"stretch",!1),c.uniform=d1(d,"uniform",!1),e.ikConstraints.push(c)}if(h.transform)for(var f=0;f<h.transform.length;f++){var d=h.transform[f],c=new cP(d.name);c.order=d1(d,"order",0),c.skinRequired=d1(d,"skin",!1);for(var g=0;g<d.bones.length;g++){var m=d.bones[g],n=e.findBone(m);if(!n)throw new Error("Couldn't find bone "+m+" for transform constraint "+d.name+".");c.bones.push(n)}var v=d.target,w=e.findBone(v);if(!w)throw new Error("Couldn't find target bone "+v+" for transform constraint "+d.name+".");c.target=w,c.local=d1(d,"local",!1),c.relative=d1(d,"relative",!1),c.offsetRotation=d1(d,"rotation",0),c.offsetX=d1(d,"x",0)*q,c.offsetY=d1(d,"y",0)*q,c.offsetScaleX=d1(d,"scaleX",0),c.offsetScaleY=d1(d,"scaleY",0),c.offsetShearY=d1(d,"shearY",0),c.mixRotate=d1(d,"mixRotate",1),c.mixX=d1(d,"mixX",1),c.mixY=d1(d,"mixY",c.mixX),c.mixScaleX=d1(d,"mixScaleX",1),c.mixScaleY=d1(d,"mixScaleY",c.mixScaleX),c.mixShearY=d1(d,"mixShearY",1),e.transformConstraints.push(c)}if(h.path)for(var f=0;f<h.path.length;f++){var d=h.path[f],c=new cI(d.name);c.order=d1(d,"order",0),c.skinRequired=d1(d,"skin",!1);for(var g=0;g<d.bones.length;g++){var m=d.bones[g],n=e.findBone(m);if(!n)throw new Error("Couldn't find bone "+m+" for path constraint "+d.name+".");c.bones.push(n)}var v=d.target,w=e.findSlot(v);if(!w)throw new Error("Couldn't find target slot "+v+" for path constraint "+d.name+".");c.target=w,c.positionMode=am.enumValue(a.PositionMode,d1(d,"positionMode","Percent")),c.spacingMode=am.enumValue(K,d1(d,"spacingMode","Length")),c.rotateMode=am.enumValue(a.RotateMode,d1(d,"rotateMode","Tangent")),c.offsetRotation=d1(d,"rotation",0),c.position=d1(d,"position",0),c.positionMode==a.PositionMode.Fixed&&(c.position*=q),c.spacing=d1(d,"spacing",0),(c.spacingMode==K.Length||c.spacingMode==K.Fixed)&&(c.spacing*=q),c.mixRotate=d1(d,"mixRotate",1),c.mixX=d1(d,"mixX",1),c.mixY=d1(d,"mixY",c.mixX),e.pathConstraints.push(c)}if(h.skins)for(var f=0;f<h.skins.length;f++){var i=h.skins[f],k=new cR(i.name);if(i.bones)for(var g=0;g<i.bones.length;g++){var m=i.bones[g],n=e.findBone(m);if(!n)throw new Error("Couldn't find bone "+m+" for skin "+i.name+".");k.bones.push(n)}if(i.ik)for(var g=0;g<i.ik.length;g++){var r=i.ik[g],s=e.findIkConstraint(r);if(!s)throw new Error("Couldn't find IK constraint "+r+" for skin "+i.name+".");k.constraints.push(s)}if(i.transform)for(var g=0;g<i.transform.length;g++){var r=i.transform[g],s=e.findTransformConstraint(r);if(!s)throw new Error("Couldn't find transform constraint "+r+" for skin "+i.name+".");k.constraints.push(s)}if(i.path)for(var g=0;g<i.path.length;g++){var r=i.path[g],s=e.findPathConstraint(r);if(!s)throw new Error("Couldn't find path constraint "+r+" for skin "+i.name+".");k.constraints.push(s)}for(var z in i.attachments){var A=e.findSlot(z);if(!A)throw new Error("Couldn't find slot "+z+" for skin "+i.name+".");var l=i.attachments[z];for(var B in l){var H=this.readAttachment(l[B],k,A.index,B,e);H&&k.setAttachment(A.index,B,H)}}e.skins.push(k),"default"==k.name&&(e.defaultSkin=k)}for(var f=0,M=this.linkedMeshes.length;f<M;f++){var p=this.linkedMeshes[f],k=p.skin?e.findSkin(p.skin):e.defaultSkin;if(!k)throw new Error("Skin not found: "+p.skin);var C=k.getAttachment(p.slotIndex,p.parent);if(!C)throw new Error("Parent mesh not found: "+p.parent);p.mesh.timelineAttachment=p.inheritTimeline?C:p.mesh,p.mesh.setParentMesh(C)}if(this.linkedMeshes.length=0,h.events)for(var I in h.events){var t=h.events[I],c=new cF(I);c.intValue=d1(t,"int",0),c.floatValue=d1(t,"float",0),c.stringValue=d1(t,"string",""),c.audioPath=d1(t,"audio",null),c.audioPath&&(c.volume=d1(t,"volume",1),c.balance=d1(t,"balance",0)),e.events.push(c)}if(h.animations)for(var J in h.animations){var N=h.animations[J];this.readAnimation(N,J,e)}return e},b.prototype.readAttachment=function(a,h,t,f,u){var g=this.scale;switch(f=d1(a,"name",f),d1(a,"type","region")){case"region":var d=d1(a,"path",f),j=this.readSequence(d1(a,"sequence",null)),e=this.attachmentLoader.newRegionAttachment(h,f,d,j);if(!e)break;e.path=d,e.x=d1(a,"x",0)*g,e.y=d1(a,"y",0)*g,e.scaleX=d1(a,"scaleX",1),e.scaleY=d1(a,"scaleY",1),e.rotation=d1(a,"rotation",0),e.width=a.width*g,e.height=a.height*g,e.sequence=j;var b=d1(a,"color",null);return b&&e.color.setFromString(b),e;case"boundingbox":var l=this.attachmentLoader.newBoundingBoxAttachment(h,f);if(!l)break;this.readVertices(a,l,a.vertexCount<<1);var b=d1(a,"color",null);return b&&l.color.setFromString(b),l;case"mesh":case"linkedmesh":var d=d1(a,"path",f),j=this.readSequence(d1(a,"sequence",null)),c=this.attachmentLoader.newMeshAttachment(h,f,d,j);if(!c)break;c.path=d;var b=d1(a,"color",null);b&&c.color.setFromString(b),c.width=d1(a,"width",0)*g,c.height=d1(a,"height",0)*g,c.sequence=j;var p=d1(a,"parent",null);if(p)return this.linkedMeshes.push(new dZ(c,d1(a,"skin",null),t,p,d1(a,"timelines",!0))),c;var q=a.uvs;return this.readVertices(a,c,q.length),c.triangles=a.triangles,c.regionUVs=new Float32Array(q),c.edges=d1(a,"edges",null),c.hullLength=2*d1(a,"hull",0),c;case"path":var d=this.attachmentLoader.newPathAttachment(h,f);if(!d)break;d.closed=d1(a,"closed",!1),d.constantSpeed=d1(a,"constantSpeed",!0);var m=a.vertexCount;this.readVertices(a,d,m<<1);for(var r=am.newArray(m/3,0),n=0;n<a.lengths.length;n++)r[n]=a.lengths[n]*g;d.lengths=r;var b=d1(a,"color",null);return b&&d.color.setFromString(b),d;case"point":var i=this.attachmentLoader.newPointAttachment(h,f);if(!i)break;i.x=d1(a,"x",0)*g,i.y=d1(a,"y",0)*g,i.rotation=d1(a,"rotation",0);var b=d1(a,"color",null);return b&&i.color.setFromString(b),i;case"clipping":var k=this.attachmentLoader.newClippingAttachment(h,f);if(!k)break;var o=d1(a,"end",null);if(null!=o){var s=u.findSlot(o);if(null==s)throw new Error("Clipping end slot not found: "+o);k.endSlot=s}var m=a.vertexCount;this.readVertices(a,k,m<<1);var b=d1(a,"color",null);return b&&k.color.setFromString(b),k}return null},b.prototype.readSequence=function(a){if(null==a)return null;var b=new b4(d1(a,"count",0));return b.start=d1(a,"start",1),b.digits=d1(a,"digits",0),b.setupIndex=d1(a,"setup",0),b},b.prototype.readVertices=function(k,c,h){var d=this.scale;c.worldVerticesLength=h;var b=k.vertices;if(h==b.length){var i=am.toFloatArray(b);if(1!=d)for(var a=0,f=b.length;a<f;a++)i[a]*=d;c.vertices=i;return}for(var e=new Array,g=new Array,a=0,f=b.length;a<f;){var j=b[a++];g.push(j);for(var l=a+4*j;a<l;a+=4)g.push(b[a]),e.push(b[a+1]*d),e.push(b[a+2]*d),e.push(b[a+3])}c.bones=g,c.vertices=am.toFloatArray(e)},b.prototype.readAnimation=function(m,aI,t){var y=this.scale,n=new Array;if(m.slots)for(var N in m.slots){var D=m.slots[N],A=t.findSlot(N);if(!A)throw new Error("Slot not found: "+N);var u=A.index;for(var o in D){var j=D[o];if(j){var v=j.length;if("attachment"==o){for(var b=new cm(v,u),c=0;c<v;c++){var e=j[c];b.setFrame(c,d1(e,"time",0),d1(e,"name",null))}n.push(b)}else if("rgba"==o){for(var b=new ch(v,v<<2,u),e=j[0],f=d1(e,"time",0),l=aj.fromString(e.color),c=0,d=0;;c++){b.setFrame(c,f,l.r,l.g,l.b,l.a);var g=j[c+1];if(!g){b.shrink(d);break}var h=d1(g,"time",0),p=aj.fromString(g.color),i=e.curve;i&&(d=d0(i,b,d,c,0,f,h,l.r,p.r,1),d=d0(i,b,d,c,1,f,h,l.g,p.g,1),d=d0(i,b,d,c,2,f,h,l.b,p.b,1),d=d0(i,b,d,c,3,f,h,l.a,p.a,1)),f=h,l=p,e=g}n.push(b)}else if("rgb"==o){for(var b=new ci(v,3*v,u),e=j[0],f=d1(e,"time",0),l=aj.fromString(e.color),c=0,d=0;;c++){b.setFrame(c,f,l.r,l.g,l.b);var g=j[c+1];if(!g){b.shrink(d);break}var h=d1(g,"time",0),p=aj.fromString(g.color),i=e.curve;i&&(d=d0(i,b,d,c,0,f,h,l.r,p.r,1),d=d0(i,b,d,c,1,f,h,l.g,p.g,1),d=d0(i,b,d,c,2,f,h,l.b,p.b,1)),f=h,l=p,e=g}n.push(b)}else if("alpha"==o)n.push(d$(j,new cj(v,v,u),0,1));else if("rgba2"==o){for(var b=new ck(v,7*v,u),e=j[0],f=d1(e,"time",0),l=aj.fromString(e.light),s=aj.fromString(e.dark),c=0,d=0;;c++){b.setFrame(c,f,l.r,l.g,l.b,l.a,s.r,s.g,s.b);var g=j[c+1];if(!g){b.shrink(d);break}var h=d1(g,"time",0),p=aj.fromString(g.light),B=aj.fromString(g.dark),i=e.curve;i&&(d=d0(i,b,d,c,0,f,h,l.r,p.r,1),d=d0(i,b,d,c,1,f,h,l.g,p.g,1),d=d0(i,b,d,c,2,f,h,l.b,p.b,1),d=d0(i,b,d,c,3,f,h,l.a,p.a,1),d=d0(i,b,d,c,4,f,h,s.r,B.r,1),d=d0(i,b,d,c,5,f,h,s.g,B.g,1),d=d0(i,b,d,c,6,f,h,s.b,B.b,1)),f=h,l=p,s=B,e=g}n.push(b)}else if("rgb2"==o){for(var b=new cl(v,6*v,u),e=j[0],f=d1(e,"time",0),l=aj.fromString(e.light),s=aj.fromString(e.dark),c=0,d=0;;c++){b.setFrame(c,f,l.r,l.g,l.b,s.r,s.g,s.b);var g=j[c+1];if(!g){b.shrink(d);break}var h=d1(g,"time",0),p=aj.fromString(g.light),B=aj.fromString(g.dark),i=e.curve;i&&(d=d0(i,b,d,c,0,f,h,l.r,p.r,1),d=d0(i,b,d,c,1,f,h,l.g,p.g,1),d=d0(i,b,d,c,2,f,h,l.b,p.b,1),d=d0(i,b,d,c,3,f,h,s.r,B.r,1),d=d0(i,b,d,c,4,f,h,s.g,B.g,1),d=d0(i,b,d,c,5,f,h,s.b,B.b,1)),f=h,l=p,s=B,e=g}n.push(b)}}}}if(m.bones)for(var ab in m.bones){var ap=m.bones[ab],aq=t.findBone(ab);if(!aq)throw new Error("Bone not found: "+ab);var z=aq.index;for(var o in ap){var j=ap[o],q=j.length;if(0!=q){if("rotate"===o)n.push(d$(j,new b7(q,q,z),0,1));else if("translate"===o){var b=new b8(q,q<<1,z);n.push(d_(j,b,"x","y",0,y))}else if("translatex"===o){var b=new b9(q,q,z);n.push(d$(j,b,0,y))}else if("translatey"===o){var b=new ca(q,q,z);n.push(d$(j,b,0,y))}else if("scale"===o){var b=new cb(q,q<<1,z);n.push(d_(j,b,"x","y",1,1))}else if("scalex"===o){var b=new cc(q,q,z);n.push(d$(j,b,1,1))}else if("scaley"===o){var b=new cd(q,q,z);n.push(d$(j,b,1,1))}else if("shear"===o){var b=new ce(q,q<<1,z);n.push(d_(j,b,"x","y",0,1))}else if("shearx"===o){var b=new cf(q,q,z);n.push(d$(j,b,0,1))}else if("sheary"===o){var b=new cg(q,q,z);n.push(d$(j,b,0,1))}}}}if(m.ik)for(var w in m.ik){var G=m.ik[w],e=G[0];if(e){var x=t.findIkConstraint(w);if(!x)throw new Error("IK Constraint not found: "+w);for(var H=t.ikConstraints.indexOf(x),b=new cq(G.length,G.length<<1,H),f=d1(e,"time",0),ac=d1(e,"mix",1),ad=d1(e,"softness",0)*y,c=0,d=0;;c++){b.setFrame(c,f,ac,ad,d1(e,"bendPositive",!0)?1:-1,d1(e,"compress",!1),d1(e,"stretch",!1));var g=G[c+1];if(!g){b.shrink(d);break}var h=d1(g,"time",0),ar=d1(g,"mix",1),at=d1(g,"softness",0)*y,i=e.curve;i&&(d=d0(i,b,d,c,0,f,h,ac,ar,1),d=d0(i,b,d,c,1,f,h,ad,at,y)),f=h,ac=ar,ad=at,e=g}n.push(b)}}if(m.transform)for(var w in m.transform){var j=m.transform[w],e=j[0];if(e){var x=t.findTransformConstraint(w);if(!x)throw new Error("Transform constraint not found: "+w);for(var H=t.transformConstraints.indexOf(x),b=new cr(j.length,6*j.length,H),f=d1(e,"time",0),I=d1(e,"mixRotate",1),C=d1(e,"mixX",1),J=d1(e,"mixY",C),R=d1(e,"mixScaleX",1),ae=d1(e,"mixScaleY",R),au=d1(e,"mixShearY",1),c=0,d=0;;c++){b.setFrame(c,f,I,C,J,R,ae,au);var g=j[c+1];if(!g){b.shrink(d);break}var h=d1(g,"time",0),S=d1(g,"mixRotate",1),L=d1(g,"mixX",1),T=d1(g,"mixY",L),W=d1(g,"mixScaleX",1),av=d1(g,"mixScaleY",W),aJ=d1(g,"mixShearY",1),i=e.curve;i&&(d=d0(i,b,d,c,0,f,h,I,S,1),d=d0(i,b,d,c,1,f,h,C,L,1),d=d0(i,b,d,c,2,f,h,J,T,1),d=d0(i,b,d,c,3,f,h,R,W,1),d=d0(i,b,d,c,4,f,h,ae,av,1),d=d0(i,b,d,c,5,f,h,au,aJ,1)),f=h,I=S,C=L,J=T,R=W,ae=av,R=W,e=g}n.push(b)}}if(m.path)for(var w in m.path){var G=m.path[w],x=t.findPathConstraint(w);if(!x)throw new Error("Path constraint not found: "+w);var H=t.pathConstraints.indexOf(x);for(var o in G){var j=G[o],e=j[0];if(e){var O=j.length;if("position"===o){var b=new cs(O,O,H);n.push(d$(j,b,0,x.positionMode==a.PositionMode.Fixed?y:1))}else if("spacing"===o){var b=new ct(O,O,H);n.push(d$(j,b,0,x.spacingMode==K.Length||x.spacingMode==K.Fixed?y:1))}else if("mix"===o){for(var b=new cu(O,3*O,H),f=d1(e,"time",0),I=d1(e,"mixRotate",1),C=d1(e,"mixX",1),J=d1(e,"mixY",C),c=0,d=0;;c++){b.setFrame(c,f,I,C,J);var g=j[c+1];if(!g){b.shrink(d);break}var h=d1(g,"time",0),S=d1(g,"mixRotate",1),L=d1(g,"mixX",1),T=d1(g,"mixY",L),i=e.curve;i&&(d=d0(i,b,d,c,0,f,h,I,S,1),d=d0(i,b,d,c,1,f,h,C,L,1),d=d0(i,b,d,c,2,f,h,J,T,1)),f=h,I=S,C=L,J=T,e=g}n.push(b)}}}}if(m.deform)for(var aw in m.attachments={},m.deform){var ax=m.deform[aw],aK=m.attachments[aw]={};for(var N in ax){var D=ax[N],aL=aK[N]={};for(var ay in D)aL[ay]={deform:D[ay]}}}if(m.attachments)for(var af in m.attachments){var az=m.attachments[af],aA=t.findSkin(af);if(null==aA){if(!as.FAIL_ON_NON_EXISTING_SKIN)continue;throw new Error("Skin not found: "+af)}for(var ag in az){var D=az[ag],A=t.findSlot(ag);if(!A)throw new Error("Slot not found: "+ag);var u=A.index;for(var aB in D){var aC=D[aB],X=aA.getAttachment(u,aB);for(var ah in aC){var j=aC[ah],e=j[0];if(e){if("deform"==ah){for(var ai=X.bones,Y=X.vertices,ak=ai?Y.length/3*2:Y.length,b=new cn(j.length,j.length,u,X),f=d1(e,"time",0),c=0,d=0;;c++){var P=void 0,Z=d1(e,"vertices",null);if(Z){P=am.newFloatArray(ak);var aD=d1(e,"offset",0);if(am.arrayCopy(Z,0,P,aD,Z.length),1!=y)for(var r=aD,al=r+Z.length;r<al;r++)P[r]*=y;if(!ai)for(var r=0;r<ak;r++)P[r]+=Y[r]}else P=ai?am.newFloatArray(ak):Y;b.setFrame(c,f,P);var g=j[c+1];if(!g){b.shrink(d);break}var h=d1(g,"time",0),i=e.curve;i&&(d=d0(i,b,d,c,0,f,h,0,1,1)),f=h,e=g}n.push(b)}else if("sequence"==ah){for(var b=new cv(j.length,u,X),aE=0,c=0;c<j.length;c++){var aF=d1(e,"delay",aE),f=d1(e,"time",0),aM=k[d1(e,"mode","hold")],aN=d1(e,"index",0);b.setFrame(c,f,aM,aN,aF),aE=aF,e=j[c+1]}n.push(b)}}}}}}if(m.drawOrder){for(var b=new cp(m.drawOrder.length),$=t.slots.length,c=0,r=0;r<m.drawOrder.length;r++,c++){var aG=m.drawOrder[r],U=null,_=d1(aG,"offsets",null);if(_){U=am.newArray($,-1);for(var an=am.newArray($-_.length,0),Q=0,ao=0,E=0;E<_.length;E++){var aH=_[E],A=t.findSlot(aH.slot);if(!A)throw new Error("Slot not found: "+A);for(var u=A.index;Q!=u;)an[ao++]=Q++;U[Q+aH.offset]=Q++}for(;Q<$;)an[ao++]=Q++;for(var E=$-1;E>=0;E--)-1==U[E]&&(U[E]=an[--ao])}b.setFrame(c,d1(aG,"time",0),U)}n.push(b)}if(m.events){for(var b=new co(m.events.length),c=0,r=0;r<m.events.length;r++,c++){var F=m.events[r],V=t.findEvent(F.name);if(!V)throw new Error("Event not found: "+F.name);var M=new cE(am.toSinglePrecision(d1(F,"time",0)),V);M.intValue=d1(F,"int",V.intValue),M.floatValue=d1(F,"float",V.floatValue),M.stringValue=d1(F,"string",V.stringValue),M.data.audioPath&&(M.volume=d1(F,"volume",1),M.balance=d1(F,"balance",0)),b.setFrame(c,M)}n.push(b)}for(var aa=0,r=0,al=n.length;r<al;r++)aa=Math.max(aa,n[r].getDuration());if(isNaN(aa))throw new Error("Error while parsing animation, duration is NaN");t.animations.push(new b6(aI,n,aa))},b.blendModeFromString=function(a){if("normal"==(a=a.toLowerCase()))return cX.BLEND_MODES.NORMAL;if("additive"==a)return cX.BLEND_MODES.ADD;if("multiply"==a)return cX.BLEND_MODES.MULTIPLY;if("screen"==a)return cX.BLEND_MODES.SCREEN;throw new Error("Unknown blend mode: "+a)},b}(),dZ=function(a,b,c,d,e){this.mesh=a,this.skin=b,this.slotIndex=c,this.parent=d,this.inheritTimeline=e};function d$(i,b,j,e){for(var a=i[0],f=d1(a,"time",0),g=d1(a,"value",j)*e,h=0,c=0;;c++){b.setFrame(c,f,g);var d=i[c+1];if(!d)return b.shrink(h),b;var k=d1(d,"time",0),l=d1(d,"value",j)*e;a.curve&&(h=d0(a.curve,b,h,c,0,f,k,g,l,e)),f=k,g=l,a=d}}function d_(m,b,n,o,g,a){for(var c=m[0],h=d1(c,"time",0),i=d1(c,n,g)*a,j=d1(c,o,g)*a,d=0,e=0;;e++){b.setFrame(e,h,i,j);var f=m[e+1];if(!f)return b.shrink(d),b;var k=d1(f,"time",0),p=d1(f,n,g)*a,q=d1(f,o,g)*a,l=c.curve;l&&(d=d0(l,b,d,e,0,h,k,i,p,a),d=d0(l,b,d,e,1,h,k,j,q,a)),h=k,i=p,j=q,c=f}}function d0(a,d,c,e,f,h,i,j,k,g){if("stepped"==a)return d.setStepped(e),c;var b=f<<2,l=a[b],m=a[b+1]*g,n=a[b+2],o=a[b+3]*g;return d.setBezier(c,e,f,h,j,l,m,n,o,i,k),c+1}function d1(a,b,c){return void 0!==a[b]?a[b]:c}var cU=function(b){function a(){return null!==b&&b.apply(this,arguments)||this}return dn(a,b),a.prototype.createSkeleton=function(a){this.skeleton=new cM(a),this.skeleton.updateWorldTransform(),this.stateData=new cA(a),this.state=new cw(this.stateData)},a}(r),d2=Object.freeze({__proto__:null,AlphaTimeline:cj,Animation:b6,AnimationState:cw,AnimationStateAdapter:cz,AnimationStateData:cA,AtlasAttachmentLoader:cB,Attachment:P,AttachmentTimeline:cm,Bone:cC,BoneData:cD,BoundingBoxAttachment:b$,ClippingAttachment:b_,ConstraintData:C,CurveTimeline:h,CurveTimeline1:i,CurveTimeline2:B,DeformTimeline:cn,DrawOrderTimeline:cp,Event:cE,EventData:cF,EventQueue:cy,EventTimeline:co,get EventType(){return J},IkConstraint:cG,IkConstraintData:cH,IkConstraintTimeline:cq,MeshAttachment:b0,PathAttachment:b1,PathConstraint:cJ,PathConstraintData:cI,PathConstraintMixTimeline:cu,PathConstraintPositionTimeline:cs,PathConstraintSpacingTimeline:ct,PointAttachment:b2,RGB2Timeline:cl,RGBA2Timeline:ck,RGBATimeline:ch,RGBTimeline:ci,RegionAttachment:b3,RotateTimeline:b7,ScaleTimeline:cb,ScaleXTimeline:cc,ScaleYTimeline:cd,Sequence:b4,get SequenceMode(){return k},SequenceModeValues:b5,SequenceTimeline:cv,ShearTimeline:ce,ShearXTimeline:cf,ShearYTimeline:cg,Skeleton:cM,SkeletonBinary:cS,SkeletonBounds:X,SkeletonData:cN,SkeletonJson:cT,Skin:cR,SkinEntry:cQ,Slot:cK,SlotData:cO,get SpacingMode(){return K},Spine:cU,Timeline:x,TrackEntry:cx,TransformConstraint:cL,TransformConstraintData:cP,TransformConstraintTimeline:cr,TranslateTimeline:b8,TranslateXTimeline:b9,TranslateYTimeline:ca,VertexAttachment:w}),d3=function(a,b){return(d3=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(a,b){a.__proto__=b}||function(c,a){for(var b in a)Object.prototype.hasOwnProperty.call(a,b)&&(c[b]=a[b])})(a,b)};function d4(b,a){if("function"!=typeof a&&null!==a)throw new TypeError("Class extends value "+String(a)+" is not a constructor or null");function c(){this.constructor=b}d3(b,a),b.prototype=null===a?Object.create(a):(c.prototype=a.prototype,new c)}function d5(b){var a=b.substr(0,3);return"3.7"===a?R.VER37:"3.8"===a?R.VER38:"4.0"===a?R.VER40:"4.1"===a?R.VER41:Math.floor(10*+a+.001)<R.VER37?R.VER37:R.UNKNOWN}(j=R||(R={}))[j.UNKNOWN=0]="UNKNOWN",j[j.VER37=37]="VER37",j[j.VER38=38]="VER38",j[j.VER40=40]="VER40",j[j.VER41=41]="VER41";var d6=function(){function a(){this.scale=1}return a.prototype.readSkeletonData=function(f,c){var a=new aa(c);a.readString();var d=a.readString(),e=d5(d),b=null;if(e===R.VER38&&(b=new bc(new aX(f))),(a=new aa(c)).readInt32(),a.readInt32(),((e=d5(d=a.readString()))===R.VER40||e===R.VER41)&&(b=new cS(new cB(f))),!b){var g="Unsupported version of spine model "+d+", please update pixi-spine";console.error(g)}return b.scale=this.scale,b.readSkeletonData(c)},a}(),d7=function(){function a(){this.scale=1}return a.prototype.readSkeletonData=function(c,d){var e=d.skeleton.spine,b=d5(e),a=null;if(b===R.VER37&&(a=new bY(new bH(c))),b===R.VER38&&(a=new be(new aX(c))),(b===R.VER40||b===R.VER41)&&(a=new cT(new cB(c))),!a){var f="Unsupported version of spine model "+e+", please update pixi-spine";console.error(f)}return a.scale=this.scale,a.readSkeletonData(d)},a}(),Y=function(b){function a(){return null!==b&&b.apply(this,arguments)||this}return d4(a,b),a.prototype.createBinaryParser=function(){return new d6},a.prototype.createJsonParser=function(){return new d7},a.prototype.parseData=function(a,c,b,d){a.spineData=c.readSkeletonData(b,d),a.spineAtlas=b},a.registerLoaderPlugin=function(){Q.Loader.registerPlugin(a)},a.use=new a().genMiddleware().use,a}(av),cV=function(b){function a(){return null!==b&&b.apply(this,arguments)||this}return d4(a,b),a.prototype.createSkeleton=function(b){var c=d5(b.version),a=null;if(c===R.VER37&&(a=dl),c===R.VER38&&(a=dg),(c===R.VER40||c===R.VER41)&&(a=d2),!a){var d="Cant detect version of spine model "+b.version;console.error(d)}this.skeleton=new a.Skeleton(b),this.skeleton.updateWorldTransform(),this.stateData=new a.AnimationStateData(b),this.state=new a.AnimationState(this.stateData)},a}(r);Y.registerLoaderPlugin(),a.BinaryInput=aa,a.Color=aj,a.DebugUtils=an,a.IntSet=ah,a.Interpolation=T,a.MathUtils=ak,a.Pool=ao,a.Pow=U,a.PowOut=al,a.SkeletonBounds=X,a.Spine=cV,a.SpineBase=r,a.SpineMesh=au,a.SpineParser=Y,a.SpineSprite=at,a.StringSet=ai,a.TextureAtlas=ad,a.TextureAtlasPage=ae,a.TextureAtlasRegion=af,a.TextureRegion=S,a.TimeKeeper=aq,a.Utils=am,a.Vector2=ap,a.WindowedMean=ar,a.filterFromString=ab,a.settings=as,a.wrapFromString=function(b){switch(b.toLowerCase()){case"mirroredtepeat":return a.TextureWrap.MirroredRepeat;case"clamptoedge":return a.TextureWrap.ClampToEdge;case"repeat":return a.TextureWrap.Repeat;default:throw new Error("Unknown texture wrap "+b)}},Object.defineProperty(a,"__esModule",{value:!0})}),"undefined"!=typeof pixi_spine&&Object.assign(this.PIXI.spine,pixi_spine)