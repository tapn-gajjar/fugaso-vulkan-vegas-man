/*!
 * omy-pixi - v2.17.20
 * Compiled Tue, 16 May 2023 23:21:54 UTC
 *
 * omy-pixi is licensed under the ISC license.
 */
var OMY=function(t){"use strict";var e="undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{},i="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function n(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function s(t){if(t.__esModule)return t;var e=t.default;if("function"==typeof e){var i=function t(){if(this instanceof t){var i=[null];i.push.apply(i,arguments);var n=Function.bind.apply(e,i);return new n}return e.apply(this,arguments)};i.prototype=e.prototype}else i={};return Object.defineProperty(i,"__esModule",{value:!0}),Object.keys(t).forEach((function(e){var n=Object.getOwnPropertyDescriptor(t,e);Object.defineProperty(i,e,n.get?n:{enumerable:!0,get:function(){return t[e]}})})),i}var r={};
/*!
             *  howler.js v2.2.3
             *  howlerjs.com
             *
             *  (c) 2013-2020, James Simpson of GoldFire Studios
             *  goldfirestudios.com
             *
             *  MIT License
             */!function(t){!function(){var e=function(){this.init()};e.prototype={init:function(){var t=this||n;return t._counter=1e3,t._html5AudioPool=[],t.html5PoolSize=10,t._codecs={},t._howls=[],t._muted=!1,t._volume=1,t._canPlayEvent="canplaythrough",t._navigator="undefined"!=typeof window&&window.navigator?window.navigator:null,t.masterGain=null,t.noAudio=!1,t.usingWebAudio=!0,t.autoSuspend=!0,t.ctx=null,t.autoUnlock=!0,t._setup(),t},volume:function(t){var e=this||n;if(t=parseFloat(t),e.ctx||c(),void 0!==t&&t>=0&&t<=1){if(e._volume=t,e._muted)return e;e.usingWebAudio&&e.masterGain.gain.setValueAtTime(t,n.ctx.currentTime);for(var i=0;i<e._howls.length;i++)if(!e._howls[i]._webAudio)for(var s=e._howls[i]._getSoundIds(),r=0;r<s.length;r++){var o=e._howls[i]._soundById(s[r]);o&&o._node&&(o._node.volume=o._volume*t)}return e}return e._volume},mute:function(t){var e=this||n;e.ctx||c(),e._muted=t,e.usingWebAudio&&e.masterGain.gain.setValueAtTime(t?0:e._volume,n.ctx.currentTime);for(var i=0;i<e._howls.length;i++)if(!e._howls[i]._webAudio)for(var s=e._howls[i]._getSoundIds(),r=0;r<s.length;r++){var o=e._howls[i]._soundById(s[r]);o&&o._node&&(o._node.muted=!!t||o._muted)}return e},stop:function(){for(var t=this||n,e=0;e<t._howls.length;e++)t._howls[e].stop();return t},unload:function(){for(var t=this||n,e=t._howls.length-1;e>=0;e--)t._howls[e].unload();return t.usingWebAudio&&t.ctx&&void 0!==t.ctx.close&&(t.ctx.close(),t.ctx=null,c()),t},codecs:function(t){return(this||n)._codecs[t.replace(/^x-/,"")]},_setup:function(){var t=this||n;if(t.state=t.ctx&&t.ctx.state||"suspended",t._autoSuspend(),!t.usingWebAudio)if("undefined"!=typeof Audio)try{void 0===(new Audio).oncanplaythrough&&(t._canPlayEvent="canplay")}catch(e){t.noAudio=!0}else t.noAudio=!0;try{(new Audio).muted&&(t.noAudio=!0)}catch(t){}return t.noAudio||t._setupCodecs(),t},_setupCodecs:function(){var t=this||n,e=null;try{e="undefined"!=typeof Audio?new Audio:null}catch(e){return t}if(!e||"function"!=typeof e.canPlayType)return t;var i=e.canPlayType("audio/mpeg;").replace(/^no$/,""),s=t._navigator?t._navigator.userAgent:"",r=s.match(/OPR\/([0-6].)/g),o=r&&parseInt(r[0].split("/")[1],10)<33,a=-1!==s.indexOf("Safari")&&-1===s.indexOf("Chrome"),h=s.match(/Version\/(.*?) /),l=a&&h&&parseInt(h[1],10)<15;return t._codecs={mp3:!(o||!i&&!e.canPlayType("audio/mp3;").replace(/^no$/,"")),mpeg:!!i,opus:!!e.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!e.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!e.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!(e.canPlayType('audio/wav; codecs="1"')||e.canPlayType("audio/wav")).replace(/^no$/,""),aac:!!e.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!e.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(e.canPlayType("audio/x-m4a;")||e.canPlayType("audio/m4a;")||e.canPlayType("audio/aac;")).replace(/^no$/,""),m4b:!!(e.canPlayType("audio/x-m4b;")||e.canPlayType("audio/m4b;")||e.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(e.canPlayType("audio/x-mp4;")||e.canPlayType("audio/mp4;")||e.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!(l||!e.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),webm:!(l||!e.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,"")),dolby:!!e.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(e.canPlayType("audio/x-flac;")||e.canPlayType("audio/flac;")).replace(/^no$/,"")},t},_unlockAudio:function(){var t=this||n;if(!t._audioUnlocked&&t.ctx){t._audioUnlocked=!1,t.autoUnlock=!1,t._mobileUnloaded||44100===t.ctx.sampleRate||(t._mobileUnloaded=!0,t.unload()),t._scratchBuffer=t.ctx.createBuffer(1,1,22050);var e=function(i){for(;t._html5AudioPool.length<t.html5PoolSize;)try{var n=new Audio;n._unlocked=!0,t._releaseHtml5Audio(n)}catch(i){t.noAudio=!0;break}for(var s=0;s<t._howls.length;s++)if(!t._howls[s]._webAudio)for(var r=t._howls[s]._getSoundIds(),o=0;o<r.length;o++){var a=t._howls[s]._soundById(r[o]);a&&a._node&&!a._node._unlocked&&(a._node._unlocked=!0,a._node.load())}t._autoResume();var h=t.ctx.createBufferSource();h.buffer=t._scratchBuffer,h.connect(t.ctx.destination),void 0===h.start?h.noteOn(0):h.start(0),"function"==typeof t.ctx.resume&&t.ctx.resume(),h.onended=function(){h.disconnect(0),t._audioUnlocked=!0,document.removeEventListener("touchstart",e,!0),document.removeEventListener("touchend",e,!0),document.removeEventListener("click",e,!0),document.removeEventListener("keydown",e,!0);for(var i=0;i<t._howls.length;i++)t._howls[i]._emit("unlock")}};return document.addEventListener("touchstart",e,!0),document.addEventListener("touchend",e,!0),document.addEventListener("click",e,!0),document.addEventListener("keydown",e,!0),t}},_obtainHtml5Audio:function(){var t=this||n;if(t._html5AudioPool.length)return t._html5AudioPool.pop();var e=(new Audio).play();return e&&"undefined"!=typeof Promise&&(e instanceof Promise||"function"==typeof e.then)&&e.catch((function(){console.warn("HTML5 Audio pool exhausted, returning potentially locked audio object.")})),new Audio},_releaseHtml5Audio:function(t){var e=this||n;return t._unlocked&&e._html5AudioPool.push(t),e},_autoSuspend:function(){var t=this;if(t.autoSuspend&&t.ctx&&void 0!==t.ctx.suspend&&n.usingWebAudio){for(var e=0;e<t._howls.length;e++)if(t._howls[e]._webAudio)for(var i=0;i<t._howls[e]._sounds.length;i++)if(!t._howls[e]._sounds[i]._paused)return t;return t._suspendTimer&&clearTimeout(t._suspendTimer),t._suspendTimer=setTimeout((function(){if(t.autoSuspend){t._suspendTimer=null,t.state="suspending";var e=function(){t.state="suspended",t._resumeAfterSuspend&&(delete t._resumeAfterSuspend,t._autoResume())};t.ctx.suspend().then(e,e)}}),3e4),t}},_autoResume:function(){var t=this;if(t.ctx&&void 0!==t.ctx.resume&&n.usingWebAudio)return"running"===t.state&&"interrupted"!==t.ctx.state&&t._suspendTimer?(clearTimeout(t._suspendTimer),t._suspendTimer=null):"suspended"===t.state||"running"===t.state&&"interrupted"===t.ctx.state?(t.ctx.resume().then((function(){t.state="running";for(var e=0;e<t._howls.length;e++)t._howls[e]._emit("resume")})),t._suspendTimer&&(clearTimeout(t._suspendTimer),t._suspendTimer=null)):"suspending"===t.state&&(t._resumeAfterSuspend=!0),t}};var n=new e,s=function(t){t.src&&0!==t.src.length?this.init(t):console.error("An array of source files must be passed with any new Howl.")};s.prototype={init:function(t){var e=this;return n.ctx||c(),e._autoplay=t.autoplay||!1,e._format="string"!=typeof t.format?t.format:[t.format],e._html5=t.html5||!1,e._muted=t.mute||!1,e._loop=t.loop||!1,e._pool=t.pool||5,e._preload="boolean"!=typeof t.preload&&"metadata"!==t.preload||t.preload,e._rate=t.rate||1,e._sprite=t.sprite||{},e._src="string"!=typeof t.src?t.src:[t.src],e._volume=void 0!==t.volume?t.volume:1,e._xhr={method:t.xhr&&t.xhr.method?t.xhr.method:"GET",headers:t.xhr&&t.xhr.headers?t.xhr.headers:null,withCredentials:!(!t.xhr||!t.xhr.withCredentials)&&t.xhr.withCredentials},e._duration=0,e._state="unloaded",e._sounds=[],e._endTimers={},e._queue=[],e._playLock=!1,e._onend=t.onend?[{fn:t.onend}]:[],e._onfade=t.onfade?[{fn:t.onfade}]:[],e._onload=t.onload?[{fn:t.onload}]:[],e._onloaderror=t.onloaderror?[{fn:t.onloaderror}]:[],e._onplayerror=t.onplayerror?[{fn:t.onplayerror}]:[],e._onpause=t.onpause?[{fn:t.onpause}]:[],e._onplay=t.onplay?[{fn:t.onplay}]:[],e._onstop=t.onstop?[{fn:t.onstop}]:[],e._onmute=t.onmute?[{fn:t.onmute}]:[],e._onvolume=t.onvolume?[{fn:t.onvolume}]:[],e._onrate=t.onrate?[{fn:t.onrate}]:[],e._onseek=t.onseek?[{fn:t.onseek}]:[],e._onunlock=t.onunlock?[{fn:t.onunlock}]:[],e._onresume=[],e._webAudio=n.usingWebAudio&&!e._html5,void 0!==n.ctx&&n.ctx&&n.autoUnlock&&n._unlockAudio(),n._howls.push(e),e._autoplay&&e._queue.push({event:"play",action:function(){e.play()}}),e._preload&&"none"!==e._preload&&e.load(),e},load:function(){var t=this,e=null;if(n.noAudio)t._emit("loaderror",null,"No audio support.");else{"string"==typeof t._src&&(t._src=[t._src]);for(var i=0;i<t._src.length;i++){var s,o;if(t._format&&t._format[i])s=t._format[i];else{if("string"!=typeof(o=t._src[i])){t._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}(s=/^data:audio\/([^;,]+);/i.exec(o))||(s=/\.([^.]+)$/.exec(o.split("?",1)[0])),s&&(s=s[1].toLowerCase())}if(s||console.warn('No file extension was found. Consider using the "format" property or specify an extension.'),s&&n.codecs(s)){e=t._src[i];break}}if(e)return t._src=e,t._state="loading","https:"===window.location.protocol&&"http:"===e.slice(0,5)&&(t._html5=!0,t._webAudio=!1),new r(t),t._webAudio&&a(t),t;t._emit("loaderror",null,"No codec support for selected audio sources.")}},play:function(t,e){var i=this,s=null;if("number"==typeof t)s=t,t=null;else{if("string"==typeof t&&"loaded"===i._state&&!i._sprite[t])return null;if(void 0===t&&(t="__default",!i._playLock)){for(var r=0,o=0;o<i._sounds.length;o++)i._sounds[o]._paused&&!i._sounds[o]._ended&&(r++,s=i._sounds[o]._id);1===r?t=null:s=null}}var a=s?i._soundById(s):i._inactiveSound();if(!a)return null;if(s&&!t&&(t=a._sprite||"__default"),"loaded"!==i._state){a._sprite=t,a._ended=!1;var h=a._id;return i._queue.push({event:"play",action:function(){i.play(h)}}),h}if(s&&!a._paused)return e||i._loadQueue("play"),a._id;i._webAudio&&n._autoResume();var l=Math.max(0,a._seek>0?a._seek:i._sprite[t][0]/1e3),u=Math.max(0,(i._sprite[t][0]+i._sprite[t][1])/1e3-l),c=1e3*u/Math.abs(a._rate),d=i._sprite[t][0]/1e3,_=(i._sprite[t][0]+i._sprite[t][1])/1e3;a._sprite=t,a._ended=!1;var p=function(){a._paused=!1,a._seek=l,a._start=d,a._stop=_,a._loop=!(!a._loop&&!i._sprite[t][2])};if(!(l>=_)){var f=a._node;if(i._webAudio){var v=function(){i._playLock=!1,p(),i._refreshBuffer(a);var t=a._muted||i._muted?0:a._volume;f.gain.setValueAtTime(t,n.ctx.currentTime),a._playStart=n.ctx.currentTime,void 0===f.bufferSource.start?a._loop?f.bufferSource.noteGrainOn(0,l,86400):f.bufferSource.noteGrainOn(0,l,u):a._loop?f.bufferSource.start(0,l,86400):f.bufferSource.start(0,l,u),c!==1/0&&(i._endTimers[a._id]=setTimeout(i._ended.bind(i,a),c)),e||setTimeout((function(){i._emit("play",a._id),i._loadQueue()}),0)};"running"===n.state&&"interrupted"!==n.ctx.state?v():(i._playLock=!0,i.once("resume",v),i._clearTimer(a._id))}else{var g=function(){f.currentTime=l,f.muted=a._muted||i._muted||n._muted||f.muted,f.volume=a._volume*n.volume(),f.playbackRate=a._rate;try{var s=f.play();if(s&&"undefined"!=typeof Promise&&(s instanceof Promise||"function"==typeof s.then)?(i._playLock=!0,p(),s.then((function(){i._playLock=!1,f._unlocked=!0,e?i._loadQueue():i._emit("play",a._id)})).catch((function(){i._playLock=!1,i._emit("playerror",a._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction."),a._ended=!0,a._paused=!0}))):e||(i._playLock=!1,p(),i._emit("play",a._id)),f.playbackRate=a._rate,f.paused)return void i._emit("playerror",a._id,"Playback was unable to start. This is most commonly an issue on mobile devices and Chrome where playback was not within a user interaction.");"__default"!==t||a._loop?i._endTimers[a._id]=setTimeout(i._ended.bind(i,a),c):(i._endTimers[a._id]=function(){i._ended(a),f.removeEventListener("ended",i._endTimers[a._id],!1)},f.addEventListener("ended",i._endTimers[a._id],!1))}catch(t){i._emit("playerror",a._id,t)}};"data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"===f.src&&(f.src=i._src,f.load());var y=window&&window.ejecta||!f.readyState&&n._navigator.isCocoonJS;if(f.readyState>=3||y)g();else{i._playLock=!0,i._state="loading";var m=function(){i._state="loaded",g(),f.removeEventListener(n._canPlayEvent,m,!1)};f.addEventListener(n._canPlayEvent,m,!1),i._clearTimer(a._id)}}return a._id}i._ended(a)},pause:function(t){var e=this;if("loaded"!==e._state||e._playLock)return e._queue.push({event:"pause",action:function(){e.pause(t)}}),e;for(var i=e._getSoundIds(t),n=0;n<i.length;n++){e._clearTimer(i[n]);var s=e._soundById(i[n]);if(s&&!s._paused&&(s._seek=e.seek(i[n]),s._rateSeek=0,s._paused=!0,e._stopFade(i[n]),s._node))if(e._webAudio){if(!s._node.bufferSource)continue;void 0===s._node.bufferSource.stop?s._node.bufferSource.noteOff(0):s._node.bufferSource.stop(0),e._cleanBuffer(s._node)}else isNaN(s._node.duration)&&s._node.duration!==1/0||s._node.pause();arguments[1]||e._emit("pause",s?s._id:null)}return e},stop:function(t,e){var i=this;if("loaded"!==i._state||i._playLock)return i._queue.push({event:"stop",action:function(){i.stop(t)}}),i;for(var n=i._getSoundIds(t),s=0;s<n.length;s++){i._clearTimer(n[s]);var r=i._soundById(n[s]);r&&(r._seek=r._start||0,r._rateSeek=0,r._paused=!0,r._ended=!0,i._stopFade(n[s]),r._node&&(i._webAudio?r._node.bufferSource&&(void 0===r._node.bufferSource.stop?r._node.bufferSource.noteOff(0):r._node.bufferSource.stop(0),i._cleanBuffer(r._node)):isNaN(r._node.duration)&&r._node.duration!==1/0||(r._node.currentTime=r._start||0,r._node.pause(),r._node.duration===1/0&&i._clearSound(r._node))),e||i._emit("stop",r._id))}return i},mute:function(t,e){var i=this;if("loaded"!==i._state||i._playLock)return i._queue.push({event:"mute",action:function(){i.mute(t,e)}}),i;if(void 0===e){if("boolean"!=typeof t)return i._muted;i._muted=t}for(var s=i._getSoundIds(e),r=0;r<s.length;r++){var o=i._soundById(s[r]);o&&(o._muted=t,o._interval&&i._stopFade(o._id),i._webAudio&&o._node?o._node.gain.setValueAtTime(t?0:o._volume,n.ctx.currentTime):o._node&&(o._node.muted=!!n._muted||t),i._emit("mute",o._id))}return i},volume:function(){var t,e,i,s=this,r=arguments;if(0===r.length)return s._volume;if(1===r.length||2===r.length&&void 0===r[1]){var o=s._getSoundIds(),a=o.indexOf(r[0]);a>=0?e=parseInt(r[0],10):t=parseFloat(r[0])}else r.length>=2&&(t=parseFloat(r[0]),e=parseInt(r[1],10));if(!(void 0!==t&&t>=0&&t<=1))return(i=e?s._soundById(e):s._sounds[0])?i._volume:0;if("loaded"!==s._state||s._playLock)return s._queue.push({event:"volume",action:function(){s.volume.apply(s,r)}}),s;void 0===e&&(s._volume=t),e=s._getSoundIds(e);for(var h=0;h<e.length;h++)(i=s._soundById(e[h]))&&(i._volume=t,r[2]||s._stopFade(e[h]),s._webAudio&&i._node&&!i._muted?i._node.gain.setValueAtTime(t,n.ctx.currentTime):i._node&&!i._muted&&(i._node.volume=t*n.volume()),s._emit("volume",i._id));return s},fade:function(t,e,i,s){var r=this;if("loaded"!==r._state||r._playLock)return r._queue.push({event:"fade",action:function(){r.fade(t,e,i,s)}}),r;t=Math.min(Math.max(0,parseFloat(t)),1),e=Math.min(Math.max(0,parseFloat(e)),1),i=parseFloat(i),r.volume(t,s);for(var o=r._getSoundIds(s),a=0;a<o.length;a++){var h=r._soundById(o[a]);if(h){if(s||r._stopFade(o[a]),r._webAudio&&!h._muted){var l=n.ctx.currentTime,u=l+i/1e3;h._volume=t,h._node.gain.setValueAtTime(t,l),h._node.gain.linearRampToValueAtTime(e,u)}r._startFadeInterval(h,t,e,i,o[a],void 0===s)}}return r},_startFadeInterval:function(t,e,i,n,s,r){var o=this,a=e,h=i-e,l=Math.abs(h/.01),u=Math.max(4,l>0?n/l:n),c=Date.now();t._fadeTo=i,t._interval=setInterval((function(){var s=(Date.now()-c)/n;c=Date.now(),a+=h*s,a=Math.round(100*a)/100,a=h<0?Math.max(i,a):Math.min(i,a),o._webAudio?t._volume=a:o.volume(a,t._id,!0),r&&(o._volume=a),(i<e&&a<=i||i>e&&a>=i)&&(clearInterval(t._interval),t._interval=null,t._fadeTo=null,o.volume(i,t._id),o._emit("fade",t._id))}),u)},_stopFade:function(t){var e=this,i=e._soundById(t);return i&&i._interval&&(e._webAudio&&i._node.gain.cancelScheduledValues(n.ctx.currentTime),clearInterval(i._interval),i._interval=null,e.volume(i._fadeTo,t),i._fadeTo=null,e._emit("fade",t)),e},loop:function(){var t,e,i,n=this,s=arguments;if(0===s.length)return n._loop;if(1===s.length){if("boolean"!=typeof s[0])return!!(i=n._soundById(parseInt(s[0],10)))&&i._loop;t=s[0],n._loop=t}else 2===s.length&&(t=s[0],e=parseInt(s[1],10));for(var r=n._getSoundIds(e),o=0;o<r.length;o++)(i=n._soundById(r[o]))&&(i._loop=t,n._webAudio&&i._node&&i._node.bufferSource&&(i._node.bufferSource.loop=t,t&&(i._node.bufferSource.loopStart=i._start||0,i._node.bufferSource.loopEnd=i._stop,n.playing(r[o])&&(n.pause(r[o],!0),n.play(r[o],!0)))));return n},rate:function(){var t,e,i,s=this,r=arguments;if(0===r.length)e=s._sounds[0]._id;else if(1===r.length){var o=s._getSoundIds(),a=o.indexOf(r[0]);a>=0?e=parseInt(r[0],10):t=parseFloat(r[0])}else 2===r.length&&(t=parseFloat(r[0]),e=parseInt(r[1],10));if("number"!=typeof t)return(i=s._soundById(e))?i._rate:s._rate;if("loaded"!==s._state||s._playLock)return s._queue.push({event:"rate",action:function(){s.rate.apply(s,r)}}),s;void 0===e&&(s._rate=t),e=s._getSoundIds(e);for(var h=0;h<e.length;h++)if(i=s._soundById(e[h])){s.playing(e[h])&&(i._rateSeek=s.seek(e[h]),i._playStart=s._webAudio?n.ctx.currentTime:i._playStart),i._rate=t,s._webAudio&&i._node&&i._node.bufferSource?i._node.bufferSource.playbackRate.setValueAtTime(t,n.ctx.currentTime):i._node&&(i._node.playbackRate=t);var l=s.seek(e[h]),u=(s._sprite[i._sprite][0]+s._sprite[i._sprite][1])/1e3-l,c=1e3*u/Math.abs(i._rate);!s._endTimers[e[h]]&&i._paused||(s._clearTimer(e[h]),s._endTimers[e[h]]=setTimeout(s._ended.bind(s,i),c)),s._emit("rate",i._id)}return s},seek:function(){var t,e,i=this,s=arguments;if(0===s.length)i._sounds.length&&(e=i._sounds[0]._id);else if(1===s.length){var r=i._getSoundIds(),o=r.indexOf(s[0]);o>=0?e=parseInt(s[0],10):i._sounds.length&&(e=i._sounds[0]._id,t=parseFloat(s[0]))}else 2===s.length&&(t=parseFloat(s[0]),e=parseInt(s[1],10));if(void 0===e)return 0;if("number"==typeof t&&("loaded"!==i._state||i._playLock))return i._queue.push({event:"seek",action:function(){i.seek.apply(i,s)}}),i;var a=i._soundById(e);if(a){if(!("number"==typeof t&&t>=0)){if(i._webAudio){var h=i.playing(e)?n.ctx.currentTime-a._playStart:0,l=a._rateSeek?a._rateSeek-a._seek:0;return a._seek+(l+h*Math.abs(a._rate))}return a._node.currentTime}var u=i.playing(e);u&&i.pause(e,!0),a._seek=t,a._ended=!1,i._clearTimer(e),i._webAudio||!a._node||isNaN(a._node.duration)||(a._node.currentTime=t);var c=function(){u&&i.play(e,!0),i._emit("seek",e)};if(u&&!i._webAudio){var d=function(){i._playLock?setTimeout(d,0):c()};setTimeout(d,0)}else c()}return i},playing:function(t){var e=this;if("number"==typeof t){var i=e._soundById(t);return!!i&&!i._paused}for(var n=0;n<e._sounds.length;n++)if(!e._sounds[n]._paused)return!0;return!1},duration:function(t){var e=this,i=e._duration,n=e._soundById(t);return n&&(i=e._sprite[n._sprite][1]/1e3),i},state:function(){return this._state},unload:function(){for(var t=this,e=t._sounds,i=0;i<e.length;i++)e[i]._paused||t.stop(e[i]._id),t._webAudio||(t._clearSound(e[i]._node),e[i]._node.removeEventListener("error",e[i]._errorFn,!1),e[i]._node.removeEventListener(n._canPlayEvent,e[i]._loadFn,!1),e[i]._node.removeEventListener("ended",e[i]._endFn,!1),n._releaseHtml5Audio(e[i]._node)),delete e[i]._node,t._clearTimer(e[i]._id);var s=n._howls.indexOf(t);s>=0&&n._howls.splice(s,1);var r=!0;for(i=0;i<n._howls.length;i++)if(n._howls[i]._src===t._src||t._src.indexOf(n._howls[i]._src)>=0){r=!1;break}return o&&r&&delete o[t._src],n.noAudio=!1,t._state="unloaded",t._sounds=[],t=null,null},on:function(t,e,i,n){var s=this["_on"+t];return"function"==typeof e&&s.push(n?{id:i,fn:e,once:n}:{id:i,fn:e}),this},off:function(t,e,i){var n=this,s=n["_on"+t],r=0;if("number"==typeof e&&(i=e,e=null),e||i)for(r=0;r<s.length;r++){var o=i===s[r].id;if(e===s[r].fn&&o||!e&&o){s.splice(r,1);break}}else if(t)n["_on"+t]=[];else{var a=Object.keys(n);for(r=0;r<a.length;r++)0===a[r].indexOf("_on")&&Array.isArray(n[a[r]])&&(n[a[r]]=[])}return n},once:function(t,e,i){return this.on(t,e,i,1),this},_emit:function(t,e,i){for(var n=this,s=n["_on"+t],r=s.length-1;r>=0;r--)s[r].id&&s[r].id!==e&&"load"!==t||(setTimeout(function(t){t.call(this,e,i)}.bind(n,s[r].fn),0),s[r].once&&n.off(t,s[r].fn,s[r].id));return n._loadQueue(t),n},_loadQueue:function(t){var e=this;if(e._queue.length>0){var i=e._queue[0];i.event===t&&(e._queue.shift(),e._loadQueue()),t||i.action()}return e},_ended:function(t){var e=this,i=t._sprite;if(!e._webAudio&&t._node&&!t._node.paused&&!t._node.ended&&t._node.currentTime<t._stop)return setTimeout(e._ended.bind(e,t),100),e;var s=!(!t._loop&&!e._sprite[i][2]);if(e._emit("end",t._id),!e._webAudio&&s&&e.stop(t._id,!0).play(t._id),e._webAudio&&s){e._emit("play",t._id),t._seek=t._start||0,t._rateSeek=0,t._playStart=n.ctx.currentTime;var r=1e3*(t._stop-t._start)/Math.abs(t._rate);e._endTimers[t._id]=setTimeout(e._ended.bind(e,t),r)}return e._webAudio&&!s&&(t._paused=!0,t._ended=!0,t._seek=t._start||0,t._rateSeek=0,e._clearTimer(t._id),e._cleanBuffer(t._node),n._autoSuspend()),e._webAudio||s||e.stop(t._id,!0),e},_clearTimer:function(t){var e=this;if(e._endTimers[t]){if("function"!=typeof e._endTimers[t])clearTimeout(e._endTimers[t]);else{var i=e._soundById(t);i&&i._node&&i._node.removeEventListener("ended",e._endTimers[t],!1)}delete e._endTimers[t]}return e},_soundById:function(t){for(var e=this,i=0;i<e._sounds.length;i++)if(t===e._sounds[i]._id)return e._sounds[i];return null},_inactiveSound:function(){var t=this;t._drain();for(var e=0;e<t._sounds.length;e++)if(t._sounds[e]._ended)return t._sounds[e].reset();return new r(t)},_drain:function(){var t=this,e=t._pool,i=0,n=0;if(!(t._sounds.length<e)){for(n=0;n<t._sounds.length;n++)t._sounds[n]._ended&&i++;for(n=t._sounds.length-1;n>=0;n--){if(i<=e)return;t._sounds[n]._ended&&(t._webAudio&&t._sounds[n]._node&&t._sounds[n]._node.disconnect(0),t._sounds.splice(n,1),i--)}}},_getSoundIds:function(t){if(void 0===t){for(var e=[],i=0;i<this._sounds.length;i++)e.push(this._sounds[i]._id);return e}return[t]},_refreshBuffer:function(t){return t._node.bufferSource=n.ctx.createBufferSource(),t._node.bufferSource.buffer=o[this._src],t._panner?t._node.bufferSource.connect(t._panner):t._node.bufferSource.connect(t._node),t._node.bufferSource.loop=t._loop,t._loop&&(t._node.bufferSource.loopStart=t._start||0,t._node.bufferSource.loopEnd=t._stop||0),t._node.bufferSource.playbackRate.setValueAtTime(t._rate,n.ctx.currentTime),this},_cleanBuffer:function(t){var e=n._navigator&&n._navigator.vendor.indexOf("Apple")>=0;if(n._scratchBuffer&&t.bufferSource&&(t.bufferSource.onended=null,t.bufferSource.disconnect(0),e))try{t.bufferSource.buffer=n._scratchBuffer}catch(t){}return t.bufferSource=null,this},_clearSound:function(t){/MSIE |Trident\//.test(n._navigator&&n._navigator.userAgent)||(t.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA")}};var r=function(t){this._parent=t,this.init()};r.prototype={init:function(){var t=this,e=t._parent;return t._muted=e._muted,t._loop=e._loop,t._volume=e._volume,t._rate=e._rate,t._seek=0,t._paused=!0,t._ended=!0,t._sprite="__default",t._id=++n._counter,e._sounds.push(t),t.create(),t},create:function(){var t=this,e=t._parent,i=n._muted||t._muted||t._parent._muted?0:t._volume;return e._webAudio?(t._node=void 0===n.ctx.createGain?n.ctx.createGainNode():n.ctx.createGain(),t._node.gain.setValueAtTime(i,n.ctx.currentTime),t._node.paused=!0,t._node.connect(n.masterGain)):n.noAudio||(t._node=n._obtainHtml5Audio(),t._errorFn=t._errorListener.bind(t),t._node.addEventListener("error",t._errorFn,!1),t._loadFn=t._loadListener.bind(t),t._node.addEventListener(n._canPlayEvent,t._loadFn,!1),t._endFn=t._endListener.bind(t),t._node.addEventListener("ended",t._endFn,!1),t._node.src=e._src,t._node.preload=!0===e._preload?"auto":e._preload,t._node.volume=i*n.volume(),t._node.load()),t},reset:function(){var t=this,e=t._parent;return t._muted=e._muted,t._loop=e._loop,t._volume=e._volume,t._rate=e._rate,t._seek=0,t._rateSeek=0,t._paused=!0,t._ended=!0,t._sprite="__default",t._id=++n._counter,t},_errorListener:function(){var t=this;t._parent._emit("loaderror",t._id,t._node.error?t._node.error.code:0),t._node.removeEventListener("error",t._errorFn,!1)},_loadListener:function(){var t=this,e=t._parent;e._duration=Math.ceil(10*t._node.duration)/10,0===Object.keys(e._sprite).length&&(e._sprite={__default:[0,1e3*e._duration]}),"loaded"!==e._state&&(e._state="loaded",e._emit("load"),e._loadQueue()),t._node.removeEventListener(n._canPlayEvent,t._loadFn,!1)},_endListener:function(){var t=this,e=t._parent;e._duration===1/0&&(e._duration=Math.ceil(10*t._node.duration)/10,e._sprite.__default[1]===1/0&&(e._sprite.__default[1]=1e3*e._duration),e._ended(t)),t._node.removeEventListener("ended",t._endFn,!1)}};var o={},a=function(t){var e=t._src;if(o[e])return t._duration=o[e].duration,void u(t);if(/^data:[^;]+;base64,/.test(e)){for(var i=atob(e.split(",")[1]),n=new Uint8Array(i.length),s=0;s<i.length;++s)n[s]=i.charCodeAt(s);l(n.buffer,t)}else{var r=new XMLHttpRequest;r.open(t._xhr.method,e,!0),r.withCredentials=t._xhr.withCredentials,r.responseType="arraybuffer",t._xhr.headers&&Object.keys(t._xhr.headers).forEach((function(e){r.setRequestHeader(e,t._xhr.headers[e])})),r.onload=function(){var e=(r.status+"")[0];"0"===e||"2"===e||"3"===e?l(r.response,t):t._emit("loaderror",null,"Failed loading audio file with status: "+r.status+".")},r.onerror=function(){t._webAudio&&(t._html5=!0,t._webAudio=!1,t._sounds=[],delete o[e],t.load())},h(r)}},h=function(t){try{t.send()}catch(e){t.onerror()}},l=function(t,e){var i=function(){e._emit("loaderror",null,"Decoding audio data failed.")},s=function(t){t&&e._sounds.length>0?(o[e._src]=t,u(e,t)):i()};"undefined"!=typeof Promise&&1===n.ctx.decodeAudioData.length?n.ctx.decodeAudioData(t).then(s).catch(i):n.ctx.decodeAudioData(t,s,i)},u=function(t,e){e&&!t._duration&&(t._duration=e.duration),0===Object.keys(t._sprite).length&&(t._sprite={__default:[0,1e3*t._duration]}),"loaded"!==t._state&&(t._state="loaded",t._emit("load"),t._loadQueue())},c=function(){if(n.usingWebAudio){try{"undefined"!=typeof AudioContext?n.ctx=new AudioContext:"undefined"!=typeof webkitAudioContext?n.ctx=new webkitAudioContext:n.usingWebAudio=!1}catch(t){n.usingWebAudio=!1}n.ctx||(n.usingWebAudio=!1);var t=/iP(hone|od|ad)/.test(n._navigator&&n._navigator.platform),e=n._navigator&&n._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),i=e?parseInt(e[1],10):null;if(t&&i&&i<9){var s=/safari/.test(n._navigator&&n._navigator.userAgent.toLowerCase());n._navigator&&!s&&(n.usingWebAudio=!1)}n.usingWebAudio&&(n.masterGain=void 0===n.ctx.createGain?n.ctx.createGainNode():n.ctx.createGain(),n.masterGain.gain.setValueAtTime(n._muted?0:n._volume,n.ctx.currentTime),n.masterGain.connect(n.ctx.destination)),n._setup()}};t.Howler=n,t.Howl=s,void 0!==i?(i.HowlerGlobal=e,i.Howler=n,i.Howl=s,i.Sound=r):"undefined"!=typeof window&&(window.HowlerGlobal=e,window.Howler=n,window.Howl=s,window.Sound=r)}(),
/*!
            	 *  Spatial Plugin - Adds support for stereo and 3D audio where Web Audio is supported.
            	 *  
            	 *  howler.js v2.2.3
            	 *  howlerjs.com
            	 *
            	 *  (c) 2013-2020, James Simpson of GoldFire Studios
            	 *  goldfirestudios.com
            	 *
            	 *  MIT License
            	 */
function(){var t;HowlerGlobal.prototype._pos=[0,0,0],HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0],HowlerGlobal.prototype.stereo=function(t){var e=this;if(!e.ctx||!e.ctx.listener)return e;for(var i=e._howls.length-1;i>=0;i--)e._howls[i].stereo(t);return e},HowlerGlobal.prototype.pos=function(t,e,i){var n=this;return n.ctx&&n.ctx.listener?(e="number"!=typeof e?n._pos[1]:e,i="number"!=typeof i?n._pos[2]:i,"number"!=typeof t?n._pos:(n._pos=[t,e,i],void 0!==n.ctx.listener.positionX?(n.ctx.listener.positionX.setTargetAtTime(n._pos[0],Howler.ctx.currentTime,.1),n.ctx.listener.positionY.setTargetAtTime(n._pos[1],Howler.ctx.currentTime,.1),n.ctx.listener.positionZ.setTargetAtTime(n._pos[2],Howler.ctx.currentTime,.1)):n.ctx.listener.setPosition(n._pos[0],n._pos[1],n._pos[2]),n)):n},HowlerGlobal.prototype.orientation=function(t,e,i,n,s,r){var o=this;if(!o.ctx||!o.ctx.listener)return o;var a=o._orientation;return e="number"!=typeof e?a[1]:e,i="number"!=typeof i?a[2]:i,n="number"!=typeof n?a[3]:n,s="number"!=typeof s?a[4]:s,r="number"!=typeof r?a[5]:r,"number"!=typeof t?a:(o._orientation=[t,e,i,n,s,r],void 0!==o.ctx.listener.forwardX?(o.ctx.listener.forwardX.setTargetAtTime(t,Howler.ctx.currentTime,.1),o.ctx.listener.forwardY.setTargetAtTime(e,Howler.ctx.currentTime,.1),o.ctx.listener.forwardZ.setTargetAtTime(i,Howler.ctx.currentTime,.1),o.ctx.listener.upX.setTargetAtTime(n,Howler.ctx.currentTime,.1),o.ctx.listener.upY.setTargetAtTime(s,Howler.ctx.currentTime,.1),o.ctx.listener.upZ.setTargetAtTime(r,Howler.ctx.currentTime,.1)):o.ctx.listener.setOrientation(t,e,i,n,s,r),o)},Howl.prototype.init=(t=Howl.prototype.init,function(e){var i=this;return i._orientation=e.orientation||[1,0,0],i._stereo=e.stereo||null,i._pos=e.pos||null,i._pannerAttr={coneInnerAngle:void 0!==e.coneInnerAngle?e.coneInnerAngle:360,coneOuterAngle:void 0!==e.coneOuterAngle?e.coneOuterAngle:360,coneOuterGain:void 0!==e.coneOuterGain?e.coneOuterGain:0,distanceModel:void 0!==e.distanceModel?e.distanceModel:"inverse",maxDistance:void 0!==e.maxDistance?e.maxDistance:1e4,panningModel:void 0!==e.panningModel?e.panningModel:"HRTF",refDistance:void 0!==e.refDistance?e.refDistance:1,rolloffFactor:void 0!==e.rolloffFactor?e.rolloffFactor:1},i._onstereo=e.onstereo?[{fn:e.onstereo}]:[],i._onpos=e.onpos?[{fn:e.onpos}]:[],i._onorientation=e.onorientation?[{fn:e.onorientation}]:[],t.call(this,e)}),Howl.prototype.stereo=function(t,i){var n=this;if(!n._webAudio)return n;if("loaded"!==n._state)return n._queue.push({event:"stereo",action:function(){n.stereo(t,i)}}),n;var s=void 0===Howler.ctx.createStereoPanner?"spatial":"stereo";if(void 0===i){if("number"!=typeof t)return n._stereo;n._stereo=t,n._pos=[t,0,0]}for(var r=n._getSoundIds(i),o=0;o<r.length;o++){var a=n._soundById(r[o]);if(a){if("number"!=typeof t)return a._stereo;a._stereo=t,a._pos=[t,0,0],a._node&&(a._pannerAttr.panningModel="equalpower",a._panner&&a._panner.pan||e(a,s),"spatial"===s?void 0!==a._panner.positionX?(a._panner.positionX.setValueAtTime(t,Howler.ctx.currentTime),a._panner.positionY.setValueAtTime(0,Howler.ctx.currentTime),a._panner.positionZ.setValueAtTime(0,Howler.ctx.currentTime)):a._panner.setPosition(t,0,0):a._panner.pan.setValueAtTime(t,Howler.ctx.currentTime)),n._emit("stereo",a._id)}}return n},Howl.prototype.pos=function(t,i,n,s){var r=this;if(!r._webAudio)return r;if("loaded"!==r._state)return r._queue.push({event:"pos",action:function(){r.pos(t,i,n,s)}}),r;if(i="number"!=typeof i?0:i,n="number"!=typeof n?-.5:n,void 0===s){if("number"!=typeof t)return r._pos;r._pos=[t,i,n]}for(var o=r._getSoundIds(s),a=0;a<o.length;a++){var h=r._soundById(o[a]);if(h){if("number"!=typeof t)return h._pos;h._pos=[t,i,n],h._node&&(h._panner&&!h._panner.pan||e(h,"spatial"),void 0!==h._panner.positionX?(h._panner.positionX.setValueAtTime(t,Howler.ctx.currentTime),h._panner.positionY.setValueAtTime(i,Howler.ctx.currentTime),h._panner.positionZ.setValueAtTime(n,Howler.ctx.currentTime)):h._panner.setPosition(t,i,n)),r._emit("pos",h._id)}}return r},Howl.prototype.orientation=function(t,i,n,s){var r=this;if(!r._webAudio)return r;if("loaded"!==r._state)return r._queue.push({event:"orientation",action:function(){r.orientation(t,i,n,s)}}),r;if(i="number"!=typeof i?r._orientation[1]:i,n="number"!=typeof n?r._orientation[2]:n,void 0===s){if("number"!=typeof t)return r._orientation;r._orientation=[t,i,n]}for(var o=r._getSoundIds(s),a=0;a<o.length;a++){var h=r._soundById(o[a]);if(h){if("number"!=typeof t)return h._orientation;h._orientation=[t,i,n],h._node&&(h._panner||(h._pos||(h._pos=r._pos||[0,0,-.5]),e(h,"spatial")),void 0!==h._panner.orientationX?(h._panner.orientationX.setValueAtTime(t,Howler.ctx.currentTime),h._panner.orientationY.setValueAtTime(i,Howler.ctx.currentTime),h._panner.orientationZ.setValueAtTime(n,Howler.ctx.currentTime)):h._panner.setOrientation(t,i,n)),r._emit("orientation",h._id)}}return r},Howl.prototype.pannerAttr=function(){var t,i,n,s=this,r=arguments;if(!s._webAudio)return s;if(0===r.length)return s._pannerAttr;if(1===r.length){if("object"!=typeof r[0])return(n=s._soundById(parseInt(r[0],10)))?n._pannerAttr:s._pannerAttr;t=r[0],void 0===i&&(t.pannerAttr||(t.pannerAttr={coneInnerAngle:t.coneInnerAngle,coneOuterAngle:t.coneOuterAngle,coneOuterGain:t.coneOuterGain,distanceModel:t.distanceModel,maxDistance:t.maxDistance,refDistance:t.refDistance,rolloffFactor:t.rolloffFactor,panningModel:t.panningModel}),s._pannerAttr={coneInnerAngle:void 0!==t.pannerAttr.coneInnerAngle?t.pannerAttr.coneInnerAngle:s._coneInnerAngle,coneOuterAngle:void 0!==t.pannerAttr.coneOuterAngle?t.pannerAttr.coneOuterAngle:s._coneOuterAngle,coneOuterGain:void 0!==t.pannerAttr.coneOuterGain?t.pannerAttr.coneOuterGain:s._coneOuterGain,distanceModel:void 0!==t.pannerAttr.distanceModel?t.pannerAttr.distanceModel:s._distanceModel,maxDistance:void 0!==t.pannerAttr.maxDistance?t.pannerAttr.maxDistance:s._maxDistance,refDistance:void 0!==t.pannerAttr.refDistance?t.pannerAttr.refDistance:s._refDistance,rolloffFactor:void 0!==t.pannerAttr.rolloffFactor?t.pannerAttr.rolloffFactor:s._rolloffFactor,panningModel:void 0!==t.pannerAttr.panningModel?t.pannerAttr.panningModel:s._panningModel})}else 2===r.length&&(t=r[0],i=parseInt(r[1],10));for(var o=s._getSoundIds(i),a=0;a<o.length;a++)if(n=s._soundById(o[a])){var h=n._pannerAttr;h={coneInnerAngle:void 0!==t.coneInnerAngle?t.coneInnerAngle:h.coneInnerAngle,coneOuterAngle:void 0!==t.coneOuterAngle?t.coneOuterAngle:h.coneOuterAngle,coneOuterGain:void 0!==t.coneOuterGain?t.coneOuterGain:h.coneOuterGain,distanceModel:void 0!==t.distanceModel?t.distanceModel:h.distanceModel,maxDistance:void 0!==t.maxDistance?t.maxDistance:h.maxDistance,refDistance:void 0!==t.refDistance?t.refDistance:h.refDistance,rolloffFactor:void 0!==t.rolloffFactor?t.rolloffFactor:h.rolloffFactor,panningModel:void 0!==t.panningModel?t.panningModel:h.panningModel};var l=n._panner;l?(l.coneInnerAngle=h.coneInnerAngle,l.coneOuterAngle=h.coneOuterAngle,l.coneOuterGain=h.coneOuterGain,l.distanceModel=h.distanceModel,l.maxDistance=h.maxDistance,l.refDistance=h.refDistance,l.rolloffFactor=h.rolloffFactor,l.panningModel=h.panningModel):(n._pos||(n._pos=s._pos||[0,0,-.5]),e(n,"spatial"))}return s},Sound.prototype.init=function(t){return function(){var e=this,i=e._parent;e._orientation=i._orientation,e._stereo=i._stereo,e._pos=i._pos,e._pannerAttr=i._pannerAttr,t.call(this),e._stereo?i.stereo(e._stereo):e._pos&&i.pos(e._pos[0],e._pos[1],e._pos[2],e._id)}}(Sound.prototype.init),Sound.prototype.reset=function(t){return function(){var e=this,i=e._parent;return e._orientation=i._orientation,e._stereo=i._stereo,e._pos=i._pos,e._pannerAttr=i._pannerAttr,e._stereo?i.stereo(e._stereo):e._pos?i.pos(e._pos[0],e._pos[1],e._pos[2],e._id):e._panner&&(e._panner.disconnect(0),e._panner=void 0,i._refreshBuffer(e)),t.call(this)}}(Sound.prototype.reset);var e=function(t,e){"spatial"===(e=e||"spatial")?(t._panner=Howler.ctx.createPanner(),t._panner.coneInnerAngle=t._pannerAttr.coneInnerAngle,t._panner.coneOuterAngle=t._pannerAttr.coneOuterAngle,t._panner.coneOuterGain=t._pannerAttr.coneOuterGain,t._panner.distanceModel=t._pannerAttr.distanceModel,t._panner.maxDistance=t._pannerAttr.maxDistance,t._panner.refDistance=t._pannerAttr.refDistance,t._panner.rolloffFactor=t._pannerAttr.rolloffFactor,t._panner.panningModel=t._pannerAttr.panningModel,void 0!==t._panner.positionX?(t._panner.positionX.setValueAtTime(t._pos[0],Howler.ctx.currentTime),t._panner.positionY.setValueAtTime(t._pos[1],Howler.ctx.currentTime),t._panner.positionZ.setValueAtTime(t._pos[2],Howler.ctx.currentTime)):t._panner.setPosition(t._pos[0],t._pos[1],t._pos[2]),void 0!==t._panner.orientationX?(t._panner.orientationX.setValueAtTime(t._orientation[0],Howler.ctx.currentTime),t._panner.orientationY.setValueAtTime(t._orientation[1],Howler.ctx.currentTime),t._panner.orientationZ.setValueAtTime(t._orientation[2],Howler.ctx.currentTime)):t._panner.setOrientation(t._orientation[0],t._orientation[1],t._orientation[2])):(t._panner=Howler.ctx.createStereoPanner(),t._panner.pan.setValueAtTime(t._stereo,Howler.ctx.currentTime)),t._panner.connect(t._node),t._paused||t._parent.pause(t._id,!0).play(t._id,!0)}}()}(r);var o={};!function(t,e){!function(t){function e(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,t.__proto__=e}function i(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}
/*!
            	   * GSAP 3.11.4
            	   * https://greensock.com
            	   *
            	   * @license Copyright 2008-2022, GreenSock. All rights reserved.
            	   * Subject to the terms at https://greensock.com/standard-license or for
            	   * Club GreenSock members, the agreement issued with that membership.
            	   * @author: Jack Doyle, jack@greensock.com
            	  */var n,s,r,o,a,h,l,u,c,d,_,p,f,v,g,y,m,k={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},x={duration:.5,overwrite:!1,delay:0},b=1e8,w=1/b,S=2*Math.PI,T=S/4,O=0,E=Math.sqrt,A=Math.cos,D=Math.sin,C=function(t){return"string"==typeof t},M=function(t){return"function"==typeof t},L=function(t){return"number"==typeof t},P=function(t){return void 0===t},U=function(t){return"object"==typeof t},N=function(t){return!1!==t},I=function(){return"undefined"!=typeof window},R=function(t){return M(t)||C(t)},F="function"==typeof ArrayBuffer&&ArrayBuffer.isView||function(){},Y=Array.isArray,X=/(?:-?\.?\d|\.)+/gi,B=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,z=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,V=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,H=/[+-]=-?[.\d]+/,W=/[^,'"\[\]\s]+/gi,j=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,G={},K={},q=function(t){return(K=Tt(t,G))&&Bi},J=function(t,e){return console.warn("Invalid property",t,"set to",e,"Missing plugin? gsap.registerPlugin()")},Z=function(t,e){return!e&&console.warn(t)},Q=function(t,e){return t&&(G[t]=e)&&K&&(K[t]=e)||G},$=function(){return 0},tt={suppressEvents:!0,isStart:!0,kill:!1},et={suppressEvents:!0,kill:!1},it={suppressEvents:!0},nt={},st=[],rt={},ot={},at={},ht=30,lt=[],ut="",ct=function(t){var e,i,n=t[0];if(U(n)||M(n)||(t=[t]),!(e=(n._gsap||{}).harness)){for(i=lt.length;i--&&!lt[i].targetTest(n););e=lt[i]}for(i=t.length;i--;)t[i]&&(t[i]._gsap||(t[i]._gsap=new Qe(t[i],e)))||t.splice(i,1);return t},dt=function(t){return t._gsap||ct(he(t))[0]._gsap},_t=function(t,e,i){return(i=t[e])&&M(i)?t[e]():P(i)&&t.getAttribute&&t.getAttribute(e)||i},pt=function(t,e){return(t=t.split(",")).forEach(e)||t},ft=function(t){return Math.round(1e5*t)/1e5||0},vt=function(t){return Math.round(1e7*t)/1e7||0},gt=function(t,e){var i=e.charAt(0),n=parseFloat(e.substr(2));return t=parseFloat(t),"+"===i?t+n:"-"===i?t-n:"*"===i?t*n:t/n},yt=function(t,e){for(var i=e.length,n=0;t.indexOf(e[n])<0&&++n<i;);return n<i},mt=function(){var t,e,i=st.length,n=st.slice(0);for(rt={},st.length=0,t=0;t<i;t++)(e=n[t])&&e._lazy&&(e.render(e._lazy[0],e._lazy[1],!0)._lazy=0)},kt=function(t,e,i,n){st.length&&!s&&mt(),t.render(e,i,n||s&&e<0&&(t._initted||t._startAt)),st.length&&!s&&mt()},xt=function(t){var e=parseFloat(t);return(e||0===e)&&(t+"").match(W).length<2?e:C(t)?t.trim():t},bt=function(t){return t},wt=function(t,e){for(var i in e)i in t||(t[i]=e[i]);return t},St=function(t){return function(e,i){for(var n in i)n in e||"duration"===n&&t||"ease"===n||(e[n]=i[n])}},Tt=function(t,e){for(var i in e)t[i]=e[i];return t},Ot=function t(e,i){for(var n in i)"__proto__"!==n&&"constructor"!==n&&"prototype"!==n&&(e[n]=U(i[n])?t(e[n]||(e[n]={}),i[n]):i[n]);return e},Et=function(t,e){var i,n={};for(i in t)i in e||(n[i]=t[i]);return n},At=function(t){var e=t.parent||o,i=t.keyframes?St(Y(t.keyframes)):wt;if(N(t.inherit))for(;e;)i(t,e.vars.defaults),e=e.parent||e._dp;return t},Dt=function(t,e){for(var i=t.length,n=i===e.length;n&&i--&&t[i]===e[i];);return i<0},Ct=function(t,e,i,n,s){void 0===i&&(i="_first"),void 0===n&&(n="_last");var r,o=t[n];if(s)for(r=e[s];o&&o[s]>r;)o=o._prev;return o?(e._next=o._next,o._next=e):(e._next=t[i],t[i]=e),e._next?e._next._prev=e:t[n]=e,e._prev=o,e.parent=e._dp=t,e},Mt=function(t,e,i,n){void 0===i&&(i="_first"),void 0===n&&(n="_last");var s=e._prev,r=e._next;s?s._next=r:t[i]===e&&(t[i]=r),r?r._prev=s:t[n]===e&&(t[n]=s),e._next=e._prev=e.parent=null},Lt=function(t,e){t.parent&&(!e||t.parent.autoRemoveChildren)&&t.parent.remove(t),t._act=0},Pt=function(t,e){if(t&&(!e||e._end>t._dur||e._start<0))for(var i=t;i;)i._dirty=1,i=i.parent;return t},Ut=function(t){for(var e=t.parent;e&&e.parent;)e._dirty=1,e.totalDuration(),e=e.parent;return t},Nt=function(t,e,i,n){return t._startAt&&(s?t._startAt.revert(et):t.vars.immediateRender&&!t.vars.autoRevert||t._startAt.render(e,!0,n))},It=function t(e){return!e||e._ts&&t(e.parent)},Rt=function(t){return t._repeat?Ft(t._tTime,t=t.duration()+t._rDelay)*t:0},Ft=function(t,e){var i=Math.floor(t/=e);return t&&i===t?i-1:i},Yt=function(t,e){return(t-e._start)*e._ts+(e._ts>=0?0:e._dirty?e.totalDuration():e._tDur)},Xt=function(t){return t._end=vt(t._start+(t._tDur/Math.abs(t._ts||t._rts||w)||0))},Bt=function(t,e){var i=t._dp;return i&&i.smoothChildTiming&&t._ts&&(t._start=vt(i._time-(t._ts>0?e/t._ts:((t._dirty?t.totalDuration():t._tDur)-e)/-t._ts)),Xt(t),i._dirty||Pt(i,t)),t},zt=function(t,e){var i;if((e._time||e._initted&&!e._dur)&&(i=Yt(t.rawTime(),e),(!e._dur||ie(0,e.totalDuration(),i)-e._tTime>w)&&e.render(i,!0)),Pt(t,e)._dp&&t._initted&&t._time>=t._dur&&t._ts){if(t._dur<t.duration())for(i=t;i._dp;)i.rawTime()>=0&&i.totalTime(i._tTime),i=i._dp;t._zTime=-w}},Vt=function(t,e,i,n){return e.parent&&Lt(e),e._start=vt((L(i)?i:i||t!==o?$t(t,i,e):t._time)+e._delay),e._end=vt(e._start+(e.totalDuration()/Math.abs(e.timeScale())||0)),Ct(t,e,"_first","_last",t._sort?"_start":0),Gt(e)||(t._recent=e),n||zt(t,e),t._ts<0&&Bt(t,t._tTime),t},Ht=function(t,e){return(G.ScrollTrigger||J("scrollTrigger",e))&&G.ScrollTrigger.create(e,t)},Wt=function(t,e,i,n,r){return ai(t,e,r),t._initted?!i&&t._pt&&!s&&(t._dur&&!1!==t.vars.lazy||!t._dur&&t.vars.lazy)&&c!==Re.frame?(st.push(t),t._lazy=[r,n],1):void 0:1},jt=function t(e){var i=e.parent;return i&&i._ts&&i._initted&&!i._lock&&(i.rawTime()<0||t(i))},Gt=function(t){var e=t.data;return"isFromStart"===e||"isStart"===e},Kt=function(t,e,i,n){var r,o,a,h=t.ratio,l=e<0||!e&&(!t._start&&jt(t)&&(t._initted||!Gt(t))||(t._ts<0||t._dp._ts<0)&&!Gt(t))?0:1,u=t._rDelay,c=0;if(u&&t._repeat&&(c=ie(0,t._tDur,e),o=Ft(c,u),t._yoyo&&1&o&&(l=1-l),o!==Ft(t._tTime,u)&&(h=1-l,t.vars.repeatRefresh&&t._initted&&t.invalidate())),l!==h||s||n||t._zTime===w||!e&&t._zTime){if(!t._initted&&Wt(t,e,n,i,c))return;for(a=t._zTime,t._zTime=e||(i?w:0),i||(i=e&&!a),t.ratio=l,t._from&&(l=1-l),t._time=0,t._tTime=c,r=t._pt;r;)r.r(l,r.d),r=r._next;e<0&&Nt(t,e,i,!0),t._onUpdate&&!i&&Te(t,"onUpdate"),c&&t._repeat&&!i&&t.parent&&Te(t,"onRepeat"),(e>=t._tDur||e<0)&&t.ratio===l&&(l&&Lt(t,1),i||s||(Te(t,l?"onComplete":"onReverseComplete",!0),t._prom&&t._prom()))}else t._zTime||(t._zTime=e)},qt=function(t,e,i){var n;if(i>e)for(n=t._first;n&&n._start<=i;){if("isPause"===n.data&&n._start>e)return n;n=n._next}else for(n=t._last;n&&n._start>=i;){if("isPause"===n.data&&n._start<e)return n;n=n._prev}},Jt=function(t,e,i,n){var s=t._repeat,r=vt(e)||0,o=t._tTime/t._tDur;return o&&!n&&(t._time*=r/t._dur),t._dur=r,t._tDur=s?s<0?1e10:vt(r*(s+1)+t._rDelay*s):r,o>0&&!n&&Bt(t,t._tTime=t._tDur*o),t.parent&&Xt(t),i||Pt(t.parent,t),t},Zt=function(t){return t instanceof ti?Pt(t):Jt(t,t._dur)},Qt={_start:0,endTime:$,totalDuration:$},$t=function t(e,i,n){var s,r,o,a=e.labels,h=e._recent||Qt,l=e.duration()>=b?h.endTime(!1):e._dur;return C(i)&&(isNaN(i)||i in a)?(r=i.charAt(0),o="%"===i.substr(-1),s=i.indexOf("="),"<"===r||">"===r?(s>=0&&(i=i.replace(/=/,"")),("<"===r?h._start:h.endTime(h._repeat>=0))+(parseFloat(i.substr(1))||0)*(o?(s<0?h:n).totalDuration()/100:1)):s<0?(i in a||(a[i]=l),a[i]):(r=parseFloat(i.charAt(s-1)+i.substr(s+1)),o&&n&&(r=r/100*(Y(n)?n[0]:n).totalDuration()),s>1?t(e,i.substr(0,s-1),n)+r:l+r)):null==i?l:+i},te=function(t,e,i){var n,s,r=L(e[1]),o=(r?2:1)+(t<2?0:1),a=e[o];if(r&&(a.duration=e[1]),a.parent=i,t){for(n=a,s=i;s&&!("immediateRender"in n);)n=s.vars.defaults||{},s=N(s.vars.inherit)&&s.parent;a.immediateRender=N(n.immediateRender),t<2?a.runBackwards=1:a.startAt=e[o-1]}return new pi(e[0],a,e[o+1])},ee=function(t,e){return t||0===t?e(t):e},ie=function(t,e,i){return i<t?t:i>e?e:i},ne=function(t,e){return C(t)&&(e=j.exec(t))?e[1]:""},se=function(t,e,i){return ee(i,(function(i){return ie(t,e,i)}))},re=[].slice,oe=function(t,e){return t&&U(t)&&"length"in t&&(!e&&!t.length||t.length-1 in t&&U(t[0]))&&!t.nodeType&&t!==a},ae=function(t,e,i){return void 0===i&&(i=[]),t.forEach((function(t){var n;return C(t)&&!e||oe(t,1)?(n=i).push.apply(n,he(t)):i.push(t)}))||i},he=function(t,e,i){return r&&!e&&r.selector?r.selector(t):!C(t)||i||!h&&Fe()?Y(t)?ae(t,i):oe(t)?re.call(t,0):t?[t]:[]:re.call((e||l).querySelectorAll(t),0)},le=function(t){return t=he(t)[0]||Z("Invalid scope")||{},function(e){var i=t.current||t.nativeElement||t;return he(e,i.querySelectorAll?i:i===t?Z("Invalid scope")||l.createElement("div"):t)}},ue=function(t){return t.sort((function(){return.5-Math.random()}))},ce=function(t){if(M(t))return t;var e=U(t)?t:{each:t},i=Ge(e.ease),n=e.from||0,s=parseFloat(e.base)||0,r={},o=n>0&&n<1,a=isNaN(n)||o,h=e.axis,l=n,u=n;return C(n)?l=u={center:.5,edges:.5,end:1}[n]||0:!o&&a&&(l=n[0],u=n[1]),function(t,o,c){var d,_,p,f,v,g,y,m,k,x=(c||e).length,w=r[x];if(!w){if(!(k="auto"===e.grid?0:(e.grid||[1,b])[1])){for(y=-b;y<(y=c[k++].getBoundingClientRect().left)&&k<x;);k--}for(w=r[x]=[],d=a?Math.min(k,x)*l-.5:n%k,_=k===b?0:a?x*u/k-.5:n/k|0,y=0,m=b,g=0;g<x;g++)p=g%k-d,f=_-(g/k|0),w[g]=v=h?Math.abs("y"===h?f:p):E(p*p+f*f),v>y&&(y=v),v<m&&(m=v);"random"===n&&ue(w),w.max=y-m,w.min=m,w.v=x=(parseFloat(e.amount)||parseFloat(e.each)*(k>x?x-1:h?"y"===h?x/k:k:Math.max(k,x/k))||0)*("edges"===n?-1:1),w.b=x<0?s-x:s,w.u=ne(e.amount||e.each)||0,i=i&&x<0?We(i):i}return x=(w[t]-w.min)/w.max||0,vt(w.b+(i?i(x):x)*w.v)+w.u}},de=function(t){var e=Math.pow(10,((t+"").split(".")[1]||"").length);return function(i){var n=vt(Math.round(parseFloat(i)/t)*t*e);return(n-n%1)/e+(L(i)?0:ne(i))}},_e=function(t,e){var i,n,s=Y(t);return!s&&U(t)&&(i=s=t.radius||b,t.values?(t=he(t.values),(n=!L(t[0]))&&(i*=i)):t=de(t.increment)),ee(e,s?M(t)?function(e){return n=t(e),Math.abs(n-e)<=i?n:e}:function(e){for(var s,r,o=parseFloat(n?e.x:e),a=parseFloat(n?e.y:0),h=b,l=0,u=t.length;u--;)(s=n?(s=t[u].x-o)*s+(r=t[u].y-a)*r:Math.abs(t[u]-o))<h&&(h=s,l=u);return l=!i||h<=i?t[l]:e,n||l===e||L(e)?l:l+ne(e)}:de(t))},pe=function(t,e,i,n){return ee(Y(t)?!e:!0===i?!!(i=0):!n,(function(){return Y(t)?t[~~(Math.random()*t.length)]:(i=i||1e-5)&&(n=i<1?Math.pow(10,(i+"").length-2):1)&&Math.floor(Math.round((t-i/2+Math.random()*(e-t+.99*i))/i)*i*n)/n}))},fe=function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return function(t){return e.reduce((function(t,e){return e(t)}),t)}},ve=function(t,e){return function(i){return t(parseFloat(i))+(e||ne(i))}},ge=function(t,e,i){return be(t,e,0,1,i)},ye=function(t,e,i){return ee(i,(function(i){return t[~~e(i)]}))},me=function t(e,i,n){var s=i-e;return Y(e)?ye(e,t(0,e.length),i):ee(n,(function(t){return(s+(t-e)%s)%s+e}))},ke=function t(e,i,n){var s=i-e,r=2*s;return Y(e)?ye(e,t(0,e.length-1),i):ee(n,(function(t){return e+((t=(r+(t-e)%r)%r||0)>s?r-t:t)}))},xe=function(t){for(var e,i,n,s,r=0,o="";~(e=t.indexOf("random(",r));)n=t.indexOf(")",e),s="["===t.charAt(e+7),i=t.substr(e+7,n-e-7).match(s?W:X),o+=t.substr(r,e-r)+pe(s?i:+i[0],s?0:+i[1],+i[2]||1e-5),r=n+1;return o+t.substr(r,t.length-r)},be=function(t,e,i,n,s){var r=e-t,o=n-i;return ee(s,(function(e){return i+((e-t)/r*o||0)}))},we=function t(e,i,n,s){var r=isNaN(e+i)?0:function(t){return(1-t)*e+t*i};if(!r){var o,a,h,l,u,c=C(e),d={};if(!0===n&&(s=1)&&(n=null),c)e={p:e},i={p:i};else if(Y(e)&&!Y(i)){for(h=[],l=e.length,u=l-2,a=1;a<l;a++)h.push(t(e[a-1],e[a]));l--,r=function(t){t*=l;var e=Math.min(u,~~t);return h[e](t-e)},n=i}else s||(e=Tt(Y(e)?[]:{},e));if(!h){for(o in i)si.call(d,e,o,"get",i[o]);r=function(t){return wi(t,d)||(c?e.p:e)}}}return ee(n,r)},Se=function(t,e,i){var n,s,r,o=t.labels,a=b;for(n in o)(s=o[n]-e)<0==!!i&&s&&a>(s=Math.abs(s))&&(r=n,a=s);return r},Te=function(t,e,i){var n,s,o,a=t.vars,h=a[e],l=r,u=t._ctx;if(h)return n=a[e+"Params"],s=a.callbackScope||t,i&&st.length&&mt(),u&&(r=u),o=n?h.apply(s,n):h.call(s),r=l,o},Oe=function(t){return Lt(t),t.scrollTrigger&&t.scrollTrigger.kill(!!s),t.progress()<1&&Te(t,"onInterrupt"),t},Ee=function(t){var e=(t=!t.name&&t.default||t).name,i=M(t),n=e&&!i&&t.init?function(){this._props=[]}:t,s={init:$,render:wi,add:si,kill:Ti,modifier:Si,rawVars:0},r={targetTest:0,get:0,getSetter:mi,aliases:{},register:0};if(Fe(),t!==n){if(ot[e])return;wt(n,wt(Et(t,s),r)),Tt(n.prototype,Tt(s,Et(t,r))),ot[n.prop=e]=n,t.targetTest&&(lt.push(n),nt[e]=1),e=("css"===e?"CSS":e.charAt(0).toUpperCase()+e.substr(1))+"Plugin"}Q(e,n),t.register&&t.register(Bi,n,Ai)},Ae=255,De={aqua:[0,Ae,Ae],lime:[0,Ae,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,Ae],navy:[0,0,128],white:[Ae,Ae,Ae],olive:[128,128,0],yellow:[Ae,Ae,0],orange:[Ae,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[Ae,0,0],pink:[Ae,192,203],cyan:[0,Ae,Ae],transparent:[Ae,Ae,Ae,0]},Ce=function(t,e,i){return(6*(t+=t<0?1:t>1?-1:0)<1?e+(i-e)*t*6:t<.5?i:3*t<2?e+(i-e)*(2/3-t)*6:e)*Ae+.5|0},Me=function(t,e,i){var n,s,r,o,a,h,l,u,c,d,_=t?L(t)?[t>>16,t>>8&Ae,t&Ae]:0:De.black;if(!_){if(","===t.substr(-1)&&(t=t.substr(0,t.length-1)),De[t])_=De[t];else if("#"===t.charAt(0)){if(t.length<6&&(n=t.charAt(1),s=t.charAt(2),r=t.charAt(3),t="#"+n+n+s+s+r+r+(5===t.length?t.charAt(4)+t.charAt(4):"")),9===t.length)return[(_=parseInt(t.substr(1,6),16))>>16,_>>8&Ae,_&Ae,parseInt(t.substr(7),16)/255];_=[(t=parseInt(t.substr(1),16))>>16,t>>8&Ae,t&Ae]}else if("hsl"===t.substr(0,3))if(_=d=t.match(X),e){if(~t.indexOf("="))return _=t.match(B),i&&_.length<4&&(_[3]=1),_}else o=+_[0]%360/360,a=+_[1]/100,n=2*(h=+_[2]/100)-(s=h<=.5?h*(a+1):h+a-h*a),_.length>3&&(_[3]*=1),_[0]=Ce(o+1/3,n,s),_[1]=Ce(o,n,s),_[2]=Ce(o-1/3,n,s);else _=t.match(X)||De.transparent;_=_.map(Number)}return e&&!d&&(n=_[0]/Ae,s=_[1]/Ae,r=_[2]/Ae,h=((l=Math.max(n,s,r))+(u=Math.min(n,s,r)))/2,l===u?o=a=0:(c=l-u,a=h>.5?c/(2-l-u):c/(l+u),o=l===n?(s-r)/c+(s<r?6:0):l===s?(r-n)/c+2:(n-s)/c+4,o*=60),_[0]=~~(o+.5),_[1]=~~(100*a+.5),_[2]=~~(100*h+.5)),i&&_.length<4&&(_[3]=1),_},Le=function(t){var e=[],i=[],n=-1;return t.split(Ue).forEach((function(t){var s=t.match(z)||[];e.push.apply(e,s),i.push(n+=s.length+1)})),e.c=i,e},Pe=function(t,e,i){var n,s,r,o,a="",h=(t+a).match(Ue),l=e?"hsla(":"rgba(",u=0;if(!h)return t;if(h=h.map((function(t){return(t=Me(t,e,1))&&l+(e?t[0]+","+t[1]+"%,"+t[2]+"%,"+t[3]:t.join(","))+")"})),i&&(r=Le(t),(n=i.c).join(a)!==r.c.join(a)))for(o=(s=t.replace(Ue,"1").split(z)).length-1;u<o;u++)a+=s[u]+(~n.indexOf(u)?h.shift()||l+"0,0,0,0)":(r.length?r:h.length?h:i).shift());if(!s)for(o=(s=t.split(Ue)).length-1;u<o;u++)a+=s[u]+h[u];return a+s[o]},Ue=function(){var t,e="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b";for(t in De)e+="|"+t+"\\b";return new RegExp(e+")","gi")}(),Ne=/hsl[a]?\(/,Ie=function(t){var e,i=t.join(" ");if(Ue.lastIndex=0,Ue.test(i))return e=Ne.test(i),t[1]=Pe(t[1],e),t[0]=Pe(t[0],e,Le(t[1])),!0},Re=function(){var t,e,i,n,s,r,o=Date.now,c=500,d=33,p=o(),f=p,v=1e3/240,g=v,y=[],m=function i(a){var h,l,u,_,m=o()-f,k=!0===a;if(m>c&&(p+=m-d),((h=(u=(f+=m)-p)-g)>0||k)&&(_=++n.frame,s=u-1e3*n.time,n.time=u/=1e3,g+=h+(h>=v?4:v-h),l=1),k||(t=e(i)),l)for(r=0;r<y.length;r++)y[r](u,s,_,a)};return n={time:0,frame:0,tick:function(){m(!0)},deltaRatio:function(t){return s/(1e3/(t||60))},wake:function(){u&&(!h&&I()&&(a=h=window,l=a.document||{},G.gsap=Bi,(a.gsapVersions||(a.gsapVersions=[])).push(Bi.version),q(K||a.GreenSockGlobals||!a.gsap&&a||{}),i=a.requestAnimationFrame),t&&n.sleep(),e=i||function(t){return setTimeout(t,g-1e3*n.time+1|0)},_=1,m(2))},sleep:function(){(i?a.cancelAnimationFrame:clearTimeout)(t),_=0,e=$},lagSmoothing:function(t,e){c=t||1/0,d=Math.min(e||33,c)},fps:function(t){v=1e3/(t||240),g=1e3*n.time+v},add:function(t,e,i){var s=e?function(e,i,r,o){t(e,i,r,o),n.remove(s)}:t;return n.remove(t),y[i?"unshift":"push"](s),Fe(),s},remove:function(t,e){~(e=y.indexOf(t))&&y.splice(e,1)&&r>=e&&r--},_listeners:y},n}(),Fe=function(){return!_&&Re.wake()},Ye={},Xe=/^[\d.\-M][\d.\-,\s]/,Be=/["']/g,ze=function(t){for(var e,i,n,s={},r=t.substr(1,t.length-3).split(":"),o=r[0],a=1,h=r.length;a<h;a++)i=r[a],e=a!==h-1?i.lastIndexOf(","):i.length,n=i.substr(0,e),s[o]=isNaN(n)?n.replace(Be,"").trim():+n,o=i.substr(e+1).trim();return s},Ve=function(t){var e=t.indexOf("(")+1,i=t.indexOf(")"),n=t.indexOf("(",e);return t.substring(e,~n&&n<i?t.indexOf(")",i+1):i)},He=function(t){var e=(t+"").split("("),i=Ye[e[0]];return i&&e.length>1&&i.config?i.config.apply(null,~t.indexOf("{")?[ze(e[1])]:Ve(t).split(",").map(xt)):Ye._CE&&Xe.test(t)?Ye._CE("",t):i},We=function(t){return function(e){return 1-t(1-e)}},je=function t(e,i){for(var n,s=e._first;s;)s instanceof ti?t(s,i):!s.vars.yoyoEase||s._yoyo&&s._repeat||s._yoyo===i||(s.timeline?t(s.timeline,i):(n=s._ease,s._ease=s._yEase,s._yEase=n,s._yoyo=i)),s=s._next},Ge=function(t,e){return t&&(M(t)?t:Ye[t]||He(t))||e},Ke=function(t,e,i,n){void 0===i&&(i=function(t){return 1-e(1-t)}),void 0===n&&(n=function(t){return t<.5?e(2*t)/2:1-e(2*(1-t))/2});var s,r={easeIn:e,easeOut:i,easeInOut:n};return pt(t,(function(t){for(var e in Ye[t]=G[t]=r,Ye[s=t.toLowerCase()]=i,r)Ye[s+("easeIn"===e?".in":"easeOut"===e?".out":".inOut")]=Ye[t+"."+e]=r[e]})),r},qe=function(t){return function(e){return e<.5?(1-t(1-2*e))/2:.5+t(2*(e-.5))/2}},Je=function t(e,i,n){var s=i>=1?i:1,r=(n||(e?.3:.45))/(i<1?i:1),o=r/S*(Math.asin(1/s)||0),a=function(t){return 1===t?1:s*Math.pow(2,-10*t)*D((t-o)*r)+1},h="out"===e?a:"in"===e?function(t){return 1-a(1-t)}:qe(a);return r=S/r,h.config=function(i,n){return t(e,i,n)},h},Ze=function t(e,i){void 0===i&&(i=1.70158);var n=function(t){return t?--t*t*((i+1)*t+i)+1:0},s="out"===e?n:"in"===e?function(t){return 1-n(1-t)}:qe(n);return s.config=function(i){return t(e,i)},s};pt("Linear,Quad,Cubic,Quart,Quint,Strong",(function(t,e){var i=e<5?e+1:e;Ke(t+",Power"+(i-1),e?function(t){return Math.pow(t,i)}:function(t){return t},(function(t){return 1-Math.pow(1-t,i)}),(function(t){return t<.5?Math.pow(2*t,i)/2:1-Math.pow(2*(1-t),i)/2}))})),Ye.Linear.easeNone=Ye.none=Ye.Linear.easeIn,Ke("Elastic",Je("in"),Je("out"),Je()),p=7.5625,g=2*(v=1/(f=2.75)),y=2.5*v,m=function(t){return t<v?p*t*t:t<g?p*Math.pow(t-1.5/f,2)+.75:t<y?p*(t-=2.25/f)*t+.9375:p*Math.pow(t-2.625/f,2)+.984375},Ke("Bounce",(function(t){return 1-m(1-t)}),m),Ke("Expo",(function(t){return t?Math.pow(2,10*(t-1)):0})),Ke("Circ",(function(t){return-(E(1-t*t)-1)})),Ke("Sine",(function(t){return 1===t?1:1-A(t*T)})),Ke("Back",Ze("in"),Ze("out"),Ze()),Ye.SteppedEase=Ye.steps=G.SteppedEase={config:function(t,e){void 0===t&&(t=1);var i=1/t,n=t+(e?0:1),s=e?1:0,r=1-w;return function(t){return((n*ie(0,r,t)|0)+s)*i}}},x.ease=Ye["quad.out"],pt("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",(function(t){return ut+=t+","+t+"Params,"}));var Qe=function(t,e){this.id=O++,t._gsap=this,this.target=t,this.harness=e,this.get=e?e.get:_t,this.set=e?e.getSetter:mi},$e=function(){function t(t){this.vars=t,this._delay=+t.delay||0,(this._repeat=t.repeat===1/0?-2:t.repeat||0)&&(this._rDelay=t.repeatDelay||0,this._yoyo=!!t.yoyo||!!t.yoyoEase),this._ts=1,Jt(this,+t.duration,1,1),this.data=t.data,r&&(this._ctx=r,r.data.push(this)),_||Re.wake()}var e=t.prototype;return e.delay=function(t){return t||0===t?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+t-this._delay),this._delay=t,this):this._delay},e.duration=function(t){return arguments.length?this.totalDuration(this._repeat>0?t+(t+this._rDelay)*this._repeat:t):this.totalDuration()&&this._dur},e.totalDuration=function(t){return arguments.length?(this._dirty=0,Jt(this,this._repeat<0?t:(t-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},e.totalTime=function(t,e){if(Fe(),!arguments.length)return this._tTime;var i=this._dp;if(i&&i.smoothChildTiming&&this._ts){for(Bt(this,t),!i._dp||i.parent||zt(i,this);i&&i.parent;)i.parent._time!==i._start+(i._ts>=0?i._tTime/i._ts:(i.totalDuration()-i._tTime)/-i._ts)&&i.totalTime(i._tTime,!0),i=i.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&t<this._tDur||this._ts<0&&t>0||!this._tDur&&!t)&&Vt(this._dp,this,this._start-this._delay)}return(this._tTime!==t||!this._dur&&!e||this._initted&&Math.abs(this._zTime)===w||!t&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=t),kt(this,t,e)),this},e.time=function(t,e){return arguments.length?this.totalTime(Math.min(this.totalDuration(),t+Rt(this))%(this._dur+this._rDelay)||(t?this._dur:0),e):this._time},e.totalProgress=function(t,e){return arguments.length?this.totalTime(this.totalDuration()*t,e):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.ratio},e.progress=function(t,e){return arguments.length?this.totalTime(this.duration()*(!this._yoyo||1&this.iteration()?t:1-t)+Rt(this),e):this.duration()?Math.min(1,this._time/this._dur):this.ratio},e.iteration=function(t,e){var i=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(t-1)*i,e):this._repeat?Ft(this._tTime,i)+1:1},e.timeScale=function(t){if(!arguments.length)return this._rts===-w?0:this._rts;if(this._rts===t)return this;var e=this.parent&&this._ts?Yt(this.parent._time,this):this._tTime;return this._rts=+t||0,this._ts=this._ps||t===-w?0:this._rts,this.totalTime(ie(-this._delay,this._tDur,e),!0),Xt(this),Ut(this)},e.paused=function(t){return arguments.length?(this._ps!==t&&(this._ps=t,t?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(Fe(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,1===this.progress()&&Math.abs(this._zTime)!==w&&(this._tTime-=w)))),this):this._ps},e.startTime=function(t){if(arguments.length){this._start=t;var e=this.parent||this._dp;return e&&(e._sort||!this.parent)&&Vt(e,this,t-this._delay),this}return this._start},e.endTime=function(t){return this._start+(N(t)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},e.rawTime=function(t){var e=this.parent||this._dp;return e?t&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?Yt(e.rawTime(t),this):this._tTime:this._tTime},e.revert=function(t){void 0===t&&(t=it);var e=s;return s=t,(this._initted||this._startAt)&&(this.timeline&&this.timeline.revert(t),this.totalTime(-.01,t.suppressEvents)),"nested"!==this.data&&!1!==t.kill&&this.kill(),s=e,this},e.globalTime=function(t){for(var e=this,i=arguments.length?t:e.rawTime();e;)i=e._start+i/(e._ts||1),e=e._dp;return!this.parent&&this._sat?this._sat.vars.immediateRender?-1:this._sat.globalTime(t):i},e.repeat=function(t){return arguments.length?(this._repeat=t===1/0?-2:t,Zt(this)):-2===this._repeat?1/0:this._repeat},e.repeatDelay=function(t){if(arguments.length){var e=this._time;return this._rDelay=t,Zt(this),e?this.time(e):this}return this._rDelay},e.yoyo=function(t){return arguments.length?(this._yoyo=t,this):this._yoyo},e.seek=function(t,e){return this.totalTime($t(this,t),N(e))},e.restart=function(t,e){return this.play().totalTime(t?-this._delay:0,N(e))},e.play=function(t,e){return null!=t&&this.seek(t,e),this.reversed(!1).paused(!1)},e.reverse=function(t,e){return null!=t&&this.seek(t||this.totalDuration(),e),this.reversed(!0).paused(!1)},e.pause=function(t,e){return null!=t&&this.seek(t,e),this.paused(!0)},e.resume=function(){return this.paused(!1)},e.reversed=function(t){return arguments.length?(!!t!==this.reversed()&&this.timeScale(-this._rts||(t?-w:0)),this):this._rts<0},e.invalidate=function(){return this._initted=this._act=0,this._zTime=-w,this},e.isActive=function(){var t,e=this.parent||this._dp,i=this._start;return!(e&&!(this._ts&&this._initted&&e.isActive()&&(t=e.rawTime(!0))>=i&&t<this.endTime(!0)-w))},e.eventCallback=function(t,e,i){var n=this.vars;return arguments.length>1?(e?(n[t]=e,i&&(n[t+"Params"]=i),"onUpdate"===t&&(this._onUpdate=e)):delete n[t],this):n[t]},e.then=function(t){var e=this;return new Promise((function(i){var n=M(t)?t:bt,s=function(){var t=e.then;e.then=null,M(n)&&(n=n(e))&&(n.then||n===e)&&(e.then=t),i(n),e.then=t};e._initted&&1===e.totalProgress()&&e._ts>=0||!e._tTime&&e._ts<0?s():e._prom=s}))},e.kill=function(){Oe(this)},t}();wt($e.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-w,_prom:0,_ps:!1,_rts:1});var ti=function(t){function n(e,n){var s;return void 0===e&&(e={}),(s=t.call(this,e)||this).labels={},s.smoothChildTiming=!!e.smoothChildTiming,s.autoRemoveChildren=!!e.autoRemoveChildren,s._sort=N(e.sortChildren),o&&Vt(e.parent||o,i(s),n),e.reversed&&s.reverse(),e.paused&&s.paused(!0),e.scrollTrigger&&Ht(i(s),e.scrollTrigger),s}e(n,t);var r=n.prototype;return r.to=function(t,e,i){return te(0,arguments,this),this},r.from=function(t,e,i){return te(1,arguments,this),this},r.fromTo=function(t,e,i,n){return te(2,arguments,this),this},r.set=function(t,e,i){return e.duration=0,e.parent=this,At(e).repeatDelay||(e.repeat=0),e.immediateRender=!!e.immediateRender,new pi(t,e,$t(this,i),1),this},r.call=function(t,e,i){return Vt(this,pi.delayedCall(0,t,e),i)},r.staggerTo=function(t,e,i,n,s,r,o){return i.duration=e,i.stagger=i.stagger||n,i.onComplete=r,i.onCompleteParams=o,i.parent=this,new pi(t,i,$t(this,s)),this},r.staggerFrom=function(t,e,i,n,s,r,o){return i.runBackwards=1,At(i).immediateRender=N(i.immediateRender),this.staggerTo(t,e,i,n,s,r,o)},r.staggerFromTo=function(t,e,i,n,s,r,o,a){return n.startAt=i,At(n).immediateRender=N(n.immediateRender),this.staggerTo(t,e,n,s,r,o,a)},r.render=function(t,e,i){var n,r,a,h,l,u,c,d,_,p,f,v,g=this._time,y=this._dirty?this.totalDuration():this._tDur,m=this._dur,k=t<=0?0:vt(t),x=this._zTime<0!=t<0&&(this._initted||!m);if(this!==o&&k>y&&t>=0&&(k=y),k!==this._tTime||i||x){if(g!==this._time&&m&&(k+=this._time-g,t+=this._time-g),n=k,_=this._start,u=!(d=this._ts),x&&(m||(g=this._zTime),(t||!e)&&(this._zTime=t)),this._repeat){if(f=this._yoyo,l=m+this._rDelay,this._repeat<-1&&t<0)return this.totalTime(100*l+t,e,i);if(n=vt(k%l),k===y?(h=this._repeat,n=m):((h=~~(k/l))&&h===k/l&&(n=m,h--),n>m&&(n=m)),p=Ft(this._tTime,l),!g&&this._tTime&&p!==h&&(p=h),f&&1&h&&(n=m-n,v=1),h!==p&&!this._lock){var b=f&&1&p,S=b===(f&&1&h);if(h<p&&(b=!b),g=b?0:m,this._lock=1,this.render(g||(v?0:vt(h*l)),e,!m)._lock=0,this._tTime=k,!e&&this.parent&&Te(this,"onRepeat"),this.vars.repeatRefresh&&!v&&(this.invalidate()._lock=1),g&&g!==this._time||u!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(m=this._dur,y=this._tDur,S&&(this._lock=2,g=b?m:-1e-4,this.render(g,!0),this.vars.repeatRefresh&&!v&&this.invalidate()),this._lock=0,!this._ts&&!u)return this;je(this,v)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(c=qt(this,vt(g),vt(n)))&&(k-=n-(n=c._start)),this._tTime=k,this._time=n,this._act=!d,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=t,g=0),!g&&n&&!e&&(Te(this,"onStart"),this._tTime!==k))return this;if(n>=g&&t>=0)for(r=this._first;r;){if(a=r._next,(r._act||n>=r._start)&&r._ts&&c!==r){if(r.parent!==this)return this.render(t,e,i);if(r.render(r._ts>0?(n-r._start)*r._ts:(r._dirty?r.totalDuration():r._tDur)+(n-r._start)*r._ts,e,i),n!==this._time||!this._ts&&!u){c=0,a&&(k+=this._zTime=-w);break}}r=a}else{r=this._last;for(var T=t<0?t:n;r;){if(a=r._prev,(r._act||T<=r._end)&&r._ts&&c!==r){if(r.parent!==this)return this.render(t,e,i);if(r.render(r._ts>0?(T-r._start)*r._ts:(r._dirty?r.totalDuration():r._tDur)+(T-r._start)*r._ts,e,i||s&&(r._initted||r._startAt)),n!==this._time||!this._ts&&!u){c=0,a&&(k+=this._zTime=T?-w:w);break}}r=a}}if(c&&!e&&(this.pause(),c.render(n>=g?0:-w)._zTime=n>=g?1:-1,this._ts))return this._start=_,Xt(this),this.render(t,e,i);this._onUpdate&&!e&&Te(this,"onUpdate",!0),(k===y&&this._tTime>=this.totalDuration()||!k&&g)&&(_!==this._start&&Math.abs(d)===Math.abs(this._ts)||this._lock||((t||!m)&&(k===y&&this._ts>0||!k&&this._ts<0)&&Lt(this,1),e||t<0&&!g||!k&&!g&&y||(Te(this,k===y&&t>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(k<y&&this.timeScale()>0)&&this._prom())))}return this},r.add=function(t,e){var i=this;if(L(e)||(e=$t(this,e,t)),!(t instanceof $e)){if(Y(t))return t.forEach((function(t){return i.add(t,e)})),this;if(C(t))return this.addLabel(t,e);if(!M(t))return this;t=pi.delayedCall(0,t)}return this!==t?Vt(this,t,e):this},r.getChildren=function(t,e,i,n){void 0===t&&(t=!0),void 0===e&&(e=!0),void 0===i&&(i=!0),void 0===n&&(n=-b);for(var s=[],r=this._first;r;)r._start>=n&&(r instanceof pi?e&&s.push(r):(i&&s.push(r),t&&s.push.apply(s,r.getChildren(!0,e,i)))),r=r._next;return s},r.getById=function(t){for(var e=this.getChildren(1,1,1),i=e.length;i--;)if(e[i].vars.id===t)return e[i]},r.remove=function(t){return C(t)?this.removeLabel(t):M(t)?this.killTweensOf(t):(Mt(this,t),t===this._recent&&(this._recent=this._last),Pt(this))},r.totalTime=function(e,i){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=vt(Re.time-(this._ts>0?e/this._ts:(this.totalDuration()-e)/-this._ts))),t.prototype.totalTime.call(this,e,i),this._forcing=0,this):this._tTime},r.addLabel=function(t,e){return this.labels[t]=$t(this,e),this},r.removeLabel=function(t){return delete this.labels[t],this},r.addPause=function(t,e,i){var n=pi.delayedCall(0,e||$,i);return n.data="isPause",this._hasPause=1,Vt(this,n,$t(this,t))},r.removePause=function(t){var e=this._first;for(t=$t(this,t);e;)e._start===t&&"isPause"===e.data&&Lt(e),e=e._next},r.killTweensOf=function(t,e,i){for(var n=this.getTweensOf(t,i),s=n.length;s--;)ei!==n[s]&&n[s].kill(t,e);return this},r.getTweensOf=function(t,e){for(var i,n=[],s=he(t),r=this._first,o=L(e);r;)r instanceof pi?yt(r._targets,s)&&(o?(!ei||r._initted&&r._ts)&&r.globalTime(0)<=e&&r.globalTime(r.totalDuration())>e:!e||r.isActive())&&n.push(r):(i=r.getTweensOf(s,e)).length&&n.push.apply(n,i),r=r._next;return n},r.tweenTo=function(t,e){e=e||{};var i,n=this,s=$t(n,t),r=e,o=r.startAt,a=r.onStart,h=r.onStartParams,l=r.immediateRender,u=pi.to(n,wt({ease:e.ease||"none",lazy:!1,immediateRender:!1,time:s,overwrite:"auto",duration:e.duration||Math.abs((s-(o&&"time"in o?o.time:n._time))/n.timeScale())||w,onStart:function(){if(n.pause(),!i){var t=e.duration||Math.abs((s-(o&&"time"in o?o.time:n._time))/n.timeScale());u._dur!==t&&Jt(u,t,0,1).render(u._time,!0,!0),i=1}a&&a.apply(u,h||[])}},e));return l?u.render(0):u},r.tweenFromTo=function(t,e,i){return this.tweenTo(e,wt({startAt:{time:$t(this,t)}},i))},r.recent=function(){return this._recent},r.nextLabel=function(t){return void 0===t&&(t=this._time),Se(this,$t(this,t))},r.previousLabel=function(t){return void 0===t&&(t=this._time),Se(this,$t(this,t),1)},r.currentLabel=function(t){return arguments.length?this.seek(t,!0):this.previousLabel(this._time+w)},r.shiftChildren=function(t,e,i){void 0===i&&(i=0);for(var n,s=this._first,r=this.labels;s;)s._start>=i&&(s._start+=t,s._end+=t),s=s._next;if(e)for(n in r)r[n]>=i&&(r[n]+=t);return Pt(this)},r.invalidate=function(e){var i=this._first;for(this._lock=0;i;)i.invalidate(e),i=i._next;return t.prototype.invalidate.call(this,e)},r.clear=function(t){void 0===t&&(t=!0);for(var e,i=this._first;i;)e=i._next,this.remove(i),i=e;return this._dp&&(this._time=this._tTime=this._pTime=0),t&&(this.labels={}),Pt(this)},r.totalDuration=function(t){var e,i,n,s=0,r=this,a=r._last,h=b;if(arguments.length)return r.timeScale((r._repeat<0?r.duration():r.totalDuration())/(r.reversed()?-t:t));if(r._dirty){for(n=r.parent;a;)e=a._prev,a._dirty&&a.totalDuration(),(i=a._start)>h&&r._sort&&a._ts&&!r._lock?(r._lock=1,Vt(r,a,i-a._delay,1)._lock=0):h=i,i<0&&a._ts&&(s-=i,(!n&&!r._dp||n&&n.smoothChildTiming)&&(r._start+=i/r._ts,r._time-=i,r._tTime-=i),r.shiftChildren(-i,!1,-Infinity),h=0),a._end>s&&a._ts&&(s=a._end),a=e;Jt(r,r===o&&r._time>s?r._time:s,1,1),r._dirty=0}return r._tDur},n.updateRoot=function(t){if(o._ts&&(kt(o,Yt(t,o)),c=Re.frame),Re.frame>=ht){ht+=k.autoSleep||120;var e=o._first;if((!e||!e._ts)&&k.autoSleep&&Re._listeners.length<2){for(;e&&!e._ts;)e=e._next;e||Re.sleep()}}},n}($e);wt(ti.prototype,{_lock:0,_hasPause:0,_forcing:0});var ei,ii,ni=function(t,e,i,n,s,r,o){var a,h,l,u,c,d,_,p,f=new Ai(this._pt,t,e,0,1,bi,null,s),v=0,g=0;for(f.b=i,f.e=n,i+="",(_=~(n+="").indexOf("random("))&&(n=xe(n)),r&&(r(p=[i,n],t,e),i=p[0],n=p[1]),h=i.match(V)||[];a=V.exec(n);)u=a[0],c=n.substring(v,a.index),l?l=(l+1)%5:"rgba("===c.substr(-5)&&(l=1),u!==h[g++]&&(d=parseFloat(h[g-1])||0,f._pt={_next:f._pt,p:c||1===g?c:",",s:d,c:"="===u.charAt(1)?gt(d,u)-d:parseFloat(u)-d,m:l&&l<4?Math.round:0},v=V.lastIndex);return f.c=v<n.length?n.substring(v,n.length):"",f.fp=o,(H.test(n)||_)&&(f.e=0),this._pt=f,f},si=function(t,e,i,n,s,r,o,a,h,l){M(n)&&(n=n(s||0,t,r));var u,c=t[e],d="get"!==i?i:M(c)?h?t[e.indexOf("set")||!M(t["get"+e.substr(3)])?e:"get"+e.substr(3)](h):t[e]():c,_=M(c)?h?gi:vi:fi;if(C(n)&&(~n.indexOf("random(")&&(n=xe(n)),"="===n.charAt(1)&&((u=gt(d,n)+(ne(d)||0))||0===u)&&(n=u)),!l||d!==n||ii)return isNaN(d*n)||""===n?(!c&&!(e in t)&&J(e,n),ni.call(this,t,e,d,n,_,a||k.stringFilter,h)):(u=new Ai(this._pt,t,e,+d||0,n-(d||0),"boolean"==typeof c?xi:ki,0,_),h&&(u.fp=h),o&&u.modifier(o,this,t),this._pt=u)},ri=function(t,e,i,n,s){if(M(t)&&(t=ci(t,s,e,i,n)),!U(t)||t.style&&t.nodeType||Y(t)||F(t))return C(t)?ci(t,s,e,i,n):t;var r,o={};for(r in t)o[r]=ci(t[r],s,e,i,n);return o},oi=function(t,e,i,n,s,r){var o,a,h,l;if(ot[t]&&!1!==(o=new ot[t]).init(s,o.rawVars?e[t]:ri(e[t],n,s,r,i),i,n,r)&&(i._pt=a=new Ai(i._pt,s,t,0,1,o.render,o,0,o.priority),i!==d))for(h=i._ptLookup[i._targets.indexOf(s)],l=o._props.length;l--;)h[o._props[l]]=a;return o},ai=function t(e,i,r){var a,h,l,u,c,d,_,p,f,v,g,y,m,k=e.vars,S=k.ease,T=k.startAt,O=k.immediateRender,E=k.lazy,A=k.onUpdate,D=k.onUpdateParams,C=k.callbackScope,M=k.runBackwards,L=k.yoyoEase,P=k.keyframes,U=k.autoRevert,I=e._dur,R=e._startAt,F=e._targets,Y=e.parent,X=Y&&"nested"===Y.data?Y.vars.targets:F,B="auto"===e._overwrite&&!n,z=e.timeline;if(z&&(!P||!S)&&(S="none"),e._ease=Ge(S,x.ease),e._yEase=L?We(Ge(!0===L?S:L,x.ease)):0,L&&e._yoyo&&!e._repeat&&(L=e._yEase,e._yEase=e._ease,e._ease=L),e._from=!z&&!!k.runBackwards,!z||P&&!k.stagger){if(y=(p=F[0]?dt(F[0]).harness:0)&&k[p.prop],a=Et(k,nt),R&&(R._zTime<0&&R.progress(1),i<0&&M&&O&&!U?R.render(-1,!0):R.revert(M&&I?et:tt),R._lazy=0),T){if(Lt(e._startAt=pi.set(F,wt({data:"isStart",overwrite:!1,parent:Y,immediateRender:!0,lazy:!R&&N(E),startAt:null,delay:0,onUpdate:A,onUpdateParams:D,callbackScope:C,stagger:0},T))),e._startAt._dp=0,e._startAt._sat=e,i<0&&(s||!O&&!U)&&e._startAt.revert(et),O&&I&&i<=0&&r<=0)return void(i&&(e._zTime=i))}else if(M&&I&&!R)if(i&&(O=!1),l=wt({overwrite:!1,data:"isFromStart",lazy:O&&!R&&N(E),immediateRender:O,stagger:0,parent:Y},a),y&&(l[p.prop]=y),Lt(e._startAt=pi.set(F,l)),e._startAt._dp=0,e._startAt._sat=e,i<0&&(s?e._startAt.revert(et):e._startAt.render(-1,!0)),e._zTime=i,O){if(!i)return}else t(e._startAt,w,w);for(e._pt=e._ptCache=0,E=I&&N(E)||E&&!I,h=0;h<F.length;h++){if(_=(c=F[h])._gsap||ct(F)[h]._gsap,e._ptLookup[h]=v={},rt[_.id]&&st.length&&mt(),g=X===F?h:X.indexOf(c),p&&!1!==(f=new p).init(c,y||a,e,g,X)&&(e._pt=u=new Ai(e._pt,c,f.name,0,1,f.render,f,0,f.priority),f._props.forEach((function(t){v[t]=u})),f.priority&&(d=1)),!p||y)for(l in a)ot[l]&&(f=oi(l,a,e,g,c,X))?f.priority&&(d=1):v[l]=u=si.call(e,c,l,"get",a[l],g,X,0,k.stringFilter);e._op&&e._op[h]&&e.kill(c,e._op[h]),B&&e._pt&&(ei=e,o.killTweensOf(c,v,e.globalTime(i)),m=!e.parent,ei=0),e._pt&&E&&(rt[_.id]=1)}d&&Ei(e),e._onInit&&e._onInit(e)}e._onUpdate=A,e._initted=(!e._op||e._pt)&&!m,P&&i<=0&&z.render(b,!0,!0)},hi=function(t,e,i,n,s,r,o){var a,h,l,u,c=(t._pt&&t._ptCache||(t._ptCache={}))[e];if(!c)for(c=t._ptCache[e]=[],l=t._ptLookup,u=t._targets.length;u--;){if((a=l[u][e])&&a.d&&a.d._pt)for(a=a.d._pt;a&&a.p!==e&&a.fp!==e;)a=a._next;if(!a)return ii=1,t.vars[e]="+=0",ai(t,o),ii=0,1;c.push(a)}for(u=c.length;u--;)(a=(h=c[u])._pt||h).s=!n&&0!==n||s?a.s+(n||0)+r*a.c:n,a.c=i-a.s,h.e&&(h.e=ft(i)+ne(h.e)),h.b&&(h.b=a.s+ne(h.b))},li=function(t,e){var i,n,s,r,o=t[0]?dt(t[0]).harness:0,a=o&&o.aliases;if(!a)return e;for(n in i=Tt({},e),a)if(n in i)for(s=(r=a[n].split(",")).length;s--;)i[r[s]]=i[n];return i},ui=function(t,e,i,n){var s,r,o=e.ease||n||"power1.inOut";if(Y(e))r=i[t]||(i[t]=[]),e.forEach((function(t,i){return r.push({t:i/(e.length-1)*100,v:t,e:o})}));else for(s in e)r=i[s]||(i[s]=[]),"ease"===s||r.push({t:parseFloat(t),v:e[s],e:o})},ci=function(t,e,i,n,s){return M(t)?t.call(e,i,n,s):C(t)&&~t.indexOf("random(")?xe(t):t},di=ut+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",_i={};pt(di+",id,stagger,delay,duration,paused,scrollTrigger",(function(t){return _i[t]=1}));var pi=function(t){function s(e,s,r,a){var h;"number"==typeof s&&(r.duration=s,s=r,r=null);var l,u,c,d,_,p,f,v,g=(h=t.call(this,a?s:At(s))||this).vars,y=g.duration,m=g.delay,x=g.immediateRender,b=g.stagger,S=g.overwrite,T=g.keyframes,O=g.defaults,E=g.scrollTrigger,A=g.yoyoEase,D=s.parent||o,C=(Y(e)||F(e)?L(e[0]):"length"in s)?[e]:he(e);if(h._targets=C.length?ct(C):Z("GSAP target "+e+" not found. https://greensock.com",!k.nullTargetWarn)||[],h._ptLookup=[],h._overwrite=S,T||b||R(y)||R(m)){if(s=h.vars,(l=h.timeline=new ti({data:"nested",defaults:O||{},targets:D&&"nested"===D.data?D.vars.targets:C})).kill(),l.parent=l._dp=i(h),l._start=0,b||R(y)||R(m)){if(d=C.length,f=b&&ce(b),U(b))for(_ in b)~di.indexOf(_)&&(v||(v={}),v[_]=b[_]);for(u=0;u<d;u++)(c=Et(s,_i)).stagger=0,A&&(c.yoyoEase=A),v&&Tt(c,v),p=C[u],c.duration=+ci(y,i(h),u,p,C),c.delay=(+ci(m,i(h),u,p,C)||0)-h._delay,!b&&1===d&&c.delay&&(h._delay=m=c.delay,h._start+=m,c.delay=0),l.to(p,c,f?f(u,p,C):0),l._ease=Ye.none;l.duration()?y=m=0:h.timeline=0}else if(T){At(wt(l.vars.defaults,{ease:"none"})),l._ease=Ge(T.ease||s.ease||"none");var M,P,I,X=0;if(Y(T))T.forEach((function(t){return l.to(C,t,">")})),l.duration();else{for(_ in c={},T)"ease"===_||"easeEach"===_||ui(_,T[_],c,T.easeEach);for(_ in c)for(M=c[_].sort((function(t,e){return t.t-e.t})),X=0,u=0;u<M.length;u++)(I={ease:(P=M[u]).e,duration:(P.t-(u?M[u-1].t:0))/100*y})[_]=P.v,l.to(C,I,X),X+=I.duration;l.duration()<y&&l.to({},{duration:y-l.duration()})}}y||h.duration(y=l.duration())}else h.timeline=0;return!0!==S||n||(ei=i(h),o.killTweensOf(C),ei=0),Vt(D,i(h),r),s.reversed&&h.reverse(),s.paused&&h.paused(!0),(x||!y&&!T&&h._start===vt(D._time)&&N(x)&&It(i(h))&&"nested"!==D.data)&&(h._tTime=-w,h.render(Math.max(0,-m)||0)),E&&Ht(i(h),E),h}e(s,t);var r=s.prototype;return r.render=function(t,e,i){var n,s,r,o,a,h,l,u,c,d=this._time,_=this._tDur,p=this._dur,f=t<0,v=t>_-w&&!f?_:t<w?0:t;if(p){if(v!==this._tTime||!t||i||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==f){if(n=v,u=this.timeline,this._repeat){if(o=p+this._rDelay,this._repeat<-1&&f)return this.totalTime(100*o+t,e,i);if(n=vt(v%o),v===_?(r=this._repeat,n=p):((r=~~(v/o))&&r===v/o&&(n=p,r--),n>p&&(n=p)),(h=this._yoyo&&1&r)&&(c=this._yEase,n=p-n),a=Ft(this._tTime,o),n===d&&!i&&this._initted)return this._tTime=v,this;r!==a&&(u&&this._yEase&&je(u,h),!this.vars.repeatRefresh||h||this._lock||(this._lock=i=1,this.render(vt(o*r),!0).invalidate()._lock=0))}if(!this._initted){if(Wt(this,f?t:n,i,e,v))return this._tTime=0,this;if(d!==this._time)return this;if(p!==this._dur)return this.render(t,e,i)}if(this._tTime=v,this._time=n,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=l=(c||this._ease)(n/p),this._from&&(this.ratio=l=1-l),n&&!d&&!e&&(Te(this,"onStart"),this._tTime!==v))return this;for(s=this._pt;s;)s.r(l,s.d),s=s._next;u&&u.render(t<0?t:!n&&h?-w:u._dur*u._ease(n/this._dur),e,i)||this._startAt&&(this._zTime=t),this._onUpdate&&!e&&(f&&Nt(this,t,e,i),Te(this,"onUpdate")),this._repeat&&r!==a&&this.vars.onRepeat&&!e&&this.parent&&Te(this,"onRepeat"),v!==this._tDur&&v||this._tTime!==v||(f&&!this._onUpdate&&Nt(this,t,!0,!0),(t||!p)&&(v===this._tDur&&this._ts>0||!v&&this._ts<0)&&Lt(this,1),e||f&&!d||!(v||d||h)||(Te(this,v===_?"onComplete":"onReverseComplete",!0),this._prom&&!(v<_&&this.timeScale()>0)&&this._prom()))}}else Kt(this,t,e,i);return this},r.targets=function(){return this._targets},r.invalidate=function(e){return(!e||!this.vars.runBackwards)&&(this._startAt=0),this._pt=this._op=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(e),t.prototype.invalidate.call(this,e)},r.resetTo=function(t,e,i,n){_||Re.wake(),this._ts||this.play();var s,r=Math.min(this._dur,(this._dp._time-this._start)*this._ts);return this._initted||ai(this,r),s=this._ease(r/this._dur),hi(this,t,e,i,n,s,r)?this.resetTo(t,e,i,n):(Bt(this,0),this.parent||Ct(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},r.kill=function(t,e){if(void 0===e&&(e="all"),!(t||e&&"all"!==e))return this._lazy=this._pt=0,this.parent?Oe(this):this;if(this.timeline){var i=this.timeline.totalDuration();return this.timeline.killTweensOf(t,e,ei&&!0!==ei.vars.overwrite)._first||Oe(this),this.parent&&i!==this.timeline.totalDuration()&&Jt(this,this._dur*this.timeline._tDur/i,0,1),this}var n,s,r,o,a,h,l,u=this._targets,c=t?he(t):u,d=this._ptLookup,_=this._pt;if((!e||"all"===e)&&Dt(u,c))return"all"===e&&(this._pt=0),Oe(this);for(n=this._op=this._op||[],"all"!==e&&(C(e)&&(a={},pt(e,(function(t){return a[t]=1})),e=a),e=li(u,e)),l=u.length;l--;)if(~c.indexOf(u[l]))for(a in s=d[l],"all"===e?(n[l]=e,o=s,r={}):(r=n[l]=n[l]||{},o=e),o)(h=s&&s[a])&&("kill"in h.d&&!0!==h.d.kill(a)||Mt(this,h,"_pt"),delete s[a]),"all"!==r&&(r[a]=1);return this._initted&&!this._pt&&_&&Oe(this),this},s.to=function(t,e){return new s(t,e,arguments[2])},s.from=function(t,e){return te(1,arguments)},s.delayedCall=function(t,e,i,n){return new s(e,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:t,onComplete:e,onReverseComplete:e,onCompleteParams:i,onReverseCompleteParams:i,callbackScope:n})},s.fromTo=function(t,e,i){return te(2,arguments)},s.set=function(t,e){return e.duration=0,e.repeatDelay||(e.repeat=0),new s(t,e)},s.killTweensOf=function(t,e,i){return o.killTweensOf(t,e,i)},s}($e);wt(pi.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0}),pt("staggerTo,staggerFrom,staggerFromTo",(function(t){pi[t]=function(){var e=new ti,i=re.call(arguments,0);return i.splice("staggerFromTo"===t?5:4,0,0),e[t].apply(e,i)}}));var fi=function(t,e,i){return t[e]=i},vi=function(t,e,i){return t[e](i)},gi=function(t,e,i,n){return t[e](n.fp,i)},yi=function(t,e,i){return t.setAttribute(e,i)},mi=function(t,e){return M(t[e])?vi:P(t[e])&&t.setAttribute?yi:fi},ki=function(t,e){return e.set(e.t,e.p,Math.round(1e6*(e.s+e.c*t))/1e6,e)},xi=function(t,e){return e.set(e.t,e.p,!!(e.s+e.c*t),e)},bi=function(t,e){var i=e._pt,n="";if(!t&&e.b)n=e.b;else if(1===t&&e.e)n=e.e;else{for(;i;)n=i.p+(i.m?i.m(i.s+i.c*t):Math.round(1e4*(i.s+i.c*t))/1e4)+n,i=i._next;n+=e.c}e.set(e.t,e.p,n,e)},wi=function(t,e){for(var i=e._pt;i;)i.r(t,i.d),i=i._next},Si=function(t,e,i,n){for(var s,r=this._pt;r;)s=r._next,r.p===n&&r.modifier(t,e,i),r=s},Ti=function(t){for(var e,i,n=this._pt;n;)i=n._next,n.p===t&&!n.op||n.op===t?Mt(this,n,"_pt"):n.dep||(e=1),n=i;return!e},Oi=function(t,e,i,n){n.mSet(t,e,n.m.call(n.tween,i,n.mt),n)},Ei=function(t){for(var e,i,n,s,r=t._pt;r;){for(e=r._next,i=n;i&&i.pr>r.pr;)i=i._next;(r._prev=i?i._prev:s)?r._prev._next=r:n=r,(r._next=i)?i._prev=r:s=r,r=e}t._pt=n},Ai=function(){function t(t,e,i,n,s,r,o,a,h){this.t=e,this.s=n,this.c=s,this.p=i,this.r=r||ki,this.d=o||this,this.set=a||fi,this.pr=h||0,this._next=t,t&&(t._prev=this)}return t.prototype.modifier=function(t,e,i){this.mSet=this.mSet||this.set,this.set=Oi,this.m=t,this.mt=i,this.tween=e},t}();pt(ut+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",(function(t){return nt[t]=1})),G.TweenMax=G.TweenLite=pi,G.TimelineLite=G.TimelineMax=ti,o=new ti({sortChildren:!1,defaults:x,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0}),k.stringFilter=Ie;var Di=[],Ci={},Mi=[],Li=0,Pi=function(t){return(Ci[t]||Mi).map((function(t){return t()}))},Ui=function(){var t=Date.now(),e=[];t-Li>2&&(Pi("matchMediaInit"),Di.forEach((function(t){var i,n,s,r,o=t.queries,h=t.conditions;for(n in o)(i=a.matchMedia(o[n]).matches)&&(s=1),i!==h[n]&&(h[n]=i,r=1);r&&(t.revert(),s&&e.push(t))})),Pi("matchMediaRevert"),e.forEach((function(t){return t.onMatch(t)})),Li=t,Pi("matchMedia"))},Ni=function(){function t(t,e){this.selector=e&&le(e),this.data=[],this._r=[],this.isReverted=!1,t&&this.add(t)}var e=t.prototype;return e.add=function(t,e,i){M(t)&&(i=e,e=t,t=M);var n=this,s=function(){var t,s=r,o=n.selector;return s&&s!==n&&s.data.push(n),i&&(n.selector=le(i)),r=n,t=e.apply(n,arguments),M(t)&&n._r.push(t),r=s,n.selector=o,n.isReverted=!1,t};return n.last=s,t===M?s(n):t?n[t]=s:s},e.ignore=function(t){var e=r;r=null,t(this),r=e},e.getTweens=function(){var e=[];return this.data.forEach((function(i){return i instanceof t?e.push.apply(e,i.getTweens()):i instanceof pi&&!(i.parent&&"nested"===i.parent.data)&&e.push(i)})),e},e.clear=function(){this._r.length=this.data.length=0},e.kill=function(t,e){var i=this;if(t){var n=this.getTweens();this.data.forEach((function(t){"isFlip"===t.data&&(t.revert(),t.getChildren(!0,!0,!1).forEach((function(t){return n.splice(n.indexOf(t),1)})))})),n.map((function(t){return{g:t.globalTime(0),t:t}})).sort((function(t,e){return e.g-t.g||-1})).forEach((function(e){return e.t.revert(t)})),this.data.forEach((function(e){return!(e instanceof $e)&&e.revert&&e.revert(t)})),this._r.forEach((function(e){return e(t,i)})),this.isReverted=!0}else this.data.forEach((function(t){return t.kill&&t.kill()}));if(this.clear(),e){var s=Di.indexOf(this);~s&&Di.splice(s,1)}},e.revert=function(t){this.kill(t||{})},t}(),Ii=function(){function t(t){this.contexts=[],this.scope=t}var e=t.prototype;return e.add=function(t,e,i){U(t)||(t={matches:t});var n,s,r,o=new Ni(0,i||this.scope),h=o.conditions={};for(s in this.contexts.push(o),e=o.add("onMatch",e),o.queries=t,t)"all"===s?r=1:(n=a.matchMedia(t[s]))&&(Di.indexOf(o)<0&&Di.push(o),(h[s]=n.matches)&&(r=1),n.addListener?n.addListener(Ui):n.addEventListener("change",Ui));return r&&e(o),this},e.revert=function(t){this.kill(t||{})},e.kill=function(t){this.contexts.forEach((function(e){return e.kill(t,!0)}))},t}(),Ri={registerPlugin:function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];e.forEach((function(t){return Ee(t)}))},timeline:function(t){return new ti(t)},getTweensOf:function(t,e){return o.getTweensOf(t,e)},getProperty:function(t,e,i,n){C(t)&&(t=he(t)[0]);var s=dt(t||{}).get,r=i?bt:xt;return"native"===i&&(i=""),t?e?r((ot[e]&&ot[e].get||s)(t,e,i,n)):function(e,i,n){return r((ot[e]&&ot[e].get||s)(t,e,i,n))}:t},quickSetter:function(t,e,i){if((t=he(t)).length>1){var n=t.map((function(t){return Bi.quickSetter(t,e,i)})),s=n.length;return function(t){for(var e=s;e--;)n[e](t)}}t=t[0]||{};var r=ot[e],o=dt(t),a=o.harness&&(o.harness.aliases||{})[e]||e,h=r?function(e){var n=new r;d._pt=0,n.init(t,i?e+i:e,d,0,[t]),n.render(1,n),d._pt&&wi(1,d)}:o.set(t,a);return r?h:function(e){return h(t,a,i?e+i:e,o,1)}},quickTo:function(t,e,i){var n,s=Bi.to(t,Tt(((n={})[e]="+=0.1",n.paused=!0,n),i||{})),r=function(t,i,n){return s.resetTo(e,t,i,n)};return r.tween=s,r},isTweening:function(t){return o.getTweensOf(t,!0).length>0},defaults:function(t){return t&&t.ease&&(t.ease=Ge(t.ease,x.ease)),Ot(x,t||{})},config:function(t){return Ot(k,t||{})},registerEffect:function(t){var e=t.name,i=t.effect,n=t.plugins,s=t.defaults,r=t.extendTimeline;(n||"").split(",").forEach((function(t){return t&&!ot[t]&&!G[t]&&Z(e+" effect requires "+t+" plugin.")})),at[e]=function(t,e,n){return i(he(t),wt(e||{},s),n)},r&&(ti.prototype[e]=function(t,i,n){return this.add(at[e](t,U(i)?i:(n=i)&&{},this),n)})},registerEase:function(t,e){Ye[t]=Ge(e)},parseEase:function(t,e){return arguments.length?Ge(t,e):Ye},getById:function(t){return o.getById(t)},exportRoot:function(t,e){void 0===t&&(t={});var i,n,s=new ti(t);for(s.smoothChildTiming=N(t.smoothChildTiming),o.remove(s),s._dp=0,s._time=s._tTime=o._time,i=o._first;i;)n=i._next,!e&&!i._dur&&i instanceof pi&&i.vars.onComplete===i._targets[0]||Vt(s,i,i._start-i._delay),i=n;return Vt(o,s,0),s},context:function(t,e){return t?new Ni(t,e):r},matchMedia:function(t){return new Ii(t)},matchMediaRefresh:function(){return Di.forEach((function(t){var e,i,n=t.conditions;for(i in n)n[i]&&(n[i]=!1,e=1);e&&t.revert()}))||Ui()},addEventListener:function(t,e){var i=Ci[t]||(Ci[t]=[]);~i.indexOf(e)||i.push(e)},removeEventListener:function(t,e){var i=Ci[t],n=i&&i.indexOf(e);n>=0&&i.splice(n,1)},utils:{wrap:me,wrapYoyo:ke,distribute:ce,random:pe,snap:_e,normalize:ge,getUnit:ne,clamp:se,splitColor:Me,toArray:he,selector:le,mapRange:be,pipe:fe,unitize:ve,interpolate:we,shuffle:ue},install:q,effects:at,ticker:Re,updateRoot:ti.updateRoot,plugins:ot,globalTimeline:o,core:{PropTween:Ai,globals:Q,Tween:pi,Timeline:ti,Animation:$e,getCache:dt,_removeLinkedListItem:Mt,reverting:function(){return s},context:function(t){return t&&r&&(r.data.push(t),t._ctx=r),r},suppressOverwrites:function(t){return n=t}}};pt("to,from,fromTo,delayedCall,set,killTweensOf",(function(t){return Ri[t]=pi[t]})),Re.add(ti.updateRoot),d=Ri.to({},{duration:0});var Fi=function(t,e){for(var i=t._pt;i&&i.p!==e&&i.op!==e&&i.fp!==e;)i=i._next;return i},Yi=function(t,e){var i,n,s,r=t._targets;for(i in e)for(n=r.length;n--;)(s=t._ptLookup[n][i])&&(s=s.d)&&(s._pt&&(s=Fi(s,i)),s&&s.modifier&&s.modifier(e[i],t,r[n],i))},Xi=function(t,e){return{name:t,rawVars:1,init:function(t,i,n){n._onInit=function(t){var n,s;if(C(i)&&(n={},pt(i,(function(t){return n[t]=1})),i=n),e){for(s in n={},i)n[s]=e(i[s]);i=n}Yi(t,i)}}}},Bi=Ri.registerPlugin({name:"attr",init:function(t,e,i,n,s){var r,o,a;for(r in this.tween=i,e)a=t.getAttribute(r)||"",(o=this.add(t,"setAttribute",(a||0)+"",e[r],n,s,0,0,r)).op=r,o.b=a,this._props.push(r)},render:function(t,e){for(var i=e._pt;i;)s?i.set(i.t,i.p,i.b,i):i.r(t,i.d),i=i._next}},{name:"endArray",init:function(t,e){for(var i=e.length;i--;)this.add(t,i,t[i]||0,e[i],0,0,0,0,0,1)}},Xi("roundProps",de),Xi("modifiers"),Xi("snap",_e))||Ri;pi.version=ti.version=Bi.version="3.11.4",u=1,I()&&Fe();var zi,Vi,Hi,Wi,ji,Gi,Ki,qi,Ji=Ye.Power0,Zi=Ye.Power1,Qi=Ye.Power2,$i=Ye.Power3,tn=Ye.Power4,en=Ye.Linear,nn=Ye.Quad,sn=Ye.Cubic,rn=Ye.Quart,on=Ye.Quint,an=Ye.Strong,hn=Ye.Elastic,ln=Ye.Back,un=Ye.SteppedEase,cn=Ye.Bounce,dn=Ye.Sine,_n=Ye.Expo,pn=Ye.Circ,fn=function(){return"undefined"!=typeof window},vn={},gn=180/Math.PI,yn=Math.PI/180,mn=Math.atan2,kn=1e8,xn=/([A-Z])/g,bn=/(left|right|width|margin|padding|x)/i,wn=/[\s,\(]\S/,Sn={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},Tn=function(t,e){return e.set(e.t,e.p,Math.round(1e4*(e.s+e.c*t))/1e4+e.u,e)},On=function(t,e){return e.set(e.t,e.p,1===t?e.e:Math.round(1e4*(e.s+e.c*t))/1e4+e.u,e)},En=function(t,e){return e.set(e.t,e.p,t?Math.round(1e4*(e.s+e.c*t))/1e4+e.u:e.b,e)},An=function(t,e){var i=e.s+e.c*t;e.set(e.t,e.p,~~(i+(i<0?-.5:.5))+e.u,e)},Dn=function(t,e){return e.set(e.t,e.p,t?e.e:e.b,e)},Cn=function(t,e){return e.set(e.t,e.p,1!==t?e.b:e.e,e)},Mn=function(t,e,i){return t.style[e]=i},Ln=function(t,e,i){return t.style.setProperty(e,i)},Pn=function(t,e,i){return t._gsap[e]=i},Un=function(t,e,i){return t._gsap.scaleX=t._gsap.scaleY=i},Nn=function(t,e,i,n,s){var r=t._gsap;r.scaleX=r.scaleY=i,r.renderTransform(s,r)},In=function(t,e,i,n,s){var r=t._gsap;r[e]=i,r.renderTransform(s,r)},Rn="transform",Fn=Rn+"Origin",Yn=function(t,e){var i=this,n=this.target,s=n.style;if(t in vn){if(this.tfm=this.tfm||{},"transform"!==t&&(~(t=Sn[t]||t).indexOf(",")?t.split(",").forEach((function(t){return i.tfm[t]=ns(n,t)})):this.tfm[t]=n._gsap.x?n._gsap[t]:ns(n,t)),this.props.indexOf(Rn)>=0)return;n._gsap.svg&&(this.svgo=n.getAttribute("data-svg-origin"),this.props.push(Fn,e,"")),t=Rn}(s||e)&&this.props.push(t,e,s[t])},Xn=function(t){t.translate&&(t.removeProperty("translate"),t.removeProperty("scale"),t.removeProperty("rotate"))},Bn=function(){var t,e,i=this.props,n=this.target,s=n.style,r=n._gsap;for(t=0;t<i.length;t+=3)i[t+1]?n[i[t]]=i[t+2]:i[t+2]?s[i[t]]=i[t+2]:s.removeProperty(i[t].replace(xn,"-$1").toLowerCase());if(this.tfm){for(e in this.tfm)r[e]=this.tfm[e];r.svg&&(r.renderTransform(),n.setAttribute("data-svg-origin",this.svgo||"")),!(t=Ki())||t.isStart||s[Rn]||(Xn(s),r.uncache=1)}},zn=function(t,e){var i={target:t,props:[],revert:Bn,save:Yn};return e&&e.split(",").forEach((function(t){return i.save(t)})),i},Vn=function(t,e){var i=Vi.createElementNS?Vi.createElementNS((e||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),t):Vi.createElement(t);return i.style?i:Vi.createElement(t)},Hn=function t(e,i,n){var s=getComputedStyle(e);return s[i]||s.getPropertyValue(i.replace(xn,"-$1").toLowerCase())||s.getPropertyValue(i)||!n&&t(e,jn(i)||i,1)||""},Wn="O,Moz,ms,Ms,Webkit".split(","),jn=function(t,e,i){var n=(e||ji).style,s=5;if(t in n&&!i)return t;for(t=t.charAt(0).toUpperCase()+t.substr(1);s--&&!(Wn[s]+t in n););return s<0?null:(3===s?"ms":s>=0?Wn[s]:"")+t},Gn=function(){fn()&&window.document&&(zi=window,Vi=zi.document,Hi=Vi.documentElement,ji=Vn("div")||{style:{}},Vn("div"),Rn=jn(Rn),Fn=Rn+"Origin",ji.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",qi=!!jn("perspective"),Ki=Bi.core.reverting,Wi=1)},Kn=function t(e){var i,n=Vn("svg",this.ownerSVGElement&&this.ownerSVGElement.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),s=this.parentNode,r=this.nextSibling,o=this.style.cssText;if(Hi.appendChild(n),n.appendChild(this),this.style.display="block",e)try{i=this.getBBox(),this._gsapBBox=this.getBBox,this.getBBox=t}catch(t){}else this._gsapBBox&&(i=this._gsapBBox());return s&&(r?s.insertBefore(this,r):s.appendChild(this)),Hi.removeChild(n),this.style.cssText=o,i},qn=function(t,e){for(var i=e.length;i--;)if(t.hasAttribute(e[i]))return t.getAttribute(e[i])},Jn=function(t){var e;try{e=t.getBBox()}catch(i){e=Kn.call(t,!0)}return e&&(e.width||e.height)||t.getBBox===Kn||(e=Kn.call(t,!0)),!e||e.width||e.x||e.y?e:{x:+qn(t,["x","cx","x1"])||0,y:+qn(t,["y","cy","y1"])||0,width:0,height:0}},Zn=function(t){return!(!t.getCTM||t.parentNode&&!t.ownerSVGElement||!Jn(t))},Qn=function(t,e){if(e){var i=t.style;e in vn&&e!==Fn&&(e=Rn),i.removeProperty?("ms"!==e.substr(0,2)&&"webkit"!==e.substr(0,6)||(e="-"+e),i.removeProperty(e.replace(xn,"-$1").toLowerCase())):i.removeAttribute(e)}},$n=function(t,e,i,n,s,r){var o=new Ai(t._pt,e,i,0,1,r?Cn:Dn);return t._pt=o,o.b=n,o.e=s,t._props.push(i),o},ts={deg:1,rad:1,turn:1},es={grid:1,flex:1},is=function t(e,i,n,s){var r,o,a,h,l=parseFloat(n)||0,u=(n+"").trim().substr((l+"").length)||"px",c=ji.style,d=bn.test(i),_="svg"===e.tagName.toLowerCase(),p=(_?"client":"offset")+(d?"Width":"Height"),f=100,v="px"===s,g="%"===s;return s===u||!l||ts[s]||ts[u]?l:("px"!==u&&!v&&(l=t(e,i,n,"px")),h=e.getCTM&&Zn(e),!g&&"%"!==u||!vn[i]&&!~i.indexOf("adius")?(c[d?"width":"height"]=f+(v?u:s),o=~i.indexOf("adius")||"em"===s&&e.appendChild&&!_?e:e.parentNode,h&&(o=(e.ownerSVGElement||{}).parentNode),o&&o!==Vi&&o.appendChild||(o=Vi.body),(a=o._gsap)&&g&&a.width&&d&&a.time===Re.time&&!a.uncache?ft(l/a.width*f):((g||"%"===u)&&!es[Hn(o,"display")]&&(c.position=Hn(e,"position")),o===e&&(c.position="static"),o.appendChild(ji),r=ji[p],o.removeChild(ji),c.position="absolute",d&&g&&((a=dt(o)).time=Re.time,a.width=o[p]),ft(v?r*l/f:r&&l?f/r*l:0))):(r=h?e.getBBox()[d?"width":"height"]:e[p],ft(g?l/r*f:l/100*r)))},ns=function(t,e,i,n){var s;return Wi||Gn(),e in Sn&&"transform"!==e&&~(e=Sn[e]).indexOf(",")&&(e=e.split(",")[0]),vn[e]&&"transform"!==e?(s=fs(t,n),s="transformOrigin"!==e?s[e]:s.svg?s.origin:vs(Hn(t,Fn))+" "+s.zOrigin+"px"):(!(s=t.style[e])||"auto"===s||n||~(s+"").indexOf("calc("))&&(s=hs[e]&&hs[e](t,e,i)||Hn(t,e)||_t(t,e)||("opacity"===e?1:0)),i&&!~(s+"").trim().indexOf(" ")?is(t,e,s,i)+i:s},ss=function(t,e,i,n){if(!i||"none"===i){var s=jn(e,t,1),r=s&&Hn(t,s,1);r&&r!==i?(e=s,i=r):"borderColor"===e&&(i=Hn(t,"borderTopColor"))}var o,a,h,l,u,c,d,_,p,f,v,g=new Ai(this._pt,t.style,e,0,1,bi),y=0,m=0;if(g.b=i,g.e=n,i+="","auto"==(n+="")&&(t.style[e]=n,n=Hn(t,e)||n,t.style[e]=i),Ie(o=[i,n]),i=o[0],n=o[1],h=i.match(z)||[],(n.match(z)||[]).length){for(;a=z.exec(n);)d=a[0],p=n.substring(y,a.index),u?u=(u+1)%5:"rgba("!==p.substr(-5)&&"hsla("!==p.substr(-5)||(u=1),d!==(c=h[m++]||"")&&(l=parseFloat(c)||0,v=c.substr((l+"").length),"="===d.charAt(1)&&(d=gt(l,d)+v),_=parseFloat(d),f=d.substr((_+"").length),y=z.lastIndex-f.length,f||(f=f||k.units[e]||v,y===n.length&&(n+=f,g.e+=f)),v!==f&&(l=is(t,e,c,f)||0),g._pt={_next:g._pt,p:p||1===m?p:",",s:l,c:_-l,m:u&&u<4||"zIndex"===e?Math.round:0});g.c=y<n.length?n.substring(y,n.length):""}else g.r="display"===e&&"none"===n?Cn:Dn;return H.test(n)&&(g.e=0),this._pt=g,g},rs={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},os=function(t){var e=t.split(" "),i=e[0],n=e[1]||"50%";return"top"!==i&&"bottom"!==i&&"left"!==n&&"right"!==n||(t=i,i=n,n=t),e[0]=rs[i]||i,e[1]=rs[n]||n,e.join(" ")},as=function(t,e){if(e.tween&&e.tween._time===e.tween._dur){var i,n,s,r=e.t,o=r.style,a=e.u,h=r._gsap;if("all"===a||!0===a)o.cssText="",n=1;else for(s=(a=a.split(",")).length;--s>-1;)i=a[s],vn[i]&&(n=1,i="transformOrigin"===i?Fn:Rn),Qn(r,i);n&&(Qn(r,Rn),h&&(h.svg&&r.removeAttribute("transform"),fs(r,1),h.uncache=1,Xn(o)))}},hs={clearProps:function(t,e,i,n,s){if("isFromStart"!==s.data){var r=t._pt=new Ai(t._pt,e,i,0,0,as);return r.u=n,r.pr=-10,r.tween=s,t._props.push(i),1}}},ls=[1,0,0,1,0,0],us={},cs=function(t){return"matrix(1, 0, 0, 1, 0, 0)"===t||"none"===t||!t},ds=function(t){var e=Hn(t,Rn);return cs(e)?ls:e.substr(7).match(B).map(ft)},_s=function(t,e){var i,n,s,r,o=t._gsap||dt(t),a=t.style,h=ds(t);return o.svg&&t.getAttribute("transform")?"1,0,0,1,0,0"===(h=[(s=t.transform.baseVal.consolidate().matrix).a,s.b,s.c,s.d,s.e,s.f]).join(",")?ls:h:(h!==ls||t.offsetParent||t===Hi||o.svg||(s=a.display,a.display="block",(i=t.parentNode)&&t.offsetParent||(r=1,n=t.nextElementSibling,Hi.appendChild(t)),h=ds(t),s?a.display=s:Qn(t,"display"),r&&(n?i.insertBefore(t,n):i?i.appendChild(t):Hi.removeChild(t))),e&&h.length>6?[h[0],h[1],h[4],h[5],h[12],h[13]]:h)},ps=function(t,e,i,n,s,r){var o,a,h,l=t._gsap,u=s||_s(t,!0),c=l.xOrigin||0,d=l.yOrigin||0,_=l.xOffset||0,p=l.yOffset||0,f=u[0],v=u[1],g=u[2],y=u[3],m=u[4],k=u[5],x=e.split(" "),b=parseFloat(x[0])||0,w=parseFloat(x[1])||0;i?u!==ls&&(a=f*y-v*g)&&(h=b*(-v/a)+w*(f/a)-(f*k-v*m)/a,b=b*(y/a)+w*(-g/a)+(g*k-y*m)/a,w=h):(b=(o=Jn(t)).x+(~x[0].indexOf("%")?b/100*o.width:b),w=o.y+(~(x[1]||x[0]).indexOf("%")?w/100*o.height:w)),n||!1!==n&&l.smooth?(m=b-c,k=w-d,l.xOffset=_+(m*f+k*g)-m,l.yOffset=p+(m*v+k*y)-k):l.xOffset=l.yOffset=0,l.xOrigin=b,l.yOrigin=w,l.smooth=!!n,l.origin=e,l.originIsAbsolute=!!i,t.style[Fn]="0px 0px",r&&($n(r,l,"xOrigin",c,b),$n(r,l,"yOrigin",d,w),$n(r,l,"xOffset",_,l.xOffset),$n(r,l,"yOffset",p,l.yOffset)),t.setAttribute("data-svg-origin",b+" "+w)},fs=function(t,e){var i=t._gsap||new Qe(t);if("x"in i&&!e&&!i.uncache)return i;var n,s,r,o,a,h,l,u,c,d,_,p,f,v,g,y,m,x,b,w,S,T,O,E,A,D,C,M,L,P,U,N,I=t.style,R=i.scaleX<0,F="px",Y="deg",X=getComputedStyle(t),B=Hn(t,Fn)||"0";return n=s=r=h=l=u=c=d=_=0,o=a=1,i.svg=!(!t.getCTM||!Zn(t)),X.translate&&("none"===X.translate&&"none"===X.scale&&"none"===X.rotate||(I[Rn]=("none"!==X.translate?"translate3d("+(X.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+("none"!==X.rotate?"rotate("+X.rotate+") ":"")+("none"!==X.scale?"scale("+X.scale.split(" ").join(",")+") ":"")+("none"!==X[Rn]?X[Rn]:"")),I.scale=I.rotate=I.translate="none"),v=_s(t,i.svg),i.svg&&(i.uncache?(A=t.getBBox(),B=i.xOrigin-A.x+"px "+(i.yOrigin-A.y)+"px",E=""):E=!e&&t.getAttribute("data-svg-origin"),ps(t,E||B,!!E||i.originIsAbsolute,!1!==i.smooth,v)),p=i.xOrigin||0,f=i.yOrigin||0,v!==ls&&(x=v[0],b=v[1],w=v[2],S=v[3],n=T=v[4],s=O=v[5],6===v.length?(o=Math.sqrt(x*x+b*b),a=Math.sqrt(S*S+w*w),h=x||b?mn(b,x)*gn:0,(c=w||S?mn(w,S)*gn+h:0)&&(a*=Math.abs(Math.cos(c*yn))),i.svg&&(n-=p-(p*x+f*w),s-=f-(p*b+f*S))):(N=v[6],P=v[7],C=v[8],M=v[9],L=v[10],U=v[11],n=v[12],s=v[13],r=v[14],l=(g=mn(N,L))*gn,g&&(E=T*(y=Math.cos(-g))+C*(m=Math.sin(-g)),A=O*y+M*m,D=N*y+L*m,C=T*-m+C*y,M=O*-m+M*y,L=N*-m+L*y,U=P*-m+U*y,T=E,O=A,N=D),u=(g=mn(-w,L))*gn,g&&(y=Math.cos(-g),U=S*(m=Math.sin(-g))+U*y,x=E=x*y-C*m,b=A=b*y-M*m,w=D=w*y-L*m),h=(g=mn(b,x))*gn,g&&(E=x*(y=Math.cos(g))+b*(m=Math.sin(g)),A=T*y+O*m,b=b*y-x*m,O=O*y-T*m,x=E,T=A),l&&Math.abs(l)+Math.abs(h)>359.9&&(l=h=0,u=180-u),o=ft(Math.sqrt(x*x+b*b+w*w)),a=ft(Math.sqrt(O*O+N*N)),g=mn(T,O),c=Math.abs(g)>2e-4?g*gn:0,_=U?1/(U<0?-U:U):0),i.svg&&(E=t.getAttribute("transform"),i.forceCSS=t.setAttribute("transform","")||!cs(Hn(t,Rn)),E&&t.setAttribute("transform",E))),Math.abs(c)>90&&Math.abs(c)<270&&(R?(o*=-1,c+=h<=0?180:-180,h+=h<=0?180:-180):(a*=-1,c+=c<=0?180:-180)),e=e||i.uncache,i.x=n-((i.xPercent=n&&(!e&&i.xPercent||(Math.round(t.offsetWidth/2)===Math.round(-n)?-50:0)))?t.offsetWidth*i.xPercent/100:0)+F,i.y=s-((i.yPercent=s&&(!e&&i.yPercent||(Math.round(t.offsetHeight/2)===Math.round(-s)?-50:0)))?t.offsetHeight*i.yPercent/100:0)+F,i.z=r+F,i.scaleX=ft(o),i.scaleY=ft(a),i.rotation=ft(h)+Y,i.rotationX=ft(l)+Y,i.rotationY=ft(u)+Y,i.skewX=c+Y,i.skewY=d+Y,i.transformPerspective=_+F,(i.zOrigin=parseFloat(B.split(" ")[2])||0)&&(I[Fn]=vs(B)),i.xOffset=i.yOffset=0,i.force3D=k.force3D,i.renderTransform=i.svg?ws:qi?bs:ys,i.uncache=0,i},vs=function(t){return(t=t.split(" "))[0]+" "+t[1]},gs=function(t,e,i){var n=ne(e);return ft(parseFloat(e)+parseFloat(is(t,"x",i+"px",n)))+n},ys=function(t,e){e.z="0px",e.rotationY=e.rotationX="0deg",e.force3D=0,bs(t,e)},ms="0deg",ks="0px",xs=") ",bs=function(t,e){var i=e||this,n=i.xPercent,s=i.yPercent,r=i.x,o=i.y,a=i.z,h=i.rotation,l=i.rotationY,u=i.rotationX,c=i.skewX,d=i.skewY,_=i.scaleX,p=i.scaleY,f=i.transformPerspective,v=i.force3D,g=i.target,y=i.zOrigin,m="",k="auto"===v&&t&&1!==t||!0===v;if(y&&(u!==ms||l!==ms)){var x,b=parseFloat(l)*yn,w=Math.sin(b),S=Math.cos(b);b=parseFloat(u)*yn,x=Math.cos(b),r=gs(g,r,w*x*-y),o=gs(g,o,-Math.sin(b)*-y),a=gs(g,a,S*x*-y+y)}f!==ks&&(m+="perspective("+f+xs),(n||s)&&(m+="translate("+n+"%, "+s+"%) "),(k||r!==ks||o!==ks||a!==ks)&&(m+=a!==ks||k?"translate3d("+r+", "+o+", "+a+") ":"translate("+r+", "+o+xs),h!==ms&&(m+="rotate("+h+xs),l!==ms&&(m+="rotateY("+l+xs),u!==ms&&(m+="rotateX("+u+xs),c===ms&&d===ms||(m+="skew("+c+", "+d+xs),1===_&&1===p||(m+="scale("+_+", "+p+xs),g.style[Rn]=m||"translate(0, 0)"},ws=function(t,e){var i,n,s,r,o,a=e||this,h=a.xPercent,l=a.yPercent,u=a.x,c=a.y,d=a.rotation,_=a.skewX,p=a.skewY,f=a.scaleX,v=a.scaleY,g=a.target,y=a.xOrigin,m=a.yOrigin,k=a.xOffset,x=a.yOffset,b=a.forceCSS,w=parseFloat(u),S=parseFloat(c);d=parseFloat(d),_=parseFloat(_),(p=parseFloat(p))&&(_+=p=parseFloat(p),d+=p),d||_?(d*=yn,_*=yn,i=Math.cos(d)*f,n=Math.sin(d)*f,s=Math.sin(d-_)*-v,r=Math.cos(d-_)*v,_&&(p*=yn,o=Math.tan(_-p),s*=o=Math.sqrt(1+o*o),r*=o,p&&(o=Math.tan(p),i*=o=Math.sqrt(1+o*o),n*=o)),i=ft(i),n=ft(n),s=ft(s),r=ft(r)):(i=f,r=v,n=s=0),(w&&!~(u+"").indexOf("px")||S&&!~(c+"").indexOf("px"))&&(w=is(g,"x",u,"px"),S=is(g,"y",c,"px")),(y||m||k||x)&&(w=ft(w+y-(y*i+m*s)+k),S=ft(S+m-(y*n+m*r)+x)),(h||l)&&(o=g.getBBox(),w=ft(w+h/100*o.width),S=ft(S+l/100*o.height)),o="matrix("+i+","+n+","+s+","+r+","+w+","+S+")",g.setAttribute("transform",o),b&&(g.style[Rn]=o)},Ss=function(t,e,i,n,s){var r,o,a=360,h=C(s),l=parseFloat(s)*(h&&~s.indexOf("rad")?gn:1)-n,u=n+l+"deg";return h&&("short"===(r=s.split("_")[1])&&(l%=a)!=l%(a/2)&&(l+=l<0?a:-a),"cw"===r&&l<0?l=(l+a*kn)%a-~~(l/a)*a:"ccw"===r&&l>0&&(l=(l-a*kn)%a-~~(l/a)*a)),t._pt=o=new Ai(t._pt,e,i,n,l,On),o.e=u,o.u="deg",t._props.push(i),o},Ts=function(t,e){for(var i in e)t[i]=e[i];return t},Os=function(t,e,i){var n,s,r,o,a,h,l,u=Ts({},i._gsap),c="perspective,force3D,transformOrigin,svgOrigin",d=i.style;for(s in u.svg?(r=i.getAttribute("transform"),i.setAttribute("transform",""),d[Rn]=e,n=fs(i,1),Qn(i,Rn),i.setAttribute("transform",r)):(r=getComputedStyle(i)[Rn],d[Rn]=e,n=fs(i,1),d[Rn]=r),vn)(r=u[s])!==(o=n[s])&&c.indexOf(s)<0&&(a=ne(r)!==(l=ne(o))?is(i,s,r,l):parseFloat(r),h=parseFloat(o),t._pt=new Ai(t._pt,n,s,a,h-a,Tn),t._pt.u=l||0,t._props.push(s));Ts(n,u)};pt("padding,margin,Width,Radius",(function(t,e){var i="Top",n="Right",s="Bottom",r="Left",o=(e<3?[i,n,s,r]:[i+r,i+n,s+n,s+r]).map((function(i){return e<2?t+i:"border"+i+t}));hs[e>1?"border"+t:t]=function(t,e,i,n,s){var r,a;if(arguments.length<4)return r=o.map((function(e){return ns(t,e,i)})),5===(a=r.join(" ")).split(r[0]).length?r[0]:a;r=(n+"").split(" "),a={},o.forEach((function(t,e){return a[t]=r[e]=r[e]||r[(e-1)/2|0]})),t.init(e,a,s)}}));var Es,As,Ds,Cs,Ms={name:"css",register:Gn,targetTest:function(t){return t.style&&t.nodeType},init:function(t,e,i,n,s){var r,o,a,h,l,u,c,d,_,p,f,v,g,y,m,x,b=this._props,w=t.style,S=i.vars.startAt;for(c in Wi||Gn(),this.styles=this.styles||zn(t),x=this.styles.props,this.tween=i,e)if("autoRound"!==c&&(o=e[c],!ot[c]||!oi(c,e,i,n,t,s)))if(l=typeof o,u=hs[c],"function"===l&&(l=typeof(o=o.call(i,n,t,s))),"string"===l&&~o.indexOf("random(")&&(o=xe(o)),u)u(this,t,c,o,i)&&(m=1);else if("--"===c.substr(0,2))r=(getComputedStyle(t).getPropertyValue(c)+"").trim(),o+="",Ue.lastIndex=0,Ue.test(r)||(d=ne(r),_=ne(o)),_?d!==_&&(r=is(t,c,r,_)+_):d&&(o+=d),this.add(w,"setProperty",r,o,n,s,0,0,c),b.push(c),x.push(c,0,w[c]);else if("undefined"!==l){if(S&&c in S?(r="function"==typeof S[c]?S[c].call(i,n,t,s):S[c],C(r)&&~r.indexOf("random(")&&(r=xe(r)),ne(r+"")||(r+=k.units[c]||ne(ns(t,c))||""),"="===(r+"").charAt(1)&&(r=ns(t,c))):r=ns(t,c),h=parseFloat(r),(p="string"===l&&"="===o.charAt(1)&&o.substr(0,2))&&(o=o.substr(2)),a=parseFloat(o),c in Sn&&("autoAlpha"===c&&(1===h&&"hidden"===ns(t,"visibility")&&a&&(h=0),x.push("visibility",0,w.visibility),$n(this,w,"visibility",h?"inherit":"hidden",a?"inherit":"hidden",!a)),"scale"!==c&&"transform"!==c&&~(c=Sn[c]).indexOf(",")&&(c=c.split(",")[0])),f=c in vn)if(this.styles.save(c),v||((g=t._gsap).renderTransform&&!e.parseTransform||fs(t,e.parseTransform),y=!1!==e.smoothOrigin&&g.smooth,(v=this._pt=new Ai(this._pt,w,Rn,0,1,g.renderTransform,g,0,-1)).dep=1),"scale"===c)this._pt=new Ai(this._pt,g,"scaleY",g.scaleY,(p?gt(g.scaleY,p+a):a)-g.scaleY||0,Tn),this._pt.u=0,b.push("scaleY",c),c+="X";else{if("transformOrigin"===c){x.push(Fn,0,w[Fn]),o=os(o),g.svg?ps(t,o,0,y,0,this):((_=parseFloat(o.split(" ")[2])||0)!==g.zOrigin&&$n(this,g,"zOrigin",g.zOrigin,_),$n(this,w,c,vs(r),vs(o)));continue}if("svgOrigin"===c){ps(t,o,1,y,0,this);continue}if(c in us){Ss(this,g,c,h,p?gt(h,p+o):o);continue}if("smoothOrigin"===c){$n(this,g,"smooth",g.smooth,o);continue}if("force3D"===c){g[c]=o;continue}if("transform"===c){Os(this,o,t);continue}}else c in w||(c=jn(c)||c);if(f||(a||0===a)&&(h||0===h)&&!wn.test(o)&&c in w)a||(a=0),(d=(r+"").substr((h+"").length))!==(_=ne(o)||(c in k.units?k.units[c]:d))&&(h=is(t,c,r,_)),this._pt=new Ai(this._pt,f?g:w,c,h,(p?gt(h,p+a):a)-h,f||"px"!==_&&"zIndex"!==c||!1===e.autoRound?Tn:An),this._pt.u=_||0,d!==_&&"%"!==_&&(this._pt.b=r,this._pt.r=En);else if(c in w)ss.call(this,t,c,r,p?p+o:o);else if(c in t)this.add(t,c,r||t[c],p?p+o:o,n,s);else if("parseTransform"!==c){J(c,o);continue}f||(c in w?x.push(c,0,w[c]):x.push(c,1,r||t[c])),b.push(c)}m&&Ei(this)},render:function(t,e){if(e.tween._time||!Ki())for(var i=e._pt;i;)i.r(t,i.d),i=i._next;else e.styles.revert()},get:ns,aliases:Sn,getSetter:function(t,e,i){var n=Sn[e];return n&&n.indexOf(",")<0&&(e=n),e in vn&&e!==Fn&&(t._gsap.x||ns(t,"x"))?i&&Gi===i?"scale"===e?Un:Pn:(Gi=i||{})&&("scale"===e?Nn:In):t.style&&!P(t.style[e])?Mn:~e.indexOf("-")?Ln:mi(t,e)},core:{_removeProperty:Qn,_getMatrix:_s}};Bi.utils.checkPrefix=jn,Bi.core.getStyleSaver=zn,Ds="0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY",Cs=pt((Es="x,y,z,scale,scaleX,scaleY,xPercent,yPercent")+","+(As="rotation,rotationX,rotationY,skewX,skewY")+",transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective",(function(t){vn[t]=1})),pt(As,(function(t){k.units[t]="deg",us[t]=1})),Sn[Cs[13]]=Es+","+As,pt(Ds,(function(t){var e=t.split(":");Sn[e[1]]=Cs[e[0]]})),pt("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",(function(t){k.units[t]="px"})),Bi.registerPlugin(Ms);var Ls=Bi.registerPlugin(Ms)||Bi,Ps=Ls.core.Tween;t.Back=ln,t.Bounce=cn,t.CSSPlugin=Ms,t.Circ=pn,t.Cubic=sn,t.Elastic=hn,t.Expo=_n,t.Linear=en,t.Power0=Ji,t.Power1=Zi,t.Power2=Qi,t.Power3=$i,t.Power4=tn,t.Quad=nn,t.Quart=rn,t.Quint=on,t.Sine=dn,t.SteppedEase=un,t.Strong=an,t.TimelineLite=ti,t.TimelineMax=ti,t.TweenLite=pi,t.TweenMax=Ps,t.default=Ls,t.gsap=Ls,"undefined"==typeof window||window!==t?Object.defineProperty(t,"__esModule",{value:!0}):delete window.default}(e)}(0,o);var a=n(o);function h(t){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},h(t)}function l(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,O(n.key),n)}}function c(t,e,i){return e&&u(t.prototype,e),i&&u(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}function d(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&p(t,e)}function _(t){return _=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},_(t)}function p(t,e){return p=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},p(t,e)}function f(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function v(t,e){if(e&&("object"==typeof e||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return f(t)}function g(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var i,n=_(t);if(e){var s=_(this).constructor;i=Reflect.construct(n,arguments,s)}else i=n.apply(this,arguments);return v(this,i)}}function y(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=_(t)););return t}function m(){return m="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,i){var n=y(t,e);if(n){var s=Object.getOwnPropertyDescriptor(n,e);return s.get?s.get.call(arguments.length<3?t:i):s.value}},m.apply(this,arguments)}function k(t,e,i,n){return k="undefined"!=typeof Reflect&&Reflect.set?Reflect.set:function(t,e,i,n){var s,r=y(t,e);if(r){if((s=Object.getOwnPropertyDescriptor(r,e)).set)return s.set.call(n,i),!0;if(!s.writable)return!1}if(s=Object.getOwnPropertyDescriptor(n,e)){if(!s.writable)return!1;s.value=i,Object.defineProperty(n,e,s)}else!function(t,e,i){(e=O(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i}(n,e,i);return!0},k(t,e,i,n)}function x(t,e,i,n,s){if(!k(t,e,i,n||t)&&s)throw new TypeError("failed to set property");return i}function b(t){return function(t){if(Array.isArray(t))return S(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||w(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function w(t,e){if(t){if("string"==typeof t)return S(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?S(t,e):void 0}}function S(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,n=new Array(e);i<e;i++)n[i]=t[i];return n}function T(t,e){var i="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(!i){if(Array.isArray(t)||(i=w(t))||e&&t&&"number"==typeof t.length){i&&(t=i);var n=0,s=function(){};return{s:s,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:s}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,o=!0,a=!1;return{s:function(){i=i.call(t)},n:function(){var t=i.next();return o=t.done,t},e:function(t){a=!0,r=t},f:function(){try{o||null==i.return||i.return()}finally{if(a)throw r}}}}function O(t){var e=function(t,e){if("object"!=typeof t||null===t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var n=i.call(t,e||"default");if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==typeof e?e:String(e)}var E={SCALE_SHOW_ALL:1,SCALE_EXACT_FIT:2,OMY_SPRITE:"sprite",OMY_CONTAINER:"container",OMY_TEXT_FONT:"textFont",OMY_MULTI_STYLE_TEXT_FONT:"textMultiStyleFont",OMY_MULTI_STYLE_TEXT_NUMBER_FONT:"textMultiStyleNumberFont",OMY_TEXT_FONT_INPUT:"textFontInput",OMY_TEXT_NUMBER_FONT:"textNumberFont",OMY_TEXT_BITMAP:"textBitmap",OMY_TEXT_NUMBER_BITMAP:"textNumberBitmap",OMY_BUTTON:"button",OMY_BUTTON_TWEEN:"buttonMobile",OMY_CHECK_BOX_TWEEN:"checkBoxTween",OMY_CHECK_BOX:"checkBox",OMY_ACTOR:"actor",OMY_ACTOR_SPINE:"actorSpine",OMY_GRAPHIC:"graphic",OMY_PARTICLE:"particle",OMY_PARTICLE_CONTAINER:"particleContainer",OMY_RECT:"rect",OMY_REVOLT_EMMITER:"revoltEmmiter",OMY_REVOLT_SEQUENCE:"revoltSequence",OMY_SLIDER:"slider",OMY_NEUTRINO_PARTICLES:"neutrinoParticles",Graphics:PIXI.Graphics,Rectangle:PIXI.Rectangle,TextStyle:PIXI.TextStyle,Emit:PIXI.utils.EventEmitter},A={WEBP_SUPPORT:!1,OGG_SUPPORT:!0,CACHE_SPINE_ON_START:!1,TEXT_NUMBER_SHOW_CENT:!0,VERBOSE_BUTTONS_STATE:!0,SHOW_FPS:!1,CHECK_IOS_FULLSCREEN:!1,NO_CACHE_ASSETS_ON_LOAD:!1,ALLOW_DESK_SIZE:!1,RENDER_FPS:60},D=function(){function t(){l(this,t),this._cache={}}return c(t,[{key:"has",value:function(t){return this._cache.hasOwnProperty(t)}},{key:"set",value:function(t,e){this._cache[t]=e}},{key:"get",value:function(t){return this._cache[t]}},{key:"values",value:function(){return this._cache}},{key:"names",value:function(){var t=[];for(var e in this._cache)t.push(e);return t.sort(),t}},{key:"delete",value:function(t){for(var e in this._cache)if(this._cache[e]===t)return delete this._cache[e],void(t=null)}},{key:"deleteByName",value:function(t){this._cache[t]&&delete this._cache[t]}},{key:"clear",value:function(){for(var t in this._cache)delete this._cache[t];this._cache={}}},{key:"clearByKeys",value:function(t){for(var e=0;e<t.length;e++)for(var i in this._cache)-1!=i.indexOf(t[e])&&delete this._cache[i]}},{key:"calcValues",value:function(){var t=0;for(var e in this._cache)t+=Number(this._cache[e]);return t}},{key:"createCopy",value:function(){var e=new t,i={};for(var n in this._cache)i[n]=this._cache[n];return e._cache=i,e}},{key:"length",get:function(){var t=0;for(var e in this._cache)null!=this._cache[e]&&t++;return t}},{key:"isEmpty",get:function(){return this.length<=0}}]),t}(),C=function(){function t(e){l(this,t),this._actor=e}return c(t,[{key:"setData",value:function(t){this._data=t,this._currentIndex=0,this._total=this._data.length}},{key:"startPlay",value:function(){this._saveLoop=this._actor.loop,this._saveSpeed=this._actor.speed,this._saveTotalLoop=this._actor.totalLoop,this._saveAName=this._actor.aName,this._isFinish=!1,this._play()}},{key:"next",value:function(){this._isFinish||this._play()}},{key:"_play",value:function(){var t=this._data[this._currentIndex++];this._actor.changeAnimation(t.name),this._actor.totalLoop=t.totalLoop,this._actor.speed=t.speed,this._actor.gotoAndPlay(0,t.loop),this._currentIndex>=this._total&&(this._isFinish=!0)}},{key:"clear",value:function(){this._data&&(this._data=null,this._actor.changeAnimation(this._saveAName),this._actor.totalLoop=this._saveTotalLoop,this._actor.speed=this._saveSpeed,this._actor.loop=this._saveLoop,this._actor.stop())}},{key:"destroy",value:function(){this.clear(),this._saveAName=null,this._actor=null}},{key:"isFinish",get:function(){return this._isFinish}},{key:"id",get:function(){return this._currentIndex-1}}]),t}(),M=function(t){d(i,PIXI.AnimatedSprite);var e=g(i);function i(t,n){var s;return l(this,i),(s=e.call(this,t,n))._onKillEvent="kill_event",s._onReviveEvent="revive_event",s._onDestroyEvent="destroy_event",s._onDownEvent="down_event",s._onUpEvent="up_event",s._onUpOutSideEvent="up_out_event",s._onOverEvent="over_event",s._onOutEvent="out_event",s._onDragStartEvent="drag_start_event",s._onDragStopEvent="drag_stop_event",s._onDragUpdateEvent="drag_update_event",s._onCompleteEvent="complete_event",s._onLoopEvent="loop_event",s._onEndAnimationEvent="end_animation_event",s._onFrameChangeEvent="frame_change_event",s._saveVisible=!0,s.userData=null,s._active=!0,s.numChildren=0,s._oX=0,s._oY=0,s._oWidth=0,s._oHeight=0,s._putOnCache=!0,s._externalMethodParams=null,s._externalMethod=null,s._isDrag=!1,s._dragVertical=!1,s._dragHorizontal=!1,s._isStartDrag=!1,s._isCheckInput=!1,s.autoReviveChildren=!0,s.needAutoRevive=!1,s._boundsRect=new E.Rectangle,s._localBoundsRect=new E.Rectangle,s._oType=E.OMY_ACTOR,s.anchor.set(.5),s._removeOnEnd=!1,s.onComplete=s._onCompleteHandler.bind(f(s)),s.onLoop=s._onLoopHandler.bind(f(s)),s._countLoop=0,s._totalLoop=Number.MAX_VALUE,s._reverseActor=!1,s._map=new D,s._map.set(n,t),s._aName=n,s._frameFncList=null,s._allowFrameFnc=!1,s._currentPlayList=null,s._playListData=null,s._fpsGame=Hr.fps,s._fps=Hr.fps,s._playPlayList=!1,s.interactChild=!1,s._isRevert=!1,s.onFrameChange=s._onFrameChangeHandler.bind(f(s)),Hr.debugMode&&(s._isOnDebugerUpdate=!0,Hr.addUpdater(s._updateDebug,f(s))),s.aa_isRegOnDebug=!1,s._inDebug=!1,s}return c(i,[{key:"_updateDebug",value:function(){this.aa_isRegOnDebug&&!this._inDebug?Hr.add.regDebugMode(this):!this.aa_isRegOnDebug&&this._inDebug&&Hr.add.removeFromDebug(this)}},{key:"_onCompleteHandler",value:function(){this._reverseActor?(this.textures.reverse(),this._reverseVector?this.play():(this.emit(this._onCompleteEvent,this),this._removeOnEnd&&this.kill()),this._reverseVector=!this._reverseVector):this._playPlayList?this._currentPlayList.isFinish?(this.stopPlayList(),this.emit(this._onCompleteEvent,this),this._removeOnEnd&&this.kill()):(this.emit(this._onEndAnimationEvent,this,this._currentPlayList.id),this._currentPlayList.next()):(this.emit(this._onCompleteEvent,this),this._removeOnEnd&&this.kill())}},{key:"_onLoopHandler",value:function(){this._reverseActor?(this.textures.reverse(),this._reverseVector||(this.emit(this._onLoopEvent,this),++this._countLoop>=this._totalLoop&&(this.loop=!1,this.stop(),this.emit(this._onCompleteEvent,this),this._removeOnEnd&&this.kill())),this._reverseVector=!this._reverseVector):(this.emit(this._onLoopEvent,this),++this._countLoop>=this._totalLoop&&(this._playPlayList?this._currentPlayList.isFinish?(this.stopPlayList(),this.stop(),this.emit(this._onCompleteEvent,this),this._removeOnEnd&&this.kill()):(this.emit(this._onEndAnimationEvent,this,this._currentPlayList.id),this._currentPlayList.next()):(this.loop=!1,this.stop(),this.emit(this._onCompleteEvent,this),this._removeOnEnd&&this.kill())))}},{key:"addFramesList",value:function(t){this._framesList=t}},{key:"playFromFramesList",value:function(t){this._framesList&&this._framesList[t]&&(this._nameActiveFrame=this._framesList[t],this._isPlayFrameList=!0,this.gotoAndPlay(this._nameActiveFrame.start,Boolean(this._nameActiveFrame.loop)))}},{key:"clearPlayFromFrames",value:function(){this._isPlayFrameList&&(this._isPlayFrameList=!1,this._nameActiveFrame=null)}},{key:"addPlayList",value:function(t){var e,i,n,s;if(this._playListData||(this._playListData=new D),t){for(var r in t)if(!this._playListData.has(r)){n=[],i=t[r];for(var o=0;o<i.length;o++)e={name:(s=i[o]).name,loop:s.loop||!1,speed:s.speed||1,totalLoop:s.totalLoop||Number.MAX_VALUE},n.push(e);this._playListData.set(r,n)}}else Hr.error("pls, add not null data",this)}},{key:"setDelayPlayList",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this._delayTimer&&this._delayTimer.destroy(),this._saveNameList=e,this._saveDelayOnComplete=i,this._delayTimer=Hr.add.timer(t,this._onCompleteDelayPlayList,this)}},{key:"_onCompleteDelayPlayList",value:function(){this._delayTimer=null,this.playList(this._saveNameList),this._saveNameList=null,this._saveDelayOnComplete&&(this._saveDelayOnComplete(this),this._saveDelayOnComplete=null)}},{key:"setDelayPlay",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this._delayTimer&&this._delayTimer.destroy(),this._saveDelayLoop=e,this._saveDelayOnComplete=i,this._delayTimer=Hr.add.timer(t,this._onCompleteDelayPlay,this)}},{key:"_onCompleteDelayPlay",value:function(){this.visible||(this.visible=!0),this._delayTimer=null,this.play(this._saveDelayLoop),this._saveDelayOnComplete&&(this._saveDelayOnComplete(this),this._saveDelayOnComplete=null)}},{key:"setDelayGotoAndPlay",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this._delayTimer&&this._delayTimer.destroy(),this._saveDelayLoop=i,this._saveDelayFrame=e,this._saveDelayOnComplete=n,this._delayTimer=Hr.add.timer(t,this._onCompleteDelayGotoAndPlay,this)}},{key:"_onCompleteDelayGotoAndPlay",value:function(){this.visible||(this.visible=!0),this._delayTimer=null,this.gotoAndPlay(this._saveDelayFrame,this._saveDelayLoop),this._saveDelayOnComplete&&(this._saveDelayOnComplete(this),this._saveDelayOnComplete=null)}},{key:"play",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return e&&this.changeAnimation(e),this._countLoop=0,this._prevFrame=this.currentFrame,m(_(i.prototype),"play",this).call(this),this.loop=t,this}},{key:"stop",value:function(){return m(_(i.prototype),"stop",this).call(this),this}},{key:"gotoAndPlay",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return n&&this.changeAnimation(n),this._countLoop=0,this._prevFrame=this.currentFrame,m(_(i.prototype),"gotoAndPlay",this).call(this,t),this.loop=e,this}},{key:"gotoAndStop",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return e&&this.changeAnimation(e),this._prevFrame=this.currentFrame,m(_(i.prototype),"gotoAndStop",this).call(this,t),this}},{key:"restart",value:function(){return m(_(i.prototype),"gotoAndPlay",this).call(this,0),this}},{key:"reverse",value:function(){return this._reverseActor=!0,this._reverseVector=!0,this}},{key:"next",value:function(){var t=this.currentFrame+1;return t>=this.totalFrames&&(t=0),m(_(i.prototype),"gotoAndStop",this).call(this,t),this}},{key:"previous",value:function(){var t=this.currentFrame-1;return t<0&&(t=this.totalFrames-1),m(_(i.prototype),"gotoAndStop",this).call(this,t),this}},{key:"playList",value:function(t){this._playListData?this._playListData.has(t)?(this._currentPlayList||(this._currentPlayList=new C(this)),this._currentPlayList.setData(this._playListData.get(t)),this._playPlayList=!0,this._currentPlayList.startPlay()):Hr.warn("this playList name is not exist:",t):Hr.error("pls, first add playListData",this)}},{key:"stopPlayList",value:function(){this._playPlayList=!1,this._currentPlayList.clear()}},{key:"addAnimation",value:function(t,e){this.hasAnimation(t)||this._map.set(t,e)}},{key:"changeAnimation",value:function(t){return this.hasAnimation(t)?this.textures=this._map.get(t):this.textures=Hr.assets.getAnimation(t),this._aName=t,this}},{key:"hasAnimation",value:function(t){return this._map.has(t)}},{key:"addFrameFunction",value:function(t,e){return this._allowFrameFnc||(this._allowFrameFnc=!0,this._frameFncList=[]),this._frameFncList[t]=e,this}},{key:"clearFrameFunction",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;return-1===t?(this._allowFrameFnc=!1,this._frameFncList.length=0,this._frameFncList=null):this._frameFncList[t]=null,this}},{key:"_onFrameChangeHandler",value:function(){if(this.playing){if(this._allowFrameFnc)if(this._prevFrame<this.currentFrame)for(var t=this._prevFrame+1;t<=this.currentFrame;t++)this._frameFncList[t]&&this._frameFncList[t](this);else if(this._prevFrame>this.currentFrame){for(var e=this._prevFrame+1;e<this.totalFrames;e++)this._frameFncList[e]&&this._frameFncList[e](this);for(var i=0;i<=this.currentFrame;i++)this._frameFncList[i]&&this._frameFncList[i](this)}this._isPlayFrameList&&this._nameActiveFrame.end===this.currentFrame&&(this._nameActiveFrame.loop?(this.gotoAndPlay(this._nameActiveFrame.start,Boolean(this._nameActiveFrame.loop)),this.emit(this._onLoopEvent,this)):(this.stop(),this.clearPlayFromFrames(),this._removeOnEnd&&this.kill(),this.emit(this._onCompleteEvent,this)))}this.emit(this._onFrameChangeEvent,this.currentFrame,this._prevFrame),this._prevFrame=this.currentFrame}},{key:"addChild",value:function(t){return m(_(i.prototype),"addChild",this).call(this,t),this.numChildren=this.children.length,t}},{key:"addChildAt",value:function(t,e){return m(_(i.prototype),"addChildAt",this).call(this,t,e),this.numChildren=this.children.length,t}},{key:"removeChild",value:function(t){return m(_(i.prototype),"removeChild",this).call(this,t),this.numChildren=this.children.length,t}},{key:"removeChildAt",value:function(t){var e=m(_(i.prototype),"removeChildAt",this).call(this,t);return this.numChildren=this.children.length,e}},{key:"removeChildren",value:function(t,e){var n=m(_(i.prototype),"removeChildren",this).call(this,t,e);return this.numChildren=this.children.length,n}},{key:"contains",value:function(t){return null!=this.children&&this.children.indexOf(t)>=0}},{key:"kill",value:function(){if(this._active){if(this._active=!1,this._isOnDebugerUpdate&&(this._isOnDebugerUpdate=!1,Hr.removeUpdater(this._updateDebug,this)),null!=this.children)for(var t,e=0,i=this.numChildren;e<this.numChildren&&this.numChildren;)(t=this.children[e++]).active&&t.kill&&t.kill(),i!==this.numChildren&&(i--,e--);this.input&&(this.input=!1),this.playing&&this.stop(),this.clearPlayFromFrames(),this._putOnCache&&(this._isRevert&&(this.textures.reverse(),this._isRevert=!1),this.changeAnimation(this._aName),this.gotoAndStop(0),this._playPlayList=!1,this._currentPlayList&&this._currentPlayList.clear(),this._delayTimer&&this._delayTimer.destroy(),this._delayTimer=null,this._saveDelayOnComplete=null,this.scaleX=1,this.scaleY=1,this.angle=0,this.alpha=1,this.rotation=0,this.x=0,this.y=0,this._removeOnEnd=!1,this.removeAllListeners(this._onCompleteEvent),this.removeAllListeners(this._onLoopEvent),this.removeAllListeners(this._onEndAnimationEvent),this._allowFrameFnc&&this.clearFrameFunction(),this.emit(this._onKillEvent,this),this.removeAllListeners(this._onKillEvent),Hr.remove.actorAtlas(this)),this._saveVisible=this.visible,this.visible=!1,this.renderable=!1,this.emit(this._onKillEvent,this)}return this}},{key:"revive",value:function(){if(!this._active){if(this._active=!0,this.renderable=!0,Hr.debugMode&&!this._isOnDebugerUpdate&&(this._isOnDebugerUpdate=!0,Hr.addUpdater(this._updateDebug,this)),null!=this.children)for(var t,e=0;e<this.numChildren;)t=this.children[e++],(this.autoReviveChildren||t.needAutoRevive)&&!t.active&&t.revive&&t.revive();this.input&&(this.input=!0),this.visible=this._saveVisible,this.emit(this._onReviveEvent,this)}return this}},{key:"destroy",value:function(t){return t=t||{children:!0,texture:!1,baseTexture:!1},this._delayTimer&&this._delayTimer.destroy(),this.json=null,this._delayTimer=null,this._saveDelayOnComplete=null,this._map.clear(),this._map=null,this._playListData&&(this._playListData.clear(),this._playListData=null),this.onFrameChange=null,this._framesList&&(this._framesList=null,this.clearPlayFromFrames()),this._playPlayList=!1,this._currentPlayList&&(this._currentPlayList.destroy(),this._currentPlayList=null),this._allowFrameFnc&&this.clearFrameFunction(),this._isOnDebugerUpdate&&(this._isOnDebugerUpdate=!1,Hr.removeUpdater(this._updateDebug,this)),this._active=!1,this.userData=null,this.numChildren=0,this._boundsRect=null,this._localBoundsRect=null,this._isDrag=!1,this._isStartDrag=!1,this._listenMouseUp&&(this._listenMouseUp=!1,Hr.mouse.removeUpMouse(this._globalMouseUp,this)),this._aName=null,this._eventData=null,this.input&&(this.input=!1),this.removeAllListeners(this._onDragStartEvent),this.removeAllListeners(this._onDragStopEvent),this.removeAllListeners(this._onDragUpdateEvent),this.removeAllListeners(this._onDownEvent),this.removeAllListeners(this._onOutEvent),this.removeAllListeners(this._onOverEvent),this.removeAllListeners(this._onUpEvent),this.removeAllListeners(this._onUpOutSideEvent),this.removeAllListeners(this._onCompleteEvent),this.removeAllListeners(this._onLoopEvent),this.removeAllListeners(this._onEndAnimationEvent),this.emit(this._onDestroyEvent,this),this.removeAllListeners(this._onDestroyEvent),this.removeAllListeners(this._onKillEvent),this.removeAllListeners(this._onReviveEvent),this._externalMethod=null,this._externalMethodParams=null,this.renderable=!1,this.visible=!1,m(_(i.prototype),"destroy",this).call(this,t),this}},{key:"update",value:function(t){m(_(i.prototype),"update",this).call(this,t),this._isStartDrag&&(this._eventData.global.x===this._dragSaveX&&this._eventData.global.y===this._dragSaveY||(this._dragHorizontal&&(this.x=this._oX+this._eventData.global.x-this._dragSaveX,this._oX<this._dragXMin?this.x=this._dragXMin:this._oX>this._dragXMax&&(this.x=this._dragXMax)),this._dragVertical&&(this.y=this._oY+this._eventData.global.y-this._dragSaveY,this._oY<this._dragYMin?this.y=this._dragYMin:this._oY>this._dragYMax&&(this.y=this._dragYMax)),this._dragSaveX=this._eventData.global.x,this._dragSaveY=this._eventData.global.y,this.emit(this._onDragUpdateEvent,this),Hr.mouse.isDown||this._upOutSide()))}},{key:"_down",value:function(t){this._isDrag&&(this._eventData=t.data,this._dragSaveX=this._eventData.global.x,this._dragSaveY=this._eventData.global.y,this._isStartDrag=!0,this.emit(this._onDragStartEvent,this)),this.emit(this._onDownEvent,this)}},{key:"_over",value:function(){this.emit(this._onOverEvent,this)}},{key:"_out",value:function(){this.emit(this._onOutEvent,this)}},{key:"_upOutSide",value:function(){this._out(),this.emit(this._onUpOutSideEvent,this)}},{key:"_up",value:function(){this.emit(this._onUpEvent,this),null!=this._externalMethod&&this._externalMethod.apply(null,this._externalMethodParams)}},{key:"_globalMouseUp",value:function(){this._isDrag&&this._isStartDrag&&(this._eventData=null,this._isStartDrag=!1,this.emit(this._onDragStopEvent,this))}},{key:"setAll",value:function(t,e){for(var i,n=0;n<this.numChildren;)null!=(i=this.children[n++])&&(i[t]=e)}},{key:"callAll",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(null!=this.children)for(var i,n=0,s=this.numChildren;n<this.numChildren&&this.numChildren;)(i=this.children[n++])&&i[t].apply(i,e),s!==this.numChildren&&(s--,n--)}},{key:"setXY",value:function(t,e){this._oX=t,this._oY=e,this.position.set(t,e)}},{key:"setSize",value:function(t,e){this.width=t,this.height=e}},{key:"setScale",value:function(t,e){this.scale.set(t,e)}},{key:"setAnchor",value:function(t,e){this.anchor.set(t,e)}},{key:"setPivot",value:function(t,e){this.pivot.set(t,e),this.x=this._oX+t,this.y=this._oY+e}},{key:"externalMethod",value:function(t,e){this.input||(this.input=!0),this._externalMethod=t,this._externalMethodParams=e}},{key:"boundsDragRect",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:NaN,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:NaN,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:NaN,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:NaN;isNaN(t)||(this._dragXMin=t),isNaN(e)||(this._dragYMin=e),isNaN(i)||(this._dragXMax=i),isNaN(n)||(this._dragYMax=n)}},{key:"addOver",value:function(t,e,i){this.input||(this.input=!0),this._addNewEvent(this._onOverEvent,t,e,i)}},{key:"addOut",value:function(t,e,i){this.input||(this.input=!0),this._addNewEvent(this._onOutEvent,t,e,i)}},{key:"addDown",value:function(t,e,i){this.input||(this.input=!0),this._addNewEvent(this._onDownEvent,t,e,i)}},{key:"addUp",value:function(t,e,i){this.input||(this.input=!0),this._addNewEvent(this._onUpEvent,t,e,i)}},{key:"addUpOutSide",value:function(t,e,i){this.input||(this.input=!0),this._addNewEvent(this._onUpOutSideEvent,t,e,i)}},{key:"addDragUpdate",value:function(t,e,i){this._addNewEvent(this._onDragUpdateEvent,t,e,i)}},{key:"addDragStart",value:function(t,e,i){this._addNewEvent(this._onDragStartEvent,t,e,i)}},{key:"addDragStop",value:function(t,e,i){this._addNewEvent(this._onDragStopEvent,t,e,i)}},{key:"addKill",value:function(t,e,i){this._addNewEvent(this._onKillEvent,t,e,i)}},{key:"addRevive",value:function(t,e,i){this._addNewEvent(this._onReviveEvent,t,e,i)}},{key:"addDestroy",value:function(t,e,i){this._addNewEvent(this._onDestroyEvent,t,e,i)}},{key:"_addNewEvent",value:function(t,e,i){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];n?this.once(t,e,i):this.on(t,e,i)}},{key:"addComplete",value:function(t,e,i){this._addNewEvent(this._onCompleteEvent,t,e,i)}},{key:"addLoop",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this._addNewEvent(this._onLoopEvent,t,e,i)}},{key:"addEndAnimation",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this._addNewEvent(this._onEndAnimationEvent,t,e,i)}},{key:"removeOver",value:function(t,e){this.removeListener(this._onOverEvent,t,e)}},{key:"removeOut",value:function(t,e){this.removeListener(this._onOutEvent,t,e)}},{key:"removeDown",value:function(t,e){this.removeListener(this._onDownEvent,t,e)}},{key:"removeUp",value:function(t,e){this.removeListener(this._onUpEvent,t,e)}},{key:"removeUpOutSide",value:function(t,e){this.removeListener(this._onUpOutSideEvent,t,e)}},{key:"removeDragUpdate",value:function(t,e){this.removeListener(this._onDragUpdateEvent,t,e)}},{key:"removeDragStart",value:function(t,e){this.removeListener(this._onDragStartEvent,t,e)}},{key:"removeDragStop",value:function(t,e){this.removeListener(this._onDragStopEvent,t,e)}},{key:"removeComplete",value:function(t,e){this.removeListener(this._onCompleteEvent,t,e)}},{key:"removeLoop",value:function(t,e){this.removeListener(this._onLoopEvent,t,e)}},{key:"removeEndAnimation",value:function(t,e){this.removeListener(this._onEndAnimationEvent,t,e)}},{key:"removeKill",value:function(t,e){this.removeListener(this._onKillEvent,t,e)}},{key:"removeRevive",value:function(t,e){this.removeListener(this._onReviveEvent,t,e)}},{key:"removDestroy",value:function(t,e){this.removeDestroy(t,e)}},{key:"removeDestroy",value:function(t,e){this.removeListener(this._onDestroyEvent,t,e)}},{key:"active",get:function(){return this._active}},{key:"scaleX",get:function(){return this.scale.x},set:function(t){this.scale.x=t}},{key:"scaleY",get:function(){return this.scale.y},set:function(t){this.scale.y=t}},{key:"pivotX",get:function(){return this.pivot.x},set:function(t){this.pivot.x=t}},{key:"pivotY",get:function(){return this.pivot.y},set:function(t){this.pivot.y=t}},{key:"anchorX",get:function(){return this.anchor.x},set:function(t){this.anchor.x=t}},{key:"anchorY",get:function(){return this.anchor.y},set:function(t){this.anchor.y=t}},{key:"localLeft",get:function(){return this._localBoundsRect.left}},{key:"localRight",get:function(){return this._localBoundsRect.right}},{key:"localTop",get:function(){return this._localBoundsRect.top}},{key:"localBottom",get:function(){return this._localBoundsRect.bottom}},{key:"localWidth",get:function(){return this._localBoundsRect.width}},{key:"localHeight",get:function(){return this._localBoundsRect.height}},{key:"globalLeft",get:function(){return this.getGlobalPosition().x+this.localLeft}},{key:"globalTop",get:function(){return this.getGlobalPosition().y+this.localTop}},{key:"worldX",get:function(){return this.getGlobalPosition().x}},{key:"worldY",get:function(){return this.getGlobalPosition().y}},{key:"x",get:function(){return this._oX=m(_(i.prototype),"x",this),this._oX},set:function(t){x(_(i.prototype),"x",this._oX=t,this,!0)}},{key:"y",get:function(){return this._oY=m(_(i.prototype),"y",this),this._oY},set:function(t){x(_(i.prototype),"y",this._oY=t,this,!0)}},{key:"height",get:function(){return this._oHeight=m(_(i.prototype),"height",this),this._oHeight},set:function(t){return x(_(i.prototype),"height",this._oHeight=t,this,!0)}},{key:"width",get:function(){return this._oWidth=m(_(i.prototype),"width",this),this._oWidth},set:function(t){return x(_(i.prototype),"width",this._oWidth=t,this,!0)}},{key:"oType",get:function(){return this._oType}},{key:"input",get:function(){return this._isCheckInput},set:function(t){this.input?this.interactive=t:t&&(this._isCheckInput=!0,this.interactive=!0,this.on("pointerdown",this._down,this),this.on("pointerup",this._up,this),this.on("pointerupoutside",this._upOutSide,this),this.on("pointerover",this._over,this),this.on("pointerout",this._out,this))}},{key:"drag",set:function(t){this.input||(this.input=!0),this._isDrag=t,this._listenMouseUp=t,this._listenMouseUp?Hr.mouse.addUpHandler(this._globalMouseUp,this):Hr.mouse.removeUpMouse(this._globalMouseUp,this),this._dragVertical=!0,this._dragHorizontal=!0}},{key:"allowHorizontalDrag",set:function(t){this._dragHorizontal=t}},{key:"allowVerticalDrag",set:function(t){this._dragVertical=t}},{key:"removeOnEnd",set:function(t){this._removeOnEnd=t}},{key:"isReversed",get:function(){return this._reverseActor}},{key:"loopCount",get:function(){return this._countLoop}},{key:"totalLoop",get:function(){return this._totalLoop},set:function(t){this._totalLoop=t}},{key:"fps",get:function(){return this._fps},set:function(t){this._fps=t}},{key:"aName",get:function(){return this._aName}},{key:"speed",get:function(){return this.animationSpeed/(this._fps/this._fpsGame)},set:function(t){this.animationSpeed=t*(this._fps/this._fpsGame)}},{key:"interactChild",set:function(t){this.interactiveChildren=t}},{key:"putOnCache",set:function(t){this._putOnCache=t}},{key:"revert",get:function(){return this._isRevert},set:function(t){this._isRevert!==t&&(this._isRevert=t,this.textures.reverse())}}]),i}(),L=function(){function t(e){l(this,t),this.actorStorage=new D,this._stage=e}return c(t,[{key:"setActorAtlas",value:function(t){this.actorStorage.has(t._cacheName)?(this.actorStorage.get(t._cacheName).push(t),this._stage.addChild(t),t.timer=Hr.add.timer(.01,this._trueVisible,this,0,!1,!0,0,[t]),t=null):Hr.error("not exists this entity in storage!!! name",t._cacheName)}},{key:"_trueVisible",value:function(t){t.visible=!0,t.renderable=!0,t.x=5*Hr.WIDTH+t.width,t.y=5*Hr.HEIGHT+t.height,t.timer=null}},{key:"getActorAtlas",value:function(t,e,i){this.actorStorage.has(t)||this.actorStorage.set(t,[]);var n=null;return this.actorStorage.get(t).length?(n=this.actorStorage.get(t).shift()).timer&&(n.timer.destroy(),n.timer=null):(n=new M(e,i))._cacheName=t,n}}]),t}(),P=[],U=[],N="undefined"!=typeof Uint8Array?Uint8Array:Array,I=!1;function R(){I=!0;for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",e=0,i=t.length;e<i;++e)P[e]=t[e],U[t.charCodeAt(e)]=e;U["-".charCodeAt(0)]=62,U["_".charCodeAt(0)]=63}function F(t,e,i){for(var n,s,r=[],o=e;o<i;o+=3)n=(t[o]<<16)+(t[o+1]<<8)+t[o+2],r.push(P[(s=n)>>18&63]+P[s>>12&63]+P[s>>6&63]+P[63&s]);return r.join("")}function Y(t){var e;I||R();for(var i=t.length,n=i%3,s="",r=[],o=16383,a=0,h=i-n;a<h;a+=o)r.push(F(t,a,a+o>h?h:a+o));return 1===n?(e=t[i-1],s+=P[e>>2],s+=P[e<<4&63],s+="=="):2===n&&(e=(t[i-2]<<8)+t[i-1],s+=P[e>>10],s+=P[e>>4&63],s+=P[e<<2&63],s+="="),r.push(s),r.join("")}function X(t,e,i,n,s){var r,o,a=8*s-n-1,h=(1<<a)-1,l=h>>1,u=-7,c=i?s-1:0,d=i?-1:1,_=t[e+c];for(c+=d,r=_&(1<<-u)-1,_>>=-u,u+=a;u>0;r=256*r+t[e+c],c+=d,u-=8);for(o=r&(1<<-u)-1,r>>=-u,u+=n;u>0;o=256*o+t[e+c],c+=d,u-=8);if(0===r)r=1-l;else{if(r===h)return o?NaN:1/0*(_?-1:1);o+=Math.pow(2,n),r-=l}return(_?-1:1)*o*Math.pow(2,r-n)}function B(t,e,i,n,s,r){var o,a,h,l=8*r-s-1,u=(1<<l)-1,c=u>>1,d=23===s?Math.pow(2,-24)-Math.pow(2,-77):0,_=n?0:r-1,p=n?1:-1,f=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,o=u):(o=Math.floor(Math.log(e)/Math.LN2),e*(h=Math.pow(2,-o))<1&&(o--,h*=2),(e+=o+c>=1?d/h:d*Math.pow(2,1-c))*h>=2&&(o++,h/=2),o+c>=u?(a=0,o=u):o+c>=1?(a=(e*h-1)*Math.pow(2,s),o+=c):(a=e*Math.pow(2,c-1)*Math.pow(2,s),o=0));s>=8;t[i+_]=255&a,_+=p,a/=256,s-=8);for(o=o<<s|a,l+=s;l>0;t[i+_]=255&o,_+=p,o/=256,l-=8);t[i+_-p]|=128*f}var z={}.toString,V=Array.isArray||function(t){return"[object Array]"==z.call(t)};function H(){return j.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function W(t,e){if(H()<e)throw new RangeError("Invalid typed array length");return j.TYPED_ARRAY_SUPPORT?(t=new Uint8Array(e)).__proto__=j.prototype:(null===t&&(t=new j(e)),t.length=e),t}function j(t,e,i){if(!(j.TYPED_ARRAY_SUPPORT||this instanceof j))return new j(t,e,i);if("number"==typeof t){if("string"==typeof e)throw new Error("If encoding is specified then the first argument must be a string");return q(this,t)}return G(this,t,e,i)}function G(t,e,i,n){if("number"==typeof e)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&e instanceof ArrayBuffer?function(t,e,i,n){if(e.byteLength,i<0||e.byteLength<i)throw new RangeError("'offset' is out of bounds");if(e.byteLength<i+(n||0))throw new RangeError("'length' is out of bounds");e=void 0===i&&void 0===n?new Uint8Array(e):void 0===n?new Uint8Array(e,i):new Uint8Array(e,i,n);j.TYPED_ARRAY_SUPPORT?(t=e).__proto__=j.prototype:t=J(t,e);return t}(t,e,i,n):"string"==typeof e?function(t,e,i){"string"==typeof i&&""!==i||(i="utf8");if(!j.isEncoding(i))throw new TypeError('"encoding" must be a valid string encoding');var n=0|tt(e,i),s=(t=W(t,n)).write(e,i);s!==n&&(t=t.slice(0,s));return t}(t,e,i):function(t,e){if(Q(e)){var i=0|Z(e.length);return 0===(t=W(t,i)).length||e.copy(t,0,0,i),t}if(e){if("undefined"!=typeof ArrayBuffer&&e.buffer instanceof ArrayBuffer||"length"in e)return"number"!=typeof e.length||(n=e.length)!=n?W(t,0):J(t,e);if("Buffer"===e.type&&V(e.data))return J(t,e.data)}var n;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(t,e)}function K(t){if("number"!=typeof t)throw new TypeError('"size" argument must be a number');if(t<0)throw new RangeError('"size" argument must not be negative')}function q(t,e){if(K(e),t=W(t,e<0?0:0|Z(e)),!j.TYPED_ARRAY_SUPPORT)for(var i=0;i<e;++i)t[i]=0;return t}function J(t,e){var i=e.length<0?0:0|Z(e.length);t=W(t,i);for(var n=0;n<i;n+=1)t[n]=255&e[n];return t}function Z(t){if(t>=H())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+H().toString(16)+" bytes");return 0|t}function Q(t){return!(null==t||!t._isBuffer)}function tt(t,e){if(Q(t))return t.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(t)||t instanceof ArrayBuffer))return t.byteLength;"string"!=typeof t&&(t=""+t);var i=t.length;if(0===i)return 0;for(var n=!1;;)switch(e){case"ascii":case"latin1":case"binary":return i;case"utf8":case"utf-8":case void 0:return Et(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*i;case"hex":return i>>>1;case"base64":return At(t).length;default:if(n)return Et(t).length;e=(""+e).toLowerCase(),n=!0}}function et(t,e,i){var n=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===i||i>this.length)&&(i=this.length),i<=0)return"";if((i>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return vt(this,e,i);case"utf8":case"utf-8":return dt(this,e,i);case"ascii":return pt(this,e,i);case"latin1":case"binary":return ft(this,e,i);case"base64":return ct(this,e,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return gt(this,e,i);default:if(n)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),n=!0}}function it(t,e,i){var n=t[e];t[e]=t[i],t[i]=n}function nt(t,e,i,n,s){if(0===t.length)return-1;if("string"==typeof i?(n=i,i=0):i>2147483647?i=2147483647:i<-2147483648&&(i=-2147483648),i=+i,isNaN(i)&&(i=s?0:t.length-1),i<0&&(i=t.length+i),i>=t.length){if(s)return-1;i=t.length-1}else if(i<0){if(!s)return-1;i=0}if("string"==typeof e&&(e=j.from(e,n)),Q(e))return 0===e.length?-1:st(t,e,i,n,s);if("number"==typeof e)return e&=255,j.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?s?Uint8Array.prototype.indexOf.call(t,e,i):Uint8Array.prototype.lastIndexOf.call(t,e,i):st(t,[e],i,n,s);throw new TypeError("val must be string, number or Buffer")}function st(t,e,i,n,s){var r,o=1,a=t.length,h=e.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(t.length<2||e.length<2)return-1;o=2,a/=2,h/=2,i/=2}function l(t,e){return 1===o?t[e]:t.readUInt16BE(e*o)}if(s){var u=-1;for(r=i;r<a;r++)if(l(t,r)===l(e,-1===u?0:r-u)){if(-1===u&&(u=r),r-u+1===h)return u*o}else-1!==u&&(r-=r-u),u=-1}else for(i+h>a&&(i=a-h),r=i;r>=0;r--){for(var c=!0,d=0;d<h;d++)if(l(t,r+d)!==l(e,d)){c=!1;break}if(c)return r}return-1}function rt(t,e,i,n){i=Number(i)||0;var s=t.length-i;n?(n=Number(n))>s&&(n=s):n=s;var r=e.length;if(r%2!=0)throw new TypeError("Invalid hex string");n>r/2&&(n=r/2);for(var o=0;o<n;++o){var a=parseInt(e.substr(2*o,2),16);if(isNaN(a))return o;t[i+o]=a}return o}function ot(t,e,i,n){return Dt(Et(e,t.length-i),t,i,n)}function at(t,e,i,n){return Dt(function(t){for(var e=[],i=0;i<t.length;++i)e.push(255&t.charCodeAt(i));return e}(e),t,i,n)}function ht(t,e,i,n){return at(t,e,i,n)}function lt(t,e,i,n){return Dt(At(e),t,i,n)}function ut(t,e,i,n){return Dt(function(t,e){for(var i,n,s,r=[],o=0;o<t.length&&!((e-=2)<0);++o)n=(i=t.charCodeAt(o))>>8,s=i%256,r.push(s),r.push(n);return r}(e,t.length-i),t,i,n)}function ct(t,e,i){return 0===e&&i===t.length?Y(t):Y(t.slice(e,i))}function dt(t,e,i){i=Math.min(t.length,i);for(var n=[],s=e;s<i;){var r,o,a,h,l=t[s],u=null,c=l>239?4:l>223?3:l>191?2:1;if(s+c<=i)switch(c){case 1:l<128&&(u=l);break;case 2:128==(192&(r=t[s+1]))&&(h=(31&l)<<6|63&r)>127&&(u=h);break;case 3:r=t[s+1],o=t[s+2],128==(192&r)&&128==(192&o)&&(h=(15&l)<<12|(63&r)<<6|63&o)>2047&&(h<55296||h>57343)&&(u=h);break;case 4:r=t[s+1],o=t[s+2],a=t[s+3],128==(192&r)&&128==(192&o)&&128==(192&a)&&(h=(15&l)<<18|(63&r)<<12|(63&o)<<6|63&a)>65535&&h<1114112&&(u=h)}null===u?(u=65533,c=1):u>65535&&(u-=65536,n.push(u>>>10&1023|55296),u=56320|1023&u),n.push(u),s+=c}return function(t){var e=t.length;if(e<=_t)return String.fromCharCode.apply(String,t);var i="",n=0;for(;n<e;)i+=String.fromCharCode.apply(String,t.slice(n,n+=_t));return i}(n)}j.TYPED_ARRAY_SUPPORT=void 0===e.TYPED_ARRAY_SUPPORT||e.TYPED_ARRAY_SUPPORT,H(),j.poolSize=8192,j._augment=function(t){return t.__proto__=j.prototype,t},j.from=function(t,e,i){return G(null,t,e,i)},j.TYPED_ARRAY_SUPPORT&&(j.prototype.__proto__=Uint8Array.prototype,j.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&j[Symbol.species]),j.alloc=function(t,e,i){return function(t,e,i,n){return K(e),e<=0?W(t,e):void 0!==i?"string"==typeof n?W(t,e).fill(i,n):W(t,e).fill(i):W(t,e)}(null,t,e,i)},j.allocUnsafe=function(t){return q(null,t)},j.allocUnsafeSlow=function(t){return q(null,t)},j.isBuffer=function(t){return null!=t&&(!!t._isBuffer||Ct(t)||function(t){return"function"==typeof t.readFloatLE&&"function"==typeof t.slice&&Ct(t.slice(0,0))}(t))},j.compare=function(t,e){if(!Q(t)||!Q(e))throw new TypeError("Arguments must be Buffers");if(t===e)return 0;for(var i=t.length,n=e.length,s=0,r=Math.min(i,n);s<r;++s)if(t[s]!==e[s]){i=t[s],n=e[s];break}return i<n?-1:n<i?1:0},j.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},j.concat=function(t,e){if(!V(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return j.alloc(0);var i;if(void 0===e)for(e=0,i=0;i<t.length;++i)e+=t[i].length;var n=j.allocUnsafe(e),s=0;for(i=0;i<t.length;++i){var r=t[i];if(!Q(r))throw new TypeError('"list" argument must be an Array of Buffers');r.copy(n,s),s+=r.length}return n},j.byteLength=tt,j.prototype._isBuffer=!0,j.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var e=0;e<t;e+=2)it(this,e,e+1);return this},j.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var e=0;e<t;e+=4)it(this,e,e+3),it(this,e+1,e+2);return this},j.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var e=0;e<t;e+=8)it(this,e,e+7),it(this,e+1,e+6),it(this,e+2,e+5),it(this,e+3,e+4);return this},j.prototype.toString=function(){var t=0|this.length;return 0===t?"":0===arguments.length?dt(this,0,t):et.apply(this,arguments)},j.prototype.equals=function(t){if(!Q(t))throw new TypeError("Argument must be a Buffer");return this===t||0===j.compare(this,t)},j.prototype.inspect=function(){var t="";return this.length>0&&(t=this.toString("hex",0,50).match(/.{2}/g).join(" "),this.length>50&&(t+=" ... ")),"<Buffer "+t+">"},j.prototype.compare=function(t,e,i,n,s){if(!Q(t))throw new TypeError("Argument must be a Buffer");if(void 0===e&&(e=0),void 0===i&&(i=t?t.length:0),void 0===n&&(n=0),void 0===s&&(s=this.length),e<0||i>t.length||n<0||s>this.length)throw new RangeError("out of range index");if(n>=s&&e>=i)return 0;if(n>=s)return-1;if(e>=i)return 1;if(this===t)return 0;for(var r=(s>>>=0)-(n>>>=0),o=(i>>>=0)-(e>>>=0),a=Math.min(r,o),h=this.slice(n,s),l=t.slice(e,i),u=0;u<a;++u)if(h[u]!==l[u]){r=h[u],o=l[u];break}return r<o?-1:o<r?1:0},j.prototype.includes=function(t,e,i){return-1!==this.indexOf(t,e,i)},j.prototype.indexOf=function(t,e,i){return nt(this,t,e,i,!0)},j.prototype.lastIndexOf=function(t,e,i){return nt(this,t,e,i,!1)},j.prototype.write=function(t,e,i,n){if(void 0===e)n="utf8",i=this.length,e=0;else if(void 0===i&&"string"==typeof e)n=e,i=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e|=0,isFinite(i)?(i|=0,void 0===n&&(n="utf8")):(n=i,i=void 0)}var s=this.length-e;if((void 0===i||i>s)&&(i=s),t.length>0&&(i<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var r=!1;;)switch(n){case"hex":return rt(this,t,e,i);case"utf8":case"utf-8":return ot(this,t,e,i);case"ascii":return at(this,t,e,i);case"latin1":case"binary":return ht(this,t,e,i);case"base64":return lt(this,t,e,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return ut(this,t,e,i);default:if(r)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),r=!0}},j.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var _t=4096;function pt(t,e,i){var n="";i=Math.min(t.length,i);for(var s=e;s<i;++s)n+=String.fromCharCode(127&t[s]);return n}function ft(t,e,i){var n="";i=Math.min(t.length,i);for(var s=e;s<i;++s)n+=String.fromCharCode(t[s]);return n}function vt(t,e,i){var n=t.length;(!e||e<0)&&(e=0),(!i||i<0||i>n)&&(i=n);for(var s="",r=e;r<i;++r)s+=Ot(t[r]);return s}function gt(t,e,i){for(var n=t.slice(e,i),s="",r=0;r<n.length;r+=2)s+=String.fromCharCode(n[r]+256*n[r+1]);return s}function yt(t,e,i){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>i)throw new RangeError("Trying to access beyond buffer length")}function mt(t,e,i,n,s,r){if(!Q(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>s||e<r)throw new RangeError('"value" argument is out of bounds');if(i+n>t.length)throw new RangeError("Index out of range")}function kt(t,e,i,n){e<0&&(e=65535+e+1);for(var s=0,r=Math.min(t.length-i,2);s<r;++s)t[i+s]=(e&255<<8*(n?s:1-s))>>>8*(n?s:1-s)}function xt(t,e,i,n){e<0&&(e=4294967295+e+1);for(var s=0,r=Math.min(t.length-i,4);s<r;++s)t[i+s]=e>>>8*(n?s:3-s)&255}function bt(t,e,i,n,s,r){if(i+n>t.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("Index out of range")}function wt(t,e,i,n,s){return s||bt(t,0,i,4),B(t,e,i,n,23,4),i+4}function St(t,e,i,n,s){return s||bt(t,0,i,8),B(t,e,i,n,52,8),i+8}j.prototype.slice=function(t,e){var i,n=this.length;if((t=~~t)<0?(t+=n)<0&&(t=0):t>n&&(t=n),(e=void 0===e?n:~~e)<0?(e+=n)<0&&(e=0):e>n&&(e=n),e<t&&(e=t),j.TYPED_ARRAY_SUPPORT)(i=this.subarray(t,e)).__proto__=j.prototype;else{var s=e-t;i=new j(s,void 0);for(var r=0;r<s;++r)i[r]=this[r+t]}return i},j.prototype.readUIntLE=function(t,e,i){t|=0,e|=0,i||yt(t,e,this.length);for(var n=this[t],s=1,r=0;++r<e&&(s*=256);)n+=this[t+r]*s;return n},j.prototype.readUIntBE=function(t,e,i){t|=0,e|=0,i||yt(t,e,this.length);for(var n=this[t+--e],s=1;e>0&&(s*=256);)n+=this[t+--e]*s;return n},j.prototype.readUInt8=function(t,e){return e||yt(t,1,this.length),this[t]},j.prototype.readUInt16LE=function(t,e){return e||yt(t,2,this.length),this[t]|this[t+1]<<8},j.prototype.readUInt16BE=function(t,e){return e||yt(t,2,this.length),this[t]<<8|this[t+1]},j.prototype.readUInt32LE=function(t,e){return e||yt(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},j.prototype.readUInt32BE=function(t,e){return e||yt(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},j.prototype.readIntLE=function(t,e,i){t|=0,e|=0,i||yt(t,e,this.length);for(var n=this[t],s=1,r=0;++r<e&&(s*=256);)n+=this[t+r]*s;return n>=(s*=128)&&(n-=Math.pow(2,8*e)),n},j.prototype.readIntBE=function(t,e,i){t|=0,e|=0,i||yt(t,e,this.length);for(var n=e,s=1,r=this[t+--n];n>0&&(s*=256);)r+=this[t+--n]*s;return r>=(s*=128)&&(r-=Math.pow(2,8*e)),r},j.prototype.readInt8=function(t,e){return e||yt(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},j.prototype.readInt16LE=function(t,e){e||yt(t,2,this.length);var i=this[t]|this[t+1]<<8;return 32768&i?4294901760|i:i},j.prototype.readInt16BE=function(t,e){e||yt(t,2,this.length);var i=this[t+1]|this[t]<<8;return 32768&i?4294901760|i:i},j.prototype.readInt32LE=function(t,e){return e||yt(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},j.prototype.readInt32BE=function(t,e){return e||yt(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},j.prototype.readFloatLE=function(t,e){return e||yt(t,4,this.length),X(this,t,!0,23,4)},j.prototype.readFloatBE=function(t,e){return e||yt(t,4,this.length),X(this,t,!1,23,4)},j.prototype.readDoubleLE=function(t,e){return e||yt(t,8,this.length),X(this,t,!0,52,8)},j.prototype.readDoubleBE=function(t,e){return e||yt(t,8,this.length),X(this,t,!1,52,8)},j.prototype.writeUIntLE=function(t,e,i,n){(t=+t,e|=0,i|=0,n)||mt(this,t,e,i,Math.pow(2,8*i)-1,0);var s=1,r=0;for(this[e]=255&t;++r<i&&(s*=256);)this[e+r]=t/s&255;return e+i},j.prototype.writeUIntBE=function(t,e,i,n){(t=+t,e|=0,i|=0,n)||mt(this,t,e,i,Math.pow(2,8*i)-1,0);var s=i-1,r=1;for(this[e+s]=255&t;--s>=0&&(r*=256);)this[e+s]=t/r&255;return e+i},j.prototype.writeUInt8=function(t,e,i){return t=+t,e|=0,i||mt(this,t,e,1,255,0),j.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),this[e]=255&t,e+1},j.prototype.writeUInt16LE=function(t,e,i){return t=+t,e|=0,i||mt(this,t,e,2,65535,0),j.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):kt(this,t,e,!0),e+2},j.prototype.writeUInt16BE=function(t,e,i){return t=+t,e|=0,i||mt(this,t,e,2,65535,0),j.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):kt(this,t,e,!1),e+2},j.prototype.writeUInt32LE=function(t,e,i){return t=+t,e|=0,i||mt(this,t,e,4,4294967295,0),j.TYPED_ARRAY_SUPPORT?(this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t):xt(this,t,e,!0),e+4},j.prototype.writeUInt32BE=function(t,e,i){return t=+t,e|=0,i||mt(this,t,e,4,4294967295,0),j.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):xt(this,t,e,!1),e+4},j.prototype.writeIntLE=function(t,e,i,n){if(t=+t,e|=0,!n){var s=Math.pow(2,8*i-1);mt(this,t,e,i,s-1,-s)}var r=0,o=1,a=0;for(this[e]=255&t;++r<i&&(o*=256);)t<0&&0===a&&0!==this[e+r-1]&&(a=1),this[e+r]=(t/o>>0)-a&255;return e+i},j.prototype.writeIntBE=function(t,e,i,n){if(t=+t,e|=0,!n){var s=Math.pow(2,8*i-1);mt(this,t,e,i,s-1,-s)}var r=i-1,o=1,a=0;for(this[e+r]=255&t;--r>=0&&(o*=256);)t<0&&0===a&&0!==this[e+r+1]&&(a=1),this[e+r]=(t/o>>0)-a&255;return e+i},j.prototype.writeInt8=function(t,e,i){return t=+t,e|=0,i||mt(this,t,e,1,127,-128),j.TYPED_ARRAY_SUPPORT||(t=Math.floor(t)),t<0&&(t=255+t+1),this[e]=255&t,e+1},j.prototype.writeInt16LE=function(t,e,i){return t=+t,e|=0,i||mt(this,t,e,2,32767,-32768),j.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8):kt(this,t,e,!0),e+2},j.prototype.writeInt16BE=function(t,e,i){return t=+t,e|=0,i||mt(this,t,e,2,32767,-32768),j.TYPED_ARRAY_SUPPORT?(this[e]=t>>>8,this[e+1]=255&t):kt(this,t,e,!1),e+2},j.prototype.writeInt32LE=function(t,e,i){return t=+t,e|=0,i||mt(this,t,e,4,2147483647,-2147483648),j.TYPED_ARRAY_SUPPORT?(this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24):xt(this,t,e,!0),e+4},j.prototype.writeInt32BE=function(t,e,i){return t=+t,e|=0,i||mt(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),j.TYPED_ARRAY_SUPPORT?(this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t):xt(this,t,e,!1),e+4},j.prototype.writeFloatLE=function(t,e,i){return wt(this,t,e,!0,i)},j.prototype.writeFloatBE=function(t,e,i){return wt(this,t,e,!1,i)},j.prototype.writeDoubleLE=function(t,e,i){return St(this,t,e,!0,i)},j.prototype.writeDoubleBE=function(t,e,i){return St(this,t,e,!1,i)},j.prototype.copy=function(t,e,i,n){if(i||(i=0),n||0===n||(n=this.length),e>=t.length&&(e=t.length),e||(e=0),n>0&&n<i&&(n=i),n===i)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(i<0||i>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),t.length-e<n-i&&(n=t.length-e+i);var s,r=n-i;if(this===t&&i<e&&e<n)for(s=r-1;s>=0;--s)t[s+e]=this[s+i];else if(r<1e3||!j.TYPED_ARRAY_SUPPORT)for(s=0;s<r;++s)t[s+e]=this[s+i];else Uint8Array.prototype.set.call(t,this.subarray(i,i+r),e);return r},j.prototype.fill=function(t,e,i,n){if("string"==typeof t){if("string"==typeof e?(n=e,e=0,i=this.length):"string"==typeof i&&(n=i,i=this.length),1===t.length){var s=t.charCodeAt(0);s<256&&(t=s)}if(void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!j.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<i)throw new RangeError("Out of range index");if(i<=e)return this;var r;if(e>>>=0,i=void 0===i?this.length:i>>>0,t||(t=0),"number"==typeof t)for(r=e;r<i;++r)this[r]=t;else{var o=Q(t)?t:Et(new j(t,n).toString()),a=o.length;for(r=0;r<i-e;++r)this[r+e]=o[r%a]}return this};var Tt=/[^+\/0-9A-Za-z-_]/g;function Ot(t){return t<16?"0"+t.toString(16):t.toString(16)}function Et(t,e){var i;e=e||1/0;for(var n=t.length,s=null,r=[],o=0;o<n;++o){if((i=t.charCodeAt(o))>55295&&i<57344){if(!s){if(i>56319){(e-=3)>-1&&r.push(239,191,189);continue}if(o+1===n){(e-=3)>-1&&r.push(239,191,189);continue}s=i;continue}if(i<56320){(e-=3)>-1&&r.push(239,191,189),s=i;continue}i=65536+(s-55296<<10|i-56320)}else s&&(e-=3)>-1&&r.push(239,191,189);if(s=null,i<128){if((e-=1)<0)break;r.push(i)}else if(i<2048){if((e-=2)<0)break;r.push(i>>6|192,63&i|128)}else if(i<65536){if((e-=3)<0)break;r.push(i>>12|224,i>>6&63|128,63&i|128)}else{if(!(i<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;r.push(i>>18|240,i>>12&63|128,i>>6&63|128,63&i|128)}}return r}function At(t){return function(t){var e,i,n,s,r,o;I||R();var a=t.length;if(a%4>0)throw new Error("Invalid string. Length must be a multiple of 4");r="="===t[a-2]?2:"="===t[a-1]?1:0,o=new N(3*a/4-r),n=r>0?a-4:a;var h=0;for(e=0,i=0;e<n;e+=4,i+=3)s=U[t.charCodeAt(e)]<<18|U[t.charCodeAt(e+1)]<<12|U[t.charCodeAt(e+2)]<<6|U[t.charCodeAt(e+3)],o[h++]=s>>16&255,o[h++]=s>>8&255,o[h++]=255&s;return 2===r?(s=U[t.charCodeAt(e)]<<2|U[t.charCodeAt(e+1)]>>4,o[h++]=255&s):1===r&&(s=U[t.charCodeAt(e)]<<10|U[t.charCodeAt(e+1)]<<4|U[t.charCodeAt(e+2)]>>2,o[h++]=s>>8&255,o[h++]=255&s),o}(function(t){if((t=function(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}(t).replace(Tt,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function Dt(t,e,i,n){for(var s=0;s<n&&!(s+i>=e.length||s>=t.length);++s)e[s+i]=t[s];return s}function Ct(t){return!!t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}e.setTimeout,e.clearTimeout;var Mt=e.performance||{};function Lt(t){return null===t}Mt.now||Mt.mozNow||Mt.msNow||Mt.oNow||Mt.webkitNow;var Pt,Ut,Nt=function(t){d(i,PIXI.Text);var e=g(i);function i(t,n){var s,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;l(this,i),n.defaultFontFamily=n.fontFamily,n.hasOwnProperty("locCheck")&&!n.locCheck||(n.fontFamily=Hr.assets.localAssets(n.fontFamily)),(s=e.call(this,t,n,r)).json=n,s._onKillEvent="kill_event",s._onReviveEvent="revive_event",s._onDestroyEvent="destroy_event",s._onDownEvent="down_event",s._onUpEvent="up_event",s._onUpOutSideEvent="up_out_event",s._onOverEvent="over_event",s._onOutEvent="out_event",s._onDragStartEvent="drag_start_event",s._onDragStopEvent="drag_stop_event",s._onDragUpdateEvent="drag_update_event",s._onTextEvent="text_update_event",s._onCountEvent="count_update_event",s._saveVisible=!0,Hr.debugMode&&(s._isOnDebugerUpdate=!0,Hr.addUpdater(s._updateDebug,f(s))),s._isUpdate=!1,s.aa_isRegOnDebug=!1,s.aa_debugAlign="",s.aa_debugAlignV="",s.aa_letterSpacing=-1,s._inDebug=!1,s.userData=null,s._active=!0,s._boundsRect=new E.Rectangle,s._localBoundsRect=new E.Rectangle,s._oX=0,s._oY=0,s._oWidth=0,s._oHeight=0,s._charCount=0,s._externalMethodParams=null,s._externalMethod=null,s._isDrag=!1,s._dragVertical=!1,s._dragHorizontal=!1,s._isStartDrag=!1,s._isCheckInput=!1,s._toUpperCase=!!n.hasOwnProperty("toUpperCase")&&n.toUpperCase,s._oType=E.OMY_TEXT_FONT,s._splitText=null,s._staticFirstText=null,s._staticLastText=null,s._textValue=t,s._fontEx="pt",s.style.fontSize.split("px").length>1&&(s._fontEx="px"),s._fontSize=Number(s.style.fontSize.split(s._fontEx)[0]),s._fontStyle=n.fontFamily,s._defaultFontStyle=n.defaultFontFamily,s._align=n.align||"left",s._alignV=n.alignV||"top",s.align=s._align,s.alignV=s._alignV,s._checkFontSize=n.checkFontSize||!1,s._fullCheckFontSize=n.fullCheckFontSize||!1;var o=!(n.height&&n.width||s.text.length);return o&&(s.text="0"),s._maxWidth=n.width||s.width,s._maxHeight=n.height||s.height,o&&(s.text=""),s._locTextConf=n.locConfig,s._soundUp=null,s._soundOver=null,s._locTextConf&&s._locTextConf[Hr.language]&&s._locTextConf[Hr.language].hasOwnProperty("toUpperCase")&&(s._toUpperCase=s._locTextConf[Hr.language].toUpperCase),n.locConst?(s._isLocText=!0,Hr.loc.addUpdate(s._updateText,f(s))):s._isLocText=!1,s._locCheck=!n.hasOwnProperty("locCheck")||n.locCheck,s._isLocalFont=Hr.assets.isLocalAssets(s._defaultFontStyle)&&s._locCheck,s._isLocalFont&&!s._isLocText&&Hr.loc.addUpdate(s._updateText,f(s)),s._oneLine=!n.hasOwnProperty("oneLine")||n.oneLine,s._oneLine?(s.style.wordWrap=!1,s.style.wordWrapWidth=Number.MAX_VALUE):(s.style.wordWrap=!0,s.style.wordWrapWidth=s._maxWidth),n.hasOwnProperty("fillGradientType")&&(s.style.fillGradientType=1===n.fillGradientType?PIXI.TEXT_GRADIENT.LINEAR_VERTICAL:PIXI.TEXT_GRADIENT.LINEAR_HORIZONTAL),n.hasOwnProperty("resolution")&&(s.resolution=n.resolution),s.roundPixels=!n.hasOwnProperty("roundPixels")||n.roundPixels,s._splitDx=n.splitDx||0,s._splitVector=-1!==n.splitVector?1:n.splitVector,s.text=s._textValue,s.interactChild=!1,s._updateText(),s}return c(i,[{key:"_updateDebug",value:function(){this.aa_isRegOnDebug&&!this._inDebug?Hr.add.regDebugMode(this):!this.aa_isRegOnDebug&&this._inDebug&&Hr.add.removeFromDebug(this),this.aa_debugAlign.length&&(this.align=this.aa_debugAlign,this._graphicOverlay&&(this._graphicOverlay.destroy(),this._graphicOverlay=null,this.drawDebugRect()),this.aa_debugAlign=""),this.aa_debugAlignV.length&&(this.alignV=this.aa_debugAlignV,this._graphicOverlay&&(this._graphicOverlay.destroy(),this._graphicOverlay=null,this.drawDebugRect()),this.aa_debugAlignV=""),-1!==this.aa_letterSpacing&&(this.style.letterSpacing=this.aa_letterSpacing,this.aa_letterSpacing=-1)}},{key:"drawDebugRect",value:function(){if(this._graphicOverlay)this._graphicOverlay.width=Math.max(this._maxWidth,this.width),this._graphicOverlay.height=Math.max(this._maxHeight,this.height),this._graphicOverlay.rotation=this.rotation,this._updateDebugPosition();else{this._graphicOverlay=new E.Graphics,this._graphicOverlay.position.set(this.worldX,this.worldY),this._graphicOverlay.beginFill(16724549,.5);var t=this.align||"left",e=this.alignV||"top",i=0,n=0;switch(t){case"left":i=0;break;case"center":i=.5*-Math.max(this._maxWidth,this.width);break;case"right":i=-Math.max(this._maxWidth,this.width)}switch(e){case"top":n=0;break;case"middle":n=.5*-Math.max(this._maxHeight,this.height);break;case"bottom":n=-Math.max(this._maxHeight,this.height)}this._graphicOverlay.drawRect(i,n,Math.max(this._maxWidth,this.width),Math.max(this._maxHeight,this.height)),this._graphicOverlay.endFill(),this._graphicOverlay.rotation=this.rotation}Hr.stage.addChild(this._graphicOverlay)}},{key:"removeDrawDebugRect",value:function(){this._graphicOverlay&&this._graphicOverlay.parent&&Hr.stage.removeChild(this._graphicOverlay)}},{key:"_updateDebugPosition",value:function(){this._graphicOverlay.x=this.worldX,this._graphicOverlay.y=this.worldY}},{key:"resetCheckScale",value:function(){this._charCount=0}},{key:"_updateText",value:function(){this._charCount=-1,this._locTextConf&&(this._locTextConf[Hr.language]&&this._locTextConf[Hr.language].hasOwnProperty("toUpperCase")?this._toUpperCase=this._locTextConf[Hr.language].toUpperCase:this._toUpperCase=!!this.json.hasOwnProperty("toUpperCase")&&this.json.toUpperCase),this.setNewFont(this._isLocalFont?Hr.assets.localAssets(this._defaultFontStyle):this._fontStyle)}},{key:"setColor",value:function(t){this.style.fill=t}},{key:"kill",value:function(){return this._active&&(this._active=!1,this._isUpdate&&Hr.removeUpdater(this.update,this),this._isOnDebugerUpdate&&(this._isOnDebugerUpdate=!1,Hr.removeUpdater(this._updateDebug,this)),this.input&&(this.input=!1),this._saveVisible=this.visible,this.visible=!1,this.renderable=!1,this.emit(this._onKillEvent,this)),this}},{key:"revive",value:function(){return this._active||(this._active=!0,this.renderable=!0,this._isUpdate&&Hr.addUpdater(this.update,this),Hr.debugMode&&!this._isOnDebugerUpdate&&(this._isOnDebugerUpdate=!0,Hr.addUpdater(this._updateDebug,this)),this.input&&(this.input=!0),this.visible=this._saveVisible,this.emit(this._onReviveEvent,this),Hr.game.addNextTickUpdate(this._positionSplitText,this)),this}},{key:"destroy",value:function(t){return t=t||{children:!0,texture:!1,baseTexture:!1},this._locTextConf=null,this.json=null,this._active=!1,this.userData=null,this._boundsRect=null,this._localBoundsRect=null,this._isDrag=!1,this._isStartDrag=!1,this._listenMouseUp&&(this._listenMouseUp=!1,Hr.mouse.removeUpMouse(this._globalMouseUp,this)),this._textValue=null,this._splitText=null,this._staticFirstText=null,this._staticLastText=null,this._eventData=null,this.isUpdate=!1,this._isOnDebugerUpdate&&(this._isOnDebugerUpdate=!1,Hr.removeUpdater(this._updateDebug,this)),(this._isLocText||this._isLocalFont)&&Hr.loc.removeUpdate(this._updateText,this),this.input&&(this.input=!1),this.removeAllListeners(this._onDragStartEvent),this.removeAllListeners(this._onDragStopEvent),this.removeAllListeners(this._onDragUpdateEvent),this.removeAllListeners(this._onDownEvent),this.removeAllListeners(this._onOutEvent),this.removeAllListeners(this._onOverEvent),this.removeAllListeners(this._onUpEvent),this.removeAllListeners(this._onUpOutSideEvent),this.emit(this._onDestroyEvent,this),this.removeAllListeners(this._onDestroyEvent),this.removeAllListeners(this._onKillEvent),this.removeAllListeners(this._onReviveEvent),this.removeAllListeners(this._onTextEvent),this.removeAllListeners(this._onCountEvent),this._externalMethod=null,this._externalMethodParams=null,this.renderable=!1,this.visible=!1,this._soundUp=null,this._soundOver=null,m(_(i.prototype),"destroy",this).call(this,t),this}},{key:"update",value:function(){this._isStartDrag&&(this._eventData.global.x===this._dragSaveX&&this._eventData.global.y===this._dragSaveY||(this._dragHorizontal&&(this.x=this._oX+this._eventData.global.x-this._dragSaveX,this._oX<this._dragXMin?this.x=this._dragXMin:this._oX>this._dragXMax&&(this.x=this._dragXMax)),this._dragVertical&&(this.y=this._oY+this._eventData.global.y-this._dragSaveY,this._oY<this._dragYMin?this.y=this._dragYMin:this._oY>this._dragYMax&&(this.y=this._dragYMax)),this._dragSaveX=this._eventData.global.x,this._dragSaveY=this._eventData.global.y,this.emit(this._onDragUpdateEvent,this),Hr.mouse.isDown||this._upOutSide()))}},{key:"_down",value:function(t){this._isDrag&&(this._eventData=t.data,this._dragSaveX=this._eventData.global.x,this._dragSaveY=this._eventData.global.y,this._isStartDrag=!0,this.emit(this._onDragStartEvent,this)),this.emit(this._onDownEvent,this)}},{key:"_over",value:function(){this.emit(this._onOverEvent,this),this._soundOver&&Hr.sound.play(this._soundOver)}},{key:"_out",value:function(){this.emit(this._onOutEvent,this)}},{key:"_upOutSide",value:function(){this._out(),this.emit(this._onUpOutSideEvent,this)}},{key:"_up",value:function(){this.emit(this._onUpEvent,this),this._soundUp&&Hr.sound.play(this._soundUp),null!=this._externalMethod&&this._externalMethod.apply(null,this._externalMethodParams)}},{key:"_globalMouseUp",value:function(){this._isDrag&&this._isStartDrag&&(this._eventData=null,this._isStartDrag=!1,this.emit(this._onDragStopEvent,this))}},{key:"setXY",value:function(t,e){this._oX=t,this._oY=e,this.position.set(t,e)}},{key:"setSize",value:function(t,e){this.width=t,this.height=e}},{key:"setScale",value:function(t,e){this.scale.set(t,e)}},{key:"setAnchor",value:function(t,e){this.anchor.set(t,e)}},{key:"setPivot",value:function(t,e){this.pivot.set(t,e),this.x=this._oX+t,this.y=this._oY+e}},{key:"_checkScale",value:function(){if(this._locTextConf&&this._locTextConf[Hr.language]&&!this._graphicOverlay){var t=Hr.isScreenPortrait&&this._locTextConf[Hr.language].v_fontSize||this._locTextConf[Hr.language].fontSize;this.style.fontSize=t||String(this._fontSize)+this._fontEx}else{this.style.fontSize=String(this._fontSize)+this._fontEx;var e=this.getLocalBounds(),i=this._oneLine?this._maxWidth:this._maxHeight,n=this._oneLine?"width":"height";if(i<e[n])for(var s=this._fontSize;s>0&&(s--,this.style.fontSize=String(s)+this._fontEx,!(i>=(e=this.getLocalBounds())[n])););if(this._fullCheckFontSize&&!this._oneLine&&(e=this.getLocalBounds(),(i=this._maxWidth)<e[n="width"]))for(var r=this._fontSize;r>0&&(r--,this.style.fontSize=String(r)+this._fontEx,!(i>=(e=this.getLocalBounds())[n])););}}},{key:"setNewFont",value:function(t){this.style&&(this._fontStyle=this.style.fontFamily=t,x(_(i.prototype),"text","",this,!0),this._charCount=0,this.text=this._textValue,this._graphicOverlay&&(this._graphicOverlay.width=Math.max(this._graphicOverlay.width,this._oWidth),this._graphicOverlay.height=Math.max(this._graphicOverlay.height,this._oHeight)))}},{key:"_positionSplitText",value:function(){if(this._splitText){var t,e,i=0,n=0;if(1===this._splitVector)i=this._splitText.width*((null===(t=this._splitText.anchor)||void 0===t?void 0:t.x)||0),n=this.width*Math.abs(this.anchorX-1);else i=this._splitText.width*(((null===(e=this._splitText.anchor)||void 0===e?void 0:e.x)||0)-1),n=-this.width*this.anchorX;this._splitText.x=this._oX+n+i+this._splitVector*this._splitDx}}},{key:"externalMethod",value:function(t,e){this.input||(this.input=!0),this._externalMethod=t,this._externalMethodParams=e}},{key:"boundsDragRect",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:NaN,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:NaN,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:NaN,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:NaN;isNaN(t)||(this._dragXMin=t),isNaN(e)||(this._dragYMin=e),isNaN(i)||(this._dragXMax=i),isNaN(n)||(this._dragYMax=n)}},{key:"addOver",value:function(t,e,i){this.input||(this.input=!0),this._addNewEvent(this._onOverEvent,t,e,i)}},{key:"addOut",value:function(t,e,i){this.input||(this.input=!0),this._addNewEvent(this._onOutEvent,t,e,i)}},{key:"addDown",value:function(t,e,i){this.input||(this.input=!0),this._addNewEvent(this._onDownEvent,t,e,i)}},{key:"addUp",value:function(t,e,i){this.input||(this.input=!0),this._addNewEvent(this._onUpEvent,t,e,i)}},{key:"addUpOutSide",value:function(t,e,i){this.input||(this.input=!0),this._addNewEvent(this._onUpOutSideEvent,t,e,i)}},{key:"addDragUpdate",value:function(t,e,i){this._addNewEvent(this._onDragUpdateEvent,t,e,i)}},{key:"addDragStart",value:function(t,e,i){this._addNewEvent(this._onDragStartEvent,t,e,i)}},{key:"addDragStop",value:function(t,e,i){this._addNewEvent(this._onDragStopEvent,t,e,i)}},{key:"addKill",value:function(t,e,i){this._addNewEvent(this._onKillEvent,t,e,i)}},{key:"addRevive",value:function(t,e,i){this._addNewEvent(this._onReviveEvent,t,e,i)}},{key:"addDestroy",value:function(t,e,i){this._addNewEvent(this._onDestroyEvent,t,e,i)}},{key:"addTextUpdate",value:function(t,e,i){this._addNewEvent(this._onTextEvent,t,e,i)}},{key:"addCharCountUpdate",value:function(t,e,i){this._addNewEvent(this._onCountEvent,t,e,i)}},{key:"_addNewEvent",value:function(t,e,i){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];n?this.once(t,e,i):this.on(t,e,i)}},{key:"removeOver",value:function(t,e){this.removeListener(this._onOverEvent,t,e)}},{key:"removeOut",value:function(t,e){this.removeListener(this._onOutEvent,t,e)}},{key:"removeDown",value:function(t,e){this.removeListener(this._onDownEvent,t,e)}},{key:"removeUp",value:function(t,e){this.removeListener(this._onUpEvent,t,e)}},{key:"removeUpOutSide",value:function(t,e){this.removeListener(this._onUpOutSideEvent,t,e)}},{key:"removeDragUpdate",value:function(t,e){this.removeListener(this._onDragUpdateEvent,t,e)}},{key:"removeDragStart",value:function(t,e){this.removeListener(this._onDragStartEvent,t,e)}},{key:"removeDragStop",value:function(t,e){this.removeListener(this._onDragStopEvent,t,e)}},{key:"removeKill",value:function(t,e){this.removeListener(this._onKillEvent,t,e)}},{key:"removeRevive",value:function(t,e){this.removeListener(this._onReviveEvent,t,e)}},{key:"removDestroy",value:function(t,e){this.removeDestroy(t,e)}},{key:"removeDestroy",value:function(t,e){this.removeListener(this._onDestroyEvent,t,e)}},{key:"removeTextUpdate",value:function(t,e){this.removeListener(this._onTextEvent,t,e)}},{key:"removeCharCountUpdate",value:function(t,e){this.removeListener(this._onCountEvent,t,e)}},{key:"align",get:function(){return this._align},set:function(t){switch(this._align=t,t){case"left":this.anchorX=0;break;case"center":this.anchorX=.5;break;case"right":this.anchorX=1;break;default:Hr.error("not exists value ",t)}this.style.align=t}},{key:"alignV",get:function(){return this._alignV},set:function(t){switch(this._alignV=t,t){case"top":this.anchorY=0;break;case"middle":this.anchorY=.5;break;case"bottom":this.anchorY=1;break;default:Hr.error("not exists value ",t)}}},{key:"isUpdate",get:function(){return this._isUpdate},set:function(t){!this._isUpdate&&t?Hr.addUpdater(this.update,this):this._isUpdate&&!t&&Hr.removeUpdater(this.update,this),this._isUpdate=t}},{key:"active",get:function(){return this._active}},{key:"scaleX",get:function(){return this.scale.x},set:function(t){this.scale.x=t}},{key:"scaleY",get:function(){return this.scale.y},set:function(t){this.scale.y=t}},{key:"pivotX",get:function(){return this.pivot.x},set:function(t){this.pivot.x=t}},{key:"pivotY",get:function(){return this.pivot.y},set:function(t){this.pivot.y=t}},{key:"anchorX",get:function(){return this.anchor.x},set:function(t){this.anchor.x=t}},{key:"anchorY",get:function(){return this.anchor.y},set:function(t){this.anchor.y=t}},{key:"localLeft",get:function(){return this._localBoundsRect.left}},{key:"localRight",get:function(){return this._localBoundsRect.right}},{key:"localTop",get:function(){return this._localBoundsRect.top}},{key:"localBottom",get:function(){return this._localBoundsRect.bottom}},{key:"localWidth",get:function(){return this._localBoundsRect.width}},{key:"localHeight",get:function(){return this._localBoundsRect.height}},{key:"globalLeft",get:function(){return this.getGlobalPosition().x+this.localLeft}},{key:"globalTop",get:function(){return this.getGlobalPosition().y+this.localTop}},{key:"worldX",get:function(){return this.getGlobalPosition().x}},{key:"worldY",get:function(){return this.getGlobalPosition().y}},{key:"text",get:function(){return m(_(i.prototype),"text",this)},set:function(t){this._textValue=t,this._isLocText?x(_(i.prototype),"text",this._toUpperCase?Hr.loc.getText(this._textValue).toUpperCase():Hr.loc.getText(this._textValue),this,!0):x(_(i.prototype),"text",this._toUpperCase?this._textValue.toUpperCase():this._textValue,this,!0),Lt(this._staticFirstText)||x(_(i.prototype),"text",this._staticFirstText+m(_(i.prototype),"text",this),this,!0),Lt(this._staticLastText)||x(_(i.prototype),"text",m(_(i.prototype),"text",this)+this._staticLastText,this,!0),this._charCount!==m(_(i.prototype),"text",this).length&&(this._charCount=m(_(i.prototype),"text",this).length,this.emit(this._onCountEvent),this.style&&this._checkFontSize&&this._checkScale()),Hr.game.addNextTickUpdate(this._positionSplitText,this),this.emit(this._onTextEvent)}},{key:"splitText",get:function(){return this._splitText},set:function(t){this._splitText=t,Hr.game.addNextTickUpdate(this._positionSplitText,this)}},{key:"staticFirstText",get:function(){return this._staticFirstText},set:function(t){this._staticFirstText=t,this.text=this._textValue}},{key:"staticLastText",get:function(){return this._staticLastText},set:function(t){this._staticLastText=t,this.text=this._textValue}},{key:"checkFontSize",get:function(){return this._checkFontSize},set:function(t){this._checkFontSize=t}},{key:"fullCheckFontSize",get:function(){return this._fullCheckFontSize},set:function(t){this._fullCheckFontSize=t}},{key:"x",get:function(){return this._oX=m(_(i.prototype),"x",this),this._oX},set:function(t){x(_(i.prototype),"x",this._oX=t,this,!0),this._graphicOverlay&&this._updateDebugPosition(),this._positionSplitText()}},{key:"y",get:function(){return this._oY=m(_(i.prototype),"y",this),this._oY},set:function(t){x(_(i.prototype),"y",this._oY=t,this,!0),this._graphicOverlay&&this._updateDebugPosition()}},{key:"height",get:function(){return this._graphicOverlay?this._graphicOverlay.height:(this._oHeight=m(_(i.prototype),"height",this),this._oHeight)},set:function(t){return this._graphicOverlay?this._graphicOverlay.height=t:x(_(i.prototype),"height",this._oHeight=t,this,!0)}},{key:"width",get:function(){return this._graphicOverlay?this._graphicOverlay.width:(this._oWidth=m(_(i.prototype),"width",this),this._oWidth)},set:function(t){return this._graphicOverlay?this._graphicOverlay.width=t:x(_(i.prototype),"width",this._oWidth=t,this,!0)}},{key:"rotation",get:function(){return m(_(i.prototype),"rotation",this)},set:function(t){x(_(i.prototype),"rotation",t,this,!0),this._graphicOverlay&&(this._graphicOverlay.rotation=t)}},{key:"fontSize",get:function(){return this._fontSize},set:function(t){if(String(t).split(this._fontEx).length>1&&(t=Number(String(t).split(this._fontEx)[0])),this._fontSize=t,this._checkFontSize)this._checkScale();else if(this._locTextConf&&this._locTextConf[Hr.language]&&!this._graphicOverlay){var e=Hr.isScreenPortrait&&this._locTextConf[Hr.language].v_fontSize||this._locTextConf[Hr.language].fontSize;this.style.fontSize=e||String(this._fontSize)+this._fontEx}else this.style.fontSize=String(this._fontSize)+this._fontEx;this._graphicOverlay&&(this._graphicOverlay.width=Math.max(this._graphicOverlay.width,this._oWidth),this._graphicOverlay.height=Math.max(this._graphicOverlay.height,this._oHeight))}},{key:"oneLine",get:function(){return this._oneLine},set:function(t){this._oneLine=t,this._oneLine?(this.style.wordWrap=!1,this.style.wordWrapWidth=Number.MAX_VALUE):(this.style.wordWrap=!0,this.style.wordWrapWidth=this._maxWidth)}},{key:"oType",get:function(){return this._oType}},{key:"input",get:function(){return this._isCheckInput},set:function(t){this.input?this.interactive=t:t&&(this._isCheckInput=!0,this.interactive=!0,this.on("pointerdown",this._down,this),this.on("pointerup",this._up,this),this.on("pointerupoutside",this._upOutSide,this),this.on("pointerover",this._over,this),this.on("pointerout",this._out,this))}},{key:"drag",set:function(t){this.input||(this.input=!0),this._isUpdate||(this.isUpdate=!0),this._isDrag=t,this._listenMouseUp=t,this._listenMouseUp?Hr.mouse.addUpHandler(this._globalMouseUp,this):Hr.mouse.removeUpMouse(this._globalMouseUp,this),this._dragVertical=!0,this._dragHorizontal=!0}},{key:"allowHorizontalDrag",set:function(t){this._dragHorizontal=t}},{key:"allowVerticalDrag",set:function(t){this._dragVertical=t}},{key:"interactChild",set:function(t){this.interactiveChildren=t}},{key:"textMaxWidth",set:function(t){this._maxWidth=t,this._oneLine||(this.style.wordWrapWidth=this._maxWidth),this.text=this._textValue}},{key:"textMaxHeight",set:function(t){this._maxHeight=t,this.text=this._textValue}},{key:"soundUp",set:function(t){this._soundUp=t}},{key:"soundOver",set:function(t){this._soundOver=t}}]),i}(),It=function(){function t(){l(this,t)}return c(t,null,[{key:"lpad",value:function(t,e,i){for(;t.length<i;)t=e+t;return t}},{key:"rpad",value:function(t,e,i){for(;t.length<i;)t=e+t;return t}},{key:"padZeros",value:function(t,e){for(;String(t).length<e;)t="0"+t;return t}},{key:"replaceAll",value:function(t,e,i){return t.split(e).join(i)}},{key:"charAtExt",value:function(t,e){return e<0?e=t.length+e+t.length*parseInt(e/t.length):e-=t.length*parseInt(e/t.length),t.charAt(e)}},{key:"reverse",value:function(t){return t.split("").reverse().join("")}},{key:"sprintf",value:function(t){for(var e=arguments.length,i=new Array(e>1?e-1:0),n=1;n<e;n++)i[n-1]=arguments[n];var s=0;return t.replace(/%s/g,(function(){return i[s++]}))}},{key:"sprintfCustom",value:function(t,e){for(var i=arguments.length,n=new Array(i>2?i-2:0),s=2;s<i;s++)n[s-2]=arguments[s];e=e||"%s";var r=0;return t.replace(new RegExp(e,"g"),(function(){return n[r++]}))}},{key:"findAndReplace",value:function(t,e){for(var i=0;i<e.length;i++)t=t.replace(new RegExp(e[i],"g"),i+2<2||arguments.length<=i+2?void 0:arguments[i+2]);return t}},{key:"color",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"none",i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",s=e+i+n;if(t.colorData||(t.colorData={}),t.colorData[s])return t.colorData[s];for(var r="0123456789ABCDEF",o="#",a=0;a<6;a++)o+=r[Math.floor(16*Math.random())];return t.colorData[s]=o,o}},{key:"extractCharCode",value:function(t){return t.codePointAt?t.codePointAt(0):t.charCodeAt(0)}},{key:"splitTextToCharacters",value:function(t){return Array.from?Array.from(t):t.split("")}}]),t}(),Rt=function(t){d(i,PIXI.BitmapText);var e=g(i);function i(t,n){var s;l(this,i),n.defaultFontName=n.fontName;var r=n.fontName;n.hasOwnProperty("locCheck")&&!n.locCheck||(r=Hr.assets.localAssets(n.fontName)),n.fontName=Hr.assets.existsBitmapFont(r),(s=e.call(this,t,n)).json=n,s._onKillEvent="kill_event",s._onReviveEvent="revive_event",s._onDestroyEvent="destroy_event",s._onDownEvent="down_event",s._onUpEvent="up_event",s._onUpOutSideEvent="up_out_event",s._onOverEvent="over_event",s._onOutEvent="out_event",s._onDragStartEvent="drag_start_event",s._onDragStopEvent="drag_stop_event",s._onDragUpdateEvent="drag_update_event",s._onTextEvent="text_update_event",s._onCountEvent="count_update_event",s._saveVisible=!0,Hr.debugMode&&(s._isOnDebugerUpdate=!0,Hr.addUpdater(s._updateDebug,f(s))),s._isUpdate=!1,s._isSplitUpdate=!1,s.aa_isRegOnDebug=!1,s.aa_debugFontName="",s.aa_debugAlign="",s.aa_debugAlignV="",s.aa_letterSpacing=-1,s._inDebug=!1,s.userData=null,s._active=!0,s._boundsRect=new E.Rectangle,s._localBoundsRect=new E.Rectangle,s._oX=0,s._oY=0,s._oWidth=0,s._oHeight=0,s._charCount=0,s._soundUp=null,s._soundOver=null,s._externalMethodParams=null,s._externalMethod=null,s._isDrag=!1,s._dragVertical=!1,s._dragHorizontal=!1,s._isStartDrag=!1,s._isCheckInput=!1,s._toUpperCase=!!n.hasOwnProperty("toUpperCase")&&n.toUpperCase,s._softAlign=!!n.hasOwnProperty("softAlign")&&n.softAlign,s._checkCustomW=!!n.hasOwnProperty("checkCustomW")&&n.checkCustomW,s._isCheckSizeChange=!1,s._ttCheckWidth=0,s._ttCheckWidthMax=3*Hr.fps,s._oType=E.OMY_TEXT_BITMAP,(n.hasOwnProperty("fill")||n.hasOwnProperty("tint"))&&(s.tint=n.fill||n.tint),s._pivotX=0,s._pivotY=0,s._splitText=null,s._splitInsideText=null,s._staticFirstText=null,s._staticLastText=null,s._textValue=t,s._fontDefSize=n.fontSize,s._fontStyle=n.fontName,s._defaultFontStyle=n.defaultFontName,s._dx=n.dx||0,s._dy=n.dy||0,s._maxFontSize=Hr.resources[s._fontStyle]?Hr.resources[s._fontStyle].bitmapFont.size:s._fontDefSize,s._positionDx=Hr.assets.getBitmapFontDx(s._defaultFontStyle),s._positionDy=Hr.assets.getBitmapFontDy(s._defaultFontStyle),s._align=n.align||"left",s._alignV=n.alignV||"top",s.align=s._align,s.alignV=s._alignV,s._checkFontSize=n.checkFontSize||!1,s._fullCheckFontSize=n.fullCheckFontSize||!1,s._forceCheckFontSize=n.forceCheckFontSize||!1,s._textBreak=n.textBreak||!1;var o=!(n.height&&n.width||s.text.length);if(o&&(s.text="0"),s._maxWidthConst=n.width||Number.MAX_VALUE,s._maxHeight=n.height||s.height,o&&(s.text=""),s._locTextConf=n.locConfig,s._locTextConf){var a=s._locTextConf[Hr.language];a&&a.hasOwnProperty("toUpperCase")&&(s._toUpperCase=a.toUpperCase),a&&a.hasOwnProperty("dx")&&(s._dx=a.dx),s.align=s.align,a&&a.hasOwnProperty("dy")&&(s._dy=a.dy),s.alignV=s.alignV}return n.locConst?(s._isLocText=!0,Hr.loc.addUpdate(s._updateText,f(s))):s._isLocText=!1,s._locCheck=!n.hasOwnProperty("locCheck")||n.locCheck,s._isLocalFont=Hr.assets.isLocalAssets(s._defaultFontStyle)&&s._locCheck,s._isLocalFont&&!s._isLocText&&Hr.loc.addUpdate(s._updateText,f(s)),n.letterSpacing&&(s.letterSpacing=n.letterSpacing),n.hasOwnProperty("resolution")&&(s.resolution=n.resolution),s.roundPixels=!n.hasOwnProperty("roundPixels")||n.roundPixels,s._oneLine=!n.hasOwnProperty("oneLine")||n.oneLine,s._oneLine?s.maxWidth=Number.MAX_VALUE:s.maxWidth=s._maxWidthConst,s._splitDx=n.splitDx||0,s._splitVector=-1!==n.splitVector?1:n.splitVector,s._hinField=n.hin||null,"hin"===Hr.language&&s._hinField&&(s._fontField=Hr.add.textJson(f(s),s._hinField)),s.text=s._textValue,s.interactChild=!1,s}return c(i,[{key:"_updateDebug",value:function(){this.aa_isRegOnDebug&&!this._inDebug?Hr.add.regDebugMode(this):!this.aa_isRegOnDebug&&this._inDebug&&Hr.add.removeFromDebug(this),this.aa_debugFontName.length&&(this.setNewFont(this.aa_debugFontName),this.aa_debugFontName=""),this.aa_debugAlign.length&&(this.align=this.aa_debugAlign,this._graphicOverlay&&(this._graphicOverlay.destroy(),this._graphicOverlay=null,this.drawDebugRect()),this.aa_debugAlign=""),this.aa_debugAlignV.length&&(this.alignV=this.aa_debugAlignV,this._graphicOverlay&&(this._graphicOverlay.destroy(),this._graphicOverlay=null,this.drawDebugRect()),this.aa_debugAlignV=""),-1!==this.aa_letterSpacing&&(this.letterSpacing=this.aa_letterSpacing,this.aa_letterSpacing=-1)}},{key:"drawDebugRect",value:function(){if(this._graphicOverlay)this._graphicOverlay.width=Math.max(this._maxWidthConst,this.width),this._graphicOverlay.height=Math.max(this._maxHeight,this.height),this._graphicOverlay.rotation=this.rotation,this._updateDebugPosition();else{this._graphicOverlay=new E.Graphics,this._graphicOverlay.position.set(this.worldX,this.worldY),this._graphicOverlay.beginFill(16724549,.5);var t=this.align||"left",e=this.alignV||"top",i=0,n=0;switch(t){case"left":i=0;break;case"center":i=.5*-Math.max(this._maxWidthConst,this.width);break;case"right":i=-Math.max(this._maxWidthConst,this.width)}switch(e){case"top":n=0;break;case"middle":n=.5*-Math.max(this._maxHeight,this.height);break;case"bottom":n=-Math.max(this._maxHeight,this.height)}this._graphicOverlay.drawRect(i,n,Math.max(this._maxWidthConst,this.width),Math.max(this._maxHeight,this.height)),this._graphicOverlay.endFill(),this._graphicOverlay.rotation=this.rotation}Hr.stage.addChild(this._graphicOverlay)}},{key:"removeDrawDebugRect",value:function(){this._graphicOverlay&&this._graphicOverlay.parent&&Hr.stage.removeChild(this._graphicOverlay)}},{key:"_updateDebugPosition",value:function(){this._graphicOverlay.x=this.worldX,this._graphicOverlay.y=this.worldY}},{key:"resetCheckScale",value:function(){this._charCount=0}},{key:"_updateText",value:function(){if(this._charCount=-1,"hin"===Hr.language&&this._hinField)return this._positionDx=0,this._positionDy=0,this.pivot.x=this._pivotX,this.pivot.y=this._pivotY,this._fontField||(this._fontField=Hr.add.textJson(this,this._hinField)),!Hr.isDesktop&&Hr.isScreenPortrait&&this.json.deepPosition&&Hr.updateGameSizeForce(this._fontField),this._customCollor&&this._fontField.setColor(this._customCollor),void(this.text=this._textValue);if(this._fontField&&(this._fontField.destroy(),this._fontField=null),this._positionDx=Hr.assets.getBitmapFontDx(this._defaultFontStyle),this._positionDy=Hr.assets.getBitmapFontDy(this._defaultFontStyle),this._locTextConf){var t=this._locTextConf[Hr.language];t&&t.hasOwnProperty("toUpperCase")?this._toUpperCase=t.toUpperCase:this._toUpperCase=!!this.json.hasOwnProperty("toUpperCase")&&this.json.toUpperCase,t&&t.hasOwnProperty("dx")?this._dx=t.dx:this._dx=this.json.dx||0,this.align=this.align,t&&t.hasOwnProperty("dy")?this._dy=t.dy:this._dy=this.json.dy||0,this.alignV=this.alignV}this.setNewFont(this._isLocalFont?Hr.assets.localAssets(this._defaultFontStyle):this._fontStyle)}},{key:"setColor",value:function(t){this._customCollor=this.tint=t,this._fontField&&this._fontField.setColor(t)}},{key:"kill",value:function(){return this._active&&(this._active=!1,this._isUpdate&&Hr.removeUpdater(this.update,this),this._isSplitUpdate&&Hr.removeUpdater(this._updateCheckSplit,this),this._isOnDebugerUpdate&&(this._isOnDebugerUpdate=!1,Hr.removeUpdater(this._updateDebug,this)),this.input&&(this.input=!1),this._saveVisible=this.visible,this.visible=!1,this.renderable=!1,this.emit(this._onKillEvent,this)),this}},{key:"revive",value:function(){return this._active||(this._active=!0,this.renderable=!0,this._isUpdate&&Hr.addUpdater(this.update,this),this._isSplitUpdate&&Hr.addUpdater(this._updateCheckSplit,this),Hr.debugMode&&!this._isOnDebugerUpdate&&(this._isOnDebugerUpdate=!0,Hr.addUpdater(this._updateDebug,this)),this.input&&(this.input=!0),this.visible=this._saveVisible,this.emit(this._onReviveEvent,this)),this}},{key:"destroy",value:function(t){return t=t||{children:!0,texture:!1,baseTexture:!1},this._locTextConf=null,this.json=null,this._active=!1,this.userData=null,this._boundsRect=null,this._localBoundsRect=null,this._isDrag=!1,this._isStartDrag=!1,this._listenMouseUp&&(this._listenMouseUp=!1,Hr.mouse.removeUpMouse(this._globalMouseUp,this)),this._textValue=null,this._splitText=null,this._splitInsideText=null,this._staticFirstText=null,this._staticLastText=null,this._eventData=null,this.isUpdate=!1,this._isSplitUpdate&&Hr.removeUpdater(this._updateCheckSplit,this),this._isSplitUpdate=!1,this._isOnDebugerUpdate&&(this._isOnDebugerUpdate=!1,Hr.removeUpdater(this._updateDebug,this)),(this._isLocText||this._isLocalFont)&&Hr.loc.removeUpdate(this._updateText,this),this.input&&(this.input=!1),this.removeAllListeners(this._onDragStartEvent),this.removeAllListeners(this._onDragStopEvent),this.removeAllListeners(this._onDragUpdateEvent),this.removeAllListeners(this._onDownEvent),this.removeAllListeners(this._onOutEvent),this.removeAllListeners(this._onOverEvent),this.removeAllListeners(this._onUpEvent),this.removeAllListeners(this._onUpOutSideEvent),this.emit(this._onDestroyEvent,this),this.removeAllListeners(this._onDestroyEvent),this.removeAllListeners(this._onKillEvent),this.removeAllListeners(this._onReviveEvent),this.removeAllListeners(this._onTextEvent),this.removeAllListeners(this._onCountEvent),this._externalMethod=null,this._externalMethodParams=null,this.renderable=!1,this.visible=!1,this._soundUp=null,this._soundOver=null,this._hinField=null,this._fontField=null,m(_(i.prototype),"destroy",this).call(this,t),this}},{key:"update",value:function(){this._isCheckSizeChange&&(this._saveBoundsW!==this.getLocalBounds().width&&(this._isCheckSizeChange=!1,this.isUpdate=!1,this.emit(this._onCountEvent)),--this._ttCheckWidth<0&&(this._isCheckSizeChange=!1)),this._isStartDrag&&(this._eventData.global.x===this._dragSaveX&&this._eventData.global.y===this._dragSaveY||(this._dragHorizontal&&(this.x=this._oX+this._eventData.global.x-this._dragSaveX,this._oX<this._dragXMin?this.x=this._dragXMin:this._oX>this._dragXMax&&(this.x=this._dragXMax)),this._dragVertical&&(this.y=this._oY+this._eventData.global.y-this._dragSaveY,this._oY<this._dragYMin?this.y=this._dragYMin:this._oY>this._dragYMax&&(this.y=this._dragYMax)),this._dragSaveX=this._eventData.global.x,this._dragSaveY=this._eventData.global.y,this.emit(this._onDragUpdateEvent,this),Hr.mouse.isDown||this._upOutSide()))}},{key:"_updateCheckSplit",value:function(){if(this._splitText&&(this._saveSplitX!==this._oX||this._saveSplitWidth!==this.width)){this._saveSplitX=this._oX,this._saveSplitWidth=this.width;var t,e,i=0,n=0;if(1===this._splitVector)i=this._splitText.width*((null===(t=this._splitText.anchor)||void 0===t?void 0:t.x)||0),n=this.width*Math.abs(this.anchorX-1);else i=this._splitText.width*(((null===(e=this._splitText.anchor)||void 0===e?void 0:e.x)||0)-1),n=-this.width*this.anchorX;this._splitText.x=this._oX+n+i+this._splitVector*this._splitDx}if(this._splitInsideText&&this._saveSplitWidth!==this.width){this._saveSplitWidth=this.width,this._splitInsideText.visible=!1;var s,r,o=0,a=0;if(1===this._splitVector)o=this._splitInsideText.width*((null===(s=this._splitInsideText.anchor)||void 0===s?void 0:s.x)||0),a=this.width*Math.abs(this.anchorX-1);else o=this._splitInsideText.width*(((null===(r=this._splitInsideText.anchor)||void 0===r?void 0:r.x)||0)-1),a=-this.width*this.anchorX;this._splitInsideText.x=a+o+this._splitVector*this._splitDx,this._splitInsideText.visible=!0}}},{key:"_down",value:function(t){this._isDrag&&(this._eventData=t.data,this._dragSaveX=this._eventData.global.x,this._dragSaveY=this._eventData.global.y,this._isStartDrag=!0,this.emit(this._onDragStartEvent,this)),this.emit(this._onDownEvent,this)}},{key:"_over",value:function(){this.emit(this._onOverEvent,this),this._soundOver&&Hr.sound.play(this._soundOver)}},{key:"_out",value:function(){this.emit(this._onOutEvent,this)}},{key:"_upOutSide",value:function(){this._out(),this.emit(this._onUpOutSideEvent,this)}},{key:"_up",value:function(){this.emit(this._onUpEvent,this),this._soundUp&&Hr.sound.play(this._soundUp),null!=this._externalMethod&&this._externalMethod.apply(null,this._externalMethodParams)}},{key:"_globalMouseUp",value:function(){this._isDrag&&this._isStartDrag&&(this._eventData=null,this._isStartDrag=!1,this.emit(this._onDragStopEvent,this))}},{key:"setXY",value:function(t,e){this._oX=t,this._oY=e,this.position.set(t,e)}},{key:"setSize",value:function(t,e){this.width=t,this.height=e}},{key:"setScale",value:function(t,e){this.scale.set(t,e)}},{key:"setAnchor",value:function(t,e){this.anchor.set(t,e)}},{key:"setPivot",value:function(t,e){this.pivot.set(t,e),this.x=this._oX+t,this.y=this._oY+e}},{key:"_checkScale",value:function(){if(this._locTextConf&&this._locTextConf[Hr.language]&&!this._graphicOverlay){var t=Hr.isScreenPortrait&&this._locTextConf[Hr.language].v_fontSize||this._locTextConf[Hr.language].fontSize;x(_(i.prototype),"fontSize",t||this._fontDefSize,this,!0),this._forceCheckFontSize&&this._findNeedSize()}else x(_(i.prototype),"fontSize",this._fontDefSize,this,!0),this._checkFontSize&&this._findNeedSize()}},{key:"_findNeedSize",value:function(){try{this.getLocalBounds()}catch(t){return void OMY.Omy.warn("cannot get local bounds",this.text)}var t=this._oneLine?this._maxWidthConst:this._maxHeight,e=this._oneLine?"localWidth":"localHeight",n=this.localWidth;if(t<this[e]){var s=this._fontDefSize;x(_(i.prototype),"fontSize",s,this,!0),this.getLocalBounds(),n=this.localWidth;for(;s>0;)if(s--,t>=this[e]*(s/this._fontDefSize)){x(_(i.prototype),"fontSize",s,this,!0);break}}if(this._fullCheckFontSize&&!this._oneLine&&(t=this._maxWidthConst-30)<n)for(var r=m(_(i.prototype),"fontSize",this);r>0;)if(t>=n*(--r/this._fontDefSize)){x(_(i.prototype),"fontSize",r-1,this,!0);break}}},{key:"setNewFont",value:function(t){t&&(this._fontStyle=this.fontName=t),this._maxFontSize=Hr.resources[this._fontStyle]?Hr.resources[this._fontStyle].bitmapFont.size:this._fontDefSize,x(_(i.prototype),"text","",this,!0),this.text=this._textValue}},{key:"externalMethod",value:function(t,e){this.input||(this.input=!0),this._externalMethod=t,this._externalMethodParams=e}},{key:"boundsDragRect",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:NaN,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:NaN,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:NaN,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:NaN;isNaN(t)||(this._dragXMin=t),isNaN(e)||(this._dragYMin=e),isNaN(i)||(this._dragXMax=i),isNaN(n)||(this._dragYMax=n)}},{key:"forceUpdateWidth",value:function(){this._isCheckSizeChange=!0,this._ttCheckWidth=this._ttCheckWidthMax,this.isUpdate=!0,this._saveBoundsW=this.getLocalBounds().width}},{key:"addOver",value:function(t,e,i){this.input||(this.input=!0),this._addNewEvent(this._onOverEvent,t,e,i)}},{key:"addOut",value:function(t,e,i){this.input||(this.input=!0),this._addNewEvent(this._onOutEvent,t,e,i)}},{key:"addDown",value:function(t,e,i){this.input||(this.input=!0),this._addNewEvent(this._onDownEvent,t,e,i)}},{key:"addUp",value:function(t,e,i){this.input||(this.input=!0),this._addNewEvent(this._onUpEvent,t,e,i)}},{key:"addUpOutSide",value:function(t,e,i){this.input||(this.input=!0),this._addNewEvent(this._onUpOutSideEvent,t,e,i)}},{key:"addDragUpdate",value:function(t,e,i){this._addNewEvent(this._onDragUpdateEvent,t,e,i)}},{key:"addDragStart",value:function(t,e,i){this._addNewEvent(this._onDragStartEvent,t,e,i)}},{key:"addDragStop",value:function(t,e,i){this._addNewEvent(this._onDragStopEvent,t,e,i)}},{key:"addKill",value:function(t,e,i){this._addNewEvent(this._onKillEvent,t,e,i)}},{key:"addRevive",value:function(t,e,i){this._addNewEvent(this._onReviveEvent,t,e,i)}},{key:"addDestroy",value:function(t,e,i){this._addNewEvent(this._onDestroyEvent,t,e,i)}},{key:"addTextUpdate",value:function(t,e,i){this._addNewEvent(this._onTextEvent,t,e,i)}},{key:"addCharCountUpdate",value:function(t,e,i){this._addNewEvent(this._onCountEvent,t,e,i)}},{key:"_addNewEvent",value:function(t,e,i){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];n?this.once(t,e,i):this.on(t,e,i)}},{key:"removeOver",value:function(t,e){this.removeListener(this._onOverEvent,t,e)}},{key:"removeOut",value:function(t,e){this.removeListener(this._onOutEvent,t,e)}},{key:"removeDown",value:function(t,e){this.removeListener(this._onDownEvent,t,e)}},{key:"removeUp",value:function(t,e){this.removeListener(this._onUpEvent,t,e)}},{key:"removeUpOutSide",value:function(t,e){this.removeListener(this._onUpOutSideEvent,t,e)}},{key:"removeDragUpdate",value:function(t,e){this.removeListener(this._onDragUpdateEvent,t,e)}},{key:"removeDragStart",value:function(t,e){this.removeListener(this._onDragStartEvent,t,e)}},{key:"removeDragStop",value:function(t,e){this.removeListener(this._onDragStopEvent,t,e)}},{key:"removeKill",value:function(t,e){this.removeListener(this._onKillEvent,t,e)}},{key:"removeRevive",value:function(t,e){this.removeListener(this._onReviveEvent,t,e)}},{key:"removDestroy",value:function(t,e){this.removeDestroy(t,e)}},{key:"removeDestroy",value:function(t,e){this.removeListener(this._onDestroyEvent,t,e)}},{key:"removeTextUpdate",value:function(t,e){this.removeListener(this._onTextEvent,t,e)}},{key:"removeCharCountUpdate",value:function(t,e){this.removeListener(this._onCountEvent,t,e)}},{key:"align",get:function(){return this._align},set:function(t){if(this._align=t,!this._softAlign)switch(t){case"left":this.anchorX=this._dx;break;case"center":this.anchorX=.5+this._dx;break;case"right":this.anchorX=1+this._dx;break;default:Hr.error("not exists value ",t)}x(_(i.prototype),"align",t,this,!0)}},{key:"alignV",get:function(){return this._alignV},set:function(t){switch(this._alignV=t,t){case"top":this.anchorY=this._dy;break;case"middle":this.anchorY=.5+this._dy;break;case"bottom":this.anchorY=1+this._dy;break;default:Hr.error("not exists value ",t)}}},{key:"isUpdate",get:function(){return this._isUpdate},set:function(t){!this._isUpdate&&t?Hr.addUpdater(this.update,this):this._isUpdate&&!t&&Hr.removeUpdater(this.update,this),this._isUpdate=t}},{key:"active",get:function(){return this._active}},{key:"scaleX",get:function(){return this.scale.x},set:function(t){this.scale.x=t}},{key:"scaleY",get:function(){return this.scale.y},set:function(t){this.scale.y=t}},{key:"pivotX",get:function(){return this._pivotX},set:function(t){this._pivotX=t,this.pivot.x=this._pivotX+this._positionDx}},{key:"pivotY",get:function(){return this._pivotY},set:function(t){this._pivotY=t,this.pivot.y=this._pivotY+this._positionDy}},{key:"anchorX",get:function(){return this.anchor.x},set:function(t){this.anchor.x=t}},{key:"anchorY",get:function(){return this.anchor.y},set:function(t){this.anchor.y=t}},{key:"localLeft",get:function(){return this._localBoundsRect.left}},{key:"localRight",get:function(){return this._localBoundsRect.right}},{key:"localTop",get:function(){return this._localBoundsRect.top}},{key:"localBottom",get:function(){return this._localBoundsRect.bottom}},{key:"localWidth",get:function(){return this._localBoundsRect.width}},{key:"localHeight",get:function(){return this._localBoundsRect.height}},{key:"globalLeft",get:function(){return this.getGlobalPosition().x+this.localLeft}},{key:"globalTop",get:function(){return this.getGlobalPosition().y+this.localTop}},{key:"worldX",get:function(){return this.getGlobalPosition().x}},{key:"worldY",get:function(){return this.getGlobalPosition().y}},{key:"text",get:function(){return m(_(i.prototype),"text",this)},set:function(t){var e=this._textValue=""+t;if(e=this._isLocText?this._toUpperCase?Hr.loc.getText(this._textValue).toUpperCase():Hr.loc.getText(this._textValue):this._toUpperCase?this._textValue.toUpperCase():this._textValue,e=(this._staticFirstText?this._staticFirstText:"")+e+(this._staticLastText?this._staticLastText:""),this._textBreak&&(e=Hr.isDesktop?It.findAndReplace(e,["%d}","%l}","%p}"],"\n","",""):Hr.isScreenPortrait?It.findAndReplace(e,["%d}","%l}","%p}"],"","","\n"):It.findAndReplace(e,["%d}","%l}","%p}"],"","\n","")),x(_(i.prototype),"text",e,this,!0),this._fontField)return this._fontField.text=m(_(i.prototype),"text",this),x(_(i.prototype),"text"," ",this,!0),this.emit(this._onCountEvent),void this.emit(this._onTextEvent);if(this._checkScale(),this._checkCustomW&&this.forceUpdateWidth(),this._charCount!==m(_(i.prototype),"text",this).length&&(this._charCount=m(_(i.prototype),"text",this).length,this.emit(this._onCountEvent)),this.emit(this._onTextEvent),this._isLocalFont){var n=this.realSize/this._maxFontSize;this.pivot.x=this._pivotX+this._positionDx*n,this.pivot.y=this._pivotY+this._positionDy*n}}},{key:"tint",get:function(){return m(_(i.prototype),"tint",this)},set:function(t){x(_(i.prototype),"tint",Number(t),this,!0)}},{key:"fillTint",get:function(){return console.warn('OmyPixi.js v.2.0.0: fillTint not work. Pls use "tint"'),null},set:function(t){console.warn('OmyPixi.js v.2.0.0: fillTint not work. Pls use "tint"')}},{key:"splitText",get:function(){return this._splitText},set:function(t){this._splitInsideText||(!this._isSplitUpdate&&t?Hr.addUpdater(this._updateCheckSplit,this):this._isSplitUpdate&&!t&&Hr.removeUpdater(this._updateCheckSplit,this),this._isSplitUpdate=Boolean(t),this._splitText=t)}},{key:"splitInsideText",set:function(t){!this._isSplitUpdate&&t?Hr.addUpdater(this._updateCheckSplit,this):this._isSplitUpdate&&!t&&Hr.removeUpdater(this._updateCheckSplit,this),this._isSplitUpdate=Boolean(t),this._splitInsideText=t}},{key:"staticFirstText",get:function(){return this._staticFirstText},set:function(t){this._staticFirstText=t,this.text=this._textValue}},{key:"staticLastText",get:function(){return this._staticLastText},set:function(t){this._staticLastText=t,this.text=this._textValue}},{key:"x",get:function(){return this._oX=m(_(i.prototype),"x",this),this._oX},set:function(t){x(_(i.prototype),"x",this._oX=t,this,!0),this._graphicOverlay&&this._updateDebugPosition()}},{key:"checkFontSize",get:function(){return this._checkFontSize},set:function(t){this._checkFontSize=t}},{key:"fullCheckFontSize",get:function(){return this._fullCheckFontSize},set:function(t){this._fullCheckFontSize=t}},{key:"y",get:function(){return this._oY=m(_(i.prototype),"y",this),this._oY},set:function(t){x(_(i.prototype),"y",this._oY=t,this,!0),this._graphicOverlay&&this._updateDebugPosition()}},{key:"height",get:function(){return this._graphicOverlay?this._graphicOverlay.height:(this._oHeight=m(_(i.prototype),"height",this),this._oHeight)},set:function(t){return this._graphicOverlay?this._graphicOverlay.height=t:x(_(i.prototype),"height",this._oHeight=t,this,!0)}},{key:"width",get:function(){return this._graphicOverlay?this._graphicOverlay.width:(this._oWidth=m(_(i.prototype),"width",this),this._oWidth)},set:function(t){return this._graphicOverlay?this._graphicOverlay.width=t:x(_(i.prototype),"width",this._oWidth=t,this,!0)}},{key:"rotation",get:function(){return m(_(i.prototype),"rotation",this)},set:function(t){x(_(i.prototype),"rotation",t,this,!0),this._graphicOverlay&&(this._graphicOverlay.rotation=t)}},{key:"fontStyle",get:function(){return this._fontStyle}},{key:"fontSize",get:function(){return this._fontDefSize},set:function(t){if(this._fontDefSize=t,this._checkFontSize)this._checkScale();else if(this._locTextConf&&this._locTextConf[Hr.language]&&!this._graphicOverlay){var e=Hr.isScreenPortrait&&this._locTextConf[Hr.language].v_fontSize||this._locTextConf[Hr.language].fontSize;x(_(i.prototype),"fontSize",e||this._fontDefSize,this,!0)}else x(_(i.prototype),"fontSize",this._fontDefSize,this,!0);this._graphicOverlay&&(this._graphicOverlay.width=Math.max(this._graphicOverlay.width,this._oWidth),this._graphicOverlay.height=Math.max(this._graphicOverlay.height,this._oHeight))}},{key:"realSize",get:function(){return m(_(i.prototype),"fontSize",this)}},{key:"oneLine",get:function(){return this._oneLine},set:function(t){this._oneLine=t,this._oneLine?this.maxWidth=Number.MAX_VALUE:this.maxWidth=this._maxWidthConst}},{key:"oType",get:function(){return this._oType}},{key:"input",get:function(){return this._isCheckInput},set:function(t){this.input?this.interactive=t:t&&(this._isCheckInput=!0,this.interactive=!0,this.on("pointerdown",this._down,this),this.on("pointerup",this._up,this),this.on("pointerupoutside",this._upOutSide,this),this.on("pointerover",this._over,this),this.on("pointerout",this._out,this))}},{key:"drag",set:function(t){this.input||(this.input=!0),this._isUpdate||(this.isUpdate=!0),this._isDrag=t,this._listenMouseUp=t,this._listenMouseUp?Hr.mouse.addUpHandler(this._globalMouseUp,this):Hr.mouse.removeUpMouse(this._globalMouseUp,this),this._dragVertical=!0,this._dragHorizontal=!0}},{key:"allowHorizontalDrag",set:function(t){this._dragHorizontal=t}},{key:"allowVerticalDrag",set:function(t){this._dragVertical=t}},{key:"interactChild",set:function(t){this.interactiveChildren=t}},{key:"textMaxWidth",set:function(t){this._maxWidthConst=t,this._oneLine||(this.maxWidth=this._maxWidthConst),this.text=this._textValue}},{key:"textMaxHeight",set:function(t){this._maxHeight=t,this.text=this._textValue}},{key:"soundUp",set:function(t){this._soundUp=t}},{key:"soundOver",set:function(t){this._soundOver=t}}]),i}(),Ft=function(){function t(){l(this,t)}return c(t,null,[{key:"drawRectBorder",value:function(t,e,i,n,s){var r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"#000000",o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:1;t.lineStyle(o,r,a),t.moveTo(e,i),t.lineTo(e+n,i),t.lineTo(e+n,i+s),t.lineTo(e,i+s),t.lineTo(e,i)}},{key:"convertSecondsToString",value:function(e){var i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],s=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],r=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],o=t.int(e/86400),a=t.int((e-86400*o)/3600),h=t.int((e-86400*o-3600*a)/60),l=t.int(e-86400*o-3600*a-60*h),u="";return i&&o>0?(u=o+" d",n&&(u+=" "+a+" h"),s&&(u+=" "+h+" min")):n&&a>0?(u=a+" h",s&&(u+=" "+h+" min"),r&&(u+=" "+l+" sec")):s&&h>0?(u=h+" min",r&&(u+=" "+l+" sec")):r&&l>0&&(u=l+" sec"),u}},{key:"convertSecToStrSimple",value:function(e){var i=t.int(e/86400),n=t.int((e-86400*i)/3600),s=t.int((e-86400*i-3600*n)/60),r=t.int(e-86400*i-3600*n-60*s);return It.padZeros(s,2)+":"+It.padZeros(r,2)}},{key:"benchFunction",value:function(t){for(var e=new Date,i=arguments.length,n=new Array(i>1?i-1:0),s=1;s<i;s++)n[s-1]=arguments[s];for(var r=0;r<1e5;r++)t(n);return new Date-e}},{key:"sortNumber",value:function(t,e){var i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];i?t.sort((function(t,i){return t[e]>i[e]?1:t[e]<i[e]?-1:0})):t.sort((function(t,i){return t[e]>i[e]?-1:t[e]<i[e]?1:0}))}},{key:"sortNumberBy2Field",value:function(t,e,i){var n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];n?t.sort((function(t,n){return t[e]-n[e]||t[i]-n[i]})):t.sort((function(t,n){return n[e]-t[e]||n[i]-t[i]}))}},{key:"sortNumberSimple",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];e?t.sort((function(t,e){return t>e?1:t<e?-1:0})):t.sort((function(t,e){return t>e?-1:t<e?1:0}))}},{key:"sortString",value:function(t,e){t.sort((function(t,i){var n=t[e].toUpperCase(),s=i[e].toUpperCase();return n>s?1:n<s?-1:0}))}},{key:"sortStringSimple",value:function(t){t.sort((function(t,e){var i=t.toUpperCase(),n=e.toUpperCase();return i>n?1:i<n?-1:0}))}},{key:"int",value:function(t){return parseInt(t)}},{key:"randomiseArray",value:function(e){var i,n=e.concat();for(e.length=0;n.length;)i=t.randomRangeInt(0,n.length-1),e.push(n[i]),n.splice(i,1)}},{key:"replaceCharInString",value:function(t,e,i){for(var n=[],s=0;s<t.length&&-1!=(s=t.indexOf(e,s));s++)n.push(s),s+=e.length-1;if(n.length)for(var r=0;r<n.length;r++)t=t.substring(0,n[r])+i+t.substring(n[r]+i.length);return t}},{key:"StrReplace",value:function(t,e,i){for(var n="",s=0;s<t.length;s++)n=n.concat(s==e?i:t.slice(s,s+1));return n}},{key:"abs",value:function(t){return t<0?-1*t:t}},{key:"range",value:function(t,e,i){return t>e&&t<i}},{key:"closest",value:function(e,i,n){return t.abs(e-i)<t.abs(e-i)?i:n}},{key:"randomRangeInt",value:function(e,i){return t.int(Math.random()*(i-e+1))+e}},{key:"randomBoolean",value:function(){return 1===t.randomRangeInt(0,1)}},{key:"randomRangeNumber",value:function(t,e){return Math.random()*(e-t)+t}},{key:"randomNumberFromArray",value:function(e){return!e||e.length<2?(OMY.Omy.error("not have random list"),0):t.randomRangeNumber(e[0],e[1])}},{key:"randomList",value:function(e,i,n,s){if(s=s||!1,!e||!i)throw new Error("Not Null Array, Pleace");for(e.length<n&&(n=e.length),s&&(e=e.concat());n!=i.length;)i.push(e.splice(t.randomRangeInt(0,e.length-1),1)[0]);i=null,e=null}},{key:"choicer",value:function(){return arguments[t.randomRangeInt(0,arguments.length-1)]}},{key:"getRandomItem",value:function(e){return e[t.randomRangeInt(0,e.length-1)]}},{key:"equal",value:function(t,e,i){return i=i||1e-5,Math.abs(t-e)<=i}},{key:"distance",value:function(t,e,i,n){var s=i-t,r=n-e;return Math.sqrt(s*s+r*r)}},{key:"angle",value:function(e,i,n,s,r){r=r||!0;var o=n-e,a=s-i,h=Math.atan2(a,o);return r?t.normAngle(h):h}},{key:"angleDeg",value:function(e,i,n,s,r){r=r||!0;var o=n-e,a=s-i,h=Math.atan2(a,o)/Math.PI*180;return r?t.normAngleDeg(h):h}},{key:"toDegrees",value:function(t){return 180*t/Math.PI}},{key:"toRadians",value:function(t){return t*Math.PI/180}},{key:"normAngleDeg",value:function(t){return t<0?360+t:t>=360?t-360:t}},{key:"normAngle",value:function(t){return t<0?2*Math.PI+t:t>=2*Math.PI?t-2*Math.PI:t}},{key:"toPercent",value:function(t,e){return t/e*100}},{key:"fromPercent",value:function(t,e){return t*e/100}},{key:"valueFromRangeByPercent",value:function(t,e,i){return i*(e-t)/100+t}},{key:"percentFromRangeByValue",value:function(t,e,i){return 100*(i-t)/(e-t)}},{key:"maxFrom",value:function(t){return Math.max.apply(null,t)}},{key:"minFrom",value:function(t){return Math.min.apply(null,t)}},{key:"getMinValueFromVector",value:function(t){var e,i=t.length,n=Number.MAX_VALUE;for(e=0;e<i;e++)t[e]<n&&(n=t[e]);return n}},{key:"getMaxValueFromVector",value:function(t){var e,i=t.length,n=Number.MIN_VALUE;for(e=0;e<i;e++)t[e]>n&&(n=t[e]);return n}},{key:"calcVelocity",value:function(t,e,i,n){if(i=i||0,n=n||1e4,0!=(e=e||0))t+=e;else if(0!=i){t-i>0?t-=i:t+i<0?t+=i:t=0}return 0!=t&&1e4!=n&&(t>n?t=n:t<-n&&(t=-n)),t}},{key:"check",value:function(t){return 1&t}},{key:"roundNumber",value:function(t,e){return Math.round(t*e)/e}},{key:"roundNumberString",value:function(e,i,n){n=n||",";var s=String(t.roundNumber(e,i)).split(".");return s[1]=1==s.length?"00":1==s[1].length?s[1]+"0":s[1],s[0]+n+s[1]}},{key:"inArray",value:function(t,e){return t.indexOf(e)>-1}},{key:"createRandomArrayInt",value:function(e,i,n){for(var s=[],r=0;r<n;r++)s.push(t.randomRangeInt(e,i));return s}},{key:"createRandomiseArrayInt",value:function(e,i,n){n>Math.abs(i-e)&&(n=Math.abs(i-e));var s,r,o=n,a=[];for(s=0;s<o;s++){for(r=t.randomRangeInt(e,i);t.inArray(a,r);)++r>i&&(r=e);a.push(r)}return a}},{key:"createRandomiseArrayNumber",value:function(e,i,n){n>Math.abs(i-e)&&(n=Math.abs(i-e));var s,r,o=n,a=[];for(s=0;s<o;s++){for(r=t.randomRangeNumber(e,i);t.inArray(a,r);)++r>i&&(r=e);a.push(r)}return a}},{key:"getCashString",value:function(e){var i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:".",s=String(t.roundNumber(e,100));(s=s.split("."))[1]=i?1==s.length?"00":1==s[1].length?s[1]+"0":s[1]:1==s.length?"":1==s[1].length?s[1]+"0":s[1],s[1]=n+s[1];var r=s[0]+s[1];return s.length=0,s=null,r}},{key:"shuffle",value:function(t){for(var e=t.length-1;e>0;e--){var i=Math.floor(Math.random()*(e+1)),n=[t[i],t[e]];t[e]=n[0],t[i]=n[1]}return t}},{key:"uniqueID",value:function(){return Date.now().toString(36)+Math.random().toString(36).substr(2,5)}},{key:"jsonCopy",value:function(t){return JSON.parse(JSON.stringify(t))}},{key:"objectCopy",value:function(e,i){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];for(var s in i)(n||e.hasOwnProperty(s))&&("object"!==h(i[s])||Array.isArray(i[s])?Array.isArray(i[s])?e[s]=i[s].concat():e[s]=i[s]:t.objectCopy(e[s],i[s]))}},{key:"convertNumb",value:function(t){return t.toString().replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1 ")}},{key:"hexToRgb",value:function(t){var e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(t);return e?{r:parseInt(e[1],16),g:parseInt(e[2],16),b:parseInt(e[3],16)}:null}},{key:"rgbToHex",value:function(t,e,i){return"#"+((1<<24)+(t<<16)+(e<<8)+i).toString(16).slice(1)}},{key:"HexNumberToString",value:function(t){return"#"+(t=t.toString(16)).substr(0,2)+t.substr(2,2)+t.substr(4,2)}},{key:"HexStringToNumber",value:function(t){return t=t.replace("#",""),parseInt(t.substr(0,2)+t.substr(2,2)+t.substr(4,2),16)}}]),t}(),Yt=function(t){d(i,t);var e=g(i);function i(t,n){var s;return l(this,i),(s=e.call(this,t,n))._oType=E.OMY_TEXT_NUMBER_BITMAP,s._value="0",s._dollar=null,s._cent=null,s._newValue=null,s._incSecond=0,s._onCompleteInc=null,s._onStepInc=null,s._soundInc=null,s._specSymbol=null,s._zeroZeroType=!n.hasOwnProperty("zeroZeroType")||n.zeroZeroType,s._showCent=n.hasOwnProperty("showCent")?n.showCent:A.TEXT_NUMBER_SHOW_CENT,s._hideIfZero=!!n.hasOwnProperty("hideIfZero")&&n.hideIfZero,s._delaySymbol=n.hasOwnProperty("delaySymbol")?n.delaySymbol:".",s._simpleZero=!!n.hasOwnProperty("simpleZero")&&n.simpleZero,s._needNumberSpace=!!n.hasOwnProperty("needNumberSpace")&&n.needNumberSpace,s._lastText=n.hasOwnProperty("lastText")?n.lastText:"",s._firstText=n.hasOwnProperty("firstText")?n.firstText:"",t.length||(t=s._value),s.setNumbers(t),s}return c(i,[{key:"setNumbers",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(t<0)this._value="0",this.createText();else{if(t=Ft.roundNumber(t,100),e)return void(Number(this._value)!==t?(this._tween&&(this._tween.kill(),this._tween=null),this._tweenValue=this.value,this._newValue=String(Ft.roundNumber(t,100)),i=i||"Power0.easeNone",this._tween=Hr.add.tween(this,{_tweenValue:Ft.roundNumber(t,100)},this._incSecond,this._onFinishInc.bind(this),{onUpdate:this._onIncUpdate.bind(this),ease:i})):this._onCompleteInc&&this._onCompleteInc(this));this._tween&&(this._tween.kill(),this._tween=null),this._value=String(t),this.createText()}this.updateNumbers()}},{key:"_onFinishInc",value:function(){this._tween=null,this._onCompleteInc&&this._onCompleteInc(this)}},{key:"_onIncUpdate",value:function(){this._value=String(Ft.roundNumber(this._tweenValue,100)),this.createText(),this.updateNumbers(),this._onStepInc&&this._onStepInc(this._value)}},{key:"createText",value:function(){var t=this._value.split(".");this._zeroZeroType?t[1]=1===t.length?"00":1===t[1].length?t[1]+"0":t[1]:t[1]=1===t.length?"":1===t[1].length?t[1]+"0":t[1],this._dollar=this._needNumberSpace?Ft.convertNumb(Number(t[0])):t[0],this._cent=t[1],this._simpleZero&&(this._cent=""),t.length=0,t=null}},{key:"updateNumbers",value:function(){this._cent.length>0&&this._cent.length<=2&&(this._cent=this._delaySymbol+this._cent),this.text=this._firstText+this._dollar+(this._showCent?this._cent:"")+this._lastText,this._hideIfZero&&(0===this.value&&this.visible?this.visible=!1:this.visible||0===this.value||(this.visible=!0)),this._specSymbol&&(this._specSymbol.x=this.x+this.width*Math.abs(this.anchorX-1))}},{key:"kill",value:function(){return this._tween&&(this._tween.kill(),this._tween=null),m(_(i.prototype),"kill",this).call(this)}},{key:"destroy",value:function(){return this._value=null,this._dollar=null,this._cent=null,this._newValue=null,this._onCompleteInc=null,this._onStepInc=null,this._soundInc=null,this._specSymbol=null,this._delaySymbol=null,this._lastText=null,this._firstText=null,m(_(i.prototype),"destroy",this).call(this)}},{key:"stopInctAnimation",value:function(){this._tween&&(this._tween.kill(),this._tween=null,this._value=this._newValue,this.createText(),this.updateNumbers())}},{key:"pauseIncAnim",value:function(){this._tween&&this._tween.pause()}},{key:"continueIncAnim",value:function(){this._tween&&this._tween.resume()}},{key:"value",get:function(){return Number(this._value)}},{key:"specSymbol",set:function(t){this._specSymbol=t}},{key:"zeroZeroType",set:function(t){this._zeroZeroType=t}},{key:"onCompleteInc",set:function(t){this._onCompleteInc=t}},{key:"incSecond",get:function(){return this._incSecond},set:function(t){this._incSecond=t}},{key:"onStepInc",set:function(t){this._onStepInc=t}},{key:"soundInc",set:function(t){this._soundInc=t}},{key:"hideIfZero",set:function(t){this._hideIfZero=t,t&&0===this.value&&this.visible&&(this.visible=!1)}},{key:"checkFontSize",get:function(){return this._checkFontSize},set:function(t){this._checkFontSize=t}},{key:"delaySymbol",set:function(t){this._delaySymbol=t}},{key:"simpleZero",set:function(t){this._simpleZero=t}},{key:"lastText",set:function(t){this._lastText=t,this.updateNumbers()}},{key:"firstText",set:function(t){this._firstText=t,this.updateNumbers()}},{key:"showCent",set:function(t){this._showCent=t}}]),i}(Rt),Xt=function(t){d(i,t);var e=g(i);function i(t,n,s){var r;return l(this,i),(r=e.call(this,t,n,s))._oType=E.OMY_TEXT_NUMBER_FONT,r._value="0",r._valueBuffer=null,r._dollar=null,r._cent=null,r._newValue=null,r._incSecond=0,r._onCompleteInc=null,r._onStepInc=null,r._soundInc=null,r._specSymbol=null,r._zeroZeroType=!n.hasOwnProperty("zeroZeroType")||n.zeroZeroType,r._showCent=n.hasOwnProperty("showCent")?n.showCent:A.TEXT_NUMBER_SHOW_CENT,r._hideIfZero=!!n.hasOwnProperty("hideIfZero")&&n.hideIfZero,r._delaySymbol=n.hasOwnProperty("delaySymbol")?n.delaySymbol:".",r._simpleZero=!!n.hasOwnProperty("simpleZero")&&n.simpleZero,r._needNumberSpace=!!n.hasOwnProperty("needNumberSpace")&&n.needNumberSpace,r._lastText=n.hasOwnProperty("lastText")?n.lastText:"",r._firstText=n.hasOwnProperty("firstText")?n.firstText:"",t.length||(t=r._value),r.setNumbers(t),r}return c(i,[{key:"setNumbers",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(t<0)this._value="0",this.createText();else{if(t=Ft.roundNumber(t,100),e)return void(Number(this._value)!==t?(this._tween&&(this._tween.kill(),this._tween=null),this._tweenValue=this.value,this._newValue=String(Ft.roundNumber(t,100)),i=i||"Power0.easeNone",this._tween=Hr.add.tween(this,{_tweenValue:Ft.roundNumber(t,100)},this._incSecond,this._onFinishInc.bind(this),{onUpdate:this._onIncUpdate.bind(this),ease:i})):this._onCompleteInc&&this._onCompleteInc(this));this._tween&&(this._tween.kill(),this._tween=null),this._value=String(t),this.createText()}this.updateNumbers()}},{key:"_onFinishInc",value:function(){this._tween=null,this._onCompleteInc&&this._onCompleteInc(this)}},{key:"_onIncUpdate",value:function(){this._value=String(Ft.roundNumber(this._tweenValue,100)),this.createText(),this.updateNumbers(),this._onStepInc&&this._onStepInc(this._value)}},{key:"createText",value:function(){var t=this._value.split(".");this._zeroZeroType?t[1]=1===t.length?"00":1===t[1].length?t[1]+"0":t[1]:t[1]=1===t.length?"":1===t[1].length?t[1]+"0":t[1],this._dollar=this._needNumberSpace?Ft.convertNumb(Number(t[0])):t[0],this._cent=t[1],this._simpleZero&&(this._cent=""),t.length=0,t=null}},{key:"updateNumbers",value:function(){this._cent.length>0&&this._cent.length<=2&&(this._cent=this._delaySymbol+this._cent),this.text=this._firstText+this._dollar+(this._showCent?this._cent:"")+this._lastText,this._hideIfZero&&(0===this.value&&this.visible?this.visible=!1:this.visible||0===this.value||(this.visible=!0)),this._specSymbol&&(this._specSymbol.x=this.x+this.width*Math.abs(this.anchorX-1))}},{key:"kill",value:function(){return this._tween&&(this._tween.kill(),this._tween=null),m(_(i.prototype),"kill",this).call(this)}},{key:"destroy",value:function(){return this._value=null,this._dollar=null,this._cent=null,this._newValue=null,this._onCompleteInc=null,this._onStepInc=null,this._soundInc=null,this._specSymbol=null,this._delaySymbol=null,this._lastText=null,this._firstText=null,m(_(i.prototype),"destroy",this).call(this)}},{key:"stopInctAnimation",value:function(){this._tween&&(this._tween.kill(),this._tween=null,this._value=this._newValue,this.createText(),this.updateNumbers())}},{key:"pauseIncAnim",value:function(){this._tween&&this._tween.pause()}},{key:"continueIncAnim",value:function(){this._tween&&this._tween.resume()}},{key:"value",get:function(){return Number(this._value)}},{key:"specSymbol",set:function(t){this._specSymbol=t}},{key:"zeroZeroType",set:function(t){this._zeroZeroType=t}},{key:"onCompleteInc",set:function(t){this._onCompleteInc=t}},{key:"incSecond",get:function(){return this._incSecond},set:function(t){this._incSecond=t}},{key:"onStepInc",set:function(t){this._onStepInc=t}},{key:"soundInc",set:function(t){this._soundInc=t}},{key:"hideIfZero",set:function(t){this._hideIfZero=t,t&&0===this.value&&this.visible&&(this.visible=!1)}},{key:"delaySymbol",set:function(t){this._delaySymbol=t}},{key:"checkFontSize",get:function(){return this._checkFontSize},set:function(t){this._checkFontSize=t}},{key:"simpleZero",set:function(t){this._simpleZero=t}},{key:"lastText",set:function(t){this._lastText=t}},{key:"firstText",set:function(t){this._firstText=t}},{key:"showCent",set:function(t){this._showCent=t}}]),i}(Nt),Bt={BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,PAUSE:19,CTRL:17,ALT:18,CAPS_LOCK:20,ESCAPE:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,BACK_QUOTE:192,DELETE:46,_0:48,_1:49,_2:50,_3:51,_4:52,_5:53,_6:54,_7:55,_8:56,_9:57,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,CMD:91,CMD_RIGHT:93,NUM_0:96,NUM_1:97,NUM_2:98,NUM_3:99,NUM_4:100,NUM_5:101,NUM_6:102,NUM_7:103,NUM_8:104,NUM_9:105,MULTIPLY:106,ADD:107,SUBTRACT:109,DECIMAL_POINT:110,DIVIDE:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUM_LOCK:144,SCROLL_LOCK:145,SEMI_COLON:186,EQUAL:187,COMMA:188,DASH:189,PERIOD:190,FORWARD_SLASH:191,OPEN_BRACKET:219,BACK_SLASH:220,CLOSE_BRACKET:221,SINGLE_QUOTE:222},zt=function(t){d(i,PIXI.Container);var e=g(i);function i(){var t;return l(this,i),(t=e.call(this))._onKillEvent="kill_event",t._onReviveEvent="revive_event",t._onDestroyEvent="destroy_event",t._onDownEvent="down_event",t._onUpEvent="up_event",t._onUpOutSideEvent="up_out_event",t._onOverEvent="over_event",t._onOutEvent="out_event",t._onDragStartEvent="drag_start_event",t._onDragStopEvent="drag_stop_event",t._onDragUpdateEvent="drag_update_event",Hr.debugMode&&(t._isOnDebugerUpdate=!0,Hr.addUpdater(t._updateDebug,f(t))),t._isUpdate=!1,t.aa_isRegOnDebug=!1,t._inDebug=!1,t.userData=null,t._active=!0,t.numChildren=0,t._oX=0,t._oY=0,t._oWidth=0,t._oHeight=0,t._isAlign=!1,t.aa_alignX=-1,t.aa_alignY=-1,t.aa_alignEdit=!1,t.aa_alignUpdate=!1,t._externalMethodParams=null,t._externalMethod=null,t._isDrag=!1,t._dragVertical=!1,t._dragHorizontal=!1,t._isStartDrag=!1,t._isCheckInput=!1,t._soundUp=null,t._soundOver=null,t.autoReviveChildren=!0,t.needAutoRevive=!1,t._boundsRect=new E.Rectangle,t._localBoundsRect=new E.Rectangle,t._anchorX=0,t._anchorY=0,t._newAlign=!1,t._alignAutoUpdate=!1,t._oType=E.OMY_CONTAINER,t.name="g_"+Ft.uniqueID(),t}return c(i,[{key:"_updateDebug",value:function(){this.aa_isRegOnDebug&&!this._inDebug?Hr.add.regDebugMode(this):!this.aa_isRegOnDebug&&this._inDebug&&Hr.add.removeFromDebug(this),this._isAlign&&(this.aa_alignUpdate&&(this.alignContainer(),this.aa_alignUpdate=!1),this.aa_alignEdit&&(this._alignRect?(this._alignRect.alpha=.4,this._alignRect.visible=!0):(this._alignRect=Hr.add.rectJson(null,{x:0,y:0,width:10,height:10,alpha:.4}),this.addChildAt(this._alignRect,0)),Hr.add.rectJson(this,{x:-5,y:-5,width:10,height:10,alpha:1}),this.aa_alignEdit=!1),-1!==this.aa_alignX&&(this.aa_alignX<0&&(this.aa_alignX=0),this.aa_alignX>1&&(this.aa_alignX=1),this._alignX=this.aa_alignX,this.aa_alignX=-1,this.alignContainer()),-1!==this.aa_alignY&&(this.aa_alignY<0&&(this.aa_alignY=0),this.aa_alignY>1&&(this.aa_alignY=1),this._alignY=this.aa_alignY,this.aa_alignY=-1,this.alignContainer()))}},{key:"addChild",value:function(t){return m(_(i.prototype),"addChild",this).call(this,t),this.numChildren=this.children.length,t}},{key:"addChildAt",value:function(t,e){return m(_(i.prototype),"addChildAt",this).call(this,t,e),this.numChildren=this.children.length,t}},{key:"removeChild",value:function(t){return m(_(i.prototype),"removeChild",this).call(this,t),this.numChildren=this.children.length,t}},{key:"removeChildAt",value:function(t){var e=m(_(i.prototype),"getChildAt",this).call(this,t);return m(_(i.prototype),"removeChildAt",this).call(this,t),this.numChildren=this.children.length,e}},{key:"removeChildren",value:function(t,e){e=e<this.children.length?e:this.children.length-1;for(var i=[],n=t;n<=e;n++)i.push(this.getChildAt(n));for(var s in i)this.removeChild(i[s]);return i}},{key:"removeAll",value:function(){if(null!=this.children){for(;this.children.length;)this.removeChildAt(0);this.numChildren=0}}},{key:"contains",value:function(t){return null!=this.children&&this.children.indexOf(t)>=0}},{key:"kill",value:function(){if(this._active){if(this._active=!1,this._isUpdate&&Hr.removeUpdater(this.update,this),this._isOnDebugerUpdate&&(this._isOnDebugerUpdate=!1,Hr.removeUpdater(this._updateDebug,this)),null!=this.children)for(var t,e=0,i=this.numChildren;e<this.numChildren&&this.numChildren;)(t=this.children[e++]).active&&t.kill&&t.kill(),i!==this.numChildren&&(i--,e--);this.input&&(this.input=!1),this.renderable=!1,this.emit(this._onKillEvent,this)}return this}},{key:"revive",value:function(){if(!this._active){if(this._active=!0,this.renderable=!0,this._isUpdate&&Hr.addUpdater(this.update,this),Hr.debugMode&&!this._isOnDebugerUpdate&&(this._isOnDebugerUpdate=!0,Hr.addUpdater(this._updateDebug,this)),null!=this.children)for(var t,e=0;e<this.numChildren;)t=this.children[e++],(this.autoReviveChildren||t.needAutoRevive)&&!t.active&&t.revive&&t.revive();this.input&&(this.input=!0),this.emit(this._onReviveEvent,this)}return this}},{key:"destroy",value:function(t){return t=t||{children:!0,texture:!1,baseTexture:!1},this.json=null,this._active=!1,this.userData=null,this.numChildren=0,this._boundsRect=null,this._localBoundsRect=null,this._isDrag=!1,this._isStartDrag=!1,this._listenMouseUp&&(this._listenMouseUp=!1,Hr.mouse.removeUpMouse(this._globalMouseUp,this)),this._eventData=null,this.isUpdate=!1,this._isOnDebugerUpdate&&(this._isOnDebugerUpdate=!1,Hr.removeUpdater(this._updateDebug,this)),this.input&&(this.input=!1),this.removeAllListeners(this._onDragStartEvent),this.removeAllListeners(this._onDragStopEvent),this.removeAllListeners(this._onDragUpdateEvent),this.removeAllListeners(this._onDownEvent),this.removeAllListeners(this._onOutEvent),this.removeAllListeners(this._onOverEvent),this.removeAllListeners(this._onUpEvent),this.removeAllListeners(this._onUpOutSideEvent),this.emit(this._onDestroyEvent,this),this.removeAllListeners(this._onDestroyEvent),this.removeAllListeners(this._onKillEvent),this.removeAllListeners(this._onReviveEvent),this._externalMethod=null,this._externalMethodParams=null,this.renderable=!1,this.visible=!1,this._alignRect=null,this._alignChild=null,this._isAlign=!1,this._alignFormat=null,this._soundUp=null,this._soundOver=null,m(_(i.prototype),"destroy",this).call(this,t),this}},{key:"update",value:function(){this._isStartDrag&&(this._eventData.global.x===this._dragSaveX&&this._eventData.global.y===this._dragSaveY||(this._dragHorizontal&&(this.x=this._oX+this._eventData.global.x-this._dragSaveX,this._oX<this._dragXMin?this.x=this._dragXMin:this._oX>this._dragXMax&&(this.x=this._dragXMax)),this._dragVertical&&(this.y=this._oY+this._eventData.global.y-this._dragSaveY,this._oY<this._dragYMin?this.y=this._dragYMin:this._oY>this._dragYMax&&(this.y=this._dragYMax)),this._dragSaveX=this._eventData.global.x,this._dragSaveY=this._eventData.global.y,this.emit(this._onDragUpdateEvent,this),Hr.mouse.isDown||this._upOutSide())),this._alignAutoUpdate&&(this._saveAlignWidth===this._alignChild.width&&this._saveAlignHeight===this._alignChild.height||(this._saveAlignWidth=this._alignChild.width,this._saveAlignHeight=this._alignChild.height,this.alignContainer()))}},{key:"_down",value:function(t){this._isDrag&&(this._eventData=t.data,this._dragSaveX=this._eventData.global.x,this._dragSaveY=this._eventData.global.y,this._isStartDrag=!0,this.emit(this._onDragStartEvent,this)),this.emit(this._onDownEvent,this)}},{key:"_over",value:function(){this.emit(this._onOverEvent,this),this._soundOver&&Hr.sound.play(this._soundOver)}},{key:"_out",value:function(){this.emit(this._onOutEvent,this)}},{key:"_upOutSide",value:function(){this._out(),this.emit(this._onUpOutSideEvent,this)}},{key:"_up",value:function(){this.emit(this._onUpEvent,this),this._soundUp&&Hr.sound.play(this._soundUp),null!=this._externalMethod&&this._externalMethod.apply(null,this._externalMethodParams)}},{key:"_globalMouseUp",value:function(){this._isDrag&&this._isStartDrag&&(this._eventData=null,this._isStartDrag=!1,this.emit(this._onDragStopEvent,this))}},{key:"setAll",value:function(t,e){for(var i,n=0;n<this.numChildren;)null!=(i=this.children[n++])&&(i[t]=e)}},{key:"callAll",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(null!=this.children)for(var i,n=0,s=this.numChildren;n<this.numChildren&&this.numChildren;)(i=this.children[n++])&&i[t]&&i[t].apply(i,e),s!==this.numChildren&&(s--,n--)}},{key:"setXY",value:function(t,e){this._oX=t,this._oY=e,this.position.set(t,e)}},{key:"setSize",value:function(t,e){this.width=t,this.height=e}},{key:"setScale",value:function(t,e){this.scale.set(t,e)}},{key:"setAnchor",value:function(t,e){this.anchorX=t,this.anchorY=e}},{key:"setPivot",value:function(t,e){OMY.Omy.error("old method. not work")}},{key:"updateAnchor",value:function(){this.anchorX=this.anchorX,this.anchorY=this.anchorY}},{key:"externalMethod",value:function(t,e){this.input||(this.input=!0),this._externalMethod=t,this._externalMethodParams=e}},{key:"boundsDragRect",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:NaN,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:NaN,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:NaN,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:NaN;isNaN(t)||(this._dragXMin=t),isNaN(e)||(this._dragYMin=e),isNaN(i)||(this._dragXMax=i),isNaN(n)||(this._dragYMax=n)}},{key:"addOver",value:function(t,e,i){this.input||(this.input=!0),this._addNewEvent(this._onOverEvent,t,e,i)}},{key:"addOut",value:function(t,e,i){this.input||(this.input=!0),this._addNewEvent(this._onOutEvent,t,e,i)}},{key:"addDown",value:function(t,e,i){this.input||(this.input=!0),this._addNewEvent(this._onDownEvent,t,e,i)}},{key:"addUp",value:function(t,e,i){this.input||(this.input=!0),this._addNewEvent(this._onUpEvent,t,e,i)}},{key:"addUpOutSide",value:function(t,e,i){this.input||(this.input=!0),this._addNewEvent(this._onUpOutSideEvent,t,e,i)}},{key:"addDragUpdate",value:function(t,e,i){this._addNewEvent(this._onDragUpdateEvent,t,e,i)}},{key:"addDragStart",value:function(t,e,i){this._addNewEvent(this._onDragStartEvent,t,e,i)}},{key:"addDragStop",value:function(t,e,i){this._addNewEvent(this._onDragStopEvent,t,e,i)}},{key:"addKill",value:function(t,e,i){this._addNewEvent(this._onKillEvent,t,e,i)}},{key:"addRevive",value:function(t,e,i){this._addNewEvent(this._onReviveEvent,t,e,i)}},{key:"addDestroy",value:function(t,e,i){this._addNewEvent(this._onDestroyEvent,t,e,i)}},{key:"_addNewEvent",value:function(t,e,i){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];n?this.once(t,e,i):this.on(t,e,i)}},{key:"removeOver",value:function(t,e){this.removeListener(this._onOverEvent,t,e)}},{key:"removeOut",value:function(t,e){this.removeListener(this._onOutEvent,t,e)}},{key:"removeDown",value:function(t,e){this.removeListener(this._onDownEvent,t,e)}},{key:"removeUp",value:function(t,e){this.removeListener(this._onUpEvent,t,e)}},{key:"removeUpOutSide",value:function(t,e){this.removeListener(this._onUpOutSideEvent,t,e)}},{key:"removeDragUpdate",value:function(t,e){this.removeListener(this._onDragUpdateEvent,t,e)}},{key:"removeDragStart",value:function(t,e){this.removeListener(this._onDragStartEvent,t,e)}},{key:"removeDragStop",value:function(t,e){this.removeListener(this._onDragStopEvent,t,e)}},{key:"removeKill",value:function(t,e){this.removeListener(this._onKillEvent,t,e)}},{key:"removeRevive",value:function(t,e){this.removeListener(this._onReviveEvent,t,e)}},{key:"removDestroy",value:function(t,e){this.removeDestroy(t,e)}},{key:"removeDestroy",value:function(t,e){this.removeListener(this._onDestroyEvent,t,e)}},{key:"setToCenter",value:function(){this.updateTransform();var t,e=this.getLocalBounds(),i=e.x,n=e.x+e.width,s=e.y,r=e.y+e.height;if(null!=this.children)for(var o=0;o<this.numChildren;)(t=this.children[o++]).updateTransform(),t.x<i&&(i=t.x),t.x+t.width>n&&(n=t.x+t.width),t.y<s&&(s=t.y),t.y+t.height>r&&(r=t.y+t.height);var a=.5*-(n-i)-i,h=.5*-(r-s)-s;if(null!=this.children)for(var l=0;l<this.numChildren;)this.e=this.children[l++],this.e.x+=a,this.e.y+=h;this.x-=a,this.y-=h}},{key:"newAlignContainer",value:function(t){t&&this._alignFormat!==t&&(this._alignFormat=t,this._newAlign?this._updateAlignConfig():(this._alignX=t.x||0,this._alignY=t.y||0,this._alignRect.alpha=t.edit?.4:0,this._alignRect.visible=t.edit,this.alignContainer()))}},{key:"createAlign",value:function(t){for(this._isAlign=!0,this._alignFormat=t,this._alignX=t.x||0,this._alignY=t.y||0,this._alignRect=Hr.add.rectJson(null,{x:0,y:0,width:10,height:10}),this._alignRect.alpha=t.edit?.4:0,this._alignRect.visible=t.edit,this._alignChild=Hr.add.container(null),this._alignChild.name="canvas";this.children.length;)this._alignChild.addChild(this.removeChildAt(0));this.addChild(this._alignRect),this.addChild(this._alignChild),this.alignContainer()}},{key:"alignContainer",value:function(){if(this.callAll("alignContainer"),this._isAlign){if(this._newAlign)return void this._updateAlign();this._alignChild.updateTransform();var t=this._alignChild.getLocalBounds(),e=t.x,i=t.y,n=t.width,s=t.height;if(this._alignFormat.hasOwnProperty("rect")){if(this._alignRect.width=this._alignFormat.rect.width,this._alignRect.height=this._alignFormat.rect.height,this._alignChild.scale.set(1),this._alignRect.width<n||this._alignRect.height<s){var r=this._alignRect.width/n,o=this._alignRect.height/s,a=Math.min(r,o);e*=a,i*=a,n*=a,s*=a,this._alignChild.scale.set(a)}}else this._alignRect.width=n,this._alignRect.height=s;this._alignX>=0&&this._alignX<=1&&(this._alignChild.x=-1*(e+n*this._alignX),this._alignRect.x=-1*this._alignX*this._alignRect.width),this._alignY>=0&&this._alignY<=1&&(this._alignChild.y=-1*(i+s*this._alignY),this._alignRect.y=-1*this._alignY*this._alignRect.height)}}},{key:"_updateAlignConfig",value:function(){this._alignX=this._alignFormat.x||0,this._alignY=this._alignFormat.y||0,this._alignAutoUpdate=!!this._alignFormat.hasOwnProperty("autoUpdate")&&this._alignFormat.autoUpdate,this.alignContainer()}},{key:"setAlign",value:function(t){var e;for(this._isAlign=!0,this._newAlign=!0,this._alignFormat=t,this._alignX=t.x||0,this._alignY=t.y||0,this._alignAutoUpdate=!!t.hasOwnProperty("autoUpdate")&&t.autoUpdate,this._alignAutoUpdate&&(this.isUpdate=!0),null===(e=this._alignChild)||void 0===e||e.destroy(),this._alignChild=Hr.add.container(null),this._alignChild.name="canvas";this.children.length;)this._alignChild.addChild(this.removeChildAt(0));if(this.addChild(this._alignChild),t.edit){var i,n,s;null===(i=this._alignRect)||void 0===i||i.destroy();var r=(null===(n=t.rect)||void 0===n?void 0:n.width)||10,o=(null===(s=t.rect)||void 0===s?void 0:s.height)||10;this._alignRect=Hr.add.rectJson(null,{x:-r*this._alignX,y:-o*this._alignY,width:r,height:o,alpha:.4}),this.addChildAt(this._alignRect,0),this._centerPoint=Hr.add.rectJson(this,{x:-5,y:-5,width:10,height:10,alpha:1})}this.alignContainer()}},{key:"_updateAlign",value:function(){this._alignChild.updateTransform();var t=this._alignChild.getLocalBounds(),e=t.x,i=t.y,n=t.width,s=t.height;if(this._alignFormat.hasOwnProperty("rect")){if(this._alignChild.scale.set(1),this._alignFormat.rect.width<n||this._alignFormat.rect.height<s){var r=this._alignFormat.rect.width/n,o=this._alignFormat.rect.height/s,a=Math.min(r,o);e*=a,i*=a,n*=a,s*=a,this._alignChild.scale.set(a)}}else this._alignRect&&(this._alignRect.clear(),this._alignRect.beginFill(0,.4),this._alignRect.drawRect(-n*this._alignX,-s*this._alignY,n,s),this._alignRect.endFill());this._alignX>=0&&this._alignX<=1&&(this.pivot.x=e+n*this._alignX),this._alignY>=0&&this._alignY<=1&&(this.pivot.y=i+s*this._alignY),this._centerPoint&&(this._centerPoint.pivot.x=-1*this.pivot.x,this._centerPoint.pivot.y=-1*this.pivot.y),this._alignRect&&(this._alignRect.pivot.x=-1*this.pivot.x,this._alignRect.pivot.y=-1*this.pivot.y)}},{key:"isUpdate",get:function(){return this._isUpdate},set:function(t){!this._isUpdate&&t?Hr.addUpdater(this.update,this):this._isUpdate&&!t&&Hr.removeUpdater(this.update,this),this._isUpdate=t}},{key:"active",get:function(){return this._active}},{key:"scaleX",get:function(){return this.scale.x},set:function(t){this.scale.x=t}},{key:"scaleY",get:function(){return this.scale.y},set:function(t){this.scale.y=t}},{key:"pivotX",get:function(){return this.pivot.x},set:function(t){this.pivot.x=t}},{key:"pivotY",get:function(){return this.pivot.y},set:function(t){this.pivot.y=t}},{key:"anchorX",get:function(){return this._anchorX},set:function(t){this._anchorX=t,this.pivot.x=t*this.width/this.scale.x}},{key:"anchorY",get:function(){return this._anchorY},set:function(t){this._anchorY=t,this.pivot.y=t*this.height/this.scale.y}},{key:"localLeft",get:function(){return this._localBoundsRect.left}},{key:"localRight",get:function(){return this._localBoundsRect.right}},{key:"localTop",get:function(){return this._localBoundsRect.top}},{key:"localBottom",get:function(){return this._localBoundsRect.bottom}},{key:"localWidth",get:function(){return this._localBoundsRect.width}},{key:"localHeight",get:function(){return this._localBoundsRect.height}},{key:"globalLeft",get:function(){return this.getGlobalPosition().x+this.localLeft}},{key:"globalTop",get:function(){return this.getGlobalPosition().y+this.localTop}},{key:"worldX",get:function(){return this.getGlobalPosition().x}},{key:"worldY",get:function(){return this.getGlobalPosition().y}},{key:"x",get:function(){return this._oX=m(_(i.prototype),"x",this),this._oX},set:function(t){x(_(i.prototype),"x",this._oX=t,this,!0)}},{key:"y",get:function(){return this._oY=m(_(i.prototype),"y",this),this._oY},set:function(t){x(_(i.prototype),"y",this._oY=t,this,!0)}},{key:"height",get:function(){return this._oHeight=m(_(i.prototype),"height",this),this._oHeight},set:function(t){return x(_(i.prototype),"height",this._oHeight=t,this,!0)}},{key:"width",get:function(){return this._oWidth=m(_(i.prototype),"width",this),this._oWidth},set:function(t){return x(_(i.prototype),"width",this._oWidth=t,this,!0)}},{key:"oType",get:function(){return this._oType}},{key:"input",get:function(){return this._isCheckInput},set:function(t){this.input?this.interactive=t:t&&(this._isCheckInput=!0,this.interactive=!0,this.on("pointerdown",this._down,this),this.on("pointerup",this._up,this),this.on("pointerupoutside",this._upOutSide,this),this.on("pointerover",this._over,this),this.on("pointerout",this._out,this))}},{key:"drag",set:function(t){this.input||(this.input=!0),this._isUpdate||(this.isUpdate=!0),this._isDrag=t,this._listenMouseUp=t,this._listenMouseUp?Hr.mouse.addUpHandler(this._globalMouseUp,this):Hr.mouse.removeUpMouse(this._globalMouseUp,this),this._dragVertical=!0,this._dragHorizontal=!0}},{key:"allowHorizontalDrag",set:function(t){this._dragHorizontal=t}},{key:"allowVerticalDrag",set:function(t){this._dragVertical=t}},{key:"interactChild",set:function(t){this.interactiveChildren=t}},{key:"isAlign",get:function(){return this._isAlign}},{key:"canvas",get:function(){return this._alignChild?this._alignChild:this}},{key:"alignX",get:function(){return this._alignX},set:function(t){this._alignX=t}},{key:"alignY",get:function(){return this._alignY},set:function(t){this._alignY=t}},{key:"soundUp",set:function(t){this._soundUp=t}},{key:"soundOver",set:function(t){this._soundOver=t}}]),i}(),Vt=function(t){d(i,PIXI.Sprite);var e=g(i);function i(t){var n,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return l(this,i),(n=e.call(this,"string"==typeof t?Hr.assets.getTexture(t,s):t))._onKillEvent="kill_event",n._onReviveEvent="revive_event",n._onDestroyEvent="destroy_event",n._onDownEvent="down_event",n._onUpEvent="up_event",n._onOverEvent="over_event",n._onUpOutSideEvent="up_out_event",n._onOutEvent="out_event",n._onDragStartEvent="drag_start_event",n._onDragStopEvent="drag_stop_event",n._onDragUpdateEvent="drag_update_event",n._atlas=s,n._saveVisible=!0,Hr.debugMode&&(n._isOnDebugerUpdate=!0,Hr.addUpdater(n._updateDebug,f(n))),n._isUpdate=!1,n.aa_isRegOnDebug=!1,n.aa_debugTexture="",n.aa_debugAnchorX=-1e3,n.aa_debugAnchorY=-1e3,n._inDebug=!1,n.userData=null,n._active=!0,n.numChildren=0,n._oX=0,n._oY=0,n._oWidth=0,n._oHeight=0,n._externalMethodParams=null,n._externalMethod=null,n._isDrag=!1,n._dragVertical=!1,n._dragHorizontal=!1,n._isStartDrag=!1,n._isCheckInput=!1,n._soundUp=null,n._soundOver=null,n.autoReviveChildren=!0,n.needAutoRevive=!1,n._textureName="string"==typeof t?t:null,n._boundsRect=new E.Rectangle,n._localBoundsRect=new E.Rectangle,n._oType=E.OMY_SPRITE,n.aa_isRegOnDebug=!1,n._inDebug=!1,n.interactChild=!1,n}return c(i,[{key:"_updateDebug",value:function(){this.aa_isRegOnDebug&&!this._inDebug?Hr.add.regDebugMode(this):!this.aa_isRegOnDebug&&this._inDebug&&Hr.add.removeFromDebug(this),this.aa_debugTexture.length&&(this.texture=this.aa_debugTexture,this.aa_debugTexture=""),-1e3!==this.aa_debugAnchorX&&(this.anchorX=this.aa_debugAnchorX,this.aa_debugAnchorX=-1e3),-1e3!==this.aa_debugAnchorY&&(this.anchorY=this.aa_debugAnchorY,this.aa_debugAnchorY=-1e3)}},{key:"addChild",value:function(t){return m(_(i.prototype),"addChild",this).call(this,t),this.numChildren=this.children.length,t}},{key:"addChildAt",value:function(t,e){return m(_(i.prototype),"addChildAt",this).call(this,t,e),this.numChildren=this.children.length,t}},{key:"removeChild",value:function(t){return m(_(i.prototype),"removeChild",this).call(this,t),this.numChildren=this.children.length,t}},{key:"removeChildAt",value:function(t){var e=m(_(i.prototype),"removeChildAt",this).call(this,t);return this.numChildren=this.children.length,e}},{key:"removeChildren",value:function(t,e){var n=m(_(i.prototype),"removeChildren",this).call(this,t,e);return this.numChildren=this.children.length,n}},{key:"contains",value:function(t){return null!=this.children&&this.children.indexOf(t)>=0}},{key:"kill",value:function(){if(this._active){if(this._active=!1,this._isUpdate&&Hr.removeUpdater(this.update,this),this._isOnDebugerUpdate&&(this._isOnDebugerUpdate=!1,Hr.removeUpdater(this._updateDebug,this)),null!=this.children)for(var t,e=0,i=this.numChildren;e<this.numChildren&&this.numChildren;)(t=this.children[e++]).active&&t.kill&&t.kill(),i!==this.numChildren&&(i--,e--);this.input&&(this.input=!1),this._saveVisible=this.visible,this.visible=!1,this.renderable=!1,this.emit(this._onKillEvent,this)}return this}},{key:"revive",value:function(){if(!this._active){if(this._active=!0,this.renderable=!0,this._isUpdate&&Hr.addUpdater(this.update,this),Hr.debugMode&&!this._isOnDebugerUpdate&&(this._isOnDebugerUpdate=!0,Hr.addUpdater(this._updateDebug,this)),null!=this.children)for(var t,e=0;e<this.numChildren;)t=this.children[e++],(this.autoReviveChildren||t.needAutoRevive)&&!t.active&&t.revive&&t.revive();this.input&&(this.input=!0),this.visible=this._saveVisible,this.emit(this._onReviveEvent,this)}return this}},{key:"destroy",value:function(t){return t=t||{children:!0,texture:!1,baseTexture:!1},this.json=null,this._atlas=null,this._active=!1,this.userData=null,this.numChildren=0,this._boundsRect=null,this._localBoundsRect=null,this._isDrag=!1,this._listenMouseUp&&(this._listenMouseUp=!1,Hr.mouse.removeUpMouse(this._globalMouseUp,this)),this._isStartDrag=!1,this._eventData=null,this.isUpdate=!1,this._isOnDebugerUpdate&&(this._isOnDebugerUpdate=!1,Hr.removeUpdater(this._updateDebug,this)),this._textureName&&(this._textureName=null,Hr.loc.removeUpdate(this._updateLocTexture,this)),this._isLocChange&&(this._isLocChange=!1,Hr.loc.removeUpdate(this._updateLoc,this)),this.input&&(this.input=!1),this.removeAllListeners(this._onDragStartEvent),this.removeAllListeners(this._onDragStopEvent),this.removeAllListeners(this._onDragUpdateEvent),this.removeAllListeners(this._onDownEvent),this.removeAllListeners(this._onOutEvent),this.removeAllListeners(this._onOverEvent),this.removeAllListeners(this._onUpOutSideEvent),this.removeAllListeners(this._onUpEvent),this.emit(this._onDestroyEvent,this),this.removeAllListeners(this._onDestroyEvent),this.removeAllListeners(this._onKillEvent),this.removeAllListeners(this._onReviveEvent),this._externalMethod=null,this._externalMethodParams=null,this.renderable=!1,this.visible=!1,this._soundUp=null,this._soundOver=null,m(_(i.prototype),"destroy",this).call(this,t),this}},{key:"update",value:function(){this._isStartDrag&&(this._eventData.global.x===this._dragSaveX&&this._eventData.global.y===this._dragSaveY||(this._dragHorizontal&&(this.x=this._oX+this._eventData.global.x-this._dragSaveX,this._oX<this._dragXMin?this.x=this._dragXMin:this._oX>this._dragXMax&&(this.x=this._dragXMax)),this._dragVertical&&(this.y=this._oY+this._eventData.global.y-this._dragSaveY,this._oY<this._dragYMin?this.y=this._dragYMin:this._oY>this._dragYMax&&(this.y=this._dragYMax)),this._dragSaveX=this._eventData.global.x,this._dragSaveY=this._eventData.global.y,this.emit(this._onDragUpdateEvent,this),Hr.mouse.isDown||this._upOutSide()))}},{key:"calculateVertices",value:function(){try{m(_(i.prototype),"calculateVertices",this).call(this)}catch(e){var t="Error at atlas: "+this._atlas+" texture: "+this._textureName;console.error(t,"\n",e),this.destroy()}}},{key:"_down",value:function(t){this._isDrag&&(t&&(this._eventData=t.data),this._dragSaveX=this._eventData.global.x,this._dragSaveY=this._eventData.global.y,this._isStartDrag=!0,this.emit(this._onDragStartEvent,this)),this.emit(this._onDownEvent,this)}},{key:"_over",value:function(){this.emit(this._onOverEvent,this),this._soundOver&&Hr.sound.play(this._soundOver)}},{key:"_out",value:function(){this.emit(this._onOutEvent,this)}},{key:"_upOutSide",value:function(){this._out(),this.emit(this._onUpOutSideEvent,this)}},{key:"_up",value:function(){this.emit(this._onUpEvent,this),this._soundUp&&Hr.sound.play(this._soundUp),null!=this._externalMethod&&this._externalMethod.apply(null,this._externalMethodParams)}},{key:"_globalMouseUp",value:function(){this._isDrag&&this._isStartDrag&&(this._eventData=null,this._isStartDrag=!1,this.emit(this._onDragStopEvent,this))}},{key:"onLocalisation",value:function(t){this._textureName=t,Hr.loc.addUpdate(this._updateLocTexture,this)}},{key:"_updateLocTexture",value:function(){this.texture=this._textureName}},{key:"addLocSprite",value:function(){this._isLocChange=!0,Hr.loc.addUpdate(this._updateLoc,this),this._updateLoc()}},{key:"_updateLoc",value:function(){for(var t in this.json.loc)if(OMY.OMath.inArray(this.json.loc[t],Hr.language)){this.texture=t;break}this.emit("loc_texture_update")}},{key:"changeAtlas",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this._atlas=t,e&&(this.texture=e)}},{key:"setAll",value:function(t,e){for(var i,n=0;n<this.numChildren;)null!=(i=this.children[n++])&&(i[t]=e)}},{key:"callAll",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(null!=this.children)for(var i,n=0,s=this.numChildren;n<this.numChildren&&this.numChildren;)(i=this.children[n++])&&i[t].apply(i,e),s!==this.numChildren&&(s--,n--)}},{key:"setXY",value:function(t,e){this._oX=t,this._oY=e,this.position.set(t,e)}},{key:"setSize",value:function(t,e){this.width=t,this.height=e}},{key:"setScale",value:function(t,e){this.scale.set(t,e)}},{key:"setAnchor",value:function(t,e){this.anchor.set(t,e)}},{key:"setPivot",value:function(t,e){this.pivot.set(t,e),this.x=this._oX+t,this.y=this._oY+e}},{key:"externalMethod",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.input||(this.input=!0),this._externalMethod=t,(e=e||[]).unshift(this),this._externalMethodParams=e}},{key:"boundsDragRect",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:NaN,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:NaN,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:NaN,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:NaN;isNaN(t)||(this._dragXMin=t),isNaN(e)||(this._dragYMin=e),isNaN(i)||(this._dragXMax=i),isNaN(n)||(this._dragYMax=n)}},{key:"addOver",value:function(t,e,i){this.input||(this.input=!0),this._addNewEvent(this._onOverEvent,t,e,i)}},{key:"addOut",value:function(t,e,i){this.input||(this.input=!0),this._addNewEvent(this._onOutEvent,t,e,i)}},{key:"addDown",value:function(t,e,i){this.input||(this.input=!0),this._addNewEvent(this._onDownEvent,t,e,i)}},{key:"addUp",value:function(t,e,i){this.input||(this.input=!0),this._addNewEvent(this._onUpEvent,t,e,i)}},{key:"addUpOutSide",value:function(t,e,i){this.input||(this.input=!0),this._addNewEvent(this._onUpOutSideEvent,t,e,i)}},{key:"addDragUpdate",value:function(t,e,i){this._addNewEvent(this._onDragUpdateEvent,t,e,i)}},{key:"addDragStart",value:function(t,e,i){this._addNewEvent(this._onDragStartEvent,t,e,i)}},{key:"addDragStop",value:function(t,e,i){this._addNewEvent(this._onDragStopEvent,t,e,i)}},{key:"addKill",value:function(t,e,i){this._addNewEvent(this._onKillEvent,t,e,i)}},{key:"addRevive",value:function(t,e,i){this._addNewEvent(this._onReviveEvent,t,e,i)}},{key:"addDestroy",value:function(t,e,i){this._addNewEvent(this._onDestroyEvent,t,e,i)}},{key:"_addNewEvent",value:function(t,e,i){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];n?this.once(t,e,i):this.on(t,e,i)}},{key:"removeOver",value:function(t,e){this.removeListener(this._onOverEvent,t,e)}},{key:"removeOut",value:function(t,e){this.removeListener(this._onOutEvent,t,e)}},{key:"removeDown",value:function(t,e){this.removeListener(this._onDownEvent,t,e)}},{key:"removeUp",value:function(t,e){this.removeListener(this._onUpEvent,t,e)}},{key:"removeUpOutSide",value:function(t,e){this.removeListener(this._onUpOutSideEvent,t,e)}},{key:"removeDragUpdate",value:function(t,e){this.removeListener(this._onDragUpdateEvent,t,e)}},{key:"removeDragStart",value:function(t,e){this.removeListener(this._onDragStartEvent,t,e)}},{key:"removeDragStop",value:function(t,e){this.removeListener(this._onDragStopEvent,t,e)}},{key:"removeKill",value:function(t,e){this.removeListener(this._onKillEvent,t,e)}},{key:"removeRevive",value:function(t,e){this.removeListener(this._onReviveEvent,t,e)}},{key:"removDestroy",value:function(t,e){this.removeDestroy(t,e)}},{key:"removeDestroy",value:function(t,e){this.removeListener(this._onDestroyEvent,t,e)}},{key:"isUpdate",get:function(){return this._isUpdate},set:function(t){!this._isUpdate&&t?Hr.addUpdater(this.update,this):this._isUpdate&&!t&&Hr.removeUpdater(this.update,this),this._isUpdate=t}},{key:"active",get:function(){return this._active}},{key:"scaleX",get:function(){return this.scale.x},set:function(t){this.scale.x=t}},{key:"scaleY",get:function(){return this.scale.y},set:function(t){this.scale.y=t}},{key:"pivotX",get:function(){return this.pivot.x},set:function(t){this.pivot.x=t}},{key:"pivotY",get:function(){return this.pivot.y},set:function(t){this.pivot.y=t}},{key:"anchorX",get:function(){return this.anchor.x},set:function(t){this.anchor.x=t}},{key:"anchorY",get:function(){return this.anchor.y},set:function(t){this.anchor.y=t}},{key:"localLeft",get:function(){return this._localBoundsRect.left}},{key:"localRight",get:function(){return this._localBoundsRect.right}},{key:"localTop",get:function(){return this._localBoundsRect.top}},{key:"localBottom",get:function(){return this._localBoundsRect.bottom}},{key:"localWidth",get:function(){return this._localBoundsRect.width}},{key:"localHeight",get:function(){return this._localBoundsRect.height}},{key:"globalLeft",get:function(){return this.getGlobalPosition().x+this.localLeft}},{key:"globalTop",get:function(){return this.getGlobalPosition().y+this.localTop}},{key:"worldX",get:function(){return this.getGlobalPosition().x}},{key:"worldY",get:function(){return this.getGlobalPosition().y}},{key:"x",get:function(){return this._oX=m(_(i.prototype),"x",this),this._oX},set:function(t){x(_(i.prototype),"x",this._oX=t,this,!0)}},{key:"y",get:function(){return this._oY=m(_(i.prototype),"y",this),this._oY},set:function(t){x(_(i.prototype),"y",this._oY=t,this,!0)}},{key:"height",get:function(){return this._oHeight=m(_(i.prototype),"height",this),this._oHeight},set:function(t){return x(_(i.prototype),"height",this._oHeight=t,this,!0)}},{key:"width",get:function(){return this._oWidth=m(_(i.prototype),"width",this),this._oWidth},set:function(t){return x(_(i.prototype),"width",this._oWidth=t,this,!0)}},{key:"oType",get:function(){return this._oType}},{key:"input",get:function(){return this._isCheckInput},set:function(t){this.input?this.interactive=t:t&&(this._isCheckInput=!0,this.interactive=!0,this.on("pointerdown",this._down,this),this.on("pointerup",this._up,this),this.on("pointerupoutside",this._upOutSide,this),this.on("pointerover",this._over,this),this.on("pointerout",this._out,this))}},{key:"drag",set:function(t){this.input||(this.input=!0),this._isUpdate||(this.isUpdate=!0),this._isDrag=t,this._listenMouseUp=t,this._listenMouseUp?Hr.mouse.addUpHandler(this._globalMouseUp,this):Hr.mouse.removeUpMouse(this._globalMouseUp,this),this._dragVertical=!0,this._dragHorizontal=!0}},{key:"allowHorizontalDrag",set:function(t){this._dragHorizontal=t}},{key:"allowVerticalDrag",set:function(t){this._dragVertical=t}},{key:"textureName",get:function(){return this._textureName},set:function(t){this._textureName=t}},{key:"texture",get:function(){return this._texture},set:function(t){"string"==typeof t?(this._textureName=t,x(_(i.prototype),"texture",Hr.assets.getTexture(t,this._atlas),this,!0)):x(_(i.prototype),"texture",t,this,!0)}},{key:"interactChild",set:function(t){this.interactiveChildren=t}},{key:"atlas",get:function(){return this._atlas}},{key:"soundUp",set:function(t){this._soundUp=t}},{key:"soundOver",set:function(t){this._soundOver=t}}]),i}(),Ht=function(t){d(i,t);var e=g(i);function i(t){var n,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,h=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;return l(this,i),(n=e.call(this,t,s))._oType=E.OMY_BUTTON,n._gdConf=h||{},n._outTexture=t,n._overTexture=r,n._downTexture=o,n._blockrTexture=a,n._label=null,n._hintLabel=null,n._blockAlphaLvl=n._gdConf.blockAlpha,n._isHasBlockAlpha=n._gdConf.hasOwnProperty("blockAlpha"),n._currentTexture=t,n.input=!0,n.buttonMode=!0,n._isBlock=!1,n._inDown=!1,n._inButton=!1,n._oneClick=!1,Hr.isDesktop||(n.buttonMode=!1,n.removeListener("pointerover",n._over,f(n)),n.removeListener("pointerout",n._out,f(n))),n}return c(i,[{key:"changeTextures",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this._currentTexture=this._currentTexture===this._blockrTexture?n:t,this._outTexture=t,this._overTexture=e,this._downTexture=i,this._blockrTexture=n,this._updateBtnGraphic()}},{key:"_updateBtnGraphic",value:function(){"string"==typeof this._currentTexture?this.textureName!==this._currentTexture&&(this.texture=this._currentTexture):this.texture!==this._currentTexture&&(this.texture=this._currentTexture)}},{key:"revive",value:function(){return m(_(i.prototype),"revive",this).call(this),this._inDown=!1,this.isBlock=!1,this._inButton=!1,this._currentTexture=this._outTexture,this._updateBtnGraphic(),this}},{key:"kill",value:function(){return this.isBlock=!0,m(_(i.prototype),"kill",this).call(this)}},{key:"destroy",value:function(t){return this._label&&(this.removeChild(this._label),this._label.destroy({children:!0,texture:!1,baseTexture:!1}),this._label=null),this._hintLabel&&(this._hintLabel.destroy({children:!0,texture:!1,baseTexture:!1}),this._hintLabel=null),this._gdConf=null,this._outTexture=null,this._overTexture=null,this._downTexture=null,this._blockrTexture=null,this._currentTexture=null,m(_(i.prototype),"destroy",this).call(this,t)}},{key:"_onDownHandler",value:function(){}},{key:"_onOverHandler",value:function(){this._hintLabel&&(this.parent&&this.parent.addChild(this._hintLabel),this._hintLabel.visible=!0)}},{key:"_onOutHandler",value:function(){this._hintLabel&&(this.parent&&this.parent.removeChild(this._hintLabel),this._hintLabel.visible=!1)}},{key:"_onUpHandler",value:function(){}},{key:"_down",value:function(){this._isBlock||(this._downTexture&&(this._currentTexture=this._downTexture,this._updateBtnGraphic()),this._label&&this._label.json.down&&this._label.setColor(this._label.json.down),this._inDown=!0,this._onDownHandler(),m(_(i.prototype),"_down",this).call(this))}},{key:"_over",value:function(){this._inButton=!0,this._isBlock||this._inDown||(this._overTexture&&(this._currentTexture=this._overTexture,this._updateBtnGraphic()),this._label&&this._label.json.over&&this._label.setColor(this._label.json.over),this._onOverHandler(),m(_(i.prototype),"_over",this).call(this))}},{key:"_out",value:function(){this._inButton=!1,this._isBlock||this._inDown||(this._outTexture&&(this._currentTexture=this._outTexture,this._updateBtnGraphic()),this._label&&this._label.json.fill&&this._label.setColor(this._label.json.fill),this._onOutHandler(),m(_(i.prototype),"_out",this).call(this))}},{key:"_upOutSide",value:function(){this._inDown=!1,m(_(i.prototype),"_upOutSide",this).call(this)}},{key:"_up",value:function(){this._isBlock||(this._overTexture&&this._inButton?this._currentTexture=this._overTexture:this._currentTexture=this._outTexture,this._updateBtnGraphic(),this._label&&this._label.json.fill&&this._label.setColor(this._label.json.fill),this._inDown&&(this._inDown=!1,this._onUpHandler(),this.onDoAction(),m(_(i.prototype),"_up",this).call(this),this._oneClick&&(this.isBlock=!0)))}},{key:"onDoAction",value:function(){}},{key:"blockButton",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.isBlock=t}},{key:"label",get:function(){return this._label},set:function(t){this._label&&(this.removeChild(this._label),this._label.destroy(!0)),this._label=t,t.parent!==this&&this.addChild(t)}},{key:"hintLabel",set:function(t){this._hintLabel&&this._hintLabel.destroy(!0),this._hintLabel=t,this._hintLabel.visible=!1}},{key:"isBlock",get:function(){return this._isBlock},set:function(t){this._isBlock&&t||!this._isBlock&&!t||(t?(this._hintLabel&&(this.parent&&this.parent.removeChild(this._hintLabel),this._hintLabel.visible=!1),this._blockrTexture?this._currentTexture=this._blockrTexture:this._currentTexture=this._outTexture,this._isHasBlockAlpha&&(this._saveAlpha=this.alpha,this.alpha=this._blockAlphaLvl)):(this._currentTexture=this._outTexture,this._isHasBlockAlpha&&(this.alpha=this._saveAlpha)),this._updateBtnGraphic(),this._label&&(t&&this._label.json.block?this._label.setColor(this._label.json.block):!t&&this._label.json.fill&&this._label.setColor(this._label.json.fill)),this._isBlock=t,this.input=!t,this.buttonMode=!t)}},{key:"oneClick",set:function(t){this._oneClick=t}},{key:"outTexture",get:function(){return this._outTexture},set:function(t){this._outTexture=t}},{key:"overTexture",get:function(){return this._overTexture},set:function(t){this._overTexture=t}},{key:"downTexture",get:function(){return this._downTexture},set:function(t){this._downTexture=t}},{key:"blockTexture",get:function(){return this._blockrTexture},set:function(t){this._blockrTexture=t}},{key:"markObject",value:function(){this._debugRect=new E.Graphics,this._debugRect.position.set(this.worldX,this.worldY),this._debugRect.beginFill(32896,.5);this._debugRect.drawRect(0,0,this.width,this.height),this._debugRect.endFill(),this._debugRect.rotation=this.rotation,Hr.stage.addChild(this._debugRect)}},{key:"clearMark",value:function(){this._debugRect&&this._debugRect.parent&&Hr.stage.removeChild(this._debugRect)}},{key:"inDown",get:function(){return this._inDown}}]),i}(Vt),Wt=function(t){d(i,t);var e=g(i);function i(t){var n,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,h=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;return l(this,i),(n=e.call(this,t,s,r,o,a,h))._oType=E.OMY_BUTTON_TWEEN,n._overScaleX=n._gdConf.overScaleX||n._gdConf.overScale||.9,n._overScaleY=n._gdConf.overScaleY||n._gdConf.overScale||.9,n._downScaleX=n._gdConf.downScaleX||n._gdConf.downScale||.8,n._downScaleY=n._gdConf.downScaleY||n._gdConf.downScale||.8,n._saveScaleX=1,n._saveScaleY=1,n}return c(i,[{key:"revive",value:function(){return m(_(i.prototype),"revive",this).call(this),this.setScale(this._saveScaleX,this._saveScaleY),this}},{key:"destroy",value:function(t){return this._gdConf=null,Hr.remove.tween(this),m(_(i.prototype),"destroy",this).call(this,t)}},{key:"kill",value:function(){return Hr.remove.tween(this),m(_(i.prototype),"kill",this).call(this)}},{key:"_onOverHandler",value:function(){Hr.add.tween(this.scale,{x:this._saveScaleX*this._overScaleX,y:this._saveScaleY*this._overScaleY},.1),m(_(i.prototype),"_onOverHandler",this).call(this)}},{key:"_onOutHandler",value:function(){Hr.add.tween(this.scale,{x:this._saveScaleX,y:this._saveScaleY},.1),m(_(i.prototype),"_onOutHandler",this).call(this)}},{key:"_onDownHandler",value:function(){Hr.add.tween(this.scale,{x:this._saveScaleX*this._downScaleX,y:this._saveScaleY*this._downScaleY},.1),m(_(i.prototype),"_onDownHandler",this).call(this)}},{key:"_onUpHandler",value:function(){Hr.add.tween(this.scale,{x:this._saveScaleX,y:this._saveScaleY},.1),m(_(i.prototype),"_onUpHandler",this).call(this)}},{key:"setScale",value:function(t,e){this._saveScaleX=t,this._saveScaleY=e,this.scale.set(t,e)}},{key:"scaleX",get:function(){return this.scale.x},set:function(t){this._saveScaleX=t,this.scale.x=t}},{key:"scaleY",get:function(){return this.scale.y},set:function(t){this._saveScaleY=t,this.scale.y=t}}]),i}(Ht),jt={},Gt={},Kt={get exports(){return Gt},set exports(t){Gt=t}};"undefined"!=typeof self&&self,Ut=function(){return function(t){var e={};function i(n){if(e[n])return e[n].exports;var s=e[n]={i:n,l:!1,exports:{}};return t[n].call(s.exports,s,s.exports,i),s.l=!0,s.exports}return i.m=t,i.c=e,i.d=function(t,e,n){i.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:n})},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=2)}([function(t,e,i){var n,s=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});Object.defineProperty(e,"__esModule",{value:!0});var r=i(1),o=function(t){function e(i){void 0===i&&(i=1);var n=t.call(this)||this;return n.time=i,e._timerManager||(e._timerManager=new r.TimerManager),e._timerManager.addTimer(n),n._timerManager=e._timerManager,n.active=!1,n.isEnded=!1,n.isStarted=!1,n.expire=!1,n.delay=0,n.repeat=0,n.loop=!1,n._delayTime=0,n._elapsedTime=0,n._repeat=0,n}return s(e,t),Object.defineProperty(e,"timerManager",{get:function(){return e._timerManager||(e._timerManager=new r.TimerManager),e._timerManager},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"timerManager",{get:function(){return this._timerManager},set:function(t){this._timerManager=t},enumerable:!0,configurable:!0}),e.prototype.remove=function(){return e._timerManager.removeTimer(this),this},e.prototype.start=function(){return this.active=!0,this},e.prototype.stop=function(){return this.active=!1,this.emit("stop",this._elapsedTime),this},e.prototype.reset=function(){return this._elapsedTime=0,this._repeat=0,this._delayTime=0,this.isStarted=!1,this.isEnded=!1,this},e.prototype.update=function(t){if(this.active)if(this.delay>this._delayTime)this._delayTime+=t;else if(this.isStarted||(this.isStarted=!0,this.emit("start",this._elapsedTime)),this.time>this._elapsedTime){var e=this._elapsedTime+t,i=e>=this.time;if(this._elapsedTime=i?this.time:e,this.emit("update",this._elapsedTime,t),i){if(this.loop||this.repeat>this._repeat)return this._repeat++,this.emit("repeat",this._elapsedTime,this._repeat),void(this._elapsedTime=0);this.isEnded=!0,this.active=!1,this.emit("end",this._elapsedTime)}}},e}(i(3).EventEmitter);e.Timer=o},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var n=i(0),s=function(){function t(){this.timers=[],this._timersToDelete=[],this._last=0}return t.prototype.update=function(t){if(t||0===t||(t=this._getDeltaMS()),this._timersToDelete.length){for(var e=0,i=this._timersToDelete;e<i.length;e++){var n=i[e];this._remove(n)}this._timersToDelete.length=0}for(var s=0,r=this.timers;s<r.length;s++){var o=r[s];o.active&&(o.update(t),o.isEnded&&o.expire&&this.removeTimer(o))}},t.prototype.removeTimer=function(t){this._timersToDelete.push(t),t.timerManager=null},t.prototype.addTimer=function(t){this.timers.push(t),t.timerManager&&t.timerManager.removeTimer(t),t.timerManager=this},t.prototype.createTimer=function(t){var e=new n.Timer(t);return this.addTimer(e),e},t.prototype._remove=function(t){var e=this.timers.indexOf(t);e>-1&&this.timers.splice(e,1)},t.prototype._getDeltaMS=function(){0===this._last&&(this._last=Date.now());var t=Date.now(),e=t-this._last;return this._last=t,e},t}();e.TimerManager=s},function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0});var n=i(0);e.Timer=n.Timer;var s=i(1);e.TimerManager=s.TimerManager},function(t,e){t.exports=(Pt||(Pt=1,function(t){var e=Object.prototype.hasOwnProperty,i="~";function n(){}function s(t,e,i){this.fn=t,this.context=e,this.once=i||!1}function r(t,e,n,r,o){if("function"!=typeof n)throw new TypeError("The listener must be a function");var a=new s(n,r||t,o),h=i?i+e:e;return t._events[h]?t._events[h].fn?t._events[h]=[t._events[h],a]:t._events[h].push(a):(t._events[h]=a,t._eventsCount++),t}function o(t,e){0==--t._eventsCount?t._events=new n:delete t._events[e]}function a(){this._events=new n,this._eventsCount=0}Object.create&&(n.prototype=Object.create(null),(new n).__proto__||(i=!1)),a.prototype.eventNames=function(){var t,n,s=[];if(0===this._eventsCount)return s;for(n in t=this._events)e.call(t,n)&&s.push(i?n.slice(1):n);return Object.getOwnPropertySymbols?s.concat(Object.getOwnPropertySymbols(t)):s},a.prototype.listeners=function(t){var e=i?i+t:t,n=this._events[e];if(!n)return[];if(n.fn)return[n.fn];for(var s=0,r=n.length,o=new Array(r);s<r;s++)o[s]=n[s].fn;return o},a.prototype.listenerCount=function(t){var e=i?i+t:t,n=this._events[e];return n?n.fn?1:n.length:0},a.prototype.emit=function(t,e,n,s,r,o){var a=i?i+t:t;if(!this._events[a])return!1;var h,l,u=this._events[a],c=arguments.length;if(u.fn){switch(u.once&&this.removeListener(t,u.fn,void 0,!0),c){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,e),!0;case 3:return u.fn.call(u.context,e,n),!0;case 4:return u.fn.call(u.context,e,n,s),!0;case 5:return u.fn.call(u.context,e,n,s,r),!0;case 6:return u.fn.call(u.context,e,n,s,r,o),!0}for(l=1,h=new Array(c-1);l<c;l++)h[l-1]=arguments[l];u.fn.apply(u.context,h)}else{var d,_=u.length;for(l=0;l<_;l++)switch(u[l].once&&this.removeListener(t,u[l].fn,void 0,!0),c){case 1:u[l].fn.call(u[l].context);break;case 2:u[l].fn.call(u[l].context,e);break;case 3:u[l].fn.call(u[l].context,e,n);break;case 4:u[l].fn.call(u[l].context,e,n,s);break;default:if(!h)for(d=1,h=new Array(c-1);d<c;d++)h[d-1]=arguments[d];u[l].fn.apply(u[l].context,h)}}return!0},a.prototype.on=function(t,e,i){return r(this,t,e,i,!1)},a.prototype.once=function(t,e,i){return r(this,t,e,i,!0)},a.prototype.removeListener=function(t,e,n,s){var r=i?i+t:t;if(!this._events[r])return this;if(!e)return o(this,r),this;var a=this._events[r];if(a.fn)a.fn!==e||s&&!a.once||n&&a.context!==n||o(this,r);else{for(var h=0,l=[],u=a.length;h<u;h++)(a[h].fn!==e||s&&!a[h].once||n&&a[h].context!==n)&&l.push(a[h]);l.length?this._events[r]=1===l.length?l[0]:l:o(this,r)}return this},a.prototype.removeAllListeners=function(t){var e;return t?(e=i?i+t:t,this._events[e]&&o(this,e)):(this._events=new n,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=i,a.EventEmitter=a,t.exports=a}(Kt)),Gt)}])},{get exports(){return jt},set exports(t){jt=t}}.exports=Ut();var qt,Jt=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;l(this,t),this._timer=new jt.Timer(1e3*e),this._isDestroyed=!1,this._removeOnEnd=!0,this._timer.on("end",this._onEndHandler,this),this._timer.on("repeat",this._onEndRepeatHandler,this)}return c(t,[{key:"start",value:function(){return this._isDestroyed?null:(this.isStarted||this._timer.start(),this)}},{key:"stop",value:function(){return this._isDestroyed?null:(this.isStarted&&this._timer.stop(),this)}},{key:"reset",value:function(){if(this._isDestroyed)return null;this._timer.reset()}},{key:"destroy",value:function(){return this._isDestroyed||(this.isEnded||this._timer.stop(),this._isDestroyed=!0,this._timer.remove(),this._timer.timerManager=null,this._timer.removeAllListeners("end"),this._timer.removeAllListeners("start"),this._timer.removeAllListeners("repeat"),this._timer.removeAllListeners("stop"),this._timer=null,this._onComplete=null,this._context=null,this._params=null),this}},{key:"on",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];if(this._isDestroyed)return null;this._onComplete=t,this._context=e,this._params=i,i.push(this)}},{key:"onStart",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];i?this._timer.once("start",t,e):this._timer.on("start",t,e)}},{key:"onEnd",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];i?this._timer.once("end",t,e):this._timer.on("end",t,e)}},{key:"onRepeat",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];i?this._timer.once("repeat",t,e):this._timer.on("repeat",t,e)}},{key:"onStop",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];i?this._timer.once("stop",t,e):this._timer.on("stop",t,e)}},{key:"onUpdate",value:function(t,e){this._timer.on("update",t,e)}},{key:"offStart",value:function(t,e){this._timer.off("start",t,e)}},{key:"offEnd",value:function(t,e){this._timer.off("end",t,e)}},{key:"offRepeat",value:function(t,e){this._timer.off("repeat",t,e)}},{key:"offStop",value:function(t,e){this._timer.off("stop",t,e)}},{key:"offUpdate",value:function(t,e){this._timer.off("update",t,e)}},{key:"_onEndHandler",value:function(t){if(this._isDestroyed)return null;this._onComplete&&this._onComplete.apply(this._context,this._params),this._removeOnEnd&&this.destroy()}},{key:"_onEndRepeatHandler",value:function(t){this._onComplete&&this._onComplete.apply(this._context,this._params)}},{key:"time",get:function(){return 1e3*this._timer.time},set:function(t){this._timer.time=1e3*t}},{key:"active",get:function(){return this._timer.active}},{key:"isStarted",get:function(){return this._timer.isStarted}},{key:"isEnded",get:function(){return this._timer.isEnded}},{key:"expire",get:function(){return this._removeOnEnd},set:function(t){this._removeOnEnd=t}},{key:"delay",get:function(){return 1e3*this._timer.delay},set:function(t){this._timer.delay=1e3*t}},{key:"repeat",get:function(){return this._timer.repeat},set:function(t){t<1&&(t=0),t--,this._timer.repeat=t}},{key:"loop",get:function(){return this._timer.loop},set:function(t){this._timer.loop=t}},{key:"completeParams",get:function(){return this._params}}]),t}(),Zt=function(t){d(i,PIXI.Point);var e=g(i);function i(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return l(this,i),e.call(this,t,n)}return c(i,[{key:"copyFrom",value:function(t){return this.x=t.x,this.y=t.y,this}},{key:"multiplyPoint",value:function(t){return this.x*=t.x,this.y*=t.y,this}},{key:"multiply",value:function(t){return this.x*=t,this.y*=t,this}},{key:"dividePoint",value:function(t){return this.x/=t.x,this.y/=t.y,this}},{key:"divide",value:function(t){return this.x/=t,this.y/=t,this}},{key:"length",get:function(){return Math.sqrt(this.x*this.x+this.y*this.y)}},{key:"equal",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e-6;return Ft.equal(this.x,t,i)&&Ft.equal(this.y,e,i)}},{key:"equalPoint",value:function(t,e){return e=e||1e-6,Ft.equal(this.x,t.x,e)&&Ft.equal(this.y,t.y,e)}},{key:"toString",value:function(){return"[OPoint x:"+this.x.toString()+" y:"+this.y.toString()+"]"}}]),i}(),Qt=function(t){d(i,PIXI.Graphics);var e=g(i);function i(){var t;return l(this,i),(t=e.call(this))._onKillEvent="kill_event",t._onReviveEvent="revive_event",t._onDestroyEvent="destroy_event",t._onDownEvent="down_event",t._onUpEvent="up_event",t._onUpOutSideEvent="up_out_event",t._onOverEvent="over_event",t._onOutEvent="out_event",t._onDragStartEvent="drag_start_event",t._onDragStopEvent="drag_stop_event",t._onDragUpdateEvent="drag_update_event",t._saveVisible=!0,Hr.debugMode&&(t._isOnDebugerUpdate=!0,Hr.addUpdater(t._updateDebug,f(t))),t._isUpdate=!1,t.aa_isRegOnDebug=!1,t._inDebug=!1,t.userData=null,t._active=!0,t._oX=0,t._oY=0,t._externalMethodParams=null,t._externalMethod=null,t._isDrag=!1,t._dragVertical=!1,t._dragHorizontal=!1,t._isStartDrag=!1,t._isCheckInput=!1,t._soundUp=null,t._soundOver=null,t._boundsRect=new E.Rectangle,t._localBoundsRect=new E.Rectangle,t._oType=E.OMY_GRAPHIC,t.interactChild=!1,t.name="g_"+Ft.uniqueID(),t}return c(i,[{key:"drawByJson",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];t&&this.clear();var e=this.json.hasOwnProperty("alpha")?this.json.alpha:1;this.json.hasOwnProperty("lineStyle")&&this.lineStyle(this.json.lineStyle.width||1,this.json.lineStyle.color||16777215,this.json.lineStyle.alpha||1),this.beginFill(this.json.color||0,e);var i=this.json.hasOwnProperty("left")?this.json.left:0,n=this.json.hasOwnProperty("top")?this.json.top:0,s=this.json.hasOwnProperty("typeDraw")?this.json.typeDraw:0;switch(s){case 0:this.drawRect(i,n,this.json.width||1,this.json.height||1);break;case 1:this.drawCircle(i,n,this.json.radius||1);break;case 2:this.drawEllipse(i,n,this.json.width||1,this.json.height||1);break;case 3:this.drawPolygon(this.json.points);break;case 4:this.drawRoundedRect(i,n,this.json.width||1,this.json.height||1,this.json.radius||0);break;case 5:this.moveTo(0,0);for(var r=0;r<this.json.linePath.length;r++)this.lineTo(this.json.linePath[r].x,this.json.linePath[r].y)}this.endFill()}},{key:"_updateDebug",value:function(){this.aa_isRegOnDebug&&!this._inDebug?Hr.add.regDebugMode(this):!this.aa_isRegOnDebug&&this._inDebug&&Hr.add.removeFromDebug(this)}},{key:"kill",value:function(){return this._active&&(this._active=!1,this._isUpdate&&Hr.removeUpdater(this.update,this),this._isOnDebugerUpdate&&(this._isOnDebugerUpdate=!1,Hr.removeUpdater(this._updateDebug,this)),this.input&&(this.input=!1),this._saveVisible=this.visible,this.visible=!1,this.renderable=!1,this.emit(this._onKillEvent,this)),this}},{key:"revive",value:function(){return this._active||(this._active=!0,this.renderable=!0,this._isUpdate&&Hr.addUpdater(this.update,this),Hr.debugMode&&!this._isOnDebugerUpdate&&(this._isOnDebugerUpdate=!0,Hr.addUpdater(this._updateDebug,this)),this.getLocalBounds(),this.getBounds(),this.input&&(this.input=!0),this.visible=this._saveVisible,this.emit(this._onReviveEvent,this)),this}},{key:"destroy",value:function(t){return t=t||{children:!0,texture:!1,baseTexture:!1},this.json=null,this._atlas=null,this._active=!1,this.userData=null,this._boundsRect=null,this._localBoundsRect=null,this._isDrag=!1,this._isStartDrag=!1,this._listenMouseUp&&(this._listenMouseUp=!1,Hr.mouse.removeUpMouse(this._globalMouseUp,this)),this._eventData=null,this.isUpdate=!1,this._isOnDebugerUpdate&&(this._isOnDebugerUpdate=!1,Hr.removeUpdater(this._updateDebug,this)),this.input&&(this.input=!1),this.removeAllListeners(this._onDragStartEvent),this.removeAllListeners(this._onDragStopEvent),this.removeAllListeners(this._onDragUpdateEvent),this.removeAllListeners(this._onDownEvent),this.removeAllListeners(this._onOutEvent),this.removeAllListeners(this._onOverEvent),this.removeAllListeners(this._onUpEvent),this.removeAllListeners(this._onUpOutSideEvent),this.emit(this._onDestroyEvent,this),this.removeAllListeners(this._onDestroyEvent),this.removeAllListeners(this._onKillEvent),this.removeAllListeners(this._onReviveEvent),this._externalMethod=null,this._externalMethodParams=null,this.renderable=!1,this.visible=!1,this._soundUp=null,this._soundOver=null,m(_(i.prototype),"destroy",this).call(this,t),this}},{key:"update",value:function(){this._isStartDrag&&(this._eventData.global.x===this._dragSaveX&&this._eventData.global.y===this._dragSaveY||(this._dragHorizontal&&(this.x=this._oX+this._eventData.global.x-this._dragSaveX,this._oX<this._dragXMin?this.x=this._dragXMin:this._oX>this._dragXMax&&(this.x=this._dragXMax)),this._dragVertical&&(this.y=this._oY+this._eventData.global.y-this._dragSaveY,this._oY<this._dragYMin?this.y=this._dragYMin:this._oY>this._dragYMax&&(this.y=this._dragYMax)),this._dragSaveX=this._eventData.global.x,this._dragSaveY=this._eventData.global.y,this.emit(this._onDragUpdateEvent,this),Hr.mouse.isDown||this._upOutSide()))}},{key:"_down",value:function(t){this._isDrag&&(this._eventData=t.data,this._dragSaveX=this._eventData.global.x,this._dragSaveY=this._eventData.global.y,this._isStartDrag=!0,this.emit(this._onDragStartEvent,this)),this.emit(this._onDownEvent,this)}},{key:"_over",value:function(){this.emit(this._onOverEvent,this),this._soundOver&&Hr.sound.play(this._soundOver)}},{key:"_out",value:function(){this.emit(this._onOutEvent,this)}},{key:"_upOutSide",value:function(){this._out(),this.emit(this._onUpOutSideEvent,this)}},{key:"_up",value:function(){this.emit(this._onUpEvent,this),this._soundUp&&Hr.sound.play(this._soundUp),null!=this._externalMethod&&this._externalMethod.apply(null,this._externalMethodParams)}},{key:"_globalMouseUp",value:function(){this._isDrag&&this._isStartDrag&&(this._eventData=null,this._isStartDrag=!1,this.emit(this._onDragStopEvent,this))}},{key:"getBounds",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1?arguments[1]:void 0;return e=e||this._boundsRect,m(_(i.prototype),"getBounds",this).call(this,t,e)}},{key:"getLocalBounds",value:function(t){return t=t||this._localBoundsRect,m(_(i.prototype),"getLocalBounds",this).call(this,t)}},{key:"setXY",value:function(t,e){this._oX=t,this._oY=e,this.position.set(t,e)}},{key:"setSize",value:function(t,e){this.width=t,this.height=e}},{key:"setScale",value:function(t,e){this.scale.set(t,e)}},{key:"setPivot",value:function(t,e){this.pivot.set(t,e),this.x=this._oX+t,this.y=this._oY+e}},{key:"externalMethod",value:function(t,e){this.input||(this.input=!0),this._externalMethod=t,(e=e||[]).unshift(this),this._externalMethodParams=e}},{key:"boundsDragRect",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:NaN,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:NaN,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:NaN,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:NaN;isNaN(t)||(this._dragXMin=t),isNaN(e)||(this._dragYMin=e),isNaN(i)||(this._dragXMax=i),isNaN(n)||(this._dragYMax=n)}},{key:"addOver",value:function(t,e,i){this.input||(this.input=!0),this._addNewEvent(this._onOverEvent,t,e,i)}},{key:"addOut",value:function(t,e,i){this.input||(this.input=!0),this._addNewEvent(this._onOutEvent,t,e,i)}},{key:"addDown",value:function(t,e,i){this.input||(this.input=!0),this._addNewEvent(this._onDownEvent,t,e,i)}},{key:"addUp",value:function(t,e,i){this.input||(this.input=!0),this._addNewEvent(this._onUpEvent,t,e,i)}},{key:"addUpOutSide",value:function(t,e,i){this.input||(this.input=!0),this._addNewEvent(this._onUpOutSideEvent,t,e,i)}},{key:"addDragUpdate",value:function(t,e,i){this._addNewEvent(this._onDragUpdateEvent,t,e,i)}},{key:"addDragStart",value:function(t,e,i){this._addNewEvent(this._onDragStartEvent,t,e,i)}},{key:"addDragStop",value:function(t,e,i){this._addNewEvent(this._onDragStopEvent,t,e,i)}},{key:"addKill",value:function(t,e,i){this._addNewEvent(this._onKillEvent,t,e,i)}},{key:"addRevive",value:function(t,e,i){this._addNewEvent(this._onReviveEvent,t,e,i)}},{key:"addDestroy",value:function(t,e,i){this._addNewEvent(this._onDestroyEvent,t,e,i)}},{key:"_addNewEvent",value:function(t,e,i){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];n?this.once(t,e,i):this.on(t,e,i)}},{key:"removeOver",value:function(t,e){this.removeListener(this._onOverEvent,t,e)}},{key:"removeOut",value:function(t,e){this.removeListener(this._onOutEvent,t,e)}},{key:"removeDown",value:function(t,e){this.removeListener(this._onDownEvent,t,e)}},{key:"removeUp",value:function(t,e){this.removeListener(this._onUpEvent,t,e)}},{key:"removeUpOutSide",value:function(t,e){this.removeListener(this._onUpOutSideEvent,t,e)}},{key:"removeDragUpdate",value:function(t,e){this.removeListener(this._onDragUpdateEvent,t,e)}},{key:"removeDragStart",value:function(t,e){this.removeListener(this._onDragStartEvent,t,e)}},{key:"removeDragStop",value:function(t,e){this.removeListener(this._onDragStopEvent,t,e)}},{key:"removeKill",value:function(t,e){this.removeListener(this._onKillEvent,t,e)}},{key:"removeRevive",value:function(t,e){this.removeListener(this._onReviveEvent,t,e)}},{key:"removDestroy",value:function(t,e){this.removeDestroy(t,e)}},{key:"removeDestroy",value:function(t,e){this.removeListener(this._onDestroyEvent,t,e)}},{key:"isUpdate",get:function(){return this._isUpdate},set:function(t){!this._isUpdate&&t?Hr.addUpdater(this.update,this):this._isUpdate&&!t&&Hr.removeUpdater(this.update,this),this._isUpdate=t}},{key:"active",get:function(){return this._active}},{key:"scaleX",get:function(){return this.scale.x},set:function(t){this.scale.x=t}},{key:"scaleY",get:function(){return this.scale.y},set:function(t){this.scale.y=t}},{key:"pivotX",get:function(){return this.pivot.x},set:function(t){this.pivot.x=t}},{key:"pivotY",get:function(){return this.pivot.y},set:function(t){this.pivot.y=t}},{key:"localLeft",get:function(){return this._localBoundsRect.left}},{key:"localRight",get:function(){return this._localBoundsRect.right}},{key:"localTop",get:function(){return this._localBoundsRect.top}},{key:"localBottom",get:function(){return this._localBoundsRect.bottom}},{key:"localWidth",get:function(){return this._localBoundsRect.width}},{key:"localHeight",get:function(){return this._localBoundsRect.height}},{key:"globalLeft",get:function(){return this.getGlobalPosition().x+this.localLeft}},{key:"globalTop",get:function(){return this.getGlobalPosition().y+this.localTop}},{key:"worldX",get:function(){return this.getGlobalPosition().x}},{key:"worldY",get:function(){return this.getGlobalPosition().y}},{key:"x",get:function(){return this._oX=m(_(i.prototype),"x",this),this._oX},set:function(t){x(_(i.prototype),"x",this._oX=t,this,!0)}},{key:"y",get:function(){return this._oY=m(_(i.prototype),"y",this),this._oY},set:function(t){x(_(i.prototype),"y",this._oY=t,this,!0)}},{key:"oType",get:function(){return this._oType}},{key:"input",get:function(){return this._isCheckInput},set:function(t){this.input?this.interactive=t:t&&(this._isCheckInput=!0,this.interactive=!0,this.on("pointerdown",this._down,this),this.on("pointerup",this._up,this),this.on("pointerupoutside",this._upOutSide,this),this.on("pointerover",this._over,this),this.on("pointerout",this._out,this))}},{key:"drag",set:function(t){this.input||(this.input=!0),this._isUpdate||(this.isUpdate=!0),this._isDrag=t,this._listenMouseUp=t,this._listenMouseUp?Hr.mouse.addUpHandler(this._globalMouseUp,this):Hr.mouse.removeUpMouse(this._globalMouseUp,this),this._dragVertical=!0,this._dragHorizontal=!0}},{key:"allowHorizontalDrag",set:function(t){this._dragHorizontal=t}},{key:"allowVerticalDrag",set:function(t){this._dragVertical=t}},{key:"interactChild",set:function(t){this.interactiveChildren=t}},{key:"soundUp",set:function(t){this._soundUp=t}},{key:"soundOver",set:function(t){this._soundOver=t}}]),i}(),$t=function(t){d(i,t);var e=g(i);function i(t){var n,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return l(this,i),(n=e.call(this,t,s,null,null,null))._gdConf=r,n._oType=E.OMY_CHECK_BOX_TWEEN,n._isChecking=!0,n._activeState={out:null,over:null,down:null,up:null},n._noActiveState={out:null,over:null,down:null,up:null},r&&(r.active||Hr.error("This object have not active state. Name:button",r),n.addActiveState(r.active),r.noActive||Hr.error("This object have not active state. Name:button",r),n.addNoActiveState(r.noActive)),n}return c(i,[{key:"addActiveState",value:function(t){this._activeState.out=t.out,this._activeState.over=t.over,this._activeState.down=t.down,this._activeState.up=t.up,this._isChecking&&this.changeTextures(t.out,t.over,t.down,t.up)}},{key:"addNoActiveState",value:function(t){this._noActiveState.out=t.out,this._noActiveState.over=t.over,this._noActiveState.down=t.down,this._noActiveState.up=t.up,this._isChecking||this.changeTextures(t.out,t.over,t.down,t.up)}},{key:"destroy",value:function(t){return this._gdConf=null,this._activeState=null,this._noActiveState=null,m(_(i.prototype),"destroy",this).call(this,t)}},{key:"_onUpHandler",value:function(){this._isChecking=!this._isChecking,this._checkState(),m(_(i.prototype),"_onUpHandler",this).call(this)}},{key:"_checkState",value:function(){this._isChecking?this.changeTextures(this._activeState.out,this._activeState.over,this._activeState.down,this._activeState.up):this.changeTextures(this._noActiveState.out,this._noActiveState.over,this._noActiveState.down,this._noActiveState.up)}},{key:"isChecking",get:function(){return this._isChecking},set:function(t){this._isChecking=t,this._checkState()}}]),i}(Wt),te="kill_event",ee="revive_event",ie="destroy_event",ne="down_event",se="up_event",re="up_out_event",oe="over_event",ae="out_event",he="drag_start_event",le="drag_stop_event",ue="drag_update_event",ce="complete_event",de="event_event",_e="loop_event",pe=function(t){d(i,PIXI.spine.Spine);var e=g(i);function i(t){var n;return l(this,i),(n=e.call(this,t))._saveVisible=!0,n.userData=null,n._active=!0,n._oX=0,n._oY=0,n._oWidth=0,n._oHeight=0,n._putOnCache=!0,n._externalMethodParams=null,n._externalMethod=null,n._isDrag=!1,n._dragVertical=!1,n._dragHorizontal=!1,n._isStartDrag=!1,n._isCheckInput=!1,n._boundsRect=new E.Rectangle,n._localBoundsRect=new E.Rectangle,n._oType=E.OMY_ACTOR_SPINE,n._curIndex=0,n._playing=!1,n._skinName=null,n._removeOnEnd=!1,n._countLoop=0,n._totalLoop=Number.MAX_VALUE,n._aName="animation",n.state.addListener({complete:n._onCompleteHandler.bind(f(n)),event:n._onEventHandler.bind(f(n))}),n.interactChild=!1,n.setScale(1,1),Hr.debugMode&&(n._isOnDebugerUpdate=!0,Hr.addUpdater(n._updateDebug,f(n))),n.aa_isRegOnDebug=!1,n._inDebug=!1,n.aa_anime="",Hr.game.emit.on("game_no_active",n._onWorldOff,f(n)),Hr.game.emit.on("game_active",n._onWorldOn,f(n)),n._saveSpeed=-1,n._isPaused=!1,n._destroyOnKill=!0,n._nextUNull=!1,n}return c(i,[{key:"_onWorldOff",value:function(){this._saveSpeed=this.speed,this.speed=0}},{key:"_onWorldOn",value:function(){this._nextUNull=!0,this._saveSpeed>=0&&(this.speed=this._saveSpeed,this._saveSpeed=-1)}},{key:"_updateDebug",value:function(){this.aa_isRegOnDebug&&!this._inDebug?Hr.add.regDebugMode(this):!this.aa_isRegOnDebug&&this._inDebug&&Hr.add.removeFromDebug(this),this.aa_isRegOnDebug&&this.aa_anime.length&&(this.aa_anime="'"===this.aa_anime.charAt(0)?this.aa_anime.slice(1,this.aa_anime.length-1):this.aa_anime,this.gotoAndPlay(0,!1,this.aa_anime),this.aa_anime="")}},{key:"_onCompleteHandler",value:function(t){t.loop?(this.emit(_e,this),++this._countLoop>=this._totalLoop&&(t.loop=!1,this.stop(),this.emit(ce,this),this._removeOnEnd&&Hr.add.timer(1e-4,this.destroy,this))):(this.emit(ce,this),this._clearTimeData(),this._removeOnEnd&&Hr.add.timer(1e-4,this.destroy,this))}},{key:"_onEventHandler",value:function(t,e){this.emit(de,this,e)}},{key:"setDelayPlay",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this._delayTimer&&this._delayTimer.destroy(),this._saveDelayLoop=e,this._saveDelayOnComplete=i,this._delayTimer=Hr.add.timer(t,this._onCompleteDelayPlay,this)}},{key:"_onCompleteDelayPlay",value:function(){this.visible||(this.visible=!0),this._delayTimer=null,this.play(this._saveDelayLoop),this._saveDelayOnComplete&&(this._saveDelayOnComplete(this),this._saveDelayOnComplete=null)}},{key:"setDelayGotoAndPlay",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this._delayTimer&&this._delayTimer.destroy(),this._saveDelayLoop=i,this._saveDelayFrame=e,this._saveDelayOnComplete=n,this._delayTimer=Hr.add.timer(t,this._onCompleteDelayGotoAndPlay,this)}},{key:"_onCompleteDelayGotoAndPlay",value:function(){this.visible||(this.visible=!0),this._delayTimer=null,this.gotoAndPlay(this._saveDelayFrame,this._saveDelayLoop),this._saveDelayOnComplete&&(this._saveDelayOnComplete(this),this._saveDelayOnComplete=null)}},{key:"addNext",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t||Hr.error("aName cannot be null"),this._aName=t,this.state.addAnimationByName(this._curIndex,this._aName,e)}},{key:"play",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this._playing=!0,this._countLoop=0,this._aName=e||this._aName,this.autoUpdate=!0,this.state.setAnimation(this._curIndex,this._aName,t),this.update(0),this.skeleton.updateWorldTransform(),this}},{key:"stop",value:function(){return this._clearTimeData(),this._playing=!1,this.autoUpdate=!1,this.state.clearTracks(),this.update(0),this.skeleton.updateWorldTransform(),this}},{key:"pause",value:function(){return this._isPaused||(this._isPaused=!0,this._saveTimeScale=this.speed,this.speed=0),this}},{key:"resume",value:function(){return this._isPaused&&(this._isPaused=!1,this.speed=this._saveTimeScale),this}},{key:"gotoAndPlay",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return this._playing=!0,this._countLoop=0,this._aName=i||this._aName,this.autoUpdate=!0,(qt=this.state.setAnimation(this._curIndex,this._aName,e))&&(t>=qt.trackEnd&&(t=0),qt.trackTime=t),this.update(0),this.skeleton.updateWorldTransform(),this}},{key:"gotoAndStop",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this.stop(),this._aName=e||this._aName,(qt=this.state.setAnimation(this._curIndex,this._aName))&&(t>=qt.trackEnd&&(t=0),qt.trackTime=t),this.update(0),this.skeleton.updateWorldTransform(),this}},{key:"playMixAnimation",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return this._playing?(t<1&&console.error("Pls set correct track index. Must to be bigger than 0",t,e),!e&&console.error("Name of animation must to be not null",t,e),(qt=this.state.setAnimation(t,e,n))&&(i>=qt.trackEnd&&(i=0),qt.trackTime=i),this):(console.error("Spine without active animation. Pls start main animation in this spine",this),this)}},{key:"stopMixAnimation",value:function(t){return this._playing?(t<1&&console.error("Pls set correct track index. Must to be bigger than 0",t,aName),this.state.clearTrack(t),this):(console.error("Spine without active animation. Pls start main animation in this spine",this),this)}},{key:"reset",value:function(){this.skeleton.setToSetupPose(),this.state.tracks=[]}},{key:"restart",value:function(){return this.state.clearTracks(),this}},{key:"changeAnimation",value:function(t){if(this.hasAnimation(t)&&(this._aName=t,this.playing)){var e=this.loop;this.stop(),this.play(e)}}},{key:"hasAnimation",value:function(t){return this.state.hasAnimation(t)}},{key:"setMixByName",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.stateData.setMix(t,e,i)}},{key:"setSkin",value:function(t){t&&this._skinName!=t&&(this._skinName=t,this.skeleton.setSkinByName(t),this.skeleton.setToSetupPose())}},{key:"contains",value:function(t){return null!=this.children&&this.children.indexOf(t)>=0}},{key:"kill",value:function(){if(this.emit(te,this),this._isOnDebugerUpdate&&(this._isOnDebugerUpdate=!1,Hr.removeUpdater(this._updateDebug,this)),this._destroyOnKill)return this.destroy();this.stop()}},{key:"revive",value:function(){return this.emit(ee,this),Hr.debugMode&&!this._isOnDebugerUpdate&&(this._isOnDebugerUpdate=!0,Hr.addUpdater(this._updateDebug,this)),this}},{key:"destroy",value:function(t){return t=t||{children:!0,texture:!1,baseTexture:!1},this.parent&&this.parent.removeChild(this),this._playing&&this.stop(),this._delayTimer&&this._delayTimer.destroy(),this.json=null,this._delayTimer=null,this._saveDelayOnComplete=null,this.state.clearTracks(),this.state.clearListeners(),this.autoUpdate=!1,this._clearTimeData(),this._isOnDebugerUpdate&&(this._isOnDebugerUpdate=!1,Hr.removeUpdater(this._updateDebug,this)),this._active=!1,this.userData=null,this._boundsRect=null,this._localBoundsRect=null,this._isDrag=!1,this._isStartDrag=!1,this._listenMouseUp&&(this._listenMouseUp=!1,Hr.mouse.removeUpMouse(this._globalMouseUp,this)),this._eventData=null,this._findSlotSpriteList=null,this.input&&(this.input=!1),this.removeAllListeners(he),this.removeAllListeners(le),this.removeAllListeners(ue),this.removeAllListeners(ne),this.removeAllListeners(ae),this.removeAllListeners(oe),this.removeAllListeners(se),this.removeAllListeners(re),this.removeAllListeners(ce),this.removeAllListeners(de),this.removeAllListeners(_e),this.emit(ie,this),this.removeAllListeners(ie),this.removeAllListeners(te),this.removeAllListeners(ee),Hr.game.emit.off("game_no_active",this._onWorldOff,this),Hr.game.emit.off("game_active",this._onWorldOn,this),this._externalMethod=null,this._externalMethodParams=null,this.renderable=!1,this.visible=!1,m(_(i.prototype),"destroy",this).call(this,t),this.spineData=null,this.skeleton&&(this.skeleton._updateCache=null,this.skeleton.updateCacheReset=null,this.skeleton.data=null,this.skeleton.bones=null,this.skeleton.slots=null,this.skeleton.drawOrder=null,this.skeleton.ikConstraints=null,this.skeleton.transformConstraints=null,this.skeleton.pathConstraints=null),this.skeleton=null,this.stateData&&(this.stateData.skeletonData=null),this.stateData=null,this.state&&(this.state.tracks=null,this.state.events=null,this.state.listeners=null,this.state.queue=null,this.state.propertyIDs=null,this.state.mixingTo=null,this.state.trackEntryPool=null,this.state.data=null),this.state=null,this.slotContainers=null,this.tempClipContainers=null,this}},{key:"update",value:function(t){if(this.active){if(this._nextUNull&&(t=0,this._nextUNull=!1),m(_(i.prototype),"update",this).call(this,t),this._timeData){var e=this.currentFrame;for(var n in this._timeData)Number(n)<=e&&(this._timeData[n](),this._timeData[n]=null,delete this._timeData[n])}if(this._isStartDrag&&(this._eventData.global.x===this._dragSaveX&&this._eventData.global.y===this._dragSaveY||(this._dragHorizontal&&(this.x=this._oX+this._eventData.global.x-this._dragSaveX,this._oX<this._dragXMin?this.x=this._dragXMin:this._oX>this._dragXMax&&(this.x=this._dragXMax)),this._dragVertical&&(this.y=this._oY+this._eventData.global.y-this._dragSaveY,this._oY<this._dragYMin?this.y=this._dragYMin:this._oY>this._dragYMax&&(this.y=this._dragYMax)),this._dragSaveX=this._eventData.global.x,this._dragSaveY=this._eventData.global.y,this.emit(ue,this),Hr.mouse.isDown||this._upOutSide())),this._findSlotSpriteList){for(var s in this._findSlotSpriteList){var r;if("countActive"!==s){var o=null===(r=this.skeleton.findSlot(s))||void 0===r?void 0:r.currentSprite;o&&(this._findSlotSpriteList[s].apply(null,[o,this]),this._findSlotSpriteList[s]=null,delete this._findSlotSpriteList[s],this._findSlotSpriteList.countActive--)}}this._findSlotSpriteList.countActive<=0&&(this._findSlotSpriteList=null)}}}},{key:"autoUpdateTransform",value:function(){this.parent&&m(_(i.prototype),"autoUpdateTransform",this).call(this)}},{key:"updateTransform",value:function(){this.parent&&this.transform&&m(_(i.prototype),"updateTransform",this).call(this)}},{key:"_down",value:function(t){this._isDrag&&(this._eventData=t.data,this._dragSaveX=this._eventData.global.x,this._dragSaveY=this._eventData.global.y,this._isStartDrag=!0,this.emit(he,this)),this.emit(ne,this)}},{key:"_over",value:function(){this.emit(oe,this)}},{key:"_out",value:function(){this.emit(ae,this)}},{key:"_upOutSide",value:function(){this._out(),this.emit(re,this)}},{key:"_up",value:function(){this.emit(se,this),null!=this._externalMethod&&this._externalMethod.apply(null,this._externalMethodParams)}},{key:"_globalMouseUp",value:function(){this._isDrag&&this._isStartDrag&&(this._eventData=null,this._isStartDrag=!1,this.emit(le,this))}},{key:"_clearTimeData",value:function(){if(this._timeData){for(var t in this._timeData)delete this._timeData[t];this._timeData=null}}},{key:"setXY",value:function(t,e){this._oX=t,this._oY=e,this.position.set(t,e)}},{key:"setSize",value:function(t,e){this.width=t,this.height=e}},{key:"setScale",value:function(t,e){this.scale.set(t,e)}},{key:"setAnchor",value:function(t,e){this.anchor.set(t,e)}},{key:"setPivot",value:function(t,e){this.pivot.set(t,e),this.x=this._oX+t,this.y=this._oY+e}},{key:"externalMethod",value:function(t,e){this.input||(this.input=!0),this._externalMethod=t,this._externalMethodParams=e}},{key:"boundsDragRect",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:NaN,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:NaN,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:NaN,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:NaN;isNaN(t)||(this._dragXMin=t),isNaN(e)||(this._dragYMin=e),isNaN(i)||(this._dragXMax=i),isNaN(n)||(this._dragYMax=n)}},{key:"addCallbackInTime",value:function(t,e){this._timeData||(this._timeData={}),this._timeData[t]=e}},{key:"removeCallbackInTime",value:function(t){this._timeData&&this._timeData[t]&&delete this._timeData[t]}},{key:"addOver",value:function(t,e,i){this.input||(this.input=!0),this._addNewEvent(oe,t,e,i)}},{key:"addOut",value:function(t,e,i){this.input||(this.input=!0),this._addNewEvent(ae,t,e,i)}},{key:"addDown",value:function(t,e,i){this.input||(this.input=!0),this._addNewEvent(ne,t,e,i)}},{key:"addUp",value:function(t,e,i){this.input||(this.input=!0),this._addNewEvent(se,t,e,i)}},{key:"addUpOutSide",value:function(t,e,i){this.input||(this.input=!0),this._addNewEvent(re,t,e,i)}},{key:"addDragUpdate",value:function(t,e,i){this._addNewEvent(ue,t,e,i)}},{key:"addDragStart",value:function(t,e,i){this._addNewEvent(he,t,e,i)}},{key:"addDragStop",value:function(t,e,i){this._addNewEvent(le,t,e,i)}},{key:"addKill",value:function(t,e,i){this._addNewEvent(te,t,e,i)}},{key:"addRevive",value:function(t,e,i){this._addNewEvent(ee,t,e,i)}},{key:"addDestroy",value:function(t,e,i){this._addNewEvent(ie,t,e,i)}},{key:"_addNewEvent",value:function(t,e,i){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];n?this.once(t,e,i):this.on(t,e,i)}},{key:"addComplete",value:function(t,e,i){this._addNewEvent(ce,t,e,i)}},{key:"addSpineEvent",value:function(t,e,i){this._addNewEvent(de,t,e,i)}},{key:"addLoop",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this._addNewEvent(_e,t,e,i)}},{key:"removeOver",value:function(t,e){t?this.removeListener(oe,t,e):this.removeListener(oe)}},{key:"removeOut",value:function(t,e){t?this.removeListener(ae,t,e):this.removeListener(ae)}},{key:"removeDown",value:function(t,e){t?this.removeListener(ne,t,e):this.removeListener(ne)}},{key:"removeUp",value:function(t,e){t?this.removeListener(se,t,e):this.removeListener(se)}},{key:"removeUpOutSide",value:function(t,e){t?this.removeListener(re,t,e):this.removeListener(re)}},{key:"removeDragUpdate",value:function(t,e){t?this.removeListener(ue,t,e):this.removeListener(ue)}},{key:"removeDragStart",value:function(t,e){t?this.removeListener(he,t,e):this.removeListener(he)}},{key:"removeDragStop",value:function(t,e){t?this.removeListener(le,t,e):this.removeListener(le)}},{key:"removeComplete",value:function(t,e){t?this.removeListener(ce,t,e):this.removeListener(ce)}},{key:"removeSpineEvent",value:function(t,e){t?this.removeListener(de,t,e):this.removeListener(de)}},{key:"removeLoop",value:function(t,e){t?this.removeListener(_e,t,e):this.removeListener(_e)}},{key:"removeKill",value:function(t,e){t?this.removeListener(te,t,e):this.removeListener(te)}},{key:"removeRevive",value:function(t,e){t?this.removeListener(ee,t,e):this.removeListener(ee)}},{key:"removDestroy",value:function(t,e){this.removeDestroy(t,e)}},{key:"removeDestroy",value:function(t,e){t?this.removeListener(ie,t,e):this.removeListener(ie)}},{key:"getSpineChildByName",value:function(t){return this._findChildByName(this,t)}},{key:"_findChildByName",value:function(t,e){for(var i,n=null,s=0;s<t.children.length;s++){var r,o;if((null===(r=(i=t.children[s]).attachment)||void 0===r?void 0:r.name)===e){n=i;break}if(null!==(o=i.children)&&void 0!==o&&o.length&&(n=this._findChildByName(i,e)))break}return n}},{key:"findBone",value:function(t){var e;return null===(e=this.skeleton)||void 0===e?void 0:e.findBone(t)}},{key:"findSlot",value:function(t){var e;return null===(e=this.skeleton)||void 0===e?void 0:e.findSlot(t)}},{key:"findCurrentSlotSprite",value:function(t){var e,i,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=null===(e=this.skeleton)||void 0===e||null===(i=e.findSlot(t))||void 0===i?void 0:i.currentSprite;return r||(n&&s?(this._findSlotSpriteList||(this._findSlotSpriteList={}),this._findSlotSpriteList[t]||(this._findSlotSpriteList.countActive=this._findSlotSpriteList.hasOwnProperty("countActive")?this._findSlotSpriteList.countActive+1:1),void(this._findSlotSpriteList[t]=s)):null)}},{key:"active",get:function(){return this._active}},{key:"scaleX",get:function(){return this.scale.x},set:function(t){this.scale.x=t}},{key:"scaleY",get:function(){return this.scale.y},set:function(t){this.scale.y=t}},{key:"pivotX",get:function(){return this.pivot.x},set:function(t){this.pivot.x=t}},{key:"pivotY",get:function(){return this.pivot.y},set:function(t){this.pivot.y=t}},{key:"anchorX",get:function(){return this.anchor.x},set:function(t){this.anchor.x=t}},{key:"anchorY",get:function(){return this.anchor.y},set:function(t){this.anchor.y=t}},{key:"localLeft",get:function(){return this._localBoundsRect.left}},{key:"localRight",get:function(){return this._localBoundsRect.right}},{key:"localTop",get:function(){return this._localBoundsRect.top}},{key:"localBottom",get:function(){return this._localBoundsRect.bottom}},{key:"localWidth",get:function(){return this._localBoundsRect.width}},{key:"localHeight",get:function(){return this._localBoundsRect.height}},{key:"globalLeft",get:function(){return this.getGlobalPosition().x+this.localLeft}},{key:"globalTop",get:function(){return this.getGlobalPosition().y+this.localTop}},{key:"worldX",get:function(){return this.getGlobalPosition().x}},{key:"worldY",get:function(){return this.getGlobalPosition().y}},{key:"x",get:function(){return this._oX=m(_(i.prototype),"x",this),this._oX},set:function(t){x(_(i.prototype),"x",this._oX=t,this,!0)}},{key:"y",get:function(){return this._oY=m(_(i.prototype),"y",this),this._oY},set:function(t){x(_(i.prototype),"y",this._oY=t,this,!0)}},{key:"height",get:function(){return this._oHeight=m(_(i.prototype),"height",this),this._oHeight},set:function(t){return x(_(i.prototype),"height",this._oHeight=t,this,!0)}},{key:"width",get:function(){return this._oWidth=m(_(i.prototype),"width",this),this._oWidth},set:function(t){return x(_(i.prototype),"width",this._oWidth=t,this,!0)}},{key:"oType",get:function(){return this._oType}},{key:"input",get:function(){return this._isCheckInput},set:function(t){this.input?this.interactive=t:t&&(this._isCheckInput=!0,this.interactive=!0,this.on("pointerdown",this._down,this),this.on("pointerup",this._up,this),this.on("pointerupoutside",this._upOutSide,this),this.on("pointerover",this._over,this),this.on("pointerout",this._out,this))}},{key:"drag",set:function(t){this.input||(this.input=!0),this._isDrag=t,this._listenMouseUp=t,this._listenMouseUp?Hr.mouse.addUpHandler(this._globalMouseUp,this):Hr.mouse.removeUpMouse(this._globalMouseUp,this),this._dragVertical=!0,this._dragHorizontal=!0}},{key:"allowHorizontalDrag",set:function(t){this._dragHorizontal=t}},{key:"allowVerticalDrag",set:function(t){this._dragVertical=t}},{key:"removeOnEnd",set:function(t){this._removeOnEnd=t}},{key:"loopCount",get:function(){return this._countLoop}},{key:"totalLoop",set:function(t){this._totalLoop=t}},{key:"playing",get:function(){return this._playing}},{key:"loop",get:function(){return!!this.state.getCurrent(this._curIndex)&&this.state.getCurrent(this._curIndex).loop},set:function(t){this.state.getCurrent(this._curIndex)&&(this.state.getCurrent(this._curIndex).loop=t)}},{key:"currentFrame",get:function(){return this.state&&this.state.getCurrent(this._curIndex)?this.state.getCurrent(this._curIndex).getAnimationTime():0}},{key:"frameTotal",get:function(){return this.state.getCurrent(this._curIndex)?this.state.getCurrent(this._curIndex).animation.duration:0}},{key:"animationName",get:function(){return this._aName}},{key:"speed",get:function(){return this.state.timeScale},set:function(t){this.state.timeScale=t}},{key:"interactChild",set:function(t){this.interactiveChildren=t}},{key:"putOnCache",set:function(t){this._putOnCache=t}},{key:"isPaused",get:function(){return this._isPaused}},{key:"destroyOnKill",set:function(t){this._destroyOnKill=t}},{key:"correctTrackIndex",get:function(){return this._curIndex},set:function(t){this._curIndex=t}}]),i}(),fe=function(t){d(i,PIXI.ParticleContainer);var e=g(i);function i(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1500,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:16384,o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return l(this,i),(t=e.call(this,n,s,r,o))._onDownEvent="down_event",t._onUpEvent="up_event",t._onUpOutSideEvent="up_out_event",t._onOverEvent="over_event",t._onOutEvent="out_event",t._onDragStartEvent="drag_start_event",t._onDragStopEvent="drag_stop_event",t._onDragUpdateEvent="drag_update_event",t.isUpdate=!0,t.aa_isRegOnDebug=!1,t._inDebug=!1,t.userData=null,t._active=!0,t.numChildren=0,t._oX=0,t._oY=0,t._oWidth=0,t._oHeight=0,t._externalMethodParams=null,t._externalMethod=null,t._isDrag=!1,t._dragVertical=!1,t._dragHorizontal=!1,t._isStartDrag=!1,t._isCheckInput=!1,t.autoReviveChildren=!0,t.needAutoRevive=!1,t._boundsRect=new E.Rectangle,t._localBoundsRect=new E.Rectangle,t._anchorX=0,t._anchorY=0,t._oType=E.OMY_PARTICLE_CONTAINER,t}return c(i,[{key:"addChild",value:function(t){return m(_(i.prototype),"addChild",this).call(this,t),this.numChildren=this.children.length,t}},{key:"addChildAt",value:function(t,e){return m(_(i.prototype),"addChildAt",this).call(this,t,e),this.numChildren=this.children.length,t}},{key:"removeChild",value:function(t){return m(_(i.prototype),"removeChild",this).call(this,t),this.numChildren=this.children.length,t}},{key:"removeChildAt",value:function(t){var e=m(_(i.prototype),"removeChildAt",this).call(this,t);return this.numChildren=this.children.length,e}},{key:"removeChildren",value:function(t,e){var n=m(_(i.prototype),"removeChildren",this).call(this,t,e);return this.numChildren=this.children.length,n}},{key:"removeAll",value:function(){if(null!=this.children){for(;this.children.length;)this.removeChildAt(0);this.numChildren=0}}},{key:"contains",value:function(t){return null!=this.children&&this.children.indexOf(t)>=0}},{key:"kill",value:function(){if(this._active){if(this._active=!1,this._isUpdate&&Hr.removeUpdater(this.update,this),null!=this.children)for(var t,e=0,i=this.numChildren;e<this.numChildren&&this.numChildren;)(t=this.children[e++]).active&&t.kill&&t.kill(),i!==this.numChildren&&(i--,e--);this.input&&(this.input=!1),this.renderable=!1}return this}},{key:"revive",value:function(){if(!this._active){if(this._active=!0,this.renderable=!0,this._isUpdate&&Hr.addUpdater(this.update,this),null!=this.children)for(var t,e=0;e<this.numChildren;)t=this.children[e++],(this.autoReviveChildren||t.needAutoRevive)&&!t.active&&t.revive&&t.revive();this.input&&(this.input=!0)}return this}},{key:"destroy",value:function(t){return t=t||{children:!0,texture:!1,baseTexture:!1},this._active=!1,this.userData=null,this.numChildren=0,this._boundsRect=null,this._localBoundsRect=null,this._isDrag=!1,this._isStartDrag=!1,this._listenMouseUp&&(this._listenMouseUp=!1,Hr.mouse.removeUpMouse(this._globalMouseUp,this)),this._eventData=null,this.isUpdate=!1,this.input&&(this.input=!1),this.removeAllListeners(this._onDragStartEvent),this.removeAllListeners(this._onDragStopEvent),this.removeAllListeners(this._onDragUpdateEvent),this.removeAllListeners(this._onDownEvent),this.removeAllListeners(this._onOutEvent),this.removeAllListeners(this._onOverEvent),this.removeAllListeners(this._onUpEvent),this.removeAllListeners(this._onUpOutSideEvent),this._externalMethod=null,this._externalMethodParams=null,this.renderable=!1,this.visible=!1,m(_(i.prototype),"destroy",this).call(this,t),this}},{key:"update",value:function(t){this._isStartDrag&&(this._eventData.global.x===this._dragSaveX&&this._eventData.global.y===this._dragSaveY||(this._dragHorizontal&&(this.x=this._oX+this._eventData.global.x-this._dragSaveX,this._oX<this._dragXMin?this.x=this._dragXMin:this._oX>this._dragXMax&&(this.x=this._dragXMax)),this._dragVertical&&(this.y=this._oY+this._eventData.global.y-this._dragSaveY,this._oY<this._dragYMin?this.y=this._dragYMin:this._oY>this._dragYMax&&(this.y=this._dragYMax)),this._dragSaveX=this._eventData.global.x,this._dragSaveY=this._eventData.global.y,this.emit(this._onDragUpdateEvent,this),Hr.mouse.isDown||this._upOutSide())),this.aa_isRegOnDebug&&!this._inDebug?Hr.add.regDebugMode(this):!this.aa_isRegOnDebug&&this._inDebug&&Hr.add.removeFromDebug(this)}},{key:"_down",value:function(t){this._isDrag&&(this._eventData=t.data,this._dragSaveX=this._eventData.global.x,this._dragSaveY=this._eventData.global.y,this._isStartDrag=!0,this.emit(this._onDragStartEvent,this)),this.emit(this._onDownEvent,this)}},{key:"_over",value:function(){this.emit(this._onOverEvent,this)}},{key:"_out",value:function(){this.emit(this._onOutEvent,this)}},{key:"_upOutSide",value:function(){this._out(),this.emit(this._onUpOutSideEvent,this)}},{key:"_up",value:function(){this.emit(this._onUpEvent,this),null!=this._externalMethod&&this._externalMethod.apply(null,this._externalMethodParams)}},{key:"_globalMouseUp",value:function(){this._isDrag&&this._isStartDrag&&(this._eventData=null,this._isStartDrag=!1,this.emit(this._onDragStopEvent,this))}},{key:"setXY",value:function(t,e){this._oX=t,this._oY=e,this.position.set(t,e)}},{key:"setSize",value:function(t,e){this.width=t,this.height=e}},{key:"setScale",value:function(t,e){this.scale.set(t,e)}},{key:"setAnchor",value:function(t,e){this.anchorX=t,this.anchorY=e}},{key:"setPivot",value:function(t,e){this.pivot.set(t,e),this.x=this._oX+t,this.y=this._oY+e}},{key:"updateAnchor",value:function(){this.anchorX=this.anchorX,this.anchorY=this.anchorY}},{key:"externalMethod",value:function(t,e){this.input||(this.input=!0),this._externalMethod=t,this._externalMethodParams=e}},{key:"boundsDragRect",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:NaN,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:NaN,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:NaN,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:NaN;isNaN(t)||(this._dragXMin=t),isNaN(e)||(this._dragYMin=e),isNaN(i)||(this._dragXMax=i),isNaN(n)||(this._dragYMax=n)}},{key:"addOver",value:function(t,e,i){this.input||(this.input=!0),this._addNewEvent(this._onOverEvent,t,e,i)}},{key:"addOut",value:function(t,e,i){this.input||(this.input=!0),this._addNewEvent(this._onOutEvent,t,e,i)}},{key:"addDown",value:function(t,e,i){this.input||(this.input=!0),this._addNewEvent(this._onDownEvent,t,e,i)}},{key:"addUp",value:function(t,e,i){this.input||(this.input=!0),this._addNewEvent(this._onUpEvent,t,e,i)}},{key:"addUpOutSide",value:function(t,e,i){this.input||(this.input=!0),this._addNewEvent(this._onUpOutSideEvent,t,e,i)}},{key:"addDragUpdate",value:function(t,e,i){this._addNewEvent(this._onDragUpdateEvent,t,e,i)}},{key:"addDragStart",value:function(t,e,i){this._addNewEvent(this._onDragStartEvent,t,e,i)}},{key:"addDragStop",value:function(t,e,i){this._addNewEvent(this._onDragStopEvent,t,e,i)}},{key:"_addNewEvent",value:function(t,e,i){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];n?this.once(t,e,i):this.on(t,e,i)}},{key:"removeOver",value:function(t,e){this.removeListener(this._onOverEvent,t,e)}},{key:"removeOut",value:function(t,e){this.removeListener(this._onOutEvent,t,e)}},{key:"removeDown",value:function(t,e){this.removeListener(this._onDownEvent,t,e)}},{key:"removeUp",value:function(t,e){this.removeListener(this._onUpEvent,t,e)}},{key:"removeUpOutSide",value:function(t,e){this.removeListener(this._onUpOutSideEvent,t,e)}},{key:"removeDragUpdate",value:function(t,e){this.removeListener(this._onDragUpdateEvent,t,e)}},{key:"removeDragStart",value:function(t,e){this.removeListener(this._onDragStartEvent,t,e)}},{key:"removeDragStop",value:function(t,e){this.removeListener(this._onDragStopEvent,t,e)}},{key:"isUpdate",get:function(){return this._isUpdate},set:function(t){!this._isUpdate&&t?Hr.addUpdater(this.update,this):this._isUpdate&&!t&&Hr.removeUpdater(this.update,this),this._isUpdate=t}},{key:"active",get:function(){return this._active}},{key:"scaleX",get:function(){return this.scale.x},set:function(t){this.scale.x=t}},{key:"scaleY",get:function(){return this.scale.y},set:function(t){this.scale.y=t}},{key:"pivotX",get:function(){return this.pivot.x},set:function(t){this.pivot.x=t}},{key:"pivotY",get:function(){return this.pivot.y},set:function(t){this.pivot.y=t}},{key:"anchorX",get:function(){return this._anchorX},set:function(t){this._anchorX=t,this.pivot.x=t*this.width/this.scale.x}},{key:"anchorY",get:function(){return this._anchorY},set:function(t){this._anchorY=t,this.pivot.y=t*this.height/this.scale.y}},{key:"localLeft",get:function(){return this._localBoundsRect.left}},{key:"localRight",get:function(){return this._localBoundsRect.right}},{key:"localTop",get:function(){return this._localBoundsRect.top}},{key:"localBottom",get:function(){return this._localBoundsRect.bottom}},{key:"localWidth",get:function(){return this._localBoundsRect.width}},{key:"localHeight",get:function(){return this._localBoundsRect.height}},{key:"globalLeft",get:function(){return this.getGlobalPosition().x+this.localLeft}},{key:"globalTop",get:function(){return this.getGlobalPosition().y+this.localTop}},{key:"worldX",get:function(){return this.getGlobalPosition().x}},{key:"worldY",get:function(){return this.getGlobalPosition().y}},{key:"x",get:function(){return this._oX=m(_(i.prototype),"x",this),this._oX},set:function(t){x(_(i.prototype),"x",this._oX=t,this,!0)}},{key:"y",get:function(){return this._oY=m(_(i.prototype),"y",this),this._oY},set:function(t){x(_(i.prototype),"y",this._oY=t,this,!0)}},{key:"height",get:function(){return this._oHeight=m(_(i.prototype),"height",this),this._oHeight},set:function(t){return x(_(i.prototype),"height",this._oHeight=t,this,!0)}},{key:"width",get:function(){return this._oWidth=m(_(i.prototype),"width",this),this._oWidth},set:function(t){return x(_(i.prototype),"width",this._oWidth=t,this,!0)}},{key:"oType",get:function(){return this._oType}},{key:"input",get:function(){return this._isCheckInput},set:function(t){this.input?this.interactive=t:t&&(this._isCheckInput=!0,this.interactive=!0,this.on("pointerdown",this._down,this),this.on("pointerup",this._up,this),this.on("pointerupoutside",this._upOutSide,this),this.on("pointerover",this._over,this),this.on("pointerout",this._out,this))}},{key:"drag",set:function(t){this.input||(this.input=!0),this._isUpdate||(this.isUpdate=!0),this._isDrag=t,this._listenMouseUp=t,this._listenMouseUp?Hr.mouse.addUpHandler(this._globalMouseUp,this):Hr.mouse.removeUpMouse(this._globalMouseUp,this),this._dragVertical=!0,this._dragHorizontal=!0}},{key:"allowHorizontalDrag",set:function(t){this._dragHorizontal=t}},{key:"allowVerticalDrag",set:function(t){this._dragVertical=t}},{key:"interactChild",set:function(t){this.interactiveChildren=t}}]),i}(),ve=function(t){d(i,t);var e=g(i);function i(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1500,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:16384,o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return l(this,i),s||(s={vertices:!0,rotation:!0,uvs:!0,tint:!0}),(t=e.call(this,n,s,r,o))._oType=E.OMY_PARTICLE,t._emitters=[],t.interactChild=!1,t.isUpdate=!0,t}return c(i,[{key:"addEmitter",value:function(t){if("object"===h(t)&&Array.isArray(t))for(var e=0;e<t.length;e++)this._emitters.push(t[e]);else this._emitters.push(t)}},{key:"play",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(this._onComplete=e,t)if(i)for(var n=0;n<this._emitters.length;n++)this._emitters[n].playOnceAndDestroy(e?this._onCompleteHandler.bind(this):null);else for(var s=0;s<this._emitters.length;s++)this._emitters[s].playOnce(e?this._onCompleteHandler.bind(this):null);else for(var r=0;r<this._emitters.length;r++)this._emitters[r].emit=!0;this._countPlay=0}},{key:"_onCompleteHandler",value:function(){++this._countPlay>=this._emitters.length&&(this._onComplete&&this._onComplete(),this._onComplete=null)}},{key:"stop",value:function(){for(var t=0;t<this._emitters.length;t++)this._emitters[t].emit=!1}},{key:"emitNow",value:function(){for(var t=0;t<this._emitters.length;t++)this._emitters[t].emitNow()}},{key:"updateOwnerPos",value:function(t,e){for(var i=0;i<this._emitters.length;i++)this._emitters[i].updateOwnerPos(t,e)}},{key:"updateSpawnPos",value:function(t,e){for(var i=0;i<this._emitters.length;i++)this._emitters[i].updateSpawnPos(t,e)}},{key:"kill",value:function(){return this._active&&(this.clear(),m(_(i.prototype),"kill",this).call(this)),this}},{key:"clear",value:function(){for(var t=0;t<this._emitters.length;t++)this._emitters[t].cleanup(),this._emitters[t].emit=!1}},{key:"revive",value:function(){return this._active||m(_(i.prototype),"revive",this).call(this),this}},{key:"destroy",value:function(t){Hr.game.renderer.plugins&&Hr.game.renderer.plugins.sprite&&Hr.game.renderer.plugins.sprite.sprites&&(Hr.game.renderer.plugins.sprite.sprites.length=0);for(var e=0;e<this._emitters.length;e++)this._emitters[e].emit=!1,this._emitters[e].destroy();return this._emitters.length=0,this._emitters=null,m(_(i.prototype),"destroy",this).call(this,t),this}},{key:"update",value:function(t){for(var e=0;e<this._emitters.length;e++)this._emitters[e].update(t/60);m(_(i.prototype),"update",this).call(this,t)}},{key:"getEmitter",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this.numEmitters?this._emitters[t]:null}},{key:"getFrequency",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;if(t<0){for(var e=0,i=0;i<this._emitters.length;i++)e+=this._emitters[i].frequency;return e/this._emitters.length}return this._emitters[t].frequency}},{key:"setFrequency",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;if(e<0)for(var i=0;i<this._emitters.length;i++)this._emitters[i].frequency=t;else this._emitters[e].frequency=t}},{key:"getBehavior",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return e<0?(OMY.Omy.error("set id of emitter",e),null):this._emitters[e].getBehavior(t)}},{key:"numEmitters",get:function(){return this._emitters.length}}]),i}(fe);ve.moveAcceleration="moveAcceleration",ve.alpha="alpha",ve.alphaStatic="alphaStatic",ve.color="color",ve.colorStatic="colorStatic",ve.movePath="movePath",ve.rotation="rotation",ve.rotationStatic="rotationStatic",ve.scale="scale",ve.scaleStatic="scaleStatic",ve.moveSpeed="moveSpeed",ve.moveSpeedStatic="moveSpeedStatic";var ge,ye,me,ke,xe,be,we,Se,Te,Oe=function(t){d(i,t);var e=g(i);function i(t){var n,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return l(this,i),(n=e.call(this))._oType=E.OMY_REVOLT_SEQUENCE,n._delay=s,n._autoStart=r,n._scaleMod=o,n._revoltName=t,n._createParticles(),Hr.debugMode&&(n._isOnDebugerUpdate=!0,Hr.addUpdater(n._updateDebug,f(n))),n.aa_isRegOnDebug=!1,n._inDebug=!1,n}return c(i,[{key:"_updateDebug",value:function(){this.aa_isRegOnDebug&&!this._inDebug?Hr.add.regDebugMode(this):!this.aa_isRegOnDebug&&this._inDebug&&Hr.add.removeFromDebug(this)}},{key:"_createParticles",value:function(){this._particle||(this._particle=Hr.revolt(this._revoltName).getEffectSequence(this._revoltName),this._particle.init(this,this._delay,this._autoStart,this._scaleMod))}},{key:"_destroyParticles",value:function(){this._particle&&(this._particle.recycle(),this._particle=null)}},{key:"forceParticleUpdate",value:function(){if(this._particle)for(var t=0;t<1e3;t++)this._particle.update(1/60)}},{key:"revive",value:function(){return m(_(i.prototype),"revive",this).call(this),this._createParticles(),Hr.debugMode&&!this._isOnDebugerUpdate&&(this._isOnDebugerUpdate=!0,Hr.addUpdater(this._updateDebug,this)),this}},{key:"kill",value:function(){return this._destroyParticles(),this._isOnDebugerUpdate&&(this._isOnDebugerUpdate=!1,Hr.removeUpdater(this._updateDebug,this)),m(_(i.prototype),"kill",this).call(this),this}},{key:"destroy",value:function(t){return this._destroyParticles(),this._isOnDebugerUpdate&&(this._isOnDebugerUpdate=!1,Hr.removeUpdater(this._updateDebug,this)),this.removeAll(),this._revoltName=null,m(_(i.prototype),"destroy",this).call(this,t),this}},{key:"start",value:function(){this._particle&&this._particle.start()}},{key:"addStarted",value:function(t,e,i){this._particle?i?this._particle.on.started.addOnce(t,e):this._particle.on.started.add(t,e):console.error("particle not exists!")}},{key:"addCompleted",value:function(t,e,i){this._particle?i?this._particle.on.completed.addOnce(t,e):this._particle.on.completed.add(t,e):console.error("particle not exists!")}},{key:"removeStarted",value:function(t){this._particle&&this._particle.on.started.remove(t)}},{key:"removeCompleted",value:function(t){this._particle&&this._particle.on.completed.remove(t)}},{key:"particle",get:function(){return this._particle}}]),i}(zt),Ee=function(t){d(i,t);var e=g(i);function i(t){var n,s=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return l(this,i),(n=e.call(this))._oType=E.OMY_REVOLT_EMMITER,n._autoStart=s,n._scaleMod=r,n._revoltName=t,n._createParticles(),Hr.debugMode&&(n._isOnDebugerUpdate=!0,Hr.addUpdater(n._updateDebug,f(n))),n.aa_isRegOnDebug=!1,n._inDebug=!1,n}return c(i,[{key:"_updateDebug",value:function(){this.aa_isRegOnDebug&&!this._inDebug?Hr.add.regDebugMode(this):!this.aa_isRegOnDebug&&this._inDebug&&Hr.add.removeFromDebug(this)}},{key:"_createParticles",value:function(){this._particle||(this._particle=Hr.revolt(this._revoltName).getParticleEmitter(this._revoltName),this._particle.init(this,this._autoStart,this._scaleMod))}},{key:"_destroyParticles",value:function(){this._particle&&(this._particle.recycle(),this._particle=null)}},{key:"forceParticleUpdate",value:function(){if(this._particle)for(var t=0;t<1e3;t++)this._particle.update(1/60)}},{key:"revive",value:function(){return m(_(i.prototype),"revive",this).call(this),this._createParticles(),Hr.debugMode&&!this._isOnDebugerUpdate&&(this._isOnDebugerUpdate=!0,Hr.addUpdater(this._updateDebug,this)),this}},{key:"kill",value:function(){return this._destroyParticles(),this._isOnDebugerUpdate&&(this._isOnDebugerUpdate=!1,Hr.removeUpdater(this._updateDebug,this)),m(_(i.prototype),"kill",this).call(this),this}},{key:"destroy",value:function(t){return this._destroyParticles(),this._isOnDebugerUpdate&&(this._isOnDebugerUpdate=!1,Hr.removeUpdater(this._updateDebug,this)),this.removeAll(),this._revoltName=null,m(_(i.prototype),"destroy",this).call(this,t),this}},{key:"start",value:function(){this._particle&&this._particle.start()}},{key:"stop",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this._particle&&this._particle.stop(t)}},{key:"spawn",value:function(){this._particle&&this._particle.spawn()}},{key:"addStarted",value:function(t,e,i){this._particle?i?this._particle.on.started.addOnce(t,e):this._particle.on.started.add(t,e):console.error("particle not exists!")}},{key:"addCompleted",value:function(t,e,i){this._particle?i?this._particle.on.completed.addOnce(t,e):this._particle.on.completed.add(t,e):console.error("particle not exists!")}},{key:"addParticleUpdated",value:function(t,e,i){this._particle?i?this._particle.on.particleUpdated.addOnce(t,e):this._particle.on.particleUpdated.add(t,e):console.error("particle not exists!")}},{key:"addParticleSpawned",value:function(t,e,i){this._particle?i?this._particle.on.particleSpawned.addOnce(t,e):this._particle.on.particleSpawned.add(t,e):console.error("particle not exists!")}},{key:"addParticleBounced",value:function(t,e,i){this._particle?i?this._particle.on.particleBounced.addOnce(t,e):this._particle.on.particleBounced.add(t,e):console.error("particle not exists!")}},{key:"addParticleDied",value:function(t,e,i){this._particle?i?this._particle.on.particleDied.addOnce(t,e):this._particle.on.particleDied.add(t,e):console.error("particle not exists!")}},{key:"removeStarted",value:function(t){this._particle&&this._particle.on.started.remove(t)}},{key:"removeCompleted",value:function(t){this._particle&&this._particle.on.completed.remove(t)}},{key:"removeParticleUpdated",value:function(t){this._particle&&this._particle.on.particleUpdated.remove(t)}},{key:"removeParticleSpawned",value:function(t){this._particle&&this._particle.on.particleSpawned.remove(t)}},{key:"removeParticleBounced",value:function(t){this._particle&&this._particle.on.particleBounced.remove(t)}},{key:"removeParticleDied",value:function(t){this._particle&&this._particle.on.particleDied.remove(t)}},{key:"particle",get:function(){return this._particle}},{key:"infinite",set:function(t){this._particle&&(this._particle.infinite=t)}},{key:"target",set:function(t){this._particle&&(this._particle.target=t)}},{key:"targetOffset",set:function(t){this._particle&&(this._particle.targetOffset=t)}},{key:"paused",get:function(){if(!this._particle)return!0;this._particle.paused},set:function(t){this._particle&&(this._particle.paused=t)}}]),i}(zt),Ae=function(t){d(i,t);var e=g(i);function i(t,n){var s;l(this,i),(s=e.call(this,n.out,n.atlas))._parent=t,s._gdConf=n,s._outTexture=s._gdConf.out,s._overTexture=s._gdConf.over,s._downTexture=s._gdConf.down,s._blockrTexture=s._gdConf.block,s._label=null,s._hintLabel=null,s._currentTexture=s._outTexture,s._isBlock=!1,s._inDown=!1,s._inButton=!1,s._oneClick=!1,s.name=s._gdConf.name||s.name,s.setXY(s._gdConf.x||0,s._gdConf.y||0),s.rotation=Ft.toRadians(s._gdConf.rotate)||0,s.alpha=s._gdConf.alpha||1,s._gdConf.scale?s.setScale(s._gdConf.scale,s._gdConf.scale):s._gdConf.scaleX?s.scaleX=s._gdConf.scaleX||1:s._gdConf.scaleY&&(s.scaleY=s._gdConf.scaleY||1);var r=s._gdConf.hintAreaRect;return r&&Hr.add.hintArea(f(s),r,r.type,r.debug),s._gdConf.label&&(s._label=Hr.add.textJson(f(s),s._gdConf.label)),s._gdConf.hintLabel&&(s._hintLabel=Hr.add.textJson(f(s),s._gdConf.hintLabel),s._hintLabel.visible=!1),s._gdConf.oneClick&&(s.oneClick=s._gdConf.oneClick),s._parent&&s._parent.addChild(f(s)),s._gdConf.debug&&Hr.add.timer(.1,Hr.add.regDebugMode,f(s),0,!1,!0,0,[f(s)]),s.input=!0,s.buttonMode=!0,Hr.isDesktop||(s.buttonMode=!1,s.removeListener("pointerover",s._over,f(s)),s.removeListener("pointerout",s._out,f(s))),s._btnGameState=0,s._activeStateList=[],s._noActiveStateList=[],s.alwaysAvailable=!1,s._btnManager=Hr.navigateBtn,s._btnManager.addBtn(f(s),s._updateState,s._updateBlocking),s}return c(i,[{key:"revive",value:function(){return m(_(i.prototype),"revive",this).call(this),this._inDown=!1,this._isBlock=!1,this._inButton=!1,this._currentTexture=this._outTexture,this._updateBtnGraphic(),this}},{key:"kill",value:function(){return this._isBlock=!0,m(_(i.prototype),"kill",this).call(this)}},{key:"destroy",value:function(t){return this._label&&(this.removeChild(this._label),this._label.destroy(!0),this._label=null),this._hintLabel&&this._hintLabel.destroy(!0),this._hintLabel=null,this._outTexture=null,this._overTexture=null,this._downTexture=null,this._blockrTexture=null,this._currentTexture=null,this._btnManager.removeBtn(this,this._updateState,this._updateBlocking),this._btnManager=null,this._activeStateList.length=0,this._noActiveStateList=null,m(_(i.prototype),"destroy",this).call(this,t)}},{key:"setActiveStates",value:function(){for(var t=0;t<arguments.length;t++)this._activeStateList.push(t<0||arguments.length<=t?void 0:arguments[t])}},{key:"setNoActiveStates",value:function(){for(var t=0;t<arguments.length;t++)this._noActiveStateList.push(t<0||arguments.length<=t?void 0:arguments[t])}},{key:"changeTextures",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this._outTexture=t,this._overTexture=e,this._downTexture=i,this._blockrTexture=n,this._currentTexture=t,this._updateBtnGraphic()}},{key:"checkState",value:function(){-1!==this._activeStateList.indexOf(this._btnGameState)?this.onActive():-1!==this._noActiveStateList.indexOf(this._btnGameState)?this.onBlock():this.alwaysAvailable?this.onActive():this.onHide()}},{key:"onActive",value:function(){this.isBlock=!1,this.visible=!0}},{key:"onBlock",value:function(){this.isBlock=!0,this.visible=!0}},{key:"onHide",value:function(){this.visible=!1}},{key:"onKeyHandler",value:function(){this._inDown=!0,this._up()}},{key:"onDoAction",value:function(){}},{key:"_updateState",value:function(t){this._btnGameState=t,this.checkState()}},{key:"_updateBlocking",value:function(t){(t||!t&&-1!==this._activeStateList.indexOf(this._btnGameState)||!t&&this.alwaysAvailable&&-1===this._noActiveStateList.indexOf(this._btnGameState))&&(t?this.isBlock=!0:this.onActive())}},{key:"_updateBtnGraphic",value:function(){this.texture!==this._currentTexture&&(this.texture=this._currentTexture)}},{key:"_onDownHandler",value:function(){}},{key:"_onOverHandler",value:function(){this._hintLabel&&(this.parent&&this.parent.addChild(this._hintLabel),this._hintLabel.visible=!0)}},{key:"_onOutHandler",value:function(){this._hintLabel&&(this.parent&&this.parent.removeChild(this._hintLabel),this._hintLabel.visible=!1)}},{key:"_onUpHandler",value:function(){}},{key:"_down",value:function(){this._isBlock||(this._downTexture&&(this._currentTexture=this._downTexture,this._updateBtnGraphic()),this._label&&this._label.json.down&&this._label.setColor(this._label.json.down),this._inDown=!0,this._onDownHandler(),m(_(i.prototype),"_down",this).call(this))}},{key:"_over",value:function(){this._inButton=!0,this._isBlock||this._inDown||(this._overTexture&&(this._currentTexture=this._overTexture,this._updateBtnGraphic()),this._label&&this._label.json.over&&this._label.setColor(this._label.json.over),this._onOverHandler(),m(_(i.prototype),"_over",this).call(this))}},{key:"_out",value:function(){this._inButton=!1,this._isBlock||this._inDown||(this._outTexture&&(this._currentTexture=this._outTexture,this._updateBtnGraphic()),this._label&&this._label.json.fill&&this._label.setColor(this._label.json.fill),this._onOutHandler(),m(_(i.prototype),"_out",this).call(this))}},{key:"_upOutSide",value:function(){this._inDown=!1,m(_(i.prototype),"_upOutSide",this).call(this)}},{key:"_up",value:function(){this._isBlock||(this._overTexture&&this._inButton?this._currentTexture=this._overTexture:this._currentTexture=this._outTexture,this._label&&this._label.json.fill&&this._label.setColor(this._label.json.fill),this._updateBtnGraphic(),this._inDown&&(this._inDown=!1,this._onUpHandler(),this.onDoAction(),m(_(i.prototype),"_up",this).call(this),this._oneClick&&(this.isBlock=!0)))}},{key:"labelText",get:function(){return this._label?this._label.text:""},set:function(t){this._label&&(this._label.text=t)}},{key:"hintLabelText",get:function(){return this._hintLabel?this._hintLabel.text:""},set:function(t){this._hintLabel&&(this._hintLabel.text=t)}},{key:"isBlock",get:function(){return this._isBlock},set:function(t){this._isBlock&&t||!this._isBlock&&!t||(t?(this._hintLabel&&(this.parent&&this.parent.removeChild(this._hintLabel),this._hintLabel.visible=!1),this._blockrTexture?this._currentTexture=this._blockrTexture:this._currentTexture=this._outTexture):this._currentTexture=this._outTexture,this._updateBtnGraphic(),this._label&&(t&&this._label.json.block?this._label.setColor(this._label.json.block):!t&&this._label.json.fill&&this._label.setColor(this._label.json.fill)),this._isBlock=t,this.input=!t,this.buttonMode=!t)}},{key:"oneClick",set:function(t){this._oneClick=t}}]),i}(Vt),De=function(t){d(i,t);var e=g(i);function i(t){var n,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,h=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null;return l(this,i),(n=e.call(this,t,s,r,o,a,h))._gdConf=h,n._oType=E.OMY_CHECK_BOX,n._isChecking=!0,h&&n.addOtherStates(h),n}return c(i,[{key:"addOtherStates",value:function(t){this._states=t||{},this._states.default={out:this._outTexture,over:this._overTexture,down:this._downTexture,block:this._blockrTexture},this._checkState()}},{key:"destroy",value:function(t){return this._gdConf=null,this._states=null,m(_(i.prototype),"destroy",this).call(this,t)}},{key:"_onUpHandler",value:function(){this._isChecking=!this._isChecking,this._checkState(),m(_(i.prototype),"_onUpHandler",this).call(this)}},{key:"_checkState",value:function(){this._isChecking?this._changeState("active"):this._changeState("noActive")}},{key:"_changeState",value:function(t){var e=this._states[t]||this._states.default;this.changeTextures(e.out,e.over,e.down,e.block)}},{key:"isChecking",get:function(){return this._isChecking},set:function(t){this._isChecking=t,this._checkState()}}]),i}(Ht),Ce=function(){return"undefined"!=typeof window},Me=function(){return ge||Ce()&&(ge=window.gsap)&&ge.registerPlugin&&ge},Le=function(t){return"function"==typeof t},Pe=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],Ue=.212671,Ne=.71516,Ie=.072169,Re=function(t,e){var i,n,s=[],r=0,o=0;for(i=0;i<4;i++){for(n=0;n<5;n++)o=4===n?t[r+4]:0,s[r+n]=t[r]*e[n]+t[r+1]*e[n+5]+t[r+2]*e[n+10]+t[r+3]*e[n+15]+o;r+=5}return s},Fe=function(t,e){var i=1-e,n=i*Ue,s=i*Ne,r=i*Ie;return Re([n+e,s,r,0,0,n,s+e,r,0,0,n,s,r+e,0,0,0,0,0,1,0],t)},Ye=function(t,e,i){var n=me(e),s=n[0]/255,r=n[1]/255,o=n[2]/255,a=1-i;return Re([a+i*s*Ue,i*s*Ne,i*s*Ie,0,0,i*r*Ue,a+i*r*Ne,i*r*Ie,0,0,i*o*Ue,i*o*Ne,a+i*o*Ie,0,0,0,0,0,1,0],t)},Xe=function(t,e){e*=Math.PI/180;var i=Math.cos(e),n=Math.sin(e);return Re([Ue+i*(1-Ue)+n*-Ue,Ne+i*-Ne+n*-Ne,Ie+i*-Ie+n*(1-Ie),0,0,Ue+i*-Ue+.143*n,Ne+.28484*i+.14*n,Ie+i*-Ie+-.283*n,0,0,Ue+i*-Ue+-.787329*n,Ne+i*-Ne+n*Ne,Ie+i*(1-Ie)+n*Ie,0,0,0,0,0,1,0,0,0,0,0,1],t)},Be=function(t,e){return Re([e,0,0,0,.5*(1-e),0,e,0,0,.5*(1-e),0,0,e,0,.5*(1-e),0,0,0,1,0],t)},ze=function(t,e){var i,n,s=ke.filters[e],r=t.filters||[],o=r.length;for(s||(n=e+" not found. PixiPlugin.registerPIXI(PIXI)",console.warn(n));--o>-1;)if(r[o]instanceof s)return r[o];return i=new s,"BlurFilter"===e&&(i.blur=0),r.push(i),t.filters=r,i},Ve=function(t,e,i,n){e.add(i,t,i[t],n[t]),e._props.push(t)},He=function(t,e){var i=new ke.filters.ColorMatrixFilter;return i.matrix=e,i.brightness(t,!0),i.matrix},We={contrast:1,saturation:1,colorizeAmount:0,colorize:"rgb(255,255,255)",hue:0,brightness:1},je=function(t,e,i){var n,s,r,o=ze(t,"ColorMatrixFilter"),a=t._gsColorMatrixFilter=t._gsColorMatrixFilter||function(t){var e,i={};for(e in t)i[e]=t[e];return i}(We),h=e.combineCMF&&!("colorMatrixFilter"in e&&!e.colorMatrixFilter);r=o.matrix,e.resolution&&(o.resolution=e.resolution),e.matrix&&e.matrix.length===r.length?(s=e.matrix,1!==a.contrast&&Ve("contrast",i,a,We),a.hue&&Ve("hue",i,a,We),1!==a.brightness&&Ve("brightness",i,a,We),a.colorizeAmount&&(Ve("colorize",i,a,We),Ve("colorizeAmount",i,a,We)),1!==a.saturation&&Ve("saturation",i,a,We)):(s=Pe.slice(),null!=e.contrast?(s=Be(s,+e.contrast),Ve("contrast",i,a,e)):1!==a.contrast&&(h?s=Be(s,a.contrast):Ve("contrast",i,a,We)),null!=e.hue?(s=Xe(s,+e.hue),Ve("hue",i,a,e)):a.hue&&(h?s=Xe(s,a.hue):Ve("hue",i,a,We)),null!=e.brightness?(s=He(+e.brightness,s),Ve("brightness",i,a,e)):1!==a.brightness&&(h?s=He(a.brightness,s):Ve("brightness",i,a,We)),null!=e.colorize?(e.colorizeAmount="colorizeAmount"in e?+e.colorizeAmount:1,s=Ye(s,e.colorize,e.colorizeAmount),Ve("colorize",i,a,e),Ve("colorizeAmount",i,a,e)):a.colorizeAmount&&(h?s=Ye(s,a.colorize,a.colorizeAmount):(Ve("colorize",i,a,We),Ve("colorizeAmount",i,a,We))),null!=e.saturation?(s=Fe(s,+e.saturation),Ve("saturation",i,a,e)):1!==a.saturation&&(h?s=Fe(s,a.saturation):Ve("saturation",i,a,We))),n=s.length;for(;--n>-1;)s[n]!==r[n]&&i.add(r,n,r[n],s[n],"colorMatrixFilter");i._props.push("colorMatrixFilter")},Ge=function(t,e){var i=e.t,n=e.p,s=e.color;(0,e.set)(i,n,s[0]<<16|s[1]<<8|s[2])},Ke=function(t,e){var i=e.g;i&&(i.dirty++,i.clearDirty++)},qe=function(t,e){e.t.visible=!!e.t.alpha},Je=function(t,e,i,n){var s=t[e],r=me(Le(s)?t[e.indexOf("set")||!Le(t["get"+e.substr(3)])?e:"get"+e.substr(3)]():s),o=me(i);n._pt=new xe(n._pt,t,e,0,0,Ge,{t:t,p:e,color:r,set:be(t,e)}),n.add(r,0,r[0],o[0]),n.add(r,1,r[1],o[1]),n.add(r,2,r[2],o[2])},Ze={tint:1,lineColor:1,fillColor:1},Qe="position,scale,skew,pivot,anchor,tilePosition,tileScale".split(","),$e={x:"position",y:"position",tileX:"tilePosition",tileY:"tilePosition"},ti={colorMatrixFilter:1,saturation:1,contrast:1,hue:1,colorize:1,colorizeAmount:1,brightness:1,combineCMF:1},ei=Math.PI/180,ii=function(t){return"string"==typeof t},ni=function(t){return ii(t)&&"="===t.charAt(1)?t.substr(0,2)+parseFloat(t.substr(2))*ei:t*ei},si=function(t,e){return e.set(e.t,e.p,1===t?e.e:Math.round(1e5*(e.s+e.c*t))/1e5,e)},ri=function(t,e,i,n,s,r){var o,a,h=360*(r?ei:1),l=ii(s),u=l&&"="===s.charAt(1)?+(s.charAt(0)+"1"):0,c=parseFloat(u?s.substr(2):s)*(r?ei:1),d=u?c*u:c-n,_=n+d;return l&&("short"===(o=s.split("_")[1])&&(d%=h)!==d%(h/2)&&(d+=d<0?h:-h),"cw"===o&&d<0?d=(d+1e10*h)%h-~~(d/h)*h:"ccw"===o&&d>0&&(d=(d-1e10*h)%h-~~(d/h)*h)),t._pt=a=new xe(t._pt,e,i,n,d,si),a.e=_,a},oi=function(){Ce()&&(ye=window,ge=Me(),ke=ke||ye.PIXI,we=ke&&ke.VERSION&&"4"===ke.VERSION.charAt(0),me=function(t){return ge.utils.splitColor("0x"===(t+"").substr(0,2)?"#"+t.substr(2):t)})};for(Se=0;Se<Qe.length;Se++)Te=Qe[Se],$e[Te+"X"]=Te,$e[Te+"Y"]=Te;var ai={version:"3.11.4",name:"pixi",register:function(t,e,i){ge=t,xe=i,be=e.getSetter,oi()},registerPIXI:function(t){ke=t},init:function(t,e,i,n,s){if(ke||oi(),!(ke&&t instanceof ke.DisplayObject))return console.warn(t,"is not a DisplayObject or PIXI was not found. PixiPlugin.registerPIXI(PIXI);"),!1;var r,o,a,h,l,u,c,d,_;for(u in e){if(r=$e[u],a=e[u],r)o=~u.charAt(u.length-1).toLowerCase().indexOf("x")?"x":"y",this.add(t[r],o,t[r][o],"skew"===r?ni(a):a,0,0,0,0,0,1);else if("scale"===u||"anchor"===u||"pivot"===u||"tileScale"===u)this.add(t[u],"x",t[u].x,a),this.add(t[u],"y",t[u].y,a);else if("rotation"===u||"angle"===u)ri(this,t,u,t[u],a,"rotation"===u);else if(ti[u])h||(je(t,e.colorMatrixFilter||e,this),h=!0);else if("blur"===u||"blurX"===u||"blurY"===u||"blurPadding"===u){if(l=ze(t,"BlurFilter"),this.add(l,u,l[u],a),0!==e.blurPadding)for(c=e.blurPadding||2*Math.max(l[u],a),d=t.filters.length;--d>-1;)t.filters[d].padding=Math.max(t.filters[d].padding,c)}else if(Ze[u])if(("lineColor"===u||"fillColor"===u)&&t instanceof ke.Graphics)for(_=(t.geometry||t).graphicsData,this._pt=new xe(this._pt,t,u,0,0,Ke,{g:t.geometry||t}),d=_.length;--d>-1;)Je(we?_[d]:_[d][u.substr(0,4)+"Style"],we?u:"color",a,this);else Je(t,u,a,this);else"autoAlpha"===u?(this._pt=new xe(this._pt,t,"visible",0,0,qe),this.add(t,"alpha",t.alpha,a),this._props.push("alpha","visible")):"resolution"!==u&&this.add(t,u,"get",a);this._props.push(u)}}};Me()&&ge.registerPlugin(ai);
/*!
             * paths 3.11.4
             * https://greensock.com
             *
             * Copyright 2008-2022, GreenSock. All rights reserved.
             * Subject to the terms at https://greensock.com/standard-license or for
             * Club GreenSock members, the agreement issued with that membership.
             * @author: Jack Doyle, jack@greensock.com
            */
var hi=/[achlmqstvz]|(-?\d*\.?\d*(?:e[\-+]?\d+)?)[0-9]/gi,li=/(?:(-)?\d*\.?\d*(?:e[\-+]?\d+)?)[0-9]/gi,ui=/[\+\-]?\d*\.?\d+e[\+\-]?\d+/gi,ci=/(^[#\.][a-z]|[a-y][a-z])/i,di=Math.PI/180,_i=180/Math.PI,pi=Math.sin,fi=Math.cos,vi=Math.abs,gi=Math.sqrt,yi=Math.atan2,mi=1e8,ki=function(t){return"string"==typeof t},xi=function(t){return"number"==typeof t},bi={},wi={},Si=1e5,Ti=function(t){return Math.round((t+mi)%1*Si)/Si||(t<0?0:1)},Oi=function(t){return Math.round(t*Si)/Si||0},Ei=function(t){return Math.round(1e10*t)/1e10||0},Ai=function(t,e,i,n){var s=t[e],r=1===n?6:Xi(s,i,n);if(r&&r+i+2<s.length)return t.splice(e,0,s.slice(0,i+r+2)),s.splice(0,i+r),1},Di=function(t,e,i){var n=t.length,s=~~(i*n);if(t[s]>e){for(;--s&&t[s]>e;);s<0&&(s=0)}else for(;t[++s]<e&&s<n;);return s<n?s:n-1},Ci=function(t,e){return e.totalLength=t.totalLength,t.samples?(e.samples=t.samples.slice(0),e.lookup=t.lookup.slice(0),e.minLength=t.minLength,e.resolution=t.resolution):t.totalPoints&&(e.totalPoints=t.totalPoints),e},Mi=function(t,e){var i=t.length,n=t[i-1]||[],s=n.length;i&&e[0]===n[s-2]&&e[1]===n[s-1]&&(e=n.concat(e.slice(2)),i--),t[i]=e};function Li(t){var e,i=(t=ki(t)&&ci.test(t)&&document.querySelector(t)||t).getAttribute?t:0;return i&&(t=t.getAttribute("d"))?(i._gsPath||(i._gsPath={}),(e=i._gsPath[t])&&!e._dirty?e:i._gsPath[t]=Wi(t)):t?ki(t)?Wi(t):xi(t[0])?[t]:t:console.warn("Expecting a <path> element or an SVG path data string")}function Pi(t){var e,i=0;for(t.reverse();i<t.length;i+=2)e=t[i],t[i]=t[i+1],t[i+1]=e;t.reversed=!t.reversed}var Ui={rect:"rx,ry,x,y,width,height",circle:"r,cx,cy",ellipse:"rx,ry,cx,cy",line:"x1,x2,y1,y2"};function Ni(t,e){var i,n,s,r,o,a,h,l,u,c,d,_,p,f,v,g,y,m,k,x,b,w,S=t.tagName.toLowerCase(),T=.552284749831;return"path"!==S&&t.getBBox?(a=function(t,e){var i,n=document.createElementNS("http://www.w3.org/2000/svg","path"),s=[].slice.call(t.attributes),r=s.length;for(e=","+e+",";--r>-1;)i=s[r].nodeName.toLowerCase(),e.indexOf(","+i+",")<0&&n.setAttributeNS(null,i,s[r].nodeValue);return n}(t,"x,y,width,height,cx,cy,rx,ry,r,x1,x2,y1,y2,points"),w=function(t,e){for(var i=e?e.split(","):[],n={},s=i.length;--s>-1;)n[i[s]]=+t.getAttribute(i[s])||0;return n}(t,Ui[S]),"rect"===S?(r=w.rx,o=w.ry||r,n=w.x,s=w.y,c=w.width-2*r,d=w.height-2*o,i=r||o?"M"+(g=(f=(p=n+r)+c)+r)+","+(m=s+o)+" V"+(k=m+d)+" C"+[g,x=k+o*T,v=f+r*T,b=k+o,f,b,f-(f-p)/3,b,p+(f-p)/3,b,p,b,_=n+r*(1-T),b,n,x,n,k,n,k-(k-m)/3,n,m+(k-m)/3,n,m,n,y=s+o*(1-T),_,s,p,s,p+(f-p)/3,s,f-(f-p)/3,s,f,s,v,s,g,y,g,m].join(",")+"z":"M"+(n+c)+","+s+" v"+d+" h"+-c+" v"+-d+" h"+c+"z"):"circle"===S||"ellipse"===S?("circle"===S?l=(r=o=w.r)*T:(r=w.rx,l=(o=w.ry)*T),i="M"+((n=w.cx)+r)+","+(s=w.cy)+" C"+[n+r,s+l,n+(h=r*T),s+o,n,s+o,n-h,s+o,n-r,s+l,n-r,s,n-r,s-l,n-h,s-o,n,s-o,n+h,s-o,n+r,s-l,n+r,s].join(",")+"z"):"line"===S?i="M"+w.x1+","+w.y1+" L"+w.x2+","+w.y2:"polyline"!==S&&"polygon"!==S||(i="M"+(n=(u=(t.getAttribute("points")+"").match(li)||[]).shift())+","+(s=u.shift())+" L"+u.join(","),"polygon"===S&&(i+=","+n+","+s+"z")),a.setAttribute("d",Ki(a._gsRawPath=Wi(i))),e&&t.parentNode&&(t.parentNode.insertBefore(a,t),t.parentNode.removeChild(t)),a):t}function Ii(t,e,i){var n,s=t[e],r=t[e+2],o=t[e+4];return s+=(r-s)*i,s+=((r+=(o-r)*i)-s)*i,n=r+(o+(t[e+6]-o)*i-r)*i-s,s=t[e+1],s+=((r=t[e+3])-s)*i,s+=((r+=((o=t[e+5])-r)*i)-s)*i,Oi(yi(r+(o+(t[e+7]-o)*i-r)*i-s,n)*_i)}function Ri(t,e,i){i=void 0===i?1:Ei(i)||0,e=Ei(e)||0;var n=Math.max(0,~~(vi(i-e)-1e-8)),s=function(t){for(var e=[],i=0;i<t.length;i++)e[i]=Ci(t[i],t[i].slice(0));return Ci(t,e)}(t);if(e>i&&(e=1-e,i=1-i,function(t,e){var i=t.length;for(e||t.reverse();i--;)t[i].reversed||Pi(t[i])}(s),s.totalLength=0),e<0||i<0){var r=Math.abs(~~Math.min(e,i))+1;e+=r,i+=r}s.totalLength||Yi(s);var o,a,h,l,u,c,d,_,p=i>1,f=Bi(s,e,bi,!0),v=Bi(s,i,wi),g=v.segment,y=f.segment,m=v.segIndex,k=f.segIndex,x=v.i,b=f.i,w=k===m,S=x===b&&w;if(p||n){for(o=m<k||w&&x<b||S&&v.t<f.t,Ai(s,k,b,f.t)&&(k++,o||(m++,S?(v.t=(v.t-f.t)/(1-f.t),x=0):w&&(x-=b))),Math.abs(1-(i-e))<1e-5?m=k-1:!v.t&&m?m--:Ai(s,m,x,v.t)&&o&&k++,1===f.t&&(k=(k+1)%s.length),u=[],d=1+(c=s.length)*n,_=k,d+=(c-k+m)%c,l=0;l<d;l++)Mi(u,s[_++%c]);s=u}else if(h=1===v.t?6:Xi(g,x,v.t),e!==i)for(a=Xi(y,b,S?f.t/v.t:f.t),w&&(h+=a),g.splice(x+h+2),(a||b)&&y.splice(0,b+a),l=s.length;l--;)(l<k||l>m)&&s.splice(l,1);else g.angle=Ii(g,x+h,0),f=g[x+=h],v=g[x+1],g.length=g.totalLength=0,g.totalPoints=s.totalPoints=8,g.push(f,v,f,v,f,v,f,v);return s.totalLength=0,s}function Fi(t,e,i){e=e||0,t.samples||(t.samples=[],t.lookup=[]);var n,s,r,o,a,h,l,u,c,d,_,p,f,v,g,y,m,k=~~t.resolution||12,x=1/k,b=i?e+6*i+1:t.length,w=t[e],S=t[e+1],T=e?e/6*k:0,O=t.samples,E=t.lookup,A=(e?t.minLength:mi)||mi,D=O[T+i*k-1],C=e?O[T-1]:0;for(O.length=E.length=0,s=e+2;s<b;s+=6){if(r=t[s+4]-w,o=t[s+2]-w,a=t[s]-w,u=t[s+5]-S,c=t[s+3]-S,d=t[s+1]-S,h=l=_=p=0,vi(r)<.01&&vi(u)<.01&&vi(a)+vi(d)<.01)t.length>8&&(t.splice(s,6),s-=6,b-=6);else for(n=1;n<=k;n++)h=l-(l=((v=x*n)*v*r+3*(f=1-v)*(v*o+f*a))*v),_=p-(p=(v*v*u+3*f*(v*c+f*d))*v),(y=gi(_*_+h*h))<A&&(A=y),C+=y,O[T++]=C;w+=r,S+=u}if(D)for(D-=C;T<O.length;T++)O[T]+=D;if(O.length&&A){if(t.totalLength=m=O[O.length-1]||0,t.minLength=A,m/A<9999)for(y=g=0,n=0;n<m;n+=A)E[y++]=O[g]<n?++g:g}else t.totalLength=O[0]=0;return e?C-O[e/2-1]:C}function Yi(t,e){var i,n,s;for(s=i=n=0;s<t.length;s++)t[s].resolution=~~e||12,n+=t[s].length,i+=Fi(t[s]);return t.totalPoints=n,t.totalLength=i,t}function Xi(t,e,i){if(i<=0||i>=1)return 0;var n=t[e],s=t[e+1],r=t[e+2],o=t[e+3],a=t[e+4],h=t[e+5],l=n+(r-n)*i,u=r+(a-r)*i,c=s+(o-s)*i,d=o+(h-o)*i,_=l+(u-l)*i,p=c+(d-c)*i,f=a+(t[e+6]-a)*i,v=h+(t[e+7]-h)*i;return u+=(f-u)*i,d+=(v-d)*i,t.splice(e+2,4,Oi(l),Oi(c),Oi(_),Oi(p),Oi(_+(u-_)*i),Oi(p+(d-p)*i),Oi(u),Oi(d),Oi(f),Oi(v)),t.samples&&t.samples.splice(e/6*t.resolution|0,0,0,0,0,0,0,0),6}function Bi(t,e,i,n){i=i||{},t.totalLength||Yi(t),(e<0||e>1)&&(e=Ti(e));var s,r,o,a,h,l,u,c=0,d=t[0];if(e)if(1===e)u=1,l=(d=t[c=t.length-1]).length-8;else{if(t.length>1){for(o=t.totalLength*e,h=l=0;(h+=t[l++].totalLength)<o;)c=l;e=(o-(a=h-(d=t[c]).totalLength))/(h-a)||0}s=d.samples,r=d.resolution,o=d.totalLength*e,a=(l=d.lookup.length?d.lookup[~~(o/d.minLength)]||0:Di(s,o,e))?s[l-1]:0,(h=s[l])<o&&(a=h,h=s[++l]),u=1/r*((o-a)/(h-a)+l%r),l=6*~~(l/r),n&&1===u&&(l+6<d.length?(l+=6,u=0):c+1<t.length&&(l=u=0,d=t[++c]))}else u=l=c=0,d=t[0];return i.t=u,i.i=l,i.path=t,i.segment=d,i.segIndex=c,i}function zi(t,e,i,n){var s,r,o,a,h,l,u,c,d,_=t[0],p=n||{};if((e<0||e>1)&&(e=Ti(e)),t.length>1){for(o=t.totalLength*e,h=l=0;(h+=t[l++].totalLength)<o;)_=t[l];e=(o-(a=h-_.totalLength))/(h-a)||0}return s=_.samples,r=_.resolution,o=_.totalLength*e,a=(l=_.lookup.length?_.lookup[e<1?~~(o/_.minLength):_.lookup.length-1]||0:Di(s,o,e))?s[l-1]:0,(h=s[l])<o&&(a=h,h=s[++l]),d=1-(u=1/r*((o-a)/(h-a)+l%r)||0),c=_[l=6*~~(l/r)],p.x=Oi((u*u*(_[l+6]-c)+3*d*(u*(_[l+4]-c)+d*(_[l+2]-c)))*u+c),p.y=Oi((u*u*(_[l+7]-(c=_[l+1]))+3*d*(u*(_[l+5]-c)+d*(_[l+3]-c)))*u+c),i&&(p.angle=_.totalLength?Ii(_,l,u>=1?1-1e-9:u||1e-9):_.angle||0),p}function Vi(t,e,i,n,s,r,o){for(var a,h,l,u,c,d=t.length;--d>-1;)for(h=(a=t[d]).length,l=0;l<h;l+=2)u=a[l],c=a[l+1],a[l]=u*e+c*n+r,a[l+1]=u*i+c*s+o;return t._dirty=1,t}function Hi(t,e,i,n,s,r,o,a,h){if(t!==a||e!==h){i=vi(i),n=vi(n);var l=s%360*di,u=fi(l),c=pi(l),d=Math.PI,_=2*d,p=(t-a)/2,f=(e-h)/2,v=u*p+c*f,g=-c*p+u*f,y=v*v,m=g*g,k=y/(i*i)+m/(n*n);k>1&&(i=gi(k)*i,n=gi(k)*n);var x=i*i,b=n*n,w=(x*b-x*m-b*y)/(x*m+b*y);w<0&&(w=0);var S=(r===o?-1:1)*gi(w),T=S*(i*g/n),O=S*(-n*v/i),E=(t+a)/2+(u*T-c*O),A=(e+h)/2+(c*T+u*O),D=(v-T)/i,C=(g-O)/n,M=(-v-T)/i,L=(-g-O)/n,P=D*D+C*C,U=(C<0?-1:1)*Math.acos(D/gi(P)),N=(D*L-C*M<0?-1:1)*Math.acos((D*M+C*L)/gi(P*(M*M+L*L)));isNaN(N)&&(N=d),!o&&N>0?N-=_:o&&N<0&&(N+=_),U%=_,N%=_;var I,R=Math.ceil(vi(N)/(_/4)),F=[],Y=N/R,X=4/3*pi(Y/2)/(1+fi(Y/2)),B=u*i,z=c*i,V=c*-n,H=u*n;for(I=0;I<R;I++)v=fi(s=U+I*Y),g=pi(s),D=fi(s+=Y),C=pi(s),F.push(v-X*g,g+X*v,D+X*C,C-X*D,D,C);for(I=0;I<F.length;I+=2)v=F[I],g=F[I+1],F[I]=v*B+g*V+E,F[I+1]=v*z+g*H+A;return F[I-2]=a,F[I-1]=h,F}}function Wi(t){var e,i,n,s,r,o,a,h,l,u,c,d,_,p,f,v=(t+"").replace(ui,(function(t){var e=+t;return e<1e-4&&e>-1e-4?0:e})).match(hi)||[],g=[],y=0,m=0,k=2/3,x=v.length,b=0,w="ERROR: malformed path: "+t,S=function(t,e,i,n){u=(i-t)/3,c=(n-e)/3,a.push(t+u,e+c,i-u,n-c,i,n)};if(!t||!isNaN(v[0])||isNaN(v[1]))return console.log(w),g;for(e=0;e<x;e++)if(_=r,isNaN(v[e])?o=(r=v[e].toUpperCase())!==v[e]:e--,n=+v[e+1],s=+v[e+2],o&&(n+=y,s+=m),e||(h=n,l=s),"M"===r)a&&(a.length<8?g.length-=1:b+=a.length),y=h=n,m=l=s,a=[n,s],g.push(a),e+=2,r="L";else if("C"===r)a||(a=[0,0]),o||(y=m=0),a.push(n,s,y+1*v[e+3],m+1*v[e+4],y+=1*v[e+5],m+=1*v[e+6]),e+=6;else if("S"===r)u=y,c=m,"C"!==_&&"S"!==_||(u+=y-a[a.length-4],c+=m-a[a.length-3]),o||(y=m=0),a.push(u,c,n,s,y+=1*v[e+3],m+=1*v[e+4]),e+=4;else if("Q"===r)u=y+(n-y)*k,c=m+(s-m)*k,o||(y=m=0),y+=1*v[e+3],m+=1*v[e+4],a.push(u,c,y+(n-y)*k,m+(s-m)*k,y,m),e+=4;else if("T"===r)u=y-a[a.length-4],c=m-a[a.length-3],a.push(y+u,m+c,n+(y+1.5*u-n)*k,s+(m+1.5*c-s)*k,y=n,m=s),e+=2;else if("H"===r)S(y,m,y=n,m),e+=1;else if("V"===r)S(y,m,y,m=n+(o?m-y:0)),e+=1;else if("L"===r||"Z"===r)"Z"===r&&(n=h,s=l,a.closed=!0),("L"===r||vi(y-n)>.5||vi(m-s)>.5)&&(S(y,m,n,s),"L"===r&&(e+=2)),y=n,m=s;else if("A"===r){if(p=v[e+4],f=v[e+5],u=v[e+6],c=v[e+7],i=7,p.length>1&&(p.length<3?(c=u,u=f,i--):(c=f,u=p.substr(2),i-=2),f=p.charAt(1),p=p.charAt(0)),d=Hi(y,m,+v[e+1],+v[e+2],+v[e+3],+p,+f,(o?y:0)+1*u,(o?m:0)+1*c),e+=i,d)for(i=0;i<d.length;i++)a.push(d[i]);y=a[a.length-2],m=a[a.length-1]}else console.log(w);return(e=a.length)<6?(g.pop(),e=0):a[0]===a[e-2]&&a[1]===a[e-1]&&(a.closed=!0),g.totalPoints=b+e,g}function ji(t,e){void 0===e&&(e=1);for(var i=t[0],n=0,s=[i,n],r=2;r<t.length;r+=2)s.push(i,n,t[r],n=(t[r]-i)*e/2,i=t[r],-n);return s}function Gi(t,e){vi(t[0]-t[2])<1e-4&&vi(t[1]-t[3])<1e-4&&(t=t.slice(2));var i,n,s,r,o,a,h,l,u,c,d,_,p,f,v=t.length-2,g=+t[0],y=+t[1],m=+t[2],k=+t[3],x=[g,y,g,y],b=m-g,w=k-y,S=Math.abs(t[v]-g)<.001&&Math.abs(t[v+1]-y)<.001;for(S&&(t.push(m,k),m=g,k=y,g=t[v-2],y=t[v-1],t.unshift(g,y),v+=4),e=e||0===e?+e:1,s=2;s<v;s+=2)i=g,n=y,g=m,y=k,m=+t[s+2],k=+t[s+3],g===m&&y===k||(r=b,o=w,b=m-g,w=k-y,l=((a=gi(r*r+o*o))+(h=gi(b*b+w*w)))*e*.25/gi(Math.pow(b/h+r/a,2)+Math.pow(w/h+o/a,2)),d=g-((u=g-(g-i)*(a?l/a:0))+(((c=g+(m-g)*(h?l/h:0))-u)*(3*a/(a+h)+.5)/4||0)),f=y-((_=y-(y-n)*(a?l/a:0))+(((p=y+(k-y)*(h?l/h:0))-_)*(3*a/(a+h)+.5)/4||0)),g===i&&y===n||x.push(Oi(u+d),Oi(_+f),Oi(g),Oi(y),Oi(c+d),Oi(p+f)));return g!==m||y!==k||x.length<4?x.push(Oi(m),Oi(k),Oi(m),Oi(k)):x.length-=2,2===x.length?x.push(g,y,g,y,g,y):S&&(x.splice(0,6),x.length=x.length-6),x}function Ki(t){xi(t[0])&&(t=[t]);var e,i,n,s,r="",o=t.length;for(i=0;i<o;i++){for(s=t[i],r+="M"+Oi(s[0])+","+Oi(s[1])+" C",e=s.length,n=2;n<e;n++)r+=Oi(s[n++])+","+Oi(s[n++])+" "+Oi(s[n++])+","+Oi(s[n++])+" "+Oi(s[n++])+","+Oi(s[n])+" ";s.closed&&(r+="z")}return r}
/*!
             * matrix 3.11.4
             * https://greensock.com
             *
             * Copyright 2008-2022, GreenSock. All rights reserved.
             * Subject to the terms at https://greensock.com/standard-license or for
             * Club GreenSock members, the agreement issued with that membership.
             * @author: Jack Doyle, jack@greensock.com
            */var qi,Ji,Zi,Qi,$i,tn,en,nn,sn,rn="transform",on=rn+"Origin",an=function(t){var e=t.ownerDocument||t;!(rn in t.style)&&"msTransform"in t.style&&(on=(rn="msTransform")+"Origin");for(;e.parentNode&&(e=e.parentNode););if(Ji=window,en=new fn,e){qi=e,Zi=e.documentElement,Qi=e.body,(nn=qi.createElementNS("http://www.w3.org/2000/svg","g")).style.transform="none";var i=e.createElement("div"),n=e.createElement("div");Qi.appendChild(i),i.appendChild(n),i.style.position="static",i.style[rn]="translate3d(0,0,1px)",sn=n.offsetParent!==i,Qi.removeChild(i)}return e},hn=[],ln=[],un=function(t){return t.ownerSVGElement||("svg"===(t.tagName+"").toLowerCase()?t:null)},cn=function t(e){return"fixed"===Ji.getComputedStyle(e).position||((e=e.parentNode)&&1===e.nodeType?t(e):void 0)},dn=function t(e,i){if(e.parentNode&&(qi||an(e))){var n=un(e),s=n?n.getAttribute("xmlns")||"http://www.w3.org/2000/svg":"http://www.w3.org/1999/xhtml",r=n?i?"rect":"g":"div",o=2!==i?0:100,a=3===i?100:0,h="position:absolute;display:block;pointer-events:none;margin:0;padding:0;",l=qi.createElementNS?qi.createElementNS(s.replace(/^https/,"http"),r):qi.createElement(r);return i&&(n?(tn||(tn=t(e)),l.setAttribute("width",.01),l.setAttribute("height",.01),l.setAttribute("transform","translate("+o+","+a+")"),tn.appendChild(l)):($i||(($i=t(e)).style.cssText=h),l.style.cssText=h+"width:0.1px;height:0.1px;top:"+a+"px;left:"+o+"px",$i.appendChild(l))),l}throw"Need document and parent."},_n=function(t,e){var i,n,s,r,o,a,h=un(t),l=t===h,u=h?hn:ln,c=t.parentNode;if(t===Ji)return t;if(u.length||u.push(dn(t,1),dn(t,2),dn(t,3)),i=h?tn:$i,h)l?(s=function(t){var e,i=t.getCTM();return i||(e=t.style[rn],t.style[rn]="none",t.appendChild(nn),i=nn.getCTM(),t.removeChild(nn),e?t.style[rn]=e:t.style.removeProperty(rn.replace(/([A-Z])/g,"-$1").toLowerCase())),i||en.clone()}(t),r=-s.e/s.a,o=-s.f/s.d,n=en):t.getBBox?(s=t.getBBox(),n=(n=t.transform?t.transform.baseVal:{}).numberOfItems?n.numberOfItems>1?function(t){for(var e=new fn,i=0;i<t.numberOfItems;i++)e.multiply(t.getItem(i).matrix);return e}(n):n.getItem(0).matrix:en,r=n.a*s.x+n.c*s.y,o=n.b*s.x+n.d*s.y):(n=new fn,r=o=0),e&&"g"===t.tagName.toLowerCase()&&(r=o=0),(l?h:c).appendChild(i),i.setAttribute("transform","matrix("+n.a+","+n.b+","+n.c+","+n.d+","+(n.e+r)+","+(n.f+o)+")");else{if(r=o=0,sn)for(n=t.offsetParent,s=t;s&&(s=s.parentNode)&&s!==n&&s.parentNode;)(Ji.getComputedStyle(s)[rn]+"").length>4&&(r=s.offsetLeft,o=s.offsetTop,s=0);if("absolute"!==(a=Ji.getComputedStyle(t)).position&&"fixed"!==a.position)for(n=t.offsetParent;c&&c!==n;)r+=c.scrollLeft||0,o+=c.scrollTop||0,c=c.parentNode;(s=i.style).top=t.offsetTop-o+"px",s.left=t.offsetLeft-r+"px",s[rn]=a[rn],s[on]=a[on],s.position="fixed"===a.position?"fixed":"absolute",t.parentNode.appendChild(i)}return i},pn=function(t,e,i,n,s,r,o){return t.a=e,t.b=i,t.c=n,t.d=s,t.e=r,t.f=o,t},fn=function(){function t(t,e,i,n,s,r){void 0===t&&(t=1),void 0===e&&(e=0),void 0===i&&(i=0),void 0===n&&(n=1),void 0===s&&(s=0),void 0===r&&(r=0),pn(this,t,e,i,n,s,r)}var e=t.prototype;return e.inverse=function(){var t=this.a,e=this.b,i=this.c,n=this.d,s=this.e,r=this.f,o=t*n-e*i||1e-10;return pn(this,n/o,-e/o,-i/o,t/o,(i*r-n*s)/o,-(t*r-e*s)/o)},e.multiply=function(t){var e=this.a,i=this.b,n=this.c,s=this.d,r=this.e,o=this.f,a=t.a,h=t.c,l=t.b,u=t.d,c=t.e,d=t.f;return pn(this,a*e+l*n,a*i+l*s,h*e+u*n,h*i+u*s,r+c*e+d*n,o+c*i+d*s)},e.clone=function(){return new t(this.a,this.b,this.c,this.d,this.e,this.f)},e.equals=function(t){var e=this.a,i=this.b,n=this.c,s=this.d,r=this.e,o=this.f;return e===t.a&&i===t.b&&n===t.c&&s===t.d&&r===t.e&&o===t.f},e.apply=function(t,e){void 0===e&&(e={});var i=t.x,n=t.y,s=this.a,r=this.b,o=this.c,a=this.d,h=this.e,l=this.f;return e.x=i*s+n*o+h||0,e.y=i*r+n*a+l||0,e},t}();function vn(t,e,i,n){if(!t||!t.parentNode||(qi||an(t)).documentElement===t)return new fn;var s=function(t){for(var e,i;t&&t!==Qi;)(i=t._gsap)&&i.uncache&&i.get(t,"x"),i&&!i.scaleX&&!i.scaleY&&i.renderTransform&&(i.scaleX=i.scaleY=1e-4,i.renderTransform(1,i),e?e.push(i):e=[i]),t=t.parentNode;return e}(t),r=un(t)?hn:ln,o=_n(t,i),a=r[0].getBoundingClientRect(),h=r[1].getBoundingClientRect(),l=r[2].getBoundingClientRect(),u=o.parentNode,c=!n&&cn(t),d=new fn((h.left-a.left)/100,(h.top-a.top)/100,(l.left-a.left)/100,(l.top-a.top)/100,a.left+(c?0:Ji.pageXOffset||qi.scrollLeft||Zi.scrollLeft||Qi.scrollLeft||0),a.top+(c?0:Ji.pageYOffset||qi.scrollTop||Zi.scrollTop||Qi.scrollTop||0));if(u.removeChild(o),s)for(a=s.length;a--;)(h=s[a]).scaleX=h.scaleY=0,h.renderTransform(1,h);return e?d.inverse():d}
/*!
             * MotionPathPlugin 3.11.4
             * https://greensock.com
             *
             * @license Copyright 2008-2022, GreenSock. All rights reserved.
             * Subject to the terms at https://greensock.com/standard-license or for
             * Club GreenSock members, the agreement issued with that membership.
             * @author: Jack Doyle, jack@greensock.com
            */var gn,yn,mn,kn,xn,bn,wn="x,translateX,left,marginLeft,xPercent".split(","),Sn="y,translateY,top,marginTop,yPercent".split(","),Tn=Math.PI/180,On=function(t,e,i,n){for(var s=e.length,r=2===n?0:n,o=0;o<s;o++)t[r]=parseFloat(e[o][i]),2===n&&(t[r+1]=0),r+=2;return t},En=function(t,e,i){return parseFloat(t._gsap.get(t,e,i||"px"))||0},An=function(t){var e,i=t[0],n=t[1];for(e=2;e<t.length;e+=2)i=t[e]+=i,n=t[e+1]+=n},Dn=function(t,e,i,n,s,r,o,a,h){"cubic"===o.type?e=[e]:(!1!==o.fromCurrent&&e.unshift(En(i,n,a),s?En(i,s,h):0),o.relative&&An(e),e=[(s?Gi:ji)(e,o.curviness)]);return e=r(Un(e,i,o)),Nn(t,i,n,e,"x",a),s&&Nn(t,i,s,e,"y",h),Yi(e,o.resolution||(0===o.curviness?20:12))},Cn=function(t){return t},Mn=/[-+\.]*\d+\.?(?:e-|e\+)?\d*/g,Ln=function(t,e,i){var n,s=vn(t),r=0,o=0;return"svg"===(t.tagName+"").toLowerCase()?(n=t.viewBox.baseVal).width||(n={width:+t.getAttribute("width"),height:+t.getAttribute("height")}):n=e&&t.getBBox&&t.getBBox(),e&&"auto"!==e&&(r=e.push?e[0]*(n?n.width:t.offsetWidth||0):e.x,o=e.push?e[1]*(n?n.height:t.offsetHeight||0):e.y),i.apply(r||o?s.apply({x:r,y:o}):{x:s.e,y:s.f})},Pn=function(t,e,i,n){var s,r=vn(t.parentNode,!0,!0),o=r.clone().multiply(vn(e)),a=Ln(t,i,r),h=Ln(e,n,r),l=h.x,u=h.y;return o.e=o.f=0,"auto"===n&&e.getTotalLength&&"path"===e.tagName.toLowerCase()&&(s=e.getAttribute("d").match(Mn)||[],l+=(s=o.apply({x:+s[0],y:+s[1]})).x,u+=s.y),s&&(l-=(s=o.apply(e.getBBox())).x,u-=s.y),o.e=l-a.x,o.f=u-a.y,o},Un=function(t,e,i){var n,s,r,o=i.align,a=i.matrix,h=i.offsetX,l=i.offsetY,u=i.alignOrigin,c=t[0][0],d=t[0][1],_=En(e,"x"),p=En(e,"y");return t&&t.length?(o&&("self"===o||(n=kn(o)[0]||e)===e?Vi(t,1,0,0,1,_-c,p-d):(u&&!1!==u[2]?gn.set(e,{transformOrigin:100*u[0]+"% "+100*u[1]+"%"}):u=[En(e,"xPercent")/-100,En(e,"yPercent")/-100],r=(s=Pn(e,n,u,"auto")).apply({x:c,y:d}),Vi(t,s.a,s.b,s.c,s.d,_+s.e-(r.x-s.e),p+s.f-(r.y-s.f)))),a?Vi(t,a.a,a.b,a.c,a.d,a.e,a.f):(h||l)&&Vi(t,1,0,0,1,h||0,l||0),t):Li("M0,0L0,0")},Nn=function(t,e,i,n,s,r){var o=e._gsap,a=o.harness,h=a&&a.aliases&&a.aliases[i],l=h&&h.indexOf(",")<0?h:i,u=t._pt=new yn(t._pt,e,l,0,0,Cn,0,o.set(e,l,t));u.u=mn(o.get(e,l,r))||0,u.path=n,u.pp=s,t._props.push(l)},In={version:"3.11.4",name:"motionPath",register:function(t,e,i){mn=(gn=t).utils.getUnit,kn=gn.utils.toArray,xn=gn.core.getStyleSaver,bn=gn.core.reverting||function(){},yn=i},init:function(t,e,i){if(!gn)return console.warn("Please gsap.registerPlugin(MotionPathPlugin)"),!1;"object"==typeof e&&!e.style&&e.path||(e={path:e});var n,s,r,o,a=[],h=e,l=h.path,u=h.autoRotate,c=h.unitX,d=h.unitY,_=h.x,p=h.y,f=l[0],v=(r=e.start,o="end"in e?e.end:1,function(t){return r||1!==o?Ri(t,r,o):t});if(this.rawPaths=a,this.target=t,this.tween=i,this.styles=xn&&xn(t,"transform"),(this.rotate=u||0===u)&&(this.rOffset=parseFloat(u)||0,this.radians=!!e.useRadians,this.rProp=e.rotation||"rotation",this.rSet=t._gsap.set(t,this.rProp,this),this.ru=mn(t._gsap.get(t,this.rProp))||0),Array.isArray(l)&&!("closed"in l)&&"number"!=typeof f){for(s in f)!_&&~wn.indexOf(s)?_=s:!p&&~Sn.indexOf(s)&&(p=s);for(s in _&&p?a.push(Dn(this,On(On([],l,_,0),l,p,1),t,_,p,v,e,c||mn(l[0][_]),d||mn(l[0][p]))):_=p=0,f)s!==_&&s!==p&&a.push(Dn(this,On([],l,s,2),t,s,0,v,e,mn(l[0][s])))}else Yi(n=v(Un(Li(e.path),t,e)),e.resolution),a.push(n),Nn(this,t,e.x||"x",n,"x",e.unitX||"px"),Nn(this,t,e.y||"y",n,"y",e.unitY||"px")},render:function(t,e){var i=e.rawPaths,n=i.length,s=e._pt;if(e.tween._time||!bn()){for(t>1?t=1:t<0&&(t=0);n--;)zi(i[n],t,!n&&e.rotate,i[n]);for(;s;)s.set(s.t,s.p,s.path[s.pp]+s.u,s.d,t),s=s._next;e.rotate&&e.rSet(e.target,e.rProp,i[0].angle*(e.radians?Tn:1)+e.rOffset+e.ru,e,t)}else e.styles.revert()},getLength:function(t){return Yi(Li(t)).totalLength},sliceRawPath:Ri,getRawPath:Li,pointsToSegment:Gi,stringToRawPath:Wi,rawPathToString:Ki,transformRawPath:Vi,getGlobalMatrix:vn,getPositionOnPath:zi,cacheRawPathMeasurements:Yi,convertToPath:function(t,e){return kn(t).map((function(t){return Ni(t,!1!==e)}))},convertCoordinates:function(t,e,i){var n=vn(e,!0,!0).multiply(vn(t));return i?n.apply(i):n},getAlignMatrix:Pn,getRelativePosition:function(t,e,i,n){var s=Pn(t,e,i,n);return{x:s.e,y:s.f}},arrayToRawPath:function(t,e){var i=On(On([],t,(e=e||{}).x||"x",0),t,e.y||"y",1);return e.relative&&An(i),["cubic"===e.type?i:Gi(i,e.curviness)]}};(gn||"undefined"!=typeof window&&(gn=window.gsap)&&gn.registerPlugin&&gn)&&gn.registerPlugin(In);var Rn=function(t){d(i,PIXI.Container);var e=g(i);function i(t){var n;return l(this,i),(n=e.call(this))._input_style=Object.assign({position:"absolute",background:"none",border:"none",outline:"none",transformOrigin:"0 0",lineHeight:"1"},t.input),t.box?n._box_generator="function"==typeof t.box?t.box:new Fn(t.box):n._box_generator=null,n._input_style.hasOwnProperty("multiline")?(n._multiline=!!n._input_style.multiline,delete n._input_style.multiline):n._multiline=!1,n._box_cache={},n._previous={},n._dom_added=!1,n._dom_visible=!0,n._placeholder="",n._placeholderColor=11119017,n._selection=[0,0],n._restrict_value="",n._createDOMInput(),n.substituteText=!0,n._setState("DEFAULT"),n._addListeners(),n}return c(i,[{key:"substituteText",get:function(){return this._substituted},set:function(t){this._substituted!=t&&(this._substituted=t,t?(this._createSurrogate(),this._dom_visible=!1):(this._destroySurrogate(),this._dom_visible=!0),this.placeholder=this._placeholder,this._update())}},{key:"placeholder",get:function(){return this._placeholder},set:function(t){this._placeholder=t,this._substituted?(this._updateSurrogate(),this._dom_input.placeholder=""):this._dom_input.placeholder=t}},{key:"disabled",get:function(){return this._disabled},set:function(t){this._disabled=t,this._dom_input.disabled=t,this._setState(t?"DISABLED":"DEFAULT")}},{key:"maxLength",get:function(){return this._max_length},set:function(t){this._max_length=t,this._dom_input.setAttribute("maxlength",t)}},{key:"restrict",get:function(){return this._restrict_regex},set:function(t){t instanceof RegExp?("^"!==(t=t.toString().slice(1,-1)).charAt(0)&&(t="^"+t),"$"!==t.charAt(t.length-1)&&(t+="$"),t=new RegExp(t)):t=new RegExp("^["+t+"]*$"),this._restrict_regex=t}},{key:"text",get:function(){return this._dom_input.value},set:function(t){this._dom_input.value=t,this._substituted&&this._updateSurrogate()}},{key:"htmlInput",get:function(){return this._dom_input}},{key:"focus",value:function(){this._substituted&&!this.dom_visible&&this._setDOMInputVisible(!0),this._dom_input.focus()}},{key:"blur",value:function(){this._dom_input.blur()}},{key:"select",value:function(){this.focus(),this._dom_input.select()}},{key:"setInputStyle",value:function(t,e){this._input_style[t]=e,this._dom_input.style[t]=e,!this._substituted||"fontFamily"!==t&&"fontSize"!==t||this._updateFontMetrics(),this._last_renderer&&this._update()}},{key:"destroy",value:function(t){this._destroyBoxCache(),m(_(i.prototype),"destroy",this).call(this,t)}},{key:"_createDOMInput",value:function(){for(var t in this._multiline?(this._dom_input=document.createElement("textarea"),this._dom_input.style.resize="none"):(this._dom_input=document.createElement("input"),this._dom_input.type="text"),this._input_style)this._dom_input.style[t]=this._input_style[t]}},{key:"_addListeners",value:function(){this.on("added",this._onAdded.bind(this)),this.on("removed",this._onRemoved.bind(this)),this._dom_input.addEventListener("keydown",this._onInputKeyDown.bind(this)),this._dom_input.addEventListener("input",this._onInputInput.bind(this)),this._dom_input.addEventListener("keyup",this._onInputKeyUp.bind(this)),this._dom_input.addEventListener("focus",this._onFocused.bind(this)),this._dom_input.addEventListener("blur",this._onBlurred.bind(this))}},{key:"_onInputKeyDown",value:function(t){this._selection=[this._dom_input.selectionStart,this._dom_input.selectionEnd],this.emit("keydown",t.keyCode)}},{key:"_onInputInput",value:function(t){this._restrict_regex&&this._applyRestriction(),this._substituted&&this._updateSubstitution(),this.emit("input",this.text)}},{key:"_onInputKeyUp",value:function(t){this.emit("keyup",t.keyCode)}},{key:"_onFocused",value:function(){this._setState("FOCUSED"),this.emit("focus")}},{key:"_onBlurred",value:function(){this._setState("DEFAULT"),this.emit("blur")}},{key:"_onAdded",value:function(){document.body.appendChild(this._dom_input),this._dom_input.style.display="none",this._dom_added=!0}},{key:"_onRemoved",value:function(){document.body.removeChild(this._dom_input),this._dom_added=!1}},{key:"_setState",value:function(t){this.state=t,this._updateBox(),this._substituted&&this._updateSubstitution()}},{key:"renderWebGL",value:function(t){m(_(i.prototype),"renderWebGL",this).call(this,t),this._renderInternal(t)}},{key:"renderCanvas",value:function(t){m(_(i.prototype),"renderCanvas",this).call(this,t),this._renderInternal(t)}},{key:"render",value:function(t){m(_(i.prototype),"render",this).call(this,t),this._renderInternal(t)}},{key:"_renderInternal",value:function(t){this._resolution=t.resolution,this._last_renderer=t,this._canvas_bounds=this._getCanvasBounds(),this._needsUpdate()&&this._update()}},{key:"_update",value:function(){this._updateDOMInput(),this._substituted&&this._updateSurrogate(),this._updateBox()}},{key:"_updateBox",value:function(){this._box_generator&&(this._needsNewBoxCache()&&this._buildBoxCache(),this.state==this._previous.state&&this._box==this._box_cache[this.state]||(this._box&&this.removeChild(this._box),this._box=this._box_cache[this.state],this.addChildAt(this._box,0),this._previous.state=this.state))}},{key:"_updateSubstitution",value:function(){"FOCUSED"===this.state?(this._dom_visible=!0,this._surrogate.visible=0===this.text.length):(this._dom_visible=!1,this._surrogate.visible=!0),this._updateDOMInput(),this._updateSurrogate()}},{key:"_updateDOMInput",value:function(){this._canvas_bounds&&(this._dom_input.style.top=(this._canvas_bounds.top||0)+"px",this._dom_input.style.left=(this._canvas_bounds.left||0)+"px",this._dom_input.style.transform=this._pixiMatrixToCSS(this._getDOMRelativeWorldTransform()),this._dom_input.style.opacity=this.worldAlpha,this._setDOMInputVisible(this.worldVisible&&this._dom_visible),this._previous.canvas_bounds=this._canvas_bounds,this._previous.world_transform=this.worldTransform.clone(),this._previous.world_alpha=this.worldAlpha,this._previous.world_visible=this.worldVisible)}},{key:"_applyRestriction",value:function(){this._restrict_regex.test(this.text)?this._restrict_value=this.text:(this.text=this._restrict_value,this._dom_input.setSelectionRange(this._selection[0],this._selection[1]))}},{key:"_needsUpdate",value:function(){return!this._comparePixiMatrices(this.worldTransform,this._previous.world_transform)||!this._compareClientRects(this._canvas_bounds,this._previous.canvas_bounds)||this.worldAlpha!=this._previous.world_alpha||this.worldVisible!=this._previous.world_visible}},{key:"_needsNewBoxCache",value:function(){var t=this._getDOMInputBounds();return!this._previous.input_bounds||t.width!=this._previous.input_bounds.width||t.height!=this._previous.input_bounds.height}},{key:"_createSurrogate",value:function(){this._surrogate_hitbox=new PIXI.Graphics,this._surrogate_hitbox.alpha=0,this._surrogate_hitbox.interactive=!0,this._surrogate_hitbox.cursor="text",this._surrogate_hitbox.on("pointerdown",this._onSurrogateFocus.bind(this)),this.addChild(this._surrogate_hitbox),this._surrogate_mask=new PIXI.Graphics,this.addChild(this._surrogate_mask),this._surrogate=new PIXI.Text("",{}),this.addChild(this._surrogate),this._surrogate.mask=this._surrogate_mask,this._updateFontMetrics(),this._updateSurrogate()}},{key:"_updateSurrogate",value:function(){var t=this._deriveSurrogatePadding(),e=this._getDOMInputBounds();switch(this._surrogate.style=this._deriveSurrogateStyle(),this._surrogate.style.padding=Math.max.apply(Math,t),this._surrogate.y=this._multiline?t[0]:(e.height-this._surrogate.height)/2,this._surrogate.x=t[3],this._surrogate.text=this._deriveSurrogateText(),this._surrogate.style.align){case"left":this._surrogate.x=t[3];break;case"center":this._surrogate.x=.5*e.width-.5*this._surrogate.width;break;case"right":this._surrogate.x=e.width-t[1]-this._surrogate.width}this._updateSurrogateHitbox(e),this._updateSurrogateMask(e,t)}},{key:"_updateSurrogateHitbox",value:function(t){this._surrogate_hitbox.clear(),this._surrogate_hitbox.beginFill(0),this._surrogate_hitbox.drawRect(0,0,t.width,t.height),this._surrogate_hitbox.endFill(),this._surrogate_hitbox.interactive=!this._disabled}},{key:"_updateSurrogateMask",value:function(t,e){this._surrogate_mask.clear(),this._surrogate_mask.beginFill(0),this._surrogate_mask.drawRect(e[3],0,t.width-e[3]-e[1],t.height),this._surrogate_mask.endFill()}},{key:"_destroySurrogate",value:function(){this._surrogate&&(this.removeChild(this._surrogate),this.removeChild(this._surrogate_hitbox),this._surrogate.destroy(),this._surrogate_hitbox.destroy(),this._surrogate=null,this._surrogate_hitbox=null)}},{key:"_onSurrogateFocus",value:function(){this._setDOMInputVisible(!0),setTimeout(this._ensureFocus.bind(this),10)}},{key:"_ensureFocus",value:function(){this._hasFocus()||this.focus()}},{key:"_deriveSurrogateStyle",value:function(){var t=new PIXI.TextStyle;for(var e in this._input_style)switch(e){case"color":t.fill=this._input_style.color;break;case"fontFamily":case"fontSize":case"fontWeight":case"fontVariant":case"fontStyle":t[e]=this._input_style[e];break;case"letterSpacing":t.letterSpacing=parseFloat(this._input_style.letterSpacing);break;case"textAlign":t.align=this._input_style.textAlign}return this._multiline&&(t.lineHeight=parseFloat(t.fontSize),t.wordWrap=!0,t.wordWrapWidth=this._getDOMInputBounds().width),0===this._dom_input.value.length&&(t.fill=this._placeholderColor),t}},{key:"_deriveSurrogatePadding",value:function(){var t=this._input_style.textIndent?parseFloat(this._input_style.textIndent):0;if(this._input_style.padding&&this._input_style.padding.length>0){var e=this._input_style.padding.trim().split(" ");if(1==e.length){var i=parseFloat(e[0]);return[i,i,i,i+t]}if(2==e.length){var n=parseFloat(e[0]),s=parseFloat(e[1]);return[n,s,n,s+t]}if(4==e.length){var r=e.map((function(t){return parseFloat(t)}));return r[3]+=t,r}}return[0,0,0,t]}},{key:"_deriveSurrogateText",value:function(){return 0===this._dom_input.value.length?this._placeholder:"password"==this._dom_input.type?"".repeat(this._dom_input.value.length):this._dom_input.value}},{key:"_updateFontMetrics",value:function(){var t=this._deriveSurrogateStyle().toFontString();this._font_metrics=PIXI.TextMetrics.measureFont(t)}},{key:"_buildBoxCache",value:function(){this._destroyBoxCache();var t=["DEFAULT","FOCUSED","DISABLED"],e=this._getDOMInputBounds();for(var i in t)this._box_cache[t[i]]=this._box_generator(e.width,e.height,t[i]);this._previous.input_bounds=e}},{key:"_destroyBoxCache",value:function(){for(var t in this._box&&(this.removeChild(this._box),this._box=null),this._box_cache)this._box_cache[t].destroy(),this._box_cache[t]=null,delete this._box_cache[t]}},{key:"_hasFocus",value:function(){return document.activeElement===this._dom_input}},{key:"_setDOMInputVisible",value:function(t){this._dom_input.style.display=t?"block":"none"}},{key:"_getCanvasBounds",value:function(){var t=this._last_renderer.view.getBoundingClientRect(),e={top:t.top,left:t.left,width:t.width,height:t.height};return e.left+=window.scrollX,e.top+=window.scrollY,e}},{key:"_getDOMInputBounds",value:function(){var t=!1;this._dom_added||(document.body.appendChild(this._dom_input),t=!0);var e=this._dom_input.style.transform,i=this._dom_input.style.display;this._dom_input.style.transform="",this._dom_input.style.display="block";var n=this._dom_input.getBoundingClientRect();return this._dom_input.style.transform=e,this._dom_input.style.display=i,t&&document.body.removeChild(this._dom_input),n}},{key:"_getDOMRelativeWorldTransform",value:function(){var t=this._last_renderer.view.getBoundingClientRect(),e=this.worldTransform.clone();return e.scale(this._resolution,this._resolution),e.scale(t.width/this._last_renderer.width,t.height/this._last_renderer.height),e}},{key:"_pixiMatrixToCSS",value:function(t){return"matrix("+[t.a,t.b,t.c,t.d,t.tx,t.ty].join(",")+")"}},{key:"_comparePixiMatrices",value:function(t,e){return!(!t||!e)&&(t.a==e.a&&t.b==e.b&&t.c==e.c&&t.d==e.d&&t.tx==e.tx&&t.ty==e.ty)}},{key:"_compareClientRects",value:function(t,e){return!(!t||!e)&&(t.left==e.left&&t.top==e.top&&t.width==e.width&&t.height==e.height)}}]),i}();function Fn(t){if((t=t||{fill:13421772}).default)t.focused=t.focused||t.default,t.disabled=t.disabled||t.default;else{var e=t;(t={}).default=t.focused=t.disabled=e}return function(e,i,n){var s=t[n.toLowerCase()],r=new PIXI.Graphics;return s.fill&&r.beginFill(s.fill),s.stroke&&r.lineStyle(s.stroke.width||1,s.stroke.color||0,s.stroke.alpha||1),s.rounded?r.drawRoundedRect(0,0,e,i,s.rounded):r.drawRect(0,0,e,i),r.endFill(),r.closePath(),r}}var Yn=function(t){d(i,t);var e=g(i);function i(t,n){var s;return l(this,i),(s=e.call(this,n)).json=n,s._onKillEvent="kill_event",s._onReviveEvent="revive_event",s._onDestroyEvent="destroy_event",s.on("keydown",s._onKeyDownUpdate,f(s)),s.on("keyup",s._onKeyUpUpdate,f(s)),s.on("input",s._onInputUpdate,f(s)),s.on("focus",s._onFocusUpdate,f(s)),s.on("blur",s._onBlurUpdate,f(s)),s._onKeydownEvent="keydownupdate",s._onKeyupEvent="keyupupdate",s._onInputEvent="inputupdate",s._onFocusEvent="focusupdate",s._onBlurEvent="blurupdate",s._saveVisible=!0,Hr.debugMode&&(s._isOnDebugerUpdate=!0,Hr.addUpdater(s._updateDebug,f(s))),s._isUpdate=!1,s.aa_isRegOnDebug=!1,s._inDebug=!1,s.userData=null,s._active=!0,s._toUpperCase=!!n.hasOwnProperty("toUpperCase")&&n.toUpperCase,s._oType=E.OMY_TEXT_FONT_INPUT,s._textValue=t,s._fontEx="px",s._fontSize=Number(n.input.fontSize.split(s._fontEx)[0]),s._align=n.align||"left",s._alignV=n.alignV||"top",s.align=s._align,s.alignV=s._alignV,n.hasOwnProperty("maxLength")&&n.maxLength>0&&(s.maxLength=n.maxLength),n.hasOwnProperty("placeholder")&&(s.placeholder=n.placeholder),n.hasOwnProperty("restrict")&&(s.restrict=n.restrict),n.hasOwnProperty("substituteText")&&(s.substituteText=n.substituteText),s.text=s._textValue,s._checkFontSize=n.checkFontSize||!1,s._checkFontSize&&s.addInput(s._checkScale,f(s)),s._defaultFontSize=s._fontSize,s._sizeCoef=n.sizeCoef||1.35,s._maxWidth=n.checkLength||s.maxLength,s}return c(i,[{key:"_updateDebug",value:function(){this.aa_isRegOnDebug&&!this._inDebug?Hr.add.regDebugMode(this):!this.aa_isRegOnDebug&&this._inDebug&&Hr.add.removeFromDebug(this)}},{key:"drawDebugRect",value:function(){}},{key:"removeDrawDebugRect",value:function(){}},{key:"setInputStyle",value:function(t,e){m(_(i.prototype),"setInputStyle",this).call(this,t,e)}},{key:"blur",value:function(){m(_(i.prototype),"blur",this).call(this)}},{key:"select",value:function(){m(_(i.prototype),"select",this).call(this)}},{key:"focus",value:function(){m(_(i.prototype),"focus",this).call(this)}},{key:"setColor",value:function(t){this.setInputStyle("color",t)}},{key:"kill",value:function(){return this._active&&(this._active=!1,this._isUpdate&&Hr.removeUpdater(this.update,this),this._isOnDebugerUpdate&&(this._isOnDebugerUpdate=!1,Hr.removeUpdater(this._updateDebug,this)),this._saveVisible=this.visible,this.visible=!1,this.renderable=!1,this.emit(this._onKillEvent,this)),this}},{key:"revive",value:function(){return this._active||(this._active=!0,this.renderable=!0,this._isUpdate&&Hr.addUpdater(this.update,this),Hr.debugMode&&!this._isOnDebugerUpdate&&(this._isOnDebugerUpdate=!0,Hr.addUpdater(this._updateDebug,this)),this.visible=this._saveVisible,this.emit(this._onReviveEvent,this)),this}},{key:"destroy",value:function(t){return t=t||{children:!0,texture:!1,baseTexture:!1},this.json=null,this._active=!1,this.userData=null,this._textValue=null,this._eventData=null,this.isUpdate=!1,this._isOnDebugerUpdate&&(this._isOnDebugerUpdate=!1,Hr.removeUpdater(this._updateDebug,this)),this.emit(this._onDestroyEvent,this),this.removeAllListeners(this._onDestroyEvent),this.removeAllListeners(this._onKillEvent),this.removeAllListeners(this._onReviveEvent),this.removeAllListeners(this._onKeydownEvent),this.removeAllListeners(this._onKeyupEvent),this.removeAllListeners(this._onInputEvent),this.removeAllListeners(this._onFocusEvent),this.removeAllListeners(this._onBlurEvent),this.removeAllListeners("keydown"),this.removeAllListeners("keyup"),this.removeAllListeners("input"),this.removeAllListeners("focus"),this.removeAllListeners("blur"),this.renderable=!1,this.visible=!1,m(_(i.prototype),"destroy",this).call(this,t),this}},{key:"update",value:function(){}},{key:"setXY",value:function(t,e){this.position.set(t,e)}},{key:"setSize",value:function(t,e){this.width=t,this.height=e}},{key:"setScale",value:function(t,e){this.scale.set(t,e)}},{key:"setAnchor",value:function(t,e){this.anchor.set(t,e)}},{key:"setPivot",value:function(t,e){this.pivot.set(t,e)}},{key:"addKill",value:function(t,e,i){this._addNewEvent(this._onKillEvent,t,e,i)}},{key:"addRevive",value:function(t,e,i){this._addNewEvent(this._onReviveEvent,t,e,i)}},{key:"addDestroy",value:function(t,e,i){this._addNewEvent(this._onDestroyEvent,t,e,i)}},{key:"addKeyDown",value:function(t,e,i){this._addNewEvent(this._onKeydownEvent,t,e,i)}},{key:"addKeyUp",value:function(t,e,i){this._addNewEvent(this._onKeyupEvent,t,e,i)}},{key:"addInput",value:function(t,e,i){this._addNewEvent(this._onInputEvent,t,e,i)}},{key:"addFocus",value:function(t,e,i){this._addNewEvent(this._onFocusEvent,t,e,i)}},{key:"addBlur",value:function(t,e,i){this._addNewEvent(this._onBlurEvent,t,e,i)}},{key:"_addNewEvent",value:function(t,e,i){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];n?this.once(t,e,i):this.on(t,e,i)}},{key:"removeKill",value:function(t,e){this.removeListener(this._onKillEvent,t,e)}},{key:"removeRevive",value:function(t,e){this.removeListener(this._onReviveEvent,t,e)}},{key:"removeDestroy",value:function(t,e){this.removeListener(this._onDestroyEvent,t,e)}},{key:"removeKeyDown",value:function(t,e,i){this.removeListener(this._onKeydownEvent,t,e)}},{key:"removeKeyUp",value:function(t,e,i){this.removeListener(this._onKeyupEvent,t,e)}},{key:"removeInput",value:function(t,e,i){this.removeListener(this._onInputEvent,t,e)}},{key:"removeFocus",value:function(t,e,i){this.removeListener(this._onFocusEvent,t,e)}},{key:"removeBlur",value:function(t,e,i){this.removeListener(this._onBlurEvent,t,e)}},{key:"removeUp",value:function(){}},{key:"removeDragUpdate",value:function(){}},{key:"_onKeyDownUpdate",value:function(t){this.emit(this._onKeydownEvent,this,t)}},{key:"_onKeyUpUpdate",value:function(t){this.emit(this._onKeyupEvent,this,t)}},{key:"_onInputUpdate",value:function(t){this.emit(this._onInputEvent,this,t)}},{key:"_onFocusUpdate",value:function(){this.emit(this._onFocusEvent,this)}},{key:"_onBlurUpdate",value:function(){this.emit(this._onBlurEvent,this)}},{key:"_checkScale",value:function(){if(this.setInputStyle("fontSize",String(this._defaultFontSize)+this._fontEx),this._maxWidth<this.text.length){var t=Ft.int(this._fontSize-(this.text.length-this._maxWidth)*this._sizeCoef);this.setInputStyle("fontSize",String(t)+this._fontEx)}}},{key:"align",get:function(){return this._align},set:function(t){this._align=t,this.setInputStyle("text-align",t)}},{key:"alignV",get:function(){return this._alignV},set:function(t){this._alignV=t,this.setInputStyle("vertical-align",t)}},{key:"isUpdate",get:function(){return this._isUpdate},set:function(t){!this._isUpdate&&t?Hr.addUpdater(this.update,this):this._isUpdate&&!t&&Hr.removeUpdater(this.update,this),this._isUpdate=t}},{key:"active",get:function(){return this._active}},{key:"scaleX",get:function(){return this.scale.x},set:function(t){this.scale.x=t}},{key:"scaleY",get:function(){return this.scale.y},set:function(t){this.scale.y=t}},{key:"pivotX",get:function(){return this.pivot.x},set:function(t){this.pivot.x=t}},{key:"pivotY",get:function(){return this.pivot.y},set:function(t){this.pivot.y=t}},{key:"anchorX",get:function(){return this.anchor.x},set:function(t){this.anchor.x=t}},{key:"anchorY",get:function(){return this.anchor.y},set:function(t){this.anchor.y=t}},{key:"globalLeft",get:function(){return this.getGlobalPosition().x}},{key:"globalTop",get:function(){return this.getGlobalPosition().y}},{key:"worldX",get:function(){return this.getGlobalPosition().x}},{key:"worldY",get:function(){return this.getGlobalPosition().y}},{key:"text",get:function(){return m(_(i.prototype),"text",this)},set:function(t){this._textValue=t,x(_(i.prototype),"text",this._toUpperCase?this._textValue.toUpperCase():this._textValue,this,!0),this.json&&this._checkFontSize&&Hr.game.addNextTickUpdate(this._checkScale,this)}},{key:"fontSize",get:function(){return this._fontSize},set:function(t){String(t).split(this._fontEx).length>1&&(t=Number(String(t).split(this._fontEx)[0])),this._fontSize=t,this.setInputStyle("fontSize",String(this._fontSize)+this._fontEx)}},{key:"oType",get:function(){return this._oType}},{key:"disabled",get:function(){return m(_(i.prototype),"disabled",this)},set:function(t){x(_(i.prototype),"disabled",t,this,!0)}},{key:"htmlInput",get:function(){return m(_(i.prototype),"htmlInput",this)}},{key:"restrict",get:function(){return m(_(i.prototype),"restrict",this)},set:function(t){x(_(i.prototype),"restrict",t,this,!0)}},{key:"maxLength",get:function(){return m(_(i.prototype),"maxLength",this)},set:function(t){x(_(i.prototype),"maxLength",t,this,!0)}},{key:"placeholder",get:function(){return m(_(i.prototype),"placeholder",this)},set:function(t){x(_(i.prototype),"placeholder",t,this,!0)}}]),i}(Rn),Xn=function(t){d(i,t);var e=g(i);function i(t){var n;return l(this,i),(n=e.call(this))._oType=E.OMY_NEUTRINO_PARTICLES,n.json=t,n._onCompleteEvent="oncomplete",n._onStartPlayEvent="startplay",n._isBaseParent=Boolean(n.json.baseParent)||!1,n._removeOnEnd=Boolean(n.json.removeOnEnd)||!1,n._killOnEnd=Boolean(n.json.killOnEnd)||!1,n._loop=Boolean(n.json.loop)||!1,n._effects=[],n.addEmitter(n.json.config),n._paused=!0,n.interactChild=!1,n.isUpdate=!0,n}return c(i,[{key:"addEmitter",value:function(t){var e=new PIXINeutrino.Effect(Hr.resources[t.particle_name].effectModel,t);return e.particleName=t.particle_name,this._isBaseParent&&(e.baseParent=this),this._effects.push(e),this.addChild(e),this._effects.length-1}},{key:"play",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=0;i<this._effects.length;i++)e&&e!==this._effects[i].particleName||(this._effects[i].effect["_"+t]||this._effects[i]).unpause()}},{key:"stop",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=0;i<this._effects.length;i++)e&&e!==this._effects[i].particleName||(this._effects[i].effect["_"+t]||this._effects[i]).pause()}},{key:"unpauseGenerators",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=0;i<this._effects.length;i++)e&&e!==this._effects[i].particleName||(this._effects[i].effect["_"+t]||this._effects[i]).unpauseGenerators()}},{key:"pauseGenerators",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=0;i<this._effects.length;i++)e&&e!==this._effects[i].particleName||(this._effects[i].effect["_"+t]||this._effects[i]).pauseGenerators()}},{key:"activate",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(null==t||!t.length)return OMY.Omy.error("pls set name of emitter",e,t),null;for(var i=0;i<this._effects.length;i++)e&&e!==this._effects[i].particleName||!this._effects[i].effect["_"+t]||this._effects[i].effect["_"+t].activate()}},{key:"disactivate",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(null==t||!t.length)return OMY.Omy.error("pls set name of emitter",e,t),null;for(var i=0;i<this._effects.length;i++)e&&e!==this._effects[i].particleName||!this._effects[i].effect["_"+t]||this._effects[i].effect["_"+t].disactivate()}},{key:"restart",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=0;n<this._effects.length;n++)i&&i!==this._effects[n].particleName||this._effects[n].restart(t,e)}},{key:"resetPosition",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=0;n<this._effects.length;n++)i&&i!==this._effects[n].particleName||this._effects[n].resetPosition(t,e)}},{key:"reset",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.restart(t),this.stop(t)}},{key:"kill",value:function(){return this._active&&(this.stop(),m(_(i.prototype),"kill",this).call(this)),this}},{key:"revive",value:function(){return this._active||(m(_(i.prototype),"revive",this).call(this),this.restart()),this}},{key:"destroy",value:function(t){return this.stop(),this._effects.length=0,this._effects=null,this._oType=null,this.json=null,m(_(i.prototype),"destroy",this).call(this,t),this}},{key:"update",value:function(t){for(var e=t/PIXI.settings.TARGET_FPMS/1e3,n=0;n<this._effects.length;n++)this._effects[n].update(e);m(_(i.prototype),"update",this).call(this,t),this.numActiveParticles<1&&!this._paused?(this._paused=!0,this.emit(this._onCompleteEvent),this._removeOnEnd?this.destroy():this._killOnEnd?this.kill():this._loop&&this.restart()):this.numActiveParticles>0&&this._paused&&(this._paused=!1,this.emit(this._onStartPlayEvent))}},{key:"zeroUpdate",value:function(){for(var t=0;t<this._effects.length;t++)this._effects[t].effect.zeroUpdate()}},{key:"getEffect",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return this._effects[t]}},{key:"getEffectByName",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=0;e<this._effects.length;e++)if(this._effects[e].particleName===t)return this._effects[e];return null}},{key:"getEmitterByName",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(null==t||!t.length)return OMY.Omy.error("pls set name of emitter",e,t),null;for(var i=0;i<this._effects.length;i++)if((!e||e===this._effects[i].particleName)&&this._effects[i].effect[t])return this._effects[i].effect[t];return null}},{key:"setPropertyEmitters",value:function(t,e){for(var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,s=0;s<this._effects.length;s++)n&&n!==this._effects[s].particleName||(this._effects[s].effect["_"+i]?this._effects[s].effect["_"+i]["_"+t]=e:this._effects[s].setPropertyInAllEmitters(t,e))}},{key:"getNumParticles",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=0,n=0;n<this._effects.length;n++)t&&t!==this._effects[n].particleName||(i+=(this._effects[n].effect["_"+e]||this._effects[n].effect).getNumParticles());return i}},{key:"playing",value:function(){for(var t=0;t<this._effects.length;t++)if(!this._effects[t].effect.areAllEmittersPaused()||!this._effects[t].effect.areGeneratorsInAllEmittersPaused())return!0;return!1}},{key:"addComplete",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this._addNewEvent(this._onCompleteEvent,t,e,i)}},{key:"removeComplete",value:function(t,e){this.removeListener(this._onCompleteEvent,t,e)}},{key:"addStartPlay",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this._addNewEvent(this._onStartPlayEvent,t,e,i)}},{key:"removeStartPlay",value:function(t,e){this.removeListener(this._onStartPlayEvent,t,e)}},{key:"numEffects",get:function(){return this._effects.length}},{key:"removeOnEnd",get:function(){return this._removeOnEnd},set:function(t){this._removeOnEnd=t}},{key:"killOnEnd",get:function(){return this._killOnEnd},set:function(t){this._killOnEnd=t}},{key:"numActiveParticles",get:function(){for(var t=0,e=0;e<this._effects.length;e++)t+=this._effects[e].effect.getNumParticles();return t}},{key:"loop",get:function(){return this._loop},set:function(t){this._loop=t}}]),i}(zt);if(parseInt(PIXI.VERSION.split(".")[0],10)<5)throw new Error("Detected Pixi.js version "+PIXI.VERSION+". pixi-multistyle-text supports Pixi.js version 5+. (Please use v0.8.0 for Pixi 4 support.)");var Bn=["pointerover","pointerenter","pointerdown","pointermove","pointerup","pointercancel","pointerout","pointerleave","gotpointercapture","lostpointercapture","mouseover","mouseenter","mousedown","mousemove","mouseup","mousecancel","mouseout","mouseleave","touchover","touchenter","touchdown","touchmove","touchup","touchcancel","touchout","touchleave"],zn="bbcode",Vn={bbcode:["[","]"],xml:["<",">"]},Hn=function(t){function e(e,i){var n=this;t.call(this,e),this.styles=i,Bn.forEach((function(t){n.on(t,(function(t){return n.handleInteraction(t)}))}))}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={styles:{configurable:!0}};return e.prototype.handleInteraction=function(t){var e=t,i=t.data.getLocalPosition(this),n=this.hitboxes.reduce((function(t,e){return void 0!==t?t:e.hitbox.contains(i.x,i.y)?e:void 0}),void 0);e.targetTag=void 0===n?void 0:n.tag},i.styles.set=function(t){for(var i in this.textStyles={},this.textStyles.default=this.assign({},e.DEFAULT_TAG_STYLE),t)"default"===i?this.assign(this.textStyles.default,t[i]):this.textStyles[i]=this.assign({},t[i]);this.textStyles.default.tagStyle===zn&&(this.textStyles.b=this.assign({},{fontStyle:"bold"}),this.textStyles.i=this.assign({},{fontStyle:"italic"}),this.textStyles.color=this.assign({},{fill:""}),this.textStyles.outline=this.assign({},{stroke:"",strokeThickness:6}),this.textStyles.font=this.assign({},{fontFamily:""}),this.textStyles.shadow=this.assign({},{dropShadowColor:"",dropShadow:!0,dropShadowBlur:3,dropShadowDistance:3,dropShadowAngle:2}),this.textStyles.size=this.assign({},{fontSize:"px"}),this.textStyles.spacing=this.assign({},{letterSpacing:""}),this.textStyles.align=this.assign({},{align:""})),this.withPrivateMembers()._style=new PIXI.TextStyle(this.textStyles.default),this.withPrivateMembers().dirty=!0},e.prototype.setTagStyle=function(t,e){t in this.textStyles?this.assign(this.textStyles[t],e):this.textStyles[t]=this.assign({},e),this.withPrivateMembers()._style=new PIXI.TextStyle(this.textStyles.default),this.withPrivateMembers().dirty=!0},e.prototype.deleteTagStyle=function(t){"default"===t?this.textStyles.default=this.assign({},e.DEFAULT_TAG_STYLE):delete this.textStyles[t],this.withPrivateMembers()._style=new PIXI.TextStyle(this.textStyles.default),this.withPrivateMembers().dirty=!0},e.prototype.getTagRegex=function(t,e){var i=Object.keys(this.textStyles).join("|");i=t?"("+i+")":"(?:"+i+")";var n=this.textStyles.default.tagStyle===zn?"\\"+Vn.bbcode[0]+i+"(?:\\=(?:[A-Za-z0-9_\\-\\#]+|'(?:[^']+|\\\\')*'))*\\s*\\"+Vn.bbcode[1]+"|\\"+Vn.bbcode[0]+"\\/"+i+"\\s*\\"+Vn.bbcode[1]:"\\"+Vn.xml[0]+i+"(?:\\s+[A-Za-z0-9_\\-]+=(?:\"(?:[^\"]+|\\\\\")*\"|'(?:[^']+|\\\\')*'))*\\s*\\"+Vn.xml[1]+"|\\"+Vn.xml[0]+"\\/"+i+"\\s*\\"+Vn.xml[1];return e&&(n="("+n+")"),new RegExp(n,"g")},e.prototype.getPropertyRegex=function(){return new RegExp("([A-Za-z0-9_\\-]+)=(?:\"((?:[^\"]+|\\\\\")*)\"|'((?:[^']+|\\\\')*)')","g")},e.prototype.getBBcodePropertyRegex=function(){return new RegExp("[A-Za-z0-9_\\-]+=([A-Za-z0-9_\\-\\#]+)","g")},e.prototype._getTextDataPerLine=function(t){for(var e=[],i=this.getTagRegex(!0,!1),n=[this.assign({},this.textStyles.default)],s=[{name:"default",properties:{}}],r=0;r<t.length;r++){for(var o=[],a=[],h=void 0;h=i.exec(t[r]);)a.push(h);if(0===a.length)o.push(this.createTextData(t[r],n[n.length-1],s[s.length-1]));else{for(var l=0,u=0;u<a.length;u++){if(a[u].index>l&&o.push(this.createTextData(t[r].substring(l,a[u].index),n[n.length-1],s[s.length-1])),"/"===a[u][0][1])n.length>1&&(n.pop(),s.pop());else{for(var c={},d=this.getPropertyRegex(),_=void 0;_=d.exec(a[u][0]);)c[_[1]]=_[2]||_[3];if(s.push({name:a[u][1],properties:c}),this.textStyles.default.tagStyle===zn&&a[u][0].includes("=")&&this.textStyles[a[u][1]]){var p=this.getBBcodePropertyRegex().exec(a[u][0]),f={};Object.entries(this.textStyles[a[u][1]]).forEach((function(t){f[t[0]]="string"!=typeof t[1]?t[1]:p[1]+t[1]})),n.push(this.assign({},n[n.length-1],f))}else n.push(this.assign({},n[n.length-1],this.textStyles[a[u][1]]))}l=a[u].index+a[u][0].length}if(l<t[r].length){var v=this.createTextData(l?t[r].substring(l):t[r],n[n.length-1],s[s.length-1]);o.push(v)}}e.push(o)}var g=this.textStyles.default.tagStyle;return e[e.length-1].map((function(t){t.text.includes(Vn[g][0])&&(t.text=t.text.match(g===zn?/^(.*)\[/:/^(.*)\</)[1])})),e},e.prototype.getFontString=function(t){return new PIXI.TextStyle(t).toFontString()},e.prototype.createTextData=function(t,e,i){return{text:t,style:e,width:0,height:0,fontProperties:void 0,tag:i}},e.prototype.getDropShadowPadding=function(){var t=this,e=0,i=0;return Object.keys(this.textStyles).forEach((function(n){var s=t.textStyles[n],r=s.dropShadowDistance,o=s.dropShadowBlur;e=Math.max(e,r||0),i=Math.max(i,o||0)})),e+i},e.prototype.withPrivateMembers=function(){return this},e.prototype.updateText=function(){var t=this;if(this.withPrivateMembers().dirty){this.hitboxes=[],this.texture.baseTexture.resolution=this.resolution;var i=this.textStyles,n=this.text;this.withPrivateMembers()._style.wordWrap&&(n=this.wordWrap(this.text));for(var s=n.split(/(?:\r\n|\r|\n)/),r=this._getTextDataPerLine(s),o=[],a=[],h=[],l=0,u=0;u<s.length;u++){for(var c=0,d=0,_=0,p=0;p<r[u].length;p++){var f=r[u][p].style;this.context.font=this.getFontString(f),r[u][p].width=this.context.measureText(r[u][p].text).width,0!==r[u][p].text.length&&(r[u][p].width+=(r[u][p].text.length-1)*f.letterSpacing,p>0&&(c+=f.letterSpacing/2),p<r[u].length-1&&(c+=f.letterSpacing/2)),c+=r[u][p].width,r[u][p].fontProperties=PIXI.TextMetrics.measureFont(this.context.font),r[u][p].height=r[u][p].fontProperties.fontSize,"number"==typeof f.valign?(d=Math.min(d,f.valign-r[u][p].fontProperties.descent),_=Math.max(_,f.valign+r[u][p].fontProperties.ascent)):(d=Math.min(d,-r[u][p].fontProperties.descent),_=Math.max(_,r[u][p].fontProperties.ascent))}o[u]=c,a[u]=d,h[u]=_,l=Math.max(l,c)}var v=Object.keys(i).map((function(t){return i[t]})).reduce((function(t,e){return Math.max(t,e.strokeThickness||0)}),0),g=this.getDropShadowPadding(),y=l+2*v+2*g,m=h.reduce((function(t,e){return t+e}),0)-a.reduce((function(t,e){return t+e}),0)+2*v+2*g;this.canvas.width=y*this.resolution,this.canvas.height=m*this.resolution,this.context.scale(this.resolution,this.resolution),this.context.textBaseline="alphabetic",this.context.lineJoin="round";for(var k=g+v,x=[],b=0;b<r.length;b++){var w=r[b],S=void 0;switch(this.withPrivateMembers()._style.align){case"left":S=g+v;break;case"center":S=g+v+(l-o[b])/2;break;case"right":S=g+v+l-o[b]}for(var T=0;T<w.length;T++){var O=w[T],E=O.style,A=O.text,D=O.fontProperties,C=O.width,M=O.tag,L=k+D.ascent;switch(E.valign){case"top":break;case"baseline":L+=h[b]-D.ascent;break;case"middle":L+=(h[b]-a[b]-D.ascent-D.descent)/2;break;case"bottom":L+=h[b]-a[b]-D.ascent-D.descent;break;default:L+=h[b]-D.ascent-E.valign}if(0===E.letterSpacing)x.push({text:A,style:E,x:S,y:L,width:C,ascent:D.ascent,descent:D.descent,tag:M}),S+=w[T].width;else{this.context.font=this.getFontString(w[T].style);for(var P=0;P<A.length;P++){(P>0||T>0)&&(S+=E.letterSpacing/2);var U=this.context.measureText(A.charAt(P)).width;x.push({text:A.charAt(P),style:E,x:S,y:L,width:U,ascent:D.ascent,descent:D.descent,tag:M}),S+=U,(P<A.length-1||T<w.length-1)&&(S+=E.letterSpacing/2)}}}k+=h[b]-a[b]}this.context.save(),x.forEach((function(e){var i=e.style,n=e.text,s=e.x,r=e.y;if(i.dropShadow){t.context.font=t.getFontString(i);var o=i.dropShadowColor;"number"==typeof o&&(o=PIXI.utils.hex2string(o)),t.context.shadowColor=o,t.context.shadowBlur=i.dropShadowBlur,t.context.shadowOffsetX=Math.cos(i.dropShadowAngle)*i.dropShadowDistance*t.resolution,t.context.shadowOffsetY=Math.sin(i.dropShadowAngle)*i.dropShadowDistance*t.resolution,t.context.fillText(n,s,r)}})),this.context.restore(),x.forEach((function(e){var i=e.style,n=e.text,s=e.x,r=e.y;if(void 0!==i.stroke&&i.strokeThickness){t.context.font=t.getFontString(i);var o=i.stroke;"number"==typeof o&&(o=PIXI.utils.hex2string(o)),t.context.strokeStyle=o,t.context.lineWidth=i.strokeThickness,t.context.strokeText(n,s,r)}})),x.forEach((function(e){var i=e.style,n=e.text,s=e.x,r=e.y;if(void 0!==i.fill){t.context.font=t.getFontString(i);var o=i.fill;if("number"==typeof o)o=PIXI.utils.hex2string(o);else if(Array.isArray(o))for(var a=0;a<o.length;a++){var h=o[a];"number"==typeof h&&(o[a]=PIXI.utils.hex2string(h))}t.context.fillStyle=t._generateFillStyle(new PIXI.TextStyle(i),[n]),t.context.fillText(n,s,r)}})),x.forEach((function(i){var n=i.style,s=i.x,r=i.y,o=i.width,a=i.ascent,h=i.descent,l=i.tag,u=-t.withPrivateMembers()._style.padding-t.getDropShadowPadding();t.hitboxes.push({tag:l,hitbox:new PIXI.Rectangle(s+u,r-a+u,o,a+h)}),(void 0===n.debug?e.debugOptions.spans.enabled:n.debug)&&(t.context.lineWidth=1,e.debugOptions.spans.bounding&&(t.context.fillStyle=e.debugOptions.spans.bounding,t.context.strokeStyle=e.debugOptions.spans.bounding,t.context.beginPath(),t.context.rect(s,r-a,o,a+h),t.context.fill(),t.context.stroke(),t.context.stroke()),e.debugOptions.spans.baseline&&(t.context.strokeStyle=e.debugOptions.spans.baseline,t.context.beginPath(),t.context.moveTo(s,r),t.context.lineTo(s+o,r),t.context.closePath(),t.context.stroke()),e.debugOptions.spans.top&&(t.context.strokeStyle=e.debugOptions.spans.top,t.context.beginPath(),t.context.moveTo(s,r-a),t.context.lineTo(s+o,r-a),t.context.closePath(),t.context.stroke()),e.debugOptions.spans.bottom&&(t.context.strokeStyle=e.debugOptions.spans.bottom,t.context.beginPath(),t.context.moveTo(s,r+h),t.context.lineTo(s+o,r+h),t.context.closePath(),t.context.stroke()),e.debugOptions.spans.text&&(t.context.fillStyle="#ffffff",t.context.strokeStyle="#000000",t.context.lineWidth=2,t.context.font="8px monospace",t.context.strokeText(l.name,s,r-a+8),t.context.fillText(l.name,s,r-a+8),t.context.strokeText(o.toFixed(2)+"x"+(a+h).toFixed(2),s,r-a+16),t.context.fillText(o.toFixed(2)+"x"+(a+h).toFixed(2),s,r-a+16)))})),e.debugOptions.objects.enabled&&(e.debugOptions.objects.bounding&&(this.context.fillStyle=e.debugOptions.objects.bounding,this.context.beginPath(),this.context.rect(0,0,y,m),this.context.fill()),e.debugOptions.objects.text&&(this.context.fillStyle="#ffffff",this.context.strokeStyle="#000000",this.context.lineWidth=2,this.context.font="8px monospace",this.context.strokeText(y.toFixed(2)+"x"+m.toFixed(2),0,8,y),this.context.fillText(y.toFixed(2)+"x"+m.toFixed(2),0,8,y))),this.updateTexture()}},e.prototype.wordWrap=function(t){var e="",i=this.getTagRegex(!0,!0),n=t.split("\n"),s=this.withPrivateMembers()._style.wordWrapWidth,r=[this.assign({},this.textStyles.default)];this.context.font=this.getFontString(this.textStyles.default);for(var o=0;o<n.length;o++){for(var a=s,h=n[o].split(i),l=!0,u=0;u<h.length;u++)if(i.test(h[u]))e+=h[u],"/"===h[u][1]?(u+=2,r.pop()):(u++,r.push(this.assign({},r[r.length-1],this.textStyles[h[u]])),u++),this.context.font=this.getFontString(r[r.length-1]);else for(var c=h[u].split(" "),d=0;d<c.length;d++){var _=this.context.measureText(c[d]).width;if(this.withPrivateMembers()._style.breakWords&&_>a){var p=c[d].split("");d>0&&(e+=" ",a-=this.context.measureText(" ").width);for(var f=0;f<p.length;f++){var v=this.context.measureText(p[f]).width;v>a?(e+="\n"+p[f],a=s-v):(e+=p[f],a-=v)}}else if(this.withPrivateMembers()._style.breakWords)e+=c[d],a-=_;else{var g=_+(d>0?this.context.measureText(" ").width:0);g>a?(l||(e+="\n"),e+=c[d],a=s-_):(a-=g,d>0&&(e+=" "),e+=c[d])}l=!1}o<n.length-1&&(e+="\n")}return e},e.prototype.updateTexture=function(){var t=this.withPrivateMembers()._texture,e=this.getDropShadowPadding();t.baseTexture.setRealSize(this.canvas.width,this.canvas.height,this.resolution),t.trim.width=t.frame.width=this.canvas.width/this.resolution,t.trim.height=t.frame.height=this.canvas.height/this.resolution,t.trim.x=-this.withPrivateMembers()._style.padding-e,t.trim.y=-this.withPrivateMembers()._style.padding-e,t.orig.width=t.frame.width-2*(this.withPrivateMembers()._style.padding+e),t.orig.height=t.frame.height-2*(this.withPrivateMembers()._style.padding+e),this.withPrivateMembers()._onTextureUpdate(),t.baseTexture.emit("update",t.baseTexture),this.withPrivateMembers().dirty=!1},e.prototype.assign=function(t){for(var e=[],i=arguments.length-1;i-- >0;)e[i]=arguments[i+1];for(var n=0,s=e;n<s.length;n+=1){var r=s[n];for(var o in r)t[o]=r[o]}return t},Object.defineProperties(e.prototype,i),e}(PIXI.Text);Hn.DEFAULT_TAG_STYLE={align:"left",breakWords:!1,dropShadow:!1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"#000000",dropShadowDistance:5,fill:"black",fillGradientType:PIXI.TEXT_GRADIENT.LINEAR_VERTICAL,fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",valign:"baseline",wordWrap:!1,wordWrapWidth:100,tagStyle:"xml"},Hn.debugOptions={spans:{enabled:!1,baseline:"#44BB44",top:"#BB4444",bottom:"#4444BB",bounding:"rgba(255, 255, 255, 0.1)",text:!0},objects:{enabled:!1,bounding:"rgba(255, 255, 255, 0.05)",text:!0}};var Wn=function(t){d(i,t);var e=g(i);function i(t,n){var s,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;for(var o in l(this,i),n.defaultFontFamily=n.default.fontFamily,n.hasOwnProperty("locCheck")&&!n.locCheck||(n.default.fontFamily=Hr.assets.localAssets(n.default.fontFamily)),n)"object"!==h(n[o])||Array.isArray(n[o])||(n.stylesList||(n.stylesList={}),n[o].fontSize&&(n.stylesList[o]=n[o].fontSize));var a=!n.hasOwnProperty("oneLine")||n.oneLine;if(a||(n.default.wordWrap=!0,n.default.wordWrapWidth=n.width),n.hasOwnProperty("fillGradientType")&&(n.default.fillGradientType=1===n.fillGradientType?PIXI.TEXT_GRADIENT.LINEAR_VERTICAL:PIXI.TEXT_GRADIENT.LINEAR_HORIZONTAL),(s=e.call(this,t,n,r)).json=n,s._onKillEvent="kill_event",s._onReviveEvent="revive_event",s._onDestroyEvent="destroy_event",s._onDownEvent="down_event",s._onUpEvent="up_event",s._onUpOutSideEvent="up_out_event",s._onOverEvent="over_event",s._onOutEvent="out_event",s._onDragStartEvent="drag_start_event",s._onDragStopEvent="drag_stop_event",s._onDragUpdateEvent="drag_update_event",s._onTextEvent="text_update_event",s._onCountEvent="count_update_event",s._saveVisible=!0,Hr.debugMode&&(s._isOnDebugerUpdate=!0,Hr.addUpdater(s._updateDebug,f(s))),s._isUpdate=!1,s.aa_isRegOnDebug=!1,s.aa_debugAlign="",s.aa_debugAlignV="",s.aa_letterSpacing=-1,s._inDebug=!1,s.userData=null,s._active=!0,s._boundsRect=new E.Rectangle,s._localBoundsRect=new E.Rectangle,s._oX=0,s._oY=0,s._oWidth=0,s._oHeight=0,s._charCount=0,s._soundUp=null,s._soundOver=null,s._externalMethodParams=null,s._externalMethod=null,s._isDrag=!1,s._dragVertical=!1,s._dragHorizontal=!1,s._isStartDrag=!1,s._isCheckInput=!1,s._toUpperCase=!!n.hasOwnProperty("toUpperCase")&&n.toUpperCase,s._oType=E.OMY_MULTI_STYLE_TEXT_FONT,s._splitText=null,s._staticFirstText=null,s._staticLastText=null,s._textValue=t,s._fontEx="pt",s.style.fontSize.split("px").length>1&&(s._fontEx="px"),s._fontSize=Number(s.textStyles.default.fontSize.split(s._fontEx)[0]),s._fontStyle=n.default.fontFamily,s._defaultFontStyle=n.defaultFontFamily,n.stylesList)for(var u in s._defaultFontSize={},n.stylesList)s._defaultFontSize[u]=Number(n.stylesList[u].split(s._fontEx)[0]);s._align=n.align||"left",s._alignV=n.alignV||"top",s.align=s._align,s.alignV=s._alignV,s._checkFontSize=n.checkFontSize||!1,s._fullCheckFontSize=n.fullCheckFontSize||!1;var c=!(n.height&&n.width||s.text.length);return c&&(s.text="0"),s._maxWidth=n.width||s.width,s._maxHeight=n.height||s.height,c&&(s.text=""),s._locTextConf=n.locConfig,s._locTextConf&&s._locTextConf[Hr.language]&&s._locTextConf[Hr.language].hasOwnProperty("toUpperCase")&&(s._toUpperCase=s._locTextConf[Hr.language].toUpperCase),n.locConst?(s._isLocText=!0,Hr.loc.addUpdate(s._updateText,f(s))):s._isLocText=!1,s._locCheck=!n.hasOwnProperty("locCheck")||n.locCheck,s._isLocalFont=Hr.assets.isLocalAssets(s._defaultFontStyle)&&s._locCheck,s._isLocalFont&&!s._isLocText&&Hr.loc.addUpdate(s._updateText,f(s)),s._oneLine=!n.hasOwnProperty("oneLine")||n.oneLine,s._oneLine||(s.textStyles.default.wordWrap=!0,s.textStyles.default.wordWrapWidth=s._maxWidth,s._style.wordWrap=!0,s._style.wordWrapWidth=s._maxWidth),n.hasOwnProperty("fillGradientType")&&(s.textStyles.default.fillGradientType=1===n.fillGradientType?PIXI.TEXT_GRADIENT.LINEAR_VERTICAL:PIXI.TEXT_GRADIENT.LINEAR_HORIZONTAL),s.roundPixels=!n.hasOwnProperty("roundPixels")||n.roundPixels,s.text=s._textValue,s.interactChild=!1,s._updateText(),s}return c(i,[{key:"_updateDebug",value:function(){this.aa_isRegOnDebug&&!this._inDebug?Hr.add.regDebugMode(this):!this.aa_isRegOnDebug&&this._inDebug&&Hr.add.removeFromDebug(this),this.aa_debugAlign.length&&(this.align=this.aa_debugAlign,this._graphicOverlay&&(this._graphicOverlay.destroy(),this._graphicOverlay=null,this.drawDebugRect()),this.aa_debugAlign=""),this.aa_debugAlignV.length&&(this.alignV=this.aa_debugAlignV,this._graphicOverlay&&(this._graphicOverlay.destroy(),this._graphicOverlay=null,this.drawDebugRect()),this.aa_debugAlignV=""),-1!==this.aa_letterSpacing&&(this.textStyles.default.letterSpacing=this.aa_letterSpacing,this._style.letterSpacing=this.aa_letterSpacing,this.aa_letterSpacing=-1)}},{key:"drawDebugRect",value:function(){if(this._graphicOverlay)this._graphicOverlay.width=Math.max(this._maxWidth,this.width),this._graphicOverlay.height=Math.max(this._maxHeight,this.height),this._graphicOverlay.rotation=this.rotation,this._updateDebugPosition();else{this._graphicOverlay=new E.Graphics,this._graphicOverlay.position.set(this.worldX,this.worldY),this._graphicOverlay.beginFill(16724549,.5);var t=this.align||"left",e=this.alignV||"top",i=0,n=0;switch(t){case"left":i=0;break;case"center":i=.5*-Math.max(this._maxWidth,this.width);break;case"right":i=-Math.max(this._maxWidth,this.width)}switch(e){case"top":n=0;break;case"middle":n=.5*-Math.max(this._maxHeight,this.height);break;case"bottom":n=-Math.max(this._maxHeight,this.height)}this._graphicOverlay.drawRect(i,n,Math.max(this._maxWidth,this.width),Math.max(this._maxHeight,this.height)),this._graphicOverlay.endFill(),this._graphicOverlay.rotation=this.rotation}Hr.stage.addChild(this._graphicOverlay)}},{key:"removeDrawDebugRect",value:function(){this._graphicOverlay&&this._graphicOverlay.parent&&Hr.stage.removeChild(this._graphicOverlay)}},{key:"_updateDebugPosition",value:function(){this._graphicOverlay.x=this.worldX,this._graphicOverlay.y=this.worldY}},{key:"resetCheckScale",value:function(){this._charCount=0}},{key:"_updateText",value:function(){this._charCount=0,this._locTextConf&&(this._locTextConf[Hr.language]&&this._locTextConf[Hr.language].hasOwnProperty("toUpperCase")?this._toUpperCase=this._locTextConf[Hr.language].toUpperCase:this._toUpperCase=!!this.json.hasOwnProperty("toUpperCase")&&this.json.toUpperCase),this.setNewFont(this._isLocalFont?Hr.assets.localAssets(this._defaultFontStyle):this._fontStyle)}},{key:"setColor",value:function(t){this.textStyles.default.fill=t,this._style.fill=t}},{key:"kill",value:function(){return this._active&&(this._active=!1,this._isUpdate&&Hr.removeUpdater(this.update,this),this._isOnDebugerUpdate&&(this._isOnDebugerUpdate=!1,Hr.removeUpdater(this._updateDebug,this)),this.input&&(this.input=!1),this._saveVisible=this.visible,this.visible=!1,this.renderable=!1,this.emit(this._onKillEvent,this)),this}},{key:"revive",value:function(){return this._active||(this._active=!0,this.renderable=!0,this._isUpdate&&Hr.addUpdater(this.update,this),Hr.debugMode&&!this._isOnDebugerUpdate&&(this._isOnDebugerUpdate=!0,Hr.addUpdater(this._updateDebug,this)),this.input&&(this.input=!0),this.visible=this._saveVisible,this.emit(this._onReviveEvent,this)),this}},{key:"destroy",value:function(t){return t=t||{children:!0,texture:!1,baseTexture:!1},this._locTextConf=null,this.json=null,this._active=!1,this.userData=null,this._boundsRect=null,this._localBoundsRect=null,this._defaultFontSize=null,this._isDrag=!1,this._isStartDrag=!1,this._listenMouseUp&&(this._listenMouseUp=!1,Hr.mouse.removeUpMouse(this._globalMouseUp,this)),this._textValue=null,this._splitText=null,this._staticFirstText=null,this._staticLastText=null,this._eventData=null,this.isUpdate=!1,this._isOnDebugerUpdate&&(this._isOnDebugerUpdate=!1,Hr.removeUpdater(this._updateDebug,this)),(this._isLocText||this._isLocalFont)&&Hr.loc.removeUpdate(this._updateText,this),this.input&&(this.input=!1),this.removeAllListeners(this._onDragStartEvent),this.removeAllListeners(this._onDragStopEvent),this.removeAllListeners(this._onDragUpdateEvent),this.removeAllListeners(this._onDownEvent),this.removeAllListeners(this._onOutEvent),this.removeAllListeners(this._onOverEvent),this.removeAllListeners(this._onUpEvent),this.removeAllListeners(this._onUpOutSideEvent),this.emit(this._onDestroyEvent,this),this.removeAllListeners(this._onDestroyEvent),this.removeAllListeners(this._onKillEvent),this.removeAllListeners(this._onReviveEvent),this.removeAllListeners(this._onTextEvent),this.removeAllListeners(this._onCountEvent),this._externalMethod=null,this._externalMethodParams=null,this.renderable=!1,this.visible=!1,this._soundUp=null,this._soundOver=null,m(_(i.prototype),"destroy",this).call(this,t),this}},{key:"update",value:function(){this._isStartDrag&&(this._eventData.global.x===this._dragSaveX&&this._eventData.global.y===this._dragSaveY||(this._dragHorizontal&&(this.x=this._oX+this._eventData.global.x-this._dragSaveX,this._oX<this._dragXMin?this.x=this._dragXMin:this._oX>this._dragXMax&&(this.x=this._dragXMax)),this._dragVertical&&(this.y=this._oY+this._eventData.global.y-this._dragSaveY,this._oY<this._dragYMin?this.y=this._dragYMin:this._oY>this._dragYMax&&(this.y=this._dragYMax)),this._dragSaveX=this._eventData.global.x,this._dragSaveY=this._eventData.global.y,this.emit(this._onDragUpdateEvent,this),Hr.mouse.isDown||this._upOutSide()))}},{key:"_down",value:function(t){this._isDrag&&(this._eventData=t.data,this._dragSaveX=this._eventData.global.x,this._dragSaveY=this._eventData.global.y,this._isStartDrag=!0,this.emit(this._onDragStartEvent,this)),this.emit(this._onDownEvent,this)}},{key:"_over",value:function(){this.emit(this._onOverEvent,this),this._soundOver&&Hr.sound.play(this._soundOver)}},{key:"_out",value:function(){this.emit(this._onOutEvent,this)}},{key:"_upOutSide",value:function(){this._out(),this.emit(this._onUpOutSideEvent,this)}},{key:"_up",value:function(){this.emit(this._onUpEvent,this),this._soundUp&&Hr.sound.play(this._soundUp),null!=this._externalMethod&&this._externalMethod.apply(null,this._externalMethodParams)}},{key:"_globalMouseUp",value:function(){this._isDrag&&this._isStartDrag&&(this._eventData=null,this._isStartDrag=!1,this.emit(this._onDragStopEvent,this))}},{key:"setXY",value:function(t,e){this._oX=t,this._oY=e,this.position.set(t,e)}},{key:"setSize",value:function(t,e){this.width=t,this.height=e}},{key:"setScale",value:function(t,e){this.scale.set(t,e)}},{key:"setAnchor",value:function(t,e){this.anchor.set(t,e)}},{key:"setPivot",value:function(t,e){this.pivot.set(t,e),this.x=this._oX+t,this.y=this._oY+e}},{key:"_checkScale",value:function(){if(this._locTextConf&&this._locTextConf[Hr.language]&&!this._graphicOverlay){var t=Hr.isScreenPortrait&&this._locTextConf[Hr.language].v_fontSize||this._locTextConf[Hr.language].fontSize;if(this._defaultFontSize){for(var e in this._defaultFontSize)this.textStyles[e].fontSize=t||String(this._defaultFontSize[e])+"px";this.dirty=!0,this.updateText()}else this.textStyles.default.fontSize=this._style.fontSize=t||String(this._fontSize)+"px",this.dirty=!0,this.updateText()}else if(this._defaultFontSize){for(var i in this._defaultFontSize)this.textStyles[i].fontSize=String(this._defaultFontSize[i])+"px";this.dirty=!0,this.updateText(),this.parent&&this.updateTransform();var n=this._oneLine?this._maxWidth:this._maxHeight,s=this._oneLine?"width":"height";if(n<this[s]){var r={};for(var o in this._defaultFontSize)r[o]=this._defaultFontSize[o];for(var a=!0;a;){for(var h in r){if(r[h]--,r[h]<0){a=!1;break}this.textStyles[h].fontSize=String(r[h])+"px"}if(this.dirty=!0,this.updateText(),this.parent&&this.updateTransform(),n>=this[s])break}}if(this._fullCheckFontSize&&!this._oneLine&&(n=this._maxWidth)<this[s="width"]){var l={};for(var u in this._defaultFontSize)l[u]=this._defaultFontSize[u];for(var c=!0;c;){for(var d in l){if(l[d]--,l[d]<0){c=!1;break}this.textStyles[d].fontSize=String(l[d])+"px"}if(this.dirty=!0,this.updateText(),this.parent&&this.updateTransform(),n>=this[s])break}}}else{this.textStyles.default.fontSize=this._style.fontSize=String(this._fontSize)+"px",this.dirty=!0,this.updateText();var _=this.getLocalBounds(),p=this._oneLine?this._maxWidth:this._maxHeight,f=this._oneLine?"width":"height";if(p<_[f])for(var v=this._fontSize;v>0&&(v--,this.textStyles.default.fontSize=this._style.fontSize=String(v)+"px",this.dirty=!0,this.updateText(),!(p>=(_=this.getLocalBounds())[f])););if(this._fullCheckFontSize&&!this._oneLine&&(_=this.getLocalBounds(),(p=this._maxWidth)<_[f="width"]))for(var g=this._fontSize;g>0&&(g--,this.textStyles.default.fontSize=this._style.fontSize=String(g)+"px",this.dirty=!0,this.updateText(),!(p>=(_=this.getLocalBounds())[f])););}}},{key:"setNewFont",value:function(t){this._fontStyle=this.textStyles.default.fontFamily=t,x(_(i.prototype),"text","",this,!0),this._charCount=0,this.text=this._textValue,this._graphicOverlay&&(this._graphicOverlay.width=Math.max(this._graphicOverlay.width,this._oWidth),this._graphicOverlay.height=Math.max(this._graphicOverlay.height,this._oHeight))}},{key:"externalMethod",value:function(t,e){this.input||(this.input=!0),this._externalMethod=t,this._externalMethodParams=e}},{key:"boundsDragRect",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:NaN,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:NaN,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:NaN,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:NaN;isNaN(t)||(this._dragXMin=t),isNaN(e)||(this._dragYMin=e),isNaN(i)||(this._dragXMax=i),isNaN(n)||(this._dragYMax=n)}},{key:"addOver",value:function(t,e,i){this.input||(this.input=!0),this._addNewEvent(this._onOverEvent,t,e,i)}},{key:"addOut",value:function(t,e,i){this.input||(this.input=!0),this._addNewEvent(this._onOutEvent,t,e,i)}},{key:"addDown",value:function(t,e,i){this.input||(this.input=!0),this._addNewEvent(this._onDownEvent,t,e,i)}},{key:"addUp",value:function(t,e,i){this.input||(this.input=!0),this._addNewEvent(this._onUpEvent,t,e,i)}},{key:"addUpOutSide",value:function(t,e,i){this.input||(this.input=!0),this._addNewEvent(this._onUpOutSideEvent,t,e,i)}},{key:"addDragUpdate",value:function(t,e,i){this._addNewEvent(this._onDragUpdateEvent,t,e,i)}},{key:"addDragStart",value:function(t,e,i){this._addNewEvent(this._onDragStartEvent,t,e,i)}},{key:"addDragStop",value:function(t,e,i){this._addNewEvent(this._onDragStopEvent,t,e,i)}},{key:"addKill",value:function(t,e,i){this._addNewEvent(this._onKillEvent,t,e,i)}},{key:"addRevive",value:function(t,e,i){this._addNewEvent(this._onReviveEvent,t,e,i)}},{key:"addDestroy",value:function(t,e,i){this._addNewEvent(this._onDestroyEvent,t,e,i)}},{key:"addTextUpdate",value:function(t,e,i){this._addNewEvent(this._onTextEvent,t,e,i)}},{key:"addCharCountUpdate",value:function(t,e,i){this._addNewEvent(this._onCountEvent,t,e,i)}},{key:"_addNewEvent",value:function(t,e,i){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];n?this.once(t,e,i):this.on(t,e,i)}},{key:"removeOver",value:function(t,e){this.removeListener(this._onOverEvent,t,e)}},{key:"removeOut",value:function(t,e){this.removeListener(this._onOutEvent,t,e)}},{key:"removeDown",value:function(t,e){this.removeListener(this._onDownEvent,t,e)}},{key:"removeUp",value:function(t,e){this.removeListener(this._onUpEvent,t,e)}},{key:"removeUpOutSide",value:function(t,e){this.removeListener(this._onUpOutSideEvent,t,e)}},{key:"removeDragUpdate",value:function(t,e){this.removeListener(this._onDragUpdateEvent,t,e)}},{key:"removeDragStart",value:function(t,e){this.removeListener(this._onDragStartEvent,t,e)}},{key:"removeDragStop",value:function(t,e){this.removeListener(this._onDragStopEvent,t,e)}},{key:"removeKill",value:function(t,e){this.removeListener(this._onKillEvent,t,e)}},{key:"removeRevive",value:function(t,e){this.removeListener(this._onReviveEvent,t,e)}},{key:"removDestroy",value:function(t,e){this.removeDestroy(t,e)}},{key:"removeDestroy",value:function(t,e){this.removeListener(this._onDestroyEvent,t,e)}},{key:"removeTextUpdate",value:function(t,e){this.removeListener(this._onTextEvent,t,e)}},{key:"removeCharCountUpdate",value:function(t,e){this.removeListener(this._onCountEvent,t,e)}},{key:"align",get:function(){return this._align},set:function(t){switch(this._align=t,t){case"left":this.anchorX=0;break;case"center":this.anchorX=.5;break;case"right":this.anchorX=1;break;default:Hr.error("not exists value ",t)}this.textStyles.default.align=t,this._style.align=t}},{key:"alignV",get:function(){return this._alignV},set:function(t){switch(this._alignV=t,t){case"top":this.anchorY=0;break;case"middle":this.anchorY=.5;break;case"bottom":this.anchorY=1;break;default:Hr.error("not exists value ",t)}}},{key:"isUpdate",get:function(){return this._isUpdate},set:function(t){!this._isUpdate&&t?Hr.addUpdater(this.update,this):this._isUpdate&&!t&&Hr.removeUpdater(this.update,this),this._isUpdate=t}},{key:"active",get:function(){return this._active}},{key:"scaleX",get:function(){return this.scale.x},set:function(t){this.scale.x=t}},{key:"scaleY",get:function(){return this.scale.y},set:function(t){this.scale.y=t}},{key:"pivotX",get:function(){return this.pivot.x},set:function(t){this.pivot.x=t}},{key:"pivotY",get:function(){return this.pivot.y},set:function(t){this.pivot.y=t}},{key:"anchorX",get:function(){return this.anchor.x},set:function(t){this.anchor.x=t}},{key:"anchorY",get:function(){return this.anchor.y},set:function(t){this.anchor.y=t}},{key:"localLeft",get:function(){return this._localBoundsRect.left}},{key:"localRight",get:function(){return this._localBoundsRect.right}},{key:"localTop",get:function(){return this._localBoundsRect.top}},{key:"localBottom",get:function(){return this._localBoundsRect.bottom}},{key:"localWidth",get:function(){return this._localBoundsRect.width}},{key:"localHeight",get:function(){return this._localBoundsRect.height}},{key:"globalLeft",get:function(){return this.getGlobalPosition().x+this.localLeft}},{key:"globalTop",get:function(){return this.getGlobalPosition().y+this.localTop}},{key:"worldX",get:function(){return this.getGlobalPosition().x}},{key:"worldY",get:function(){return this.getGlobalPosition().y}},{key:"text",get:function(){return m(_(i.prototype),"text",this)},set:function(t){this._textValue=t,this._isLocText?x(_(i.prototype),"text",this._toUpperCase?Hr.loc.getText(this._textValue).toUpperCase():Hr.loc.getText(this._textValue),this,!0):x(_(i.prototype),"text",this._toUpperCase?this._textValue.toUpperCase():this._textValue,this,!0),Lt(this._staticFirstText)||x(_(i.prototype),"text",this._staticFirstText+m(_(i.prototype),"text",this),this,!0),Lt(this._staticLastText)||x(_(i.prototype),"text",m(_(i.prototype),"text",this)+this._staticLastText,this,!0),this._charCount!==m(_(i.prototype),"text",this).length&&(this._charCount=m(_(i.prototype),"text",this).length,this.emit(this._onCountEvent),this.style&&this._checkFontSize&&this._checkScale()),this._splitText&&(this._splitText.x=this._oX+this._oWidth*Math.abs(this.anchorX-1)),this.emit(this._onTextEvent)}},{key:"splitText",get:function(){return this._splitText},set:function(t){this._splitText=t}},{key:"staticFirstText",get:function(){return this._staticFirstText},set:function(t){this._staticFirstText=t,this.text=this._textValue}},{key:"staticLastText",get:function(){return this._staticLastText},set:function(t){this._staticLastText=t,this.text=this._textValue}},{key:"checkFontSize",get:function(){return this._checkFontSize},set:function(t){this._checkFontSize=t}},{key:"fullCheckFontSize",get:function(){return this._fullCheckFontSize},set:function(t){this._fullCheckFontSize=t}},{key:"x",get:function(){return this._oX=m(_(i.prototype),"x",this),this._oX},set:function(t){x(_(i.prototype),"x",this._oX=t,this,!0),this._graphicOverlay&&this._updateDebugPosition()}},{key:"y",get:function(){return this._oY=m(_(i.prototype),"y",this),this._oY},set:function(t){x(_(i.prototype),"y",this._oY=t,this,!0),this._graphicOverlay&&this._updateDebugPosition()}},{key:"height",get:function(){return this._graphicOverlay?this._graphicOverlay.height:(this._oHeight=m(_(i.prototype),"height",this),this._oHeight)},set:function(t){return this._graphicOverlay?this._graphicOverlay.height=t:x(_(i.prototype),"height",this._oHeight=t,this,!0)}},{key:"width",get:function(){return this._graphicOverlay?this._graphicOverlay.width:(this._oWidth=m(_(i.prototype),"width",this),this._oWidth)},set:function(t){return this._graphicOverlay?this._graphicOverlay.width=t:x(_(i.prototype),"width",this._oWidth=t,this,!0)}},{key:"rotation",get:function(){return m(_(i.prototype),"rotation",this)},set:function(t){x(_(i.prototype),"rotation",t,this,!0),this._graphicOverlay&&(this._graphicOverlay.rotation=t)}},{key:"fontSize",get:function(){return this._fontSize},set:function(t){if(String(t).split(this._fontEx).length>1&&(t=Number(String(t).split(this._fontEx)[0])),this._fontSize=t,this._checkFontSize)this._checkScale();else if(this._locTextConf&&this._locTextConf[Hr.language]&&!this._graphicOverlay){var e=Hr.isScreenPortrait&&this._locTextConf[Hr.language].v_fontSize||this._locTextConf[Hr.language].fontSize;if(this._defaultFontSize){for(var i in this._defaultFontSize)this.textStyles[i].fontSize=e||String(this._defaultFontSize[i])+"px";this.dirty=!0,this.updateText()}else this.textStyles.default.fontSize=this._style.fontSize=e||String(this._fontSize)+"px",this.dirty=!0,this.updateText()}else this.textStyles.default.fontSize=String(this._fontSize)+this._fontEx,this.dirty=!0,this.updateText();this._graphicOverlay&&(this._graphicOverlay.width=Math.max(this._graphicOverlay.width,this._oWidth),this._graphicOverlay.height=Math.max(this._graphicOverlay.height,this._oHeight))}},{key:"oneLine",get:function(){return this._oneLine},set:function(t){this._oneLine=t,this._oneLine?(this.textStyles.default.wordWrap=!1,this.textStyles.default.wordWrapWidth=Number.MAX_VALUE,this._style.wordWrap=!1,this._style.wordWrapWidth=Number.MAX_VALUE):(this.textStyles.default.wordWrap=!0,this.textStyles.default.wordWrapWidth=this._maxWidth,this._style.wordWrap=!0,this._style.wordWrapWidth=this._maxWidth),this._checkFontSize?this._checkScale():(this.dirty=!0,this.updateText())}},{key:"oType",get:function(){return this._oType}},{key:"input",get:function(){return this._isCheckInput},set:function(t){this.input?this.interactive=t:t&&(this._isCheckInput=!0,this.interactive=!0,this.on("pointerdown",this._down,this),this.on("pointerup",this._up,this),this.on("pointerupoutside",this._upOutSide,this),this.on("pointerover",this._over,this),this.on("pointerout",this._out,this))}},{key:"drag",set:function(t){this.input||(this.input=!0),this._isUpdate||(this.isUpdate=!0),this._isDrag=t,this._listenMouseUp=t,this._listenMouseUp?Hr.mouse.addUpHandler(this._globalMouseUp,this):Hr.mouse.removeUpMouse(this._globalMouseUp,this),this._dragVertical=!0,this._dragHorizontal=!0}},{key:"allowHorizontalDrag",set:function(t){this._dragHorizontal=t}},{key:"allowVerticalDrag",set:function(t){this._dragVertical=t}},{key:"interactChild",set:function(t){this.interactiveChildren=t}},{key:"textMaxWidth",set:function(t){this._maxWidth=t,this._oneLine||(this.textStyles.default.wordWrapWidth=this._maxWidth,this._style.wordWrapWidth=this._maxWidth,this.dirty=!0,this.updateText()),this._checkFontSize?this._checkScale():(this.dirty=!0,this.updateText())}},{key:"textMaxHeight",set:function(t){this._maxHeight=t,this._checkFontSize?this._checkScale():(this.dirty=!0,this.updateText())}},{key:"soundUp",set:function(t){this._soundUp=t}},{key:"soundOver",set:function(t){this._soundOver=t}}]),i}(Hn),jn=function(t){d(i,t);var e=g(i);function i(t,n,s){var r;return l(this,i),(r=e.call(this,t,n,s))._oType=E.OMY_MULTI_STYLE_TEXT_NUMBER_FONT,r._value="0",r._valueBuffer=null,r._dollar=null,r._cent=null,r._newValue=null,r._incSecond=0,r._onCompleteInc=null,r._onStepInc=null,r._soundInc=null,r._specSymbol=null,r._zeroZeroType=!n.hasOwnProperty("zeroZeroType")||n.zeroZeroType,r._showCent=n.hasOwnProperty("showCent")?n.showCent:A.TEXT_NUMBER_SHOW_CENT,r._hideIfZero=!!n.hasOwnProperty("hideIfZero")&&n.hideIfZero,r._delaySymbol=n.hasOwnProperty("delaySymbol")?n.delaySymbol:".",r._simpleZero=!!n.hasOwnProperty("simpleZero")&&n.simpleZero,r._needNumberSpace=!!n.hasOwnProperty("needNumberSpace")&&n.needNumberSpace,r._lastText=n.hasOwnProperty("lastText")?n.lastText:"",r._firstText=n.hasOwnProperty("firstText")?n.firstText:"",t.length||(t=r._value),r.setNumbers(t),r}return c(i,[{key:"setNumbers",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(t<0)this._value="0",this.createText();else{if(t=Ft.roundNumber(t,100),e)return void(Number(this._value)!==t?(this._tween&&(this._tween.kill(),this._tween=null),this._tweenValue=this.value,this._newValue=String(Ft.roundNumber(t,100)),i=i||"Power0.easeNone",this._tween=Hr.add.tween(this,{_tweenValue:Ft.roundNumber(t,100)},this._incSecond,this._onFinishInc.bind(this),{onUpdate:this._onIncUpdate.bind(this),ease:i})):this._onCompleteInc&&this._onCompleteInc(this));this._tween&&(this._tween.kill(),this._tween=null),this._value=String(t),this.createText()}this.updateNumbers()}},{key:"_onFinishInc",value:function(){this._tween=null,this._onCompleteInc&&this._onCompleteInc(this)}},{key:"_onIncUpdate",value:function(){this._value=String(Ft.roundNumber(this._tweenValue,100)),this.createText(),this.updateNumbers(),this._onStepInc&&this._onStepInc(this._value)}},{key:"createText",value:function(){var t=this._value.split(".");this._zeroZeroType?t[1]=1===t.length?"00":1===t[1].length?t[1]+"0":t[1]:t[1]=1===t.length?"":1===t[1].length?t[1]+"0":t[1],this._dollar=this._needNumberSpace?Ft.convertNumb(Number(t[0])):t[0],this._cent=t[1],this._simpleZero&&(this._cent=""),t.length=0,t=null}},{key:"updateNumbers",value:function(){this._cent.length>0&&this._cent.length<=2&&(this._cent=this._delaySymbol+this._cent),this.text=this._firstText+this._dollar+(this._showCent?this._cent:"")+this._lastText,this._hideIfZero&&(0===this.value&&this.visible?this.visible=!1:this.visible||0===this.value||(this.visible=!0)),this._specSymbol&&(this._specSymbol.x=this.x+this.width*Math.abs(this.anchorX-1))}},{key:"kill",value:function(){return this._tween&&(this._tween.kill(),this._tween=null),m(_(i.prototype),"kill",this).call(this)}},{key:"destroy",value:function(){return this._value=null,this._dollar=null,this._cent=null,this._newValue=null,this._onCompleteInc=null,this._onStepInc=null,this._soundInc=null,this._specSymbol=null,this._delaySymbol=null,this._lastText=null,this._firstText=null,m(_(i.prototype),"destroy",this).call(this)}},{key:"stopInctAnimation",value:function(){this._tween&&(this._tween.kill(),this._tween=null,this._value=this._newValue,this.createText(),this.updateNumbers())}},{key:"pauseIncAnim",value:function(){this._tween&&this._tween.pause()}},{key:"continueIncAnim",value:function(){this._tween&&this._tween.resume()}},{key:"value",get:function(){return Number(this._value)}},{key:"specSymbol",set:function(t){this._specSymbol=t}},{key:"zeroZeroType",set:function(t){this._zeroZeroType=t}},{key:"onCompleteInc",set:function(t){this._onCompleteInc=t}},{key:"incSecond",get:function(){return this._incSecond},set:function(t){this._incSecond=t}},{key:"onStepInc",set:function(t){this._onStepInc=t}},{key:"soundInc",set:function(t){this._soundInc=t}},{key:"hideIfZero",set:function(t){this._hideIfZero=t,t&&0===this.value&&this.visible&&(this.visible=!1)}},{key:"delaySymbol",set:function(t){this._delaySymbol=t}},{key:"checkFontSize",get:function(){return this._checkFontSize},set:function(t){this._checkFontSize=t}},{key:"simpleZero",set:function(t){this._simpleZero=t}},{key:"lastText",set:function(t){this._lastText=t}},{key:"firstText",set:function(t){this._firstText=t}},{key:"showCent",set:function(t){this._showCent=t}}]),i}(Wn),Gn=function(t){d(i,t);var e=g(i);function i(t,n){var s,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];l(this,i),(s=e.call(this,t,n))._vertical=!0,s._property="y",s._target=null,s._minSlideValue=0,s._maxSlideValue=0,s._sliderWay=0,s._percent=0,s._currentData=0,s._startDragTarget=!1,r&&Hr.add.regDebugMode(f(s)),s._debugSlide=r,s._isBlock=!1;var o=s.getLocalBounds();return Hr.add.hintArea(f(s),{x:o.x-10,y:o.y-10,width:o.width+20,height:o.height+200},0),s.drag=!0,s.allowHorizontalDrag=!s._vertical,s.allowVerticalDrag=s._vertical,s.addDragUpdate(s._updateDragSlide,f(s)),s.addDragStop(s._onStopDrag,f(s)),s.buttonMode=!0,s}return c(i,[{key:"setSliderData",value:function(t,e){this._minSlideValue=t,this._maxSlideValue=e,this._sliderWay=this._maxSlideValue-this._minSlideValue,this._vertical?this.boundsDragRect(0,t,Number.MAX_VALUE,e):this.boundsDragRect(t,0,e,Number.MAX_VALUE)}},{key:"setTargetData",value:function(t,e){this._minTargetValue=t,this._maxTargetValue=e,this._targetWay=this._maxTargetValue-this._minTargetValue,this.updateSlidePos()}},{key:"forceUpdate",value:function(t){this._percent=Math.abs((t-this._minTargetValue)/this._targetWay),this[this._property]=this._minSlideValue+this._sliderWay*this._percent}},{key:"resetSlider",value:function(){this._percent=0,this[this._property]=this._minSlideValue+this._sliderWay*this._percent,this._target&&(this._target[this._property]=this._minTargetValue+this._targetWay*this._percent)}},{key:"updateSlidePos",value:function(){var t;this._target&&(t=this._target[this._property]>this._minTargetValue?this._minTargetValue:this._target[this._property]<this._maxTargetValue?this._maxTargetValue:this._target[this._property],this._percent=Math.abs((t-this._minTargetValue)/this._targetWay),this[this._property]=this._minSlideValue+this._sliderWay*this._percent,this[this._property]<this._minSlideValue?this[this._property]=this._minSlideValue:this[this._property]>this._maxSlideValue&&(this[this._property]=this._maxSlideValue),this._currentData=this._minTargetValue+this._targetWay*this._percent,this._debugSlide&&Hr.warn("updateSlidePos",this[this._property],this._target&&this._target[this._property]),this.emit("updating_target",this._currentData,this._percent))}},{key:"_updateDragSlide",value:function(){this._startDragTarget||this._onStartDragTarget(),this._percent=Math.abs((this[this._property]-this._minSlideValue)/this._sliderWay),this._currentData=this._minTargetValue+this._targetWay*this._percent,this._target&&(this._target[this._property]=this._currentData),this._debugSlide&&Hr.warn("_updateDragSlide",this._target&&this._target[this._property]),this.emit("updating",this._currentData,this._percent)}},{key:"_onStopDrag",value:function(){this.emit("stop",this._currentData,this)}},{key:"_onStopDragTarget",value:function(){var t={};t[this._property]=this._target[this._property]+((this._vertical?Hr.mouse.mouseY:Hr.mouse.mouseX)-this._saveMouse)/((Date.now()-this._dropTime)/100),t[this._property]>this._minTargetValue?t[this._property]=this._minTargetValue:t[this._property]<this._maxTargetValue&&(t[this._property]=this._maxTargetValue),Hr.add.tween(this._target,t,.2,this._onStopTween.bind(this))}},{key:"_onStopTween",value:function(){this._startDragTarget=!1}},{key:"_onStartDragTarget",value:function(){this._saveMouse=this._vertical?Hr.mouse.mouseY:Hr.mouse.mouseX,this._dropTime=Date.now(),this._startDragTarget=!0}},{key:"update",value:function(){this._startDragTarget&&this.updateSlidePos(),m(_(i.prototype),"update",this).call(this)}},{key:"addStopCallback",value:function(t,e){this.on("stop",t,e)}},{key:"addUpdateCallback",value:function(t,e){this.on("updating",t,e)}},{key:"addUpdateTargetCallback",value:function(t,e){this.on("updating_target",t,e)}},{key:"removeStopCallback",value:function(t,e){this.off("stop",t,e)}},{key:"removeUpdateCallback",value:function(t,e){this.off("updating",t,e)}},{key:"removeUpdateTargetCallback",value:function(t,e){this.off("updating_target",t,e)}},{key:"destroy",value:function(t){return this._target=null,this._property=null,m(_(i.prototype),"destroy",this).call(this,t)}},{key:"vertical",set:function(t){this._vertical=t,this._property=this._vertical?"y":"x",this.allowHorizontalDrag=!this._vertical,this.allowVerticalDrag=this._vertical,this._vertical?this.boundsDragRect(0,this._minSlideValue,Number.MAX_VALUE,this._maxSlideValue):this.boundsDragRect(this._minSlideValue,0,this._maxSlideValue,Number.MAX_VALUE)}},{key:"target",set:function(t){this._target=t,this._target.drag=!0,this._target.allowHorizontalDrag=!this._vertical,this._target.allowVerticalDrag=this._vertical,this._target.addDragStop(this._onStopDragTarget,this),this._target.addDragStart(this._onStartDragTarget,this)}},{key:"isBlock",get:function(){return this._isBlock},set:function(t){this._isBlock=t}},{key:"percent",get:function(){return this._percent}},{key:"inDown",get:function(){return this._startDragTarget}}]),i}(Vt);ai.registerPIXI(PIXI),a.registerPlugin(ai,In);var Kn=function(){function t(e){l(this,t),this._cache=e,this._assets=Hr.assets,this._multiResolutionsList=[]}return c(t,[{key:"formatObjectsByY",value:function(t){for(var e,i=NaN,n=Hr.isScreenPortrait,s=0;s<t.children.length;s++)(e=t.children[s]).json.format&&(isNaN(i)&&(i=e.y),e.y=i+((n&&e.json.hasOwnProperty("v_pos_dy")?e.json.v_pos_dy:0)||e.json.pos_dy||0),e.oType===E.OMY_CONTAINER?e.isAlign?(e.alignContainer(),e.y+=e.height*e.alignY,i=e.y+e.height*(1-e.alignY)):(this.formatObjectsByY(e),i=e.y+e.height):e.oType===E.OMY_SPRITE?(e.y+=e.height*e.anchorY,i=e.y+e.height*(1-e.anchorY)):i=e.y+e.height)}},{key:"parseJson",value:function(t){if(!Hr.isDesktop&&t){var e=Hr.OS.iPhone;for(var i in t)null!==t[i]&&(t.hasOwnProperty(i+"m")?t[i]=t[i+"m"]:t.hasOwnProperty("m_"+i)?t[i]=t["m_"+i]:e&&t.hasOwnProperty("ios_"+i)?t[i]=t["ios_"+i]:"object"!==h(t[i])||Array.isArray(t[i])||this.parseJson(t[i]));var n=t.entitiesm||t.m_entities||t.entities;if(n)for(var s=0;s<n.length;s++)"object"!==h(n[s])||Array.isArray(n[s])||this.parseJson(n[s])}}},{key:"createRevoltParticleEmitter",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",s=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:1,o=new Ee(n,s,r);return o.setXY(e,i),t&&t.addChild(o),o}},{key:"revoltParticleEmitter",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(e.hasOwnProperty("active")&&!e.active)return null;e=OMY.OMath.jsonCopy(e),i&&(e.revoltName=i);var n=this.createRevoltParticleEmitter(t,e.x,e.y,e.revoltName,!e.hasOwnProperty("autoStart")||e.autoStart,e.hasOwnProperty("scaleMod")?e.scaleMod:1);return n.json=e,n.name=e.name||"c_"+Ft.uniqueID(),e.scale?n.scale.set(e.scale):(e.scaleX&&(n.scaleX=e.scaleX),e.scaleY&&(n.scaleY=e.scaleY)),e.rotate&&(n.rotation=Ft.toRadians(e.rotate)),n.alpha=e.hasOwnProperty("alpha")?e.alpha:1,n.visible=!e.hasOwnProperty("visible")||e.visible,e.anchor&&n.anchor.set(e.anchor),(e.anchorX||e.anchorY)&&n.setAnchor(e.anchorX||0,e.anchorY||0),e.debug&&this.timer(.1,this.regDebugMode,this,0,!1,!0,0,[n]),n}},{key:"createRevoltParticleSequence",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,r=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1,a=new Oe(n,s,r,o);return a.setXY(e,i),t&&t.addChild(a),a}},{key:"revoltParticleSequence",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(e.hasOwnProperty("active")&&!e.active)return null;e=OMY.OMath.jsonCopy(e),i&&(e.revoltName=i);var n=this.createRevoltParticleSequence(t,e.x||0,e.y||0,e.revoltName,e.delay||0,!e.hasOwnProperty("autoStart")||e.autoStart,e.hasOwnProperty("scaleMod")?e.scaleMod:1);return n.json=e,n.name=e.name||"c_"+Ft.uniqueID(),e.scale?n.scale.set(e.scale):(e.scaleX&&(n.scaleX=e.scaleX),e.scaleY&&(n.scaleY=e.scaleY)),e.rotate&&(n.rotation=Ft.toRadians(e.rotate)),n.alpha=e.hasOwnProperty("alpha")?e.alpha:1,n.visible=!e.hasOwnProperty("visible")||e.visible,e.anchor&&n.anchor.set(e.anchor),(e.anchorX||e.anchorY)&&n.setAnchor(e.anchorX||0,e.anchorY||0),e.debug&&this.timer(.1,this.regDebugMode,this,0,!1,!0,0,[n]),n}},{key:"button",value:function(t){var e,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,h=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null,l=arguments.length>8&&void 0!==arguments[8]?arguments[8]:null,u=arguments.length>9&&void 0!==arguments[9]?arguments[9]:null,c=arguments.length>10&&void 0!==arguments[10]?arguments[10]:null,d=arguments.length>11&&void 0!==arguments[11]?arguments[11]:0;switch(t=t||E.OMY_BUTTON){case E.OMY_BUTTON:e=new Ht(r,o,a,h,l);break;case E.OMY_BUTTON_TWEEN:e=new Wt(r,o,a,h,l)}return e.setXY(n,s),u&&e.externalMethod(u,c),i&&i.addChild(e),d&&this.timer(.1,this.regDebugMode,this,0,!1,!0,0,[e]),e}},{key:"buttonJson",value:function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;if(i.hasOwnProperty("active")&&!i.active)return null;i=OMY.OMath.jsonCopy(i);var o=r||i.type,a=i.atlas||null;switch(o){case E.OMY_BUTTON:t=new Ht(i.out,a,i.over,i.down,i.block,i);break;case E.OMY_BUTTON_TWEEN:t=new Wt(i.out,a,i.over,i.down,i.block,i);break;case E.OMY_CHECK_BOX_TWEEN:t=new $t(i.out,a,i);break;case E.OMY_CHECK_BOX:t=new De(i.out,a,i.over,i.down,i.block,i);break;default:t=new r(i.out,a,i.over,i.down,i.block,i)}return t.json=i,t.name=i.name||"b_"+Ft.uniqueID(),t.setXY(i.x||0,i.y||0),t.rotation=Ft.toRadians(i.rotate)||0,t.alpha=i.hasOwnProperty("alpha")?i.alpha:1,t.visible=!i.hasOwnProperty("visible")||i.visible,i.scale?t.setScale(i.scale,i.scale):t.setScale(i.scaleX||1,i.scaleY||1),i.anchor&&t.anchor.set(i.anchor),(i.anchorX||i.anchorY)&&t.setAnchor(i.anchorX||0,i.anchorY||0),i.hintAreaRect&&this.hintArea(t,i.hintAreaRect,i.hintAreaRect.type,i.hintAreaRect.debug),i.label&&(t.label=this.textJson(null,i.label)),i.hintLabel&&(t.hintLabel=this.textJson(null,i.hintLabel)),i.oneClick&&(t.oneClick=i.oneClick),i.soundUp&&(t.soundUp=i.soundUp),i.soundOver&&(t.soundOver=i.soundOver),n&&t.externalMethod(n,s),e&&e.addChild(t),i.tint&&(t.tint=i.tint),i.debug&&this.timer(.1,this.regDebugMode,this,0,!1,!0,0,[t]),this.createEntities(t,i),t}},{key:"btnJson",value:function(t,e,i){if(t)if(e)if(i){if(i.prototype instanceof Ae)return new i(t,e=OMY.OMath.jsonCopy(e));Hr.error("Button class must be extended from OButtonMod")}else Hr.error("Button can not be created without buttonClass");else Hr.error("Button can not be created without configuration object");else Hr.error("Button can not be created without parent object")}},{key:"containerJson",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(e.hasOwnProperty("active")&&!e.active)return null;e=OMY.OMath.jsonCopy(e);var i=this.container(t,e.x,e.y,!1,!e.hasOwnProperty("interactiveChildren")||e.interactiveChildren);return i.json=e,i.name=e.name||"c_"+Ft.uniqueID(),e.scale?i.scale.set(e.scale):(e.scaleX&&(i.scaleX=e.scaleX),e.scaleY&&(i.scaleY=e.scaleY)),e.rotate&&(i.rotation=Ft.toRadians(e.rotate)),i.alpha=e.hasOwnProperty("alpha")?e.alpha:1,i.visible=!e.hasOwnProperty("visible")||e.visible,this.createEntities(i,e),e.hasOwnProperty("centered")&&e.centered&&i.setToCenter(),e.hasOwnProperty("align")&&i.setAlign(e.align),e.hasOwnProperty("alignContainer")&&i.createAlign(e.alignContainer),e.hasOwnProperty("anchor")&&i.setAnchor(e.anchor,e.anchor),(e.hasOwnProperty("anchorX")||e.hasOwnProperty("anchorY"))&&i.setAnchor(e.anchorX||0,e.anchorY||0),e.soundUp&&(i.soundUp=e.soundUp),e.soundOver&&(i.soundOver=e.soundOver),e.tint&&(i.tint=e.tint),e.debug&&this.timer(.1,this.regDebugMode,this,0,!1,!0,0,[i]),e.hasOwnProperty("interactive")&&(i.interactive=e.interactive),e.hasOwnProperty("cacheAsBitmap")&&this.timer(.3,(function(){i.cacheAsBitmap=e.cacheAsBitmap}),i),i}},{key:"divJson",value:function(t,e){throw new Error("pls, not use div container. Only normal")}},{key:"container",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,s=new zt;return s.setXY(e,i),t&&t.addChild(s),n&&this.timer(.1,this.regDebugMode,this,0,!1,!0,0,[s]),s}},{key:"div",value:function(){throw new Error("pls, not use div container. Only normal")}},{key:"particleContainer",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,s=arguments.length>4&&void 0!==arguments[4]&&arguments[4],r=new fe;return r.interactChild=s,r.setXY(e,i),t&&t.addChild(r),n&&this.timer(.1,this.regDebugMode,this,0,!1,!0,0,[r]),r}},{key:"particleContainerJson",value:function(t,e){e=OMY.OMath.jsonCopy(e);var i=this.particleContainer(t,e.x,e.y,e.debug,!e.hasOwnProperty("interactiveChildren")||e.interactiveChildren);return i.json=e,i.name=e.name||"cp_"+Ft.uniqueID(),e.scale?i.scale.set(e.scale):(e.scaleX&&(i.scaleX=e.scaleX),e.scaleY&&(i.scaleY=e.scaleY)),this.createEntities(i,e),e.rotate&&(i.rotation=Ft.toRadians(e.rotate)),i.alpha=e.hasOwnProperty("alpha")?e.alpha:1,i.visible=!e.hasOwnProperty("visible")||e.visible,e.anchor&&i.anchor.set(e.anchor),(e.anchorX||e.anchorY)&&i.setAnchor(e.anchorX||0,e.anchorY||0),e.hasOwnProperty("interactive")&&(i.interactive=e.interactive),i}},{key:"sprite",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,o=new Vt(n,s);return o.setXY(e,i),r&&this.timer(.1,this.regDebugMode,this,0,!1,!0,0,[o]),"string"==typeof n&&n&&Hr.loc.checkLocalisation(n)&&o.onLocalisation(n),t&&t.addChild(o),o}},{key:"spriteJson",value:function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(i.hasOwnProperty("active")&&!i.active)return null;i=OMY.OMath.jsonCopy(i);var n=new Vt(i.texture,i.atlas||null);return n.json=i,n.name=i.name||"s_"+(i.texture+"_"||"")+Ft.uniqueID(),i.texture&&Hr.loc.checkLocalisation(i.texture)&&n.onLocalisation(i.texture),(null===(t=n.json)||void 0===t?void 0:t.loc)&&n.addLocSprite(),n.setXY(i.x||0,i.y||0),i.scale?n.scale.set(i.scale):(i.scaleX&&(n.scaleX=i.scaleX),i.scaleY&&(n.scaleY=i.scaleY)),i.rotate&&(n.rotation=Ft.toRadians(i.rotate)),n.alpha=i.hasOwnProperty("alpha")?i.alpha:1,n.visible=!i.hasOwnProperty("visible")||i.visible,i.anchor&&n.anchor.set(i.anchor),(i.anchorX||i.anchorY)&&n.setAnchor(i.anchorX||0,i.anchorY||0),i.width&&(n.width=i.width),i.height&&(n.height=i.height),i.soundUp&&(n.soundUp=i.soundUp),i.soundOver&&(n.soundOver=i.soundOver),i.tint&&(n.tint=i.tint),i.hintAreaRect&&this.hintArea(n,i.hintAreaRect,i.hintAreaRect.type,i.hintAreaRect.debug),i.debug&&this.timer(.1,this.regDebugMode,this,0,!1,!0,0,[n]),e&&e.addChild(n),this.createEntities(n,i),i.hasOwnProperty("interactive")&&(n.interactive=i.interactive),n}},{key:"_isArray",value:function(t){return"[object Array]"===Object.prototype.toString.call(t)}},{key:"emitterJson",value:function(t,e){e||Hr.error("This object have not json data. Name:emitterJson"),t||Hr.error("Need to add parent. Name:emitterJson");var i=null;if("object"===h(e)&&Array.isArray(e)){i=[];for(var n=0;n<e.length;n++)i.push(this._createEmitter(t,e[n]))}else i=this._createEmitter(t,e);return i}},{key:"_createEmitter",value:function(t,e){var i,n,s,r;if(e=OMY.OMath.jsonCopy(e),n=Hr.assets.getJSON(e.config),s=e.type||"none",n||Hr.error("This object have not config data. Name:particle",e),"anim"===s)(i={}).framerate=e.framerate||60,i.loop=e.loop||!1,i.textures=Hr.assets.getAnimation(e.texture);else if(e.hasOwnProperty("texture"))if("object"===h(e.texture)&&Array.isArray(e.texture)){i=[];for(var o=0;o<e.texture.length;o++)i.push(Hr.assets.getTexture(e.texture[o],e.atlas||null))}else i=Hr.assets.getTexture(e.texture,e.atlas||null);return n=PIXI.particles.upgradeConfig(n,i),r=new PIXI.particles.Emitter(t,n),"path"===s?r.particleConstructor=PIXI.particles.PathParticle:"anim"===s&&(r.particleConstructor=PIXI.particles.AnimatedParticle),r}},{key:"particleJson",value:function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,i=arguments.length>1?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return i||Hr.error("This object have not json data. Name:particleJson"),i=OMY.OMath.jsonCopy(i),(t=n?new n(i.maxParticles||1500,i.properties||null,i.batchSize||16384,i.autoResize||!1):new ve(i.maxParticles||1500,i.properties||null,i.batchSize||16384,i.autoResize||!1)).addEmitter(this.emitterJson(t,i.emitter)),t.setXY(i.x||0,i.y||0),t.visible=!i.hasOwnProperty("visible")||i.visible,t.alpha=i.hasOwnProperty("alpha")?i.alpha:1,i.scale?t.scale.set(i.scale):(i.scaleX&&(t.scaleX=i.scaleX),i.scaleY&&(t.scaleY=i.scaleY)),this.createEntities(t,i),i.debug&&this.timer(.1,this.regDebugMode,this,0,!1,!0,0,[t]),i.hasOwnProperty("interactive")&&(t.interactive=i.interactive),e&&e.addChild(t),t}},{key:"neutrinoParticlesJson",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1?arguments[1]:void 0;if(e||Hr.error("This object have not json data. Name:neutrinoParticlesJson"),e.hasOwnProperty("active")&&!e.active)return null;e=OMY.OMath.jsonCopy(e);var i=new Xn(e);if(e.hasOwnProperty("add_particles"))for(var n=0;n<e.add_particles.length;n++)i.addEmitter(e.add_particles[n]);return i.setXY(e.x||0,e.y||0),i.visible=!e.hasOwnProperty("visible")||e.visible,i.alpha=e.hasOwnProperty("alpha")?e.alpha:1,i.name=e.name||"np_"+Ft.uniqueID(),e.scale?i.scale.set(e.scale):(e.scaleX&&(i.scaleX=e.scaleX),e.scaleY&&(i.scaleY=e.scaleY)),e.rotate&&(i.rotation=Ft.toRadians(e.rotate)),e.debug&&this.timer(.1,this.regDebugMode,this,0,!1,!0,0,[i]),t&&t.addChild(i),i}},{key:"sliderJson",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1?arguments[1]:void 0;e||Hr.error("This object have not json data. Name:sliderJson"),e=OMY.OMath.jsonCopy(e);var i=new Gn(e.texture,e.atlas||null,e.debug);return i.json=e,i.name=e.name||"sl_"+Ft.uniqueID(),i.setXY(e.x||0,e.y||0),e.scale?i.scale.set(e.scale):(e.scaleX&&(i.scaleX=e.scaleX),e.scaleY&&(i.scaleY=e.scaleY)),e.rotate&&(i.rotation=Ft.toRadians(e.rotate)),i.alpha=e.hasOwnProperty("alpha")?e.alpha:1,i.visible=!e.hasOwnProperty("visible")||e.visible,e.hintAreaRect&&this.hintArea(i,e.hintAreaRect,e.hintAreaRect.type,e.hintAreaRect.debug),e.anchor&&i.anchor.set(e.anchor),(e.anchorX||e.anchorY)&&i.setAnchor(e.anchorX||0,e.anchorY||0),e.hasOwnProperty("vertical")&&(i.vertical=e.vertical),e.hasOwnProperty("minSlideValue")&&i.setSliderData(e.minSlideValue,e.maxSlideValue),e.hasOwnProperty("minTargetValue")&&i.setTargetData(e.minTargetValue,e.maxTargetValue),e.soundUp&&(i.soundUp=e.soundUp),e.soundOver&&(i.soundOver=e.soundOver),t&&t.addChild(i),i}},{key:"textJson",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";if(e){if(e.hasOwnProperty("active")&&!e.active)return null;((e=OMY.OMath.jsonCopy(e)).fontFamily||e.fontSize)&&(e.font=e.font||{},e.font.name=e.fontFamily?"".concat(e.fontFamily):e.fontName?"".concat(e.fontName):null,e.font.size=e.fontSize?"".concat(e.fontSize):10);var n=null,s=e.type||E.OMY_TEXT_FONT,r=i.length?i:e.text?e.text:e.locConst?e.locConst:"0";switch(s){case E.OMY_TEXT_FONT:e.hasOwnProperty("font")&&(e.fontFamily=e.font.name,e.fontSize=e.font.size,delete e.font),n=new Nt(r,e);break;case E.OMY_TEXT_NUMBER_FONT:e.hasOwnProperty("font")&&(e.fontFamily=e.font.name,e.fontSize=e.font.size,delete e.font),n=new Xt(r,e);break;case E.OMY_TEXT_BITMAP:e.hasOwnProperty("font")&&(e.fontName=e.font.name,e.fontSize=e.font.size,delete e.font),n=new Rt(r,e);break;case E.OMY_TEXT_NUMBER_BITMAP:e.hasOwnProperty("font")&&(e.fontName=e.font.name,e.fontSize=e.font.size,delete e.font),n=new Yt(r,e);break;case E.OMY_TEXT_FONT_INPUT:n=new Yn(r,e);break;case E.OMY_MULTI_STYLE_TEXT_FONT:e.hasOwnProperty("default")&&(e.fontFamily=e.default.fontFamily,e.fontSize=e.default.fontSize),n=new Wn(r,e);break;case E.OMY_MULTI_STYLE_TEXT_NUMBER_FONT:e.hasOwnProperty("default")&&(e.fontFamily=e.default.fontFamily,e.fontSize=e.default.fontSize),n=new jn(r,e)}return n.name=e.name||"t_"+Ft.uniqueID(),n.setXY(e.x||0,e.y||0),e.rotate&&(n.rotation=Ft.toRadians(e.rotate)),e.scale?n.scale.set(e.scale):(e.scaleX&&(n.scaleX=e.scaleX),e.scaleY&&(n.scaleY=e.scaleY)),n.alpha=e.hasOwnProperty("alpha")?e.alpha:1,n.visible=!e.hasOwnProperty("visible")||e.visible,e.soundUp&&(n.soundUp=e.soundUp),e.soundOver&&(n.soundOver=e.soundOver),e.debug&&this.timer(.1,this.regDebugMode,this,0,!1,!0,0,[n]),this.createEntities(n,e),t&&t.addChild(n),e.splitInsideObj&&(n.splitInsideText=n.getChildByName(e.splitInsideObj)),e.splitObj&&t&&(n.splitText=t.getChildByName(e.splitObj)),e.hintAreaRect&&this.hintArea(n,e.hintAreaRect,e.hintAreaRect.type,e.hintAreaRect.debug),n}Hr.error("This object have not json data.")}},{key:"actorJson",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(!e)return Hr.error("This object have not json data. Name:actor"),null;if(e.hasOwnProperty("active")&&!e.active)return null;var i,n=(e=OMY.OMath.jsonCopy(e)).cacheName||e.nameAnimation,s=e.nameAnimation;switch(e.type){case E.OMY_ACTOR:s&&s.length||Hr.error("This object have not texture.",e);var r=Hr.assets.getAnimation(s);if(!r)return Hr.warn(n+"->"+s+" animation will not be added because of missed textures data"),void Hr.log(e);if((i=this._cache.getActorAtlas(n,r,s)).fps=e.fps||Hr.fps,i.active){if(e.animations)for(var o,a=0;a<e.animations.length;a++)o=e.animations[a],i.addAnimation(o.name,Hr.assets.getAnimation(o.nameAnimation));e.playList&&i.addPlayList(e.playList),e.framesAnim&&i.addFramesList(e.framesAnim)}else i.revive();break;case E.OMY_ACTOR_SPINE:e.textures||Hr.error("This object have not texture.",e),i=new pe(Hr.assets.getSpineData(e.textures)),e.custom_a_name&&i.changeAnimation(e.custom_a_name),e.skin&&i.setSkin(e.skin),e.hasOwnProperty("destroyOnKill")&&(i.destroyOnKill=e.destroyOnKill)}return i.json=e,i.name=e.name||"a_"+Ft.uniqueID(),i.speed=e.speed||1,e.totalLoop&&(i.totalLoop=e.totalLoop),i.setXY((e.x||0)+(e.dx||0),(e.y||0)+(e.dy||0)),e.hasOwnProperty("scale")?i.scale.set(e.scale):(e.hasOwnProperty("scaleX")&&(i.scaleX=e.scaleX),e.hasOwnProperty("scaleY")&&(i.scaleY=e.scaleY)),e.hasOwnProperty("anchor")&&i.anchor.set(e.anchor),(e.hasOwnProperty("anchorX")||e.hasOwnProperty("anchorY"))&&i.setAnchor(e.anchorX||0,e.anchorY||0),e.hasOwnProperty("rotate")&&(i.rotation=Ft.toRadians(e.rotate)),i.alpha=e.hasOwnProperty("alpha")?e.alpha:1,i.visible=!e.hasOwnProperty("visible")||e.visible,e.reverse&&i.reverse(),e.debug&&this.timer(.1,this.regDebugMode,this,0,!1,!0,0,[i]),t&&t.addChild(i),e.play&&i.gotoAndPlay(0,e.playLoop),this.createEntities(i,e),i}},{key:"createTexts",value:function(t,e){for(var i,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"t_",r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=n-1||0;e[s+String(++o)];)(i=this.textJson(t,e[s+String(o)])).configName=s+String(o),i.name||(i.name=s+String(o)),r&&r(i);r=null,t=null,e=null}},{key:"createSprites",value:function(t,e){for(var i,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"i_",r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,o=n-1||0;e[s+String(++o)];)(i=this.spriteJson(t,e[s+String(o)])).configName=s+String(o),i.name||(i.name=s+String(o)),r&&r(i);r=null,t=null,e=null,i=null}},{key:"createEntities",value:function(t,e){if(e)for(var i,n=(e=Array.isArray(e)?e:e.entities)?e.length:0,s=0;s<n;s++){var r=e[s];this.parseJson(r);var o=r.type;r.hasOwnProperty("isMobile")&&(r.isMobile&&Hr.isDesktop||!r.isMobile&&!Hr.isDesktop)||(Ft.inArray([E.OMY_SPRITE],o)?(i=this.spriteJson(t,r),r.hasOwnProperty("isMask")&&this._createMask(t,i,r)):Ft.inArray([E.OMY_CONTAINER],o)?this.containerJson(t,r):Ft.inArray([E.OMY_PARTICLE_CONTAINER],o)?this.particleContainerJson(t,r):Ft.inArray([E.OMY_PARTICLE],o)?this.particleJson(t,r):Ft.inArray([E.OMY_NEUTRINO_PARTICLES],o)?this.neutrinoParticlesJson(t,r):Ft.inArray([E.OMY_TEXT_FONT,E.OMY_TEXT_FONT_INPUT,E.OMY_TEXT_NUMBER_FONT,E.OMY_TEXT_BITMAP,E.OMY_TEXT_NUMBER_BITMAP,E.OMY_MULTI_STYLE_TEXT_FONT,E.OMY_MULTI_STYLE_TEXT_NUMBER_FONT],o)?this.textJson(t,r):Ft.inArray([E.OMY_ACTOR,E.OMY_ACTOR_SPINE],o)?this.actorJson(t,r):Ft.inArray([E.OMY_BUTTON,E.OMY_BUTTON_TWEEN,E.OMY_CHECK_BOX_TWEEN,E.OMY_CHECK_BOX],o)?this.buttonJson(t,r):Ft.inArray([E.OMY_RECT],o)?(i=this.rectJson(t,r),r.hasOwnProperty("isMask")&&this._createMask(t,i,r)):Ft.inArray([E.OMY_REVOLT_EMMITER],o)?this.revoltParticleEmitter(t,r):Ft.inArray([E.OMY_REVOLT_SEQUENCE],o)?this.revoltParticleSequence(t,r):Ft.inArray([E.OMY_SLIDER],o)?this.sliderJson(t,r):Ft.inArray([E.OMY_GRAPHIC],o)?(i=this.graphicJson(t,r),r.hasOwnProperty("isMask")&&this._createMask(t,i,r)):(Hr.warn("Unknown type "+o),Hr.log(r)))}}},{key:"_createMask",value:function(t,e,i){Boolean(i.edit)||Boolean(i.debug)||i.hasOwnProperty("masked")&&t.getChildByName(i.masked)&&(t.getChildByName(i.masked).mask=e)}},{key:"tween",value:function(t,e,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:void 0;if(n&&(e.onComplete=n),s)for(var h in s)e[h]=s[h];return r?(e.duration=i,r.to(t,e,o)):a.to(t,i,e)}},{key:"tweenTimeline",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return t=t||{},e&&(t.defaults=e),a.timeline(t)}},{key:"timer",value:function(t,e,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,s=arguments.length>4&&void 0!==arguments[4]&&arguments[4],r=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:[],h=new Jt(t=t||1e-7);return h.loop=s,h.on(e,i,a),h.expire=r,h.repeat=n,h.delay=o,Hr.game.addNextTickUpdate(h.start,h),h}},{key:"graphic",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=new Qt;return n.x=e,n.y=i,t&&t.addChild(n),n}},{key:"rectJson",value:function(t,e){if(!e)return Hr.error("Missed configuration object for rectJson"),null;if(e.hasOwnProperty("active")&&!e.active)return null;e=OMY.OMath.jsonCopy(e);var i=new Qt;i.json=e;var n=e.hasOwnProperty("alpha")?e.alpha:1;return i.beginFill(e.color||0,n),i.drawRect(0,0,e.width||1,e.height||1),i.endFill(),i.x=e.x||0,i.y=e.y||0,i.name=e.name||"r_"+Ft.uniqueID(),t&&t.addChild(i),e.soundUp&&(i.soundUp=e.soundUp),e.soundOver&&(i.soundOver=e.soundOver),i.visible=!e.hasOwnProperty("visible")||e.visible,e.debug&&this.timer(.1,this.regDebugMode,this,0,!1,!0,0,[i]),i}},{key:"graphicJson",value:function(t,e){if(!e)return Hr.error("Missed configuration object for rectJson"),null;if(e.hasOwnProperty("active")&&!e.active)return null;e=OMY.OMath.jsonCopy(e);var i=new Qt;return i.json=e,i.drawByJson(),i.x=e.x||0,i.y=e.y||0,i.name=e.name||"r_"+Ft.uniqueID(),t&&t.addChild(i),e.soundUp&&(i.soundUp=e.soundUp),e.soundOver&&(i.soundOver=e.soundOver),i.visible=!e.hasOwnProperty("visible")||e.visible,e.debug&&this.timer(.1,this.regDebugMode,this,0,!1,!0,0,[i]),i}},{key:"graphicRectTexture",value:function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:16777215;return(t=new Qt).position.set(0,0),t.beginFill(s,n),t.drawRect(0,0,e,i),t.endFill(),t}},{key:"generateTextureFrom",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];(e=e||{}).hasOwnProperty("resolution")&&(e.resolution="boolean"==typeof e.resolution?PIXI.settings.RESOLUTION:PIXI.settings.RESOLUTION+e.resolution),e.width=t.width,e.height=t.height;var s=PIXI.RenderTexture.create(e);if(n){t.updateTransform();var r=t.getLocalBounds();t.setTransform();var o=new PIXI.Matrix(t.scaleX,0,0,t.scaleY,Math.abs(r.x),Math.abs(r.y));Hr.renderer.render(t,{renderTexture:s,clear:!0,transform:o})}else Hr.renderer.render(t,s);return i&&PIXI.Texture.addToCache(s,i),s}},{key:"tint",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1771267;return this.graphicRectTexture(Hr.WIDTH,Hr.HEIGHT,t,e)}},{key:"point",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return new Zt(t,e)}},{key:"maskRectJson",value:function(t,e){return this.maskRect(t,e.x,e.y,e.width,e.height,e.debug)}},{key:"maskRect",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:100,s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:100,r=arguments.length>5&&void 0!==arguments[5]&&arguments[5],o=this.graphicRectTexture(n,s);return o.x=e,o.y=i,t&&t.addChild(o),o.interactChild=!1,o.interactive=!1,r&&(this.timer(.1,this.regDebugMode,this,0,!1,!0,0,[o]),2!==Number(r))?null:o}},{key:"hitAreaJson",value:function(t,e){return this.hintArea(t,e,e.type,e.debug)}},{key:"hintArea",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],s=null;if(n){var r=new Qt;switch(r.beginFill(16777215,.3),i){case 0:r.drawRect(0,0,e.width,e.height);break;case 1:r.drawCircle(0,0,e.radius);break;case 2:r.drawEllipse(0,0,e.width,e.height);break;case 3:r.drawPolygon(e.points);break;case 4:r.drawRoundedRect(0,0,e.width,e.height,e.radius)}r.endFill(),r.setXY(e.x,e.y),t.addChild(r),this.timer(.1,this.regDebugMode,this,0,!1,!0,0,[r])}switch(i){case 0:s=new PIXI.Rectangle(e.x,e.y,e.width,e.height);break;case 1:s=new PIXI.Circle(e.x,e.y,e.radius);break;case 2:s=new PIXI.Ellipse(e.x,e.y,e.width,e.height);break;case 3:s=new PIXI.Polygon(e.points);break;case 4:s=new PIXI.RoundedRectangle(e.x,e.y,e.width,e.height,e.radius)}return t.hitArea=s,s}},{key:"regDebugMode",value:function(t){if(!t._inDebug){console.error("regDebugMode",t.name,t.texture,t.text,"\n",t),Hr.info("Keys:\nKey.A, Key.S, Key.W, Key.D - move object;\nKey.Q, Key.E - scale (x&y) object;\nKey.R - on/off visible;\nKey.Z, Key.X - width;\nKey.C, Key.V - height;\nKey.B, Key.N - angle;\nKey.1 - log json;\nKey.2 - log text;\nKey.3 - save json;"),t._inDebug=!0,t.aa_isRegOnDebug=!0,t.input=!0,t.logInfo=function(){var e,i;console.log("**********start***********"),console.log('"x":'.concat(Ft.int(this.x),', "y":').concat(Ft.int(this.y),", - position"));var n=this.x-this._saveX+((null===(e=this.json)||void 0===e?void 0:e.dx)||0),s=this.y-this._saveY+((null===(i=this.json)||void 0===i?void 0:i.dy)||0);console.log('"dx":'.concat(Ft.int(n),', "dy":').concat(Ft.int(s),", - position dx"));var r=Hr.scaleManager.isScreenPortrait?"v_":"m_";!Hr.isDesktop&&console.log('"'.concat(r,'x":').concat(Ft.int(this.x),', "').concat(r,'y":').concat(Ft.int(this.y),", - position"));var o=Ft.roundNumber(this.scaleX,1e3),a=Ft.roundNumber(this.scaleY,1e3);console.log('scale "scaleX":'+o+', "scaleY":'+a+', "width":'+Ft.int(this.width)+', "height":'+Ft.int(this.height));var h=Ft.roundNumber(this.rotation,100);console.log("rotation:"+h+' "rotate":'+Ft.int(Ft.toDegrees(this.rotation))),t.oType===E.OMY_ACTOR&&console.log("current frame",this.currentFrame),t.oType&&-1!==t.oType.indexOf("text")&&(console.log("font size",this.fontSize+(t._fontEx?t._fontEx:"")),console.log("text",this.text)),console.info(this.name,this.texture,this.text,"\n",this),console.log("**********end***********")},t.logJson=function(){this.json&&(console.warn("type:",this.oType,"name:",this.name),Hr.add.debugLogging(JSON.stringify(this.json)))},t.saveJson=function(){if(this.json){var t=Hr.isDesktop?"":Hr.scaleManager.isScreenPortrait?"v_":"m_";(this.json.x||this.json.y)&&(this.json[t+"x"]=this.x,this.json[t+"y"]=this.y),console.group("o ==> saveJson: name:",this.name),console.log("this.alpha",this.alpha),console.log("scaleX",this.scale.x),console.log("scaleY",this.scale.y),console.log("width",this.width),console.log("height",this.height),console.log("rotate",this.rotation),1!==this.alpha&&(this.json.alpha=this.alpha),1===this.scale.x&&1===this.scale.y||(this.scale.x===this.scale.y?this.json[t+"scale"]=Ft.roundNumber(this.scale.x,100):(1!==this.scale.x&&(this.json[t+"scaleX"]=Ft.roundNumber(this.scale.x,100)),1!==this.scale.y&&(this.json[t+"scaleY"]=Ft.roundNumber(this.scale.y,100)))),this.json[t+"width"]&&(this.json[t+"width"]=this.width),this.json[t+"height"]&&(this.json[t+"height"]=this.height),this.json[t+"rotate"]&&(this.json[t+"rotate"]=this.rotation),this.json.fontSize&&(this.json.fontSize=this.fontSize),console.groupEnd()}},t.removeFromDebug=function(){this.aa_isRegOnDebug=!1},Hr.keys.registerFunction(Bt.DELETE,t.removeFromDebug,t),Hr.keys.registerFunction(Bt._1,t.logInfo,t),Hr.keys.registerFunction(Bt._2,t.logJson,t),Hr.keys.registerFunction(Bt._3,t.saveJson,t);var e=function(t,e,i,n){console.log('"x":'.concat(Ft.int(t),', "y":').concat(Ft.int(e),', "dx":').concat(Ft.int(i),', "dy":').concat(Ft.int(n),", - position"));var s=Hr.scaleManager.isScreenPortrait?"v_":"m_";!Hr.isDesktop&&console.log('"'.concat(s,'x":').concat(Ft.int(t),', "').concat(s,'y":').concat(Ft.int(e),', "').concat(s,'dx":').concat(Ft.int(i),', "').concat(s,'dy":').concat(Ft.int(n),", - position"))};if(t.oType&&-1!==t.oType.indexOf("text")&&(Hr.info("Keys:\nKey.O - font size -;\nKey.P - font size +;\nKey.L - field scale x +;\nKey.K - field scale x -;\nKey.J - field scale y +;\nKey.H - field scale y -"),t.checkFontSize=!1,t.onFontSizeInc=function(){this.fontSize++,console.log("font size",this.fontSize+(t._fontEx?t._fontEx:""))},t.onFontSizeDec=function(){this.fontSize--,console.log("font size",this.fontSize+(t._fontEx?t._fontEx:""))},Hr.keys.registerFunction(Bt.P,t.onFontSizeInc,t),Hr.keys.registerFunction(Bt.O,t.onFontSizeDec,t),t.onScaleTextX=function(){Hr.keys.isDown(Bt.K)&&(this.scale.x-=.01),Hr.keys.isDown(Bt.L)&&(this.scale.x+=.01);var t=Ft.roundNumber(this.scale.x,1e3);console.log('scale "scaleX":'+t)},Hr.keys.registerFunction(Bt.L,t.onScaleTextX,t),Hr.keys.registerFunction(Bt.K,t.onScaleTextX,t),t.onScaleTextY=function(){Hr.keys.isDown(Bt.H)&&(this.scale.y-=.01),Hr.keys.isDown(Bt.J)&&(this.scale.y+=.01);var t=Ft.roundNumber(this.scale.y,1e3);console.log('scale "scaleY":'+t)},Hr.keys.registerFunction(Bt.J,t.onScaleTextY,t),Hr.keys.registerFunction(Bt.H,t.onScaleTextY,t),this.timer(.1,t.drawDebugRect,t)),t.oType&&-1!==t.oType.indexOf("actor")&&(Hr.info("Keys:\nKey.T - play/stop;\n"),t.onPlayDebug=function(){this.playing?this.stop():this.play(!0)},Hr.keys.registerFunction(Bt.T,t.onPlayDebug,t),t.oType===E.OMY_ACTOR_SPINE&&(Hr.info("Keys:\nKey.Y - gotoAndStop 0;\nKey.L - field scale x +;\nKey.K - field scale x -;\nKey.O - field scale y +;\nKey.P - field scale y -"),t.onGoFirstDebug=function(){this.reset(),this.gotoAndStop(0)},Hr.keys.registerFunction(Bt.Y,t.onGoFirstDebug,t),t.onScaleTextX=function(){Hr.keys.isDown(Bt.K)&&(this.scale.x-=.005),Hr.keys.isDown(Bt.L)&&(this.scale.x+=.005);var t=Ft.roundNumber(this.scale.x,1e3);console.log('scale "scaleX":'+t)},Hr.keys.registerFunction(Bt.L,t.onScaleTextX,t),Hr.keys.registerFunction(Bt.K,t.onScaleTextX,t),t.onScaleTextY=function(){Hr.keys.isDown(Bt.O)&&(this.scale.y-=.005),Hr.keys.isDown(Bt.P)&&(this.scale.y+=.005);var t=Ft.roundNumber(this.scale.y,1e3);console.log('scale "scaleY":'+t)},Hr.keys.registerFunction(Bt.O,t.onScaleTextY,t),Hr.keys.registerFunction(Bt.P,t.onScaleTextY,t)),t.oType===E.OMY_ACTOR&&(Hr.info("Keys:\nKey.H - prev frame;\nKey.J - next frame;\nKey.Y - gotoAndStop 0;\nKey.U - gotoAndStop last\nKey.L - field scale x +;\nKey.K - field scale x -;\nKey.O - field scale y +;\nKey.P - field scale y -"),t.onGoLastDebug=function(){this.gotoAndStop(this.totalFrames-1)},Hr.keys.registerFunction(Bt.U,t.onGoLastDebug,t),t.onPlayNext=function(){this.next(),console.log("current frame",this.currentFrame)},t.onPlayPrevious=function(){this.previous(),console.log("current frame",this.currentFrame)},Hr.keys.registerFunction(Bt.H,t.onPlayPrevious,t),Hr.keys.registerFunction(Bt.J,t.onPlayNext,t),t.onGoFirstDebug=function(){this.gotoAndStop(0)},Hr.keys.registerFunction(Bt.Y,t.onGoFirstDebug,t),t.onScaleTextX=function(){Hr.keys.isDown(Bt.K)&&(this.scale.x-=.01),Hr.keys.isDown(Bt.L)&&(this.scale.x+=.01);var t=Ft.roundNumber(this.scale.x,1e3);console.log('scale "scaleX":'+t)},Hr.keys.registerFunction(Bt.L,t.onScaleTextX,t),Hr.keys.registerFunction(Bt.K,t.onScaleTextX,t),t.onScaleTextY=function(){Hr.keys.isDown(Bt.O)&&(this.scale.y-=.01),Hr.keys.isDown(Bt.P)&&(this.scale.y+=.01);var t=Ft.roundNumber(this.scale.y,1e3);console.log('scale "scaleY":'+t)},Hr.keys.registerFunction(Bt.O,t.onScaleTextY,t),Hr.keys.registerFunction(Bt.P,t.onScaleTextY,t))),t.oType&&-1!==t.oType.indexOf("revolt")&&(Hr.info("Keys:\nKey.T - play again;\n"),t.needPlayAgain=function(){this.kill();try{this.revive()}catch(t){}this.revive(),console.log("play from beginning")},Hr.keys.registerFunction(Bt.T,t.needPlayAgain,t)),t.oType&&-1!==t.oType.indexOf("graphic")&&(Hr.info("Keys:\nKey.T - redraw graphic;\nKey.Y - -1 for radius;\nKey.U - +1 for radius;\n"),t.renderNewGraphic=function(){this.drawByJson(!0),console.log("angle radius",this.json.radius),console.log("redraw graphic")},Hr.keys.registerFunction(Bt.T,t.renderNewGraphic,t),t.radiusDown=function(){this.json.hasOwnProperty("radius")||(this.json.radius=0),this.json.radius--,console.log("up angle radius",this.json.radius)},Hr.keys.registerFunction(Bt.Y,t.radiusDown,t),t.radiusUp=function(){this.json.hasOwnProperty("radius")||(this.json.radius=0),this.json.radius++,console.log("up angle radius",this.json.radius)},Hr.keys.registerFunction(Bt.U,t.radiusUp,t)),t.oType&&t.oType===E.OMY_NEUTRINO_PARTICLES&&(Hr.info("Keys:\nKey.T - stop particles;\nKey.Y - play particles;\nKey.U - restart particles;\n"),t.onStopNeutrino=function(){this.stop(),console.log("stop particles")},Hr.keys.registerFunction(Bt.T,t.onStopNeutrino,t),t.onPlayNeutrino=function(){this.play(),console.log("play particles")},Hr.keys.registerFunction(Bt.Y,t.onPlayNeutrino,t),t.onResetNeutrino=function(){this.restart(),console.log("restart particles")},Hr.keys.registerFunction(Bt.U,t.onResetNeutrino,t)),t.onHide=function(){this.visible=!this.visible,console.log("visible:",this.visible)},Hr.keys.registerFunction(Bt.R,t.onHide,t),t._saveX=t.x,t._saveY=t.y,t.onMove=function(){Hr.keys.isDown(Bt.A)&&(this.x-=1),Hr.keys.isDown(Bt.D)&&(this.x+=1),Hr.keys.isDown(Bt.W)&&(this.y-=1),Hr.keys.isDown(Bt.S)&&(this.y+=1);var t=this.x,i=this.y,n=t-this._saveX,s=i-this._saveY;e(t,i,n,s)},Hr.keys.registerFunction(Bt.A,t.onMove,t),Hr.keys.registerFunction(Bt.S,t.onMove,t),Hr.keys.registerFunction(Bt.W,t.onMove,t),Hr.keys.registerFunction(Bt.D,t.onMove,t),t.voidMethod=function(){},t.onStartDr=function(){var t=this.x,e=this.y;this._saveX=t,this._saveY=e,console.log('start drag "x":'+Ft.int(t)+', "y":'+Ft.int(e))},t.onUptDr=function(){var t=this.x,i=this.y,n=t-this._saveX,s=i-this._saveY;e(t,i,n,s)},t.hasOwnProperty("externalMethod")&&(t.addUp(t.voidMethod,t),t.addDragUpdate(t.onUptDr,t)),t.drag=!0,t.onAngle=function(){Hr.keys.isDown(Bt.B)&&(this.rotation-=.01),Hr.keys.isDown(Bt.N)&&(this.rotation+=.01);var t=Ft.roundNumber(this.rotation,100);console.log("rotation:"+t+' "rotate":'+Ft.int(Ft.toDegrees(this.rotation)))},Hr.keys.registerFunction(Bt.B,t.onAngle,t),Hr.keys.registerFunction(Bt.N,t.onAngle,t),t.onScale=function(){Hr.keys.isDown(Bt.Q)&&(this.scaleX-=.01,this.scaleY-=.01),Hr.keys.isDown(Bt.E)&&(this.scaleX+=.01,this.scaleY+=.01);var t=Ft.roundNumber(this.scaleX,1e3),e=Ft.roundNumber(this.scaleY,1e3);console.log('scale "scaleX":'+t+', "scaleY":'+e+', "width":'+Ft.int(this.width)+', "height":'+Ft.int(this.height))},Hr.keys.registerFunction(Bt.Q,t.onScale,t),Hr.keys.registerFunction(Bt.E,t.onScale,t),t.onScaleX=function(){Hr.keys.isDown(Bt.Z)&&(this.width-=1),Hr.keys.isDown(Bt.X)&&(this.width+=1);var t=Ft.roundNumber(this.scaleX,1e3);console.log('scale "scaleX":'+t+', "width":'+Ft.int(this.width))},Hr.keys.registerFunction(Bt.Z,t.onScaleX,t),Hr.keys.registerFunction(Bt.X,t.onScaleX,t),t.onScaleY=function(){Hr.keys.isDown(Bt.C)&&(this.height-=1),Hr.keys.isDown(Bt.V)&&(this.height+=1);var t=Ft.roundNumber(this.scaleY,1e3);console.log('scale "scaleY":'+t+', "height":'+Ft.int(this.height))},Hr.keys.registerFunction(Bt.C,t.onScaleY,t),Hr.keys.registerFunction(Bt.V,t.onScaleY,t),t.saveUp=function(){this.x,this.y;this._saveX,this._saveY,Hr.keys.downDuration(Bt.A,.5)&&(this.x-=1),Hr.keys.downDuration(Bt.D,.5)&&(this.x+=1),Hr.keys.downDuration(Bt.W,.5)&&(this.y-=1),Hr.keys.downDuration(Bt.S,.5)&&(this.y+=1),Hr.keys.downDuration(Bt.Z,.5)&&(this.width-=1,Ft.roundNumber(this.scaleX,1e3)),Hr.keys.downDuration(Bt.X,.5)&&(this.width+=1,Ft.roundNumber(this.scaleX,1e3)),Hr.keys.downDuration(Bt.C,.5)&&(this.height-=1,Ft.roundNumber(this.scaleY,1e3)),Hr.keys.downDuration(Bt.V,.5)&&(this.height+=1,Ft.roundNumber(this.scaleY,1e3)),Hr.keys.downDuration(Bt.Q,.5)&&(this.scaleX-=.01,this.scaleY-=.01,Ft.roundNumber(this.scaleX,1e3),Ft.roundNumber(this.scaleY,1e3)),Hr.keys.downDuration(Bt.E,.5)&&(this.scaleX+=.01,this.scaleY+=.01,Ft.roundNumber(this.scaleX,1e3),Ft.roundNumber(this.scaleY,1e3)),Hr.keys.downDuration(Bt.B,.5)&&(this.rotation-=.01,Ft.roundNumber(this.rotation,100)),Hr.keys.downDuration(Bt.N,.5)&&(this.rotation+=.01,Ft.roundNumber(this.rotation,100)),t.oType===E.OMY_ACTOR&&(Hr.keys.downDuration(Bt.H,.5)&&this.previous(),Hr.keys.downDuration(Bt.J,.5)&&this.next()),t.oType===E.OMY_GRAPHIC&&(Hr.keys.downDuration(Bt.Y,.5)&&this.radiusDown(),Hr.keys.downDuration(Bt.U,.5)&&this.radiusUp())},Hr.addUpdater(t.saveUp,t),t.__proto__&&t.__proto__.hasOwnProperty("destroy")){var i=t.destroy.bind(t);t.destroy=function(){console.warn("Auto remove object from debug when it is destroy"),OMY.Omy.add.removeFromDebug(this),i.apply(this,arguments)}}return t}}},{key:"removeFromDebug",value:function(t){if(t._inDebug)return console.error("removeFromDebug",t.name,t.texture,t.text,"\n",t),Hr.keys.unregisterFunction(Bt.DELETE,t.removeFromDebug,t),Hr.keys.unregisterFunction(Bt._1,t.logInfo,t),Hr.keys.unregisterFunction(Bt._2,t.logJson,t),Hr.keys.unregisterFunction(Bt._3,t.saveJson,t),t.input=!1,t._inDebug=!1,t.aa_isRegOnDebug=!1,t.oType&&-1!==t.oType.indexOf("text")&&(t.removeDrawDebugRect(),Hr.keys.unregisterFunction(Bt.P,t.onFontSizeInc,t),Hr.keys.unregisterFunction(Bt.O,t.onFontSizeDec,t),Hr.keys.unregisterFunction(Bt.L,t.onScaleTextX,t),Hr.keys.unregisterFunction(Bt.K,t.onScaleTextX,t),Hr.keys.unregisterFunction(Bt.J,t.onScaleTextY,t),Hr.keys.unregisterFunction(Bt.H,t.onScaleTextY,t)),t.oType&&-1!==t.oType.indexOf("actor")&&(Hr.keys.unregisterFunction(Bt.T,t.onPlayDebug,t),t.oType===E.OMY_ACTOR&&(Hr.keys.unregisterFunction(Bt.U,t.onGoLastDebug,t),Hr.keys.unregisterFunction(Bt.H,t.onPlayPrevious,t),Hr.keys.unregisterFunction(Bt.J,t.onPlayNext,t),Hr.keys.unregisterFunction(Bt.Y,t.onGoFirstDebug,t),Hr.keys.registerFunction(Bt.O,t.onScaleTextY,t),Hr.keys.registerFunction(Bt.P,t.onScaleTextY,t),Hr.keys.registerFunction(Bt.L,t.onScaleTextX,t),Hr.keys.registerFunction(Bt.K,t.onScaleTextX,t))),t.oType&&-1!==t.oType.indexOf("revolt")&&Hr.keys.unregisterFunction(Bt.T,t.needPlayAgain,t),t.oType&&-1!==t.oType.indexOf("graphic")&&(Hr.keys.unregisterFunction(Bt.T,t.renderNewGraphic,t),Hr.keys.unregisterFunction(Bt.Y,t.radiusDown,t),Hr.keys.unregisterFunction(Bt.U,t.radiusUp,t)),t.oType&&t.oType===E.OMY_NEUTRINO_PARTICLES&&(Hr.keys.unregisterFunction(Bt.T,t.onStopNeutrino,t),Hr.keys.unregisterFunction(Bt.Y,t.onPlayNeutrino,t),Hr.keys.unregisterFunction(Bt.U,t.onResetNeutrino,t)),Hr.keys.unregisterFunction(Bt.R,t.onHide,t),Hr.keys.unregisterFunction(Bt.A,t.onMove,t),Hr.keys.unregisterFunction(Bt.S,t.onMove,t),Hr.keys.unregisterFunction(Bt.W,t.onMove,t),Hr.keys.unregisterFunction(Bt.D,t.onMove,t),t.removeUp(t.voidMethod,t),t.removeDragUpdate(t.onUptDr,t),t.drag=!1,Hr.keys.unregisterFunction(Bt.B,t.onAngle,t),Hr.keys.unregisterFunction(Bt.N,t.onAngle,t),Hr.keys.unregisterFunction(Bt.Q,t.onScale,t),Hr.keys.unregisterFunction(Bt.E,t.onScale,t),Hr.keys.unregisterFunction(Bt.Z,t.onScaleX,t),Hr.keys.unregisterFunction(Bt.X,t.onScaleX,t),Hr.keys.unregisterFunction(Bt.C,t.onScaleY,t),Hr.keys.unregisterFunction(Bt.V,t.onScaleY,t),Hr.removeUpdater(t.saveUp,t),0}},{key:"debugLogging",value:function(t){t.includes(">>>")||t.includes("<<<")?(console.groupCollapsed("[stomp]",t.substr(0,t.indexOf("\n"))),console.log(t),console.groupEnd()):console.log(t)}}]),t}(),qn=function(){function t(e){l(this,t),this._gameCache=e}return c(t,[{key:"timer",value:function(t){t&&(t.destroy(),t=null)}},{key:"tween",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;a.killTweensOf(t,e),t=null,e=null}},{key:"actorAtlas",value:function(t){t.parent&&t.parent.removeChild(t),this._gameCache.setActorAtlas(t)}},{key:"revoltParticleEmitter",value:function(t){t.destroy(),t=null}},{key:"revoltParticleSequence",value:function(t){t.destroy(),t=null}}]),t}(),Jn={apiToken:null,key:null,languages:null,languageIds:null,gameKey:null,localeDictionary:{},loadLanguage:function(t,e,i){var n=this;if(!(this._checkEmpty(this.apiToken,"API Token")||this._checkEmpty(this.key,"Key")||this._checkEmpty(this.languages,"Languages")||this._checkEmpty(this.languageIds,"Language id's")||this._checkEmpty(this.gameKey,"Game key"))){var s=this.languages.indexOf(t);if(-1!==s){var r=function(){Hr.resources.language=n.localeDictionary[n.languageIds[s]],e.call(i)};0!==Object.keys(this.localeDictionary).length?r():this._loadLanguages(r,this)}else Hr.error("POEditor: language "+t+" don't set.")}},_loadLanguages:function(t,e){var i=this,n=0,s=this.languageIds.length;this._loadLanguage(this.languageIds[n],(function r(){++n!==s?i._loadLanguage(i.languageIds[n],r,i):t.call(e)}),this)},_loadLanguage:function(t,e,i){var n=this,s=new XMLHttpRequest;s.open("POST","https://api.poeditor.com/v2/terms/list",!0),s.setRequestHeader("Content-Type","application/x-www-form-urlencoded");var r="api_token="+this.apiToken+"&id="+this.key+"&language="+t;s.onreadystatechange=function(){if(4===s.readyState){if(200===s.status){var r,o,a,h=JSON.parse(s.responseText).result.terms,l={},u=h.length,c=n.gameKey.length;for(r=0;r<u;++r)0===(a=(o=h[r]).term).indexOf(n.gameKey)&&(l[a.substr(c+1,a.length-c-1)]=o.translation.content);return n.localeDictionary[t]={extension:"json",data:l,name:"language",url:"https://api.poeditor.com",xhrType:"json",progressChunk:100,loadType:1,error:0},void e.call(i)}Hr.error("Failed to load localization: "+s.responseText)}},s.send(r)},_checkEmpty:function(t,e){return null===t&&(Hr.error("POEditor: "+e+" empty"),!0)}},Zn=function(){function t(){l(this,t),this._locAtlasList=[],this._locAtlasNamesList=[],this._locImgList=[],this._locImgNamesList=[],this._basePath="",this._emit=new E.Emit,this._canChangaLanguage=!0,this._isPOEditorEnabled=!1}return c(t,[{key:"initPOEditor",value:function(t,e,i,n,s){this._isPOEditorEnabled=!0,Jn.apiToken=t,Jn.key=e,Jn.languages=i,Jn.languageIds=n,Jn.gameKey=s}},{key:"loadCurrentLanguage",value:function(t,e){Jn.loadLanguage(Hr.language,t,e)}},{key:"poEditorEnabled",get:function(){return this._isPOEditorEnabled}},{key:"addGraphic",value:function(t){this._graphic=t,this._tweenShow=Hr.add.tween(this._graphic,{alpha:1},.2,this._lockScreen.bind(this),{paused:!0}),this._tweenHide=Hr.add.tween(this._graphic,{alpha:0},.2,this._removeTint.bind(this),{paused:!0})}},{key:"setLanguageMap",value:function(t){this._languageMap=t}},{key:"changeLauguage",value:function(t){this._emit.emit("locUpdateStart"),Hr.language=t,this._graphic?(this._graphic.revive(),this._emit.emit("toggle_tint_work",!0),Hr.stage.addChild(this._graphic),this._graphic.alpha=0,this._tweenShow.restart()):this._lockScreen()}},{key:"_lockScreen",value:function(){Hr.add.timer(.3,this.startLoading,this)}},{key:"_removeTint",value:function(){this._graphic&&(this._emit.emit("toggle_tint_work",!1),Hr.stage.removeChild(this._graphic),this._graphic.kill())}},{key:"startLoading",value:function(){for(var t=0;t<this._locAtlasNamesList.length;t++){var e=Hr.resources[this._locAtlasNamesList[t]];for(var i in e.isLoading&&e.abort(),e.textures)e.textures[i].destroy(!0);delete Hr.resources[this._locAtlasNamesList[t]]}for(var n=0;n<this._locImgNamesList.length;n++){var s=Hr.resources[this._locImgNamesList[n]];s.isLoading&&s.abort(),s.texture.destroy(!0),delete Hr.resources[this._locImgNamesList[n]]}var r,o,a,h;for(delete Hr.resources.language,r=Hr.assetsURL+"Atlases/",a=0;a<this._locAtlasList.length;a++)o=(h=this._locAtlasList[a]).nameR,Hr.assets.loadAtlas(h.name,r+Hr.language+"/"+o);for(r=Hr.assetsURL+"Single/",a=0;a<this._locImgList.length;a++)o=(h=this._locImgList[a]).nameR,Hr.assets.loadImage(h.name,r+Hr.language+"/"+o);Hr.assets.checkLocMap();var l=this._languageMap&&this._languageMap[Hr.language]||Hr.language;this._isPOEditorEnabled?Jn.loadLanguage(l,this._loadComplete,this):(Hr.assets.loadLocal("language",this._basePath+"assets/language/"+l+".json"),Hr.loader.load(this._loadComplete.bind(this)))}},{key:"_loadComplete",value:function(){var t=this;Hr.assets.checkCustomChars(),this._data=Hr.assets.getJSON("language"),this._emit.emit("locUpdate"),Hr.game.addNextTickUpdate((function(){t._emit.emit("locUpdateEnd")}),this),this._tweenHide?this._tweenHide.restart():this._removeTint()}},{key:"updateLocalization",value:function(){this._data=this._data||{};for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];if(e)for(var n=0;n<e.length;n++)Object.assign(this._data,e[n])}},{key:"addBufferText",value:function(t,e){this._data||(this._data={}),this._data[t]=e}},{key:"setLoc",value:function(t){this._data=t}},{key:"getText",value:function(t){var e=this,i=function t(e,i){var n=i[0],s=i.slice(1);return s.length&&e[n]?t(e[n],s):e[n]},n="",s=t.split("+");s.forEach((function(t){var s;"'"===t[0]&&"'"===t[t.length-1]?n+=t.slice(1,t.length-1):n+=null!==(s=i(e._data,t.split(".")))&&void 0!==s?s:"!"+t}));for(var r=arguments.length,o=new Array(r>1?r-1:0),a=1;a<r;a++)o[a-1]=arguments[a];return o.forEach((function(t,e){return text.replace("@"+e+"r",t)})),n=It.replaceAll(n,"\r","")}},{key:"addLocAtlas",value:function(t){this._canChangaLanguage&&-1===this._locAtlasList.indexOf(t)&&(this._locAtlasList.push(t),this._locAtlasNamesList.push(t.name))}},{key:"removeLocAtlas",value:function(t){if(this._canChangaLanguage){var e=this._locAtlasNamesList.indexOf(t);-1!==e&&(this._locAtlasList.splice(e,1),this._locAtlasNamesList.splice(e,1))}}},{key:"addLocImg",value:function(t){this._canChangaLanguage&&-1===this._locImgList.indexOf(t)&&(this._locImgList.push(t),this._locImgNamesList.push(t.name))}},{key:"removeLocImg",value:function(t){if(this._canChangaLanguage){var e=this._locImgNamesList.indexOf(t);-1!==e&&(this._locImgList.splice(e,1),this._locImgNamesList.splice(e,1))}}},{key:"checkLocalisation",value:function(t){var e=-1!==this._locAtlasNamesList.indexOf(t);return e||(e=-1!==this._locImgNamesList.indexOf(t)),e}},{key:"addUpdate",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this._canChangaLanguage&&(i?this._emit.once("locUpdate",t,e):this._emit.on("locUpdate",t,e))}},{key:"removeUpdate",value:function(t,e){this._canChangaLanguage&&this._emit.removeListener("locUpdate",t,e)}},{key:"addUpdateStart",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this._canChangaLanguage&&(i?this._emit.once("locUpdateStart",t,e):this._emit.on("locUpdateStart",t,e))}},{key:"removeUpdateStart",value:function(t,e){this._canChangaLanguage&&this._emit.removeListener("locUpdateStart",t,e)}},{key:"addUpdateEnd",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this._canChangaLanguage&&(i?this._emit.once("locUpdateEnd",t,e):this._emit.on("locUpdateEnd",t,e))}},{key:"removeUpdateEnd",value:function(t,e){this._canChangaLanguage&&this._emit.removeListener("locUpdateEnd",t,e)}},{key:"addTintWorkCallback",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];this._canChangaLanguage&&(i?this._emit.once("toggle_tint_work",t,e):this._emit.on("toggle_tint_work",t,e))}},{key:"removeTintWorkCallback",value:function(t,e){this._canChangaLanguage&&this._emit.removeListener("toggle_tint_work",t,e)}},{key:"exists",get:function(){return null!=this._data}},{key:"canChangaLanguage",get:function(){return this._canChangaLanguage},set:function(t){this._canChangaLanguage=t}},{key:"basePath",get:function(){return this._basePath},set:function(t){this._basePath=t}}]),t}();class Qn{constructor(t,e,i){this.subEventName=t,this.isAsync=e,this.funct=i}}class $n{constructor(t){this.partent=t,this.elementsMap=new Map,this.elements=new Array}getParent(){return this.parent}condition(...t){let e=!0;return this.elements.some((i=>{if(!i.funct(...t))return e=!1,!1})),e}call(...t){this.elements.some((e=>{e.funct(...t)}))}has(t){return this.elementsMap.has(t)}remove(t){return!!this.has(t)&&(this.elementsMap.delete(t),this.elements.splice(this._getIndex(t),1),!0)}delete(t){this.remove(t)}clear(){this.elementsMap.clear(),this.elements.length=0}replace(t,e){return!!this.has(t)&&(this.elementsMap.get(t).funct=e,this.elements[this._getIndex(t)].funct=e,!0)}prepend(t,e,i){let n=new Qn(t,i,e);this.elementsMap.set(t,n),this.elements.unshift(n)}append(t,e,i){let n=new Qn(t,i,e);this.elementsMap.set(t,n),this.elements.push(n)}insertBefore(t,e,i,n){let s=this._getIndex(t),r=new Qn(e,n,i);this.elementsMap.set(e,r),this.elements.splice(s,0,r)}insertAfter(t,e,i,n){let s=this._getIndex(t),r=new Qn(e,n,i);this.elementsMap.set(e,r),this.elements.splice(s+1,0,r)}_getIndex(t){return this.elements.findIndex((e=>e.subEventName==t))}}var ts=class{constructor(){this.elementsMap=new Map}condition(t,...e){return new Promise(((e,i)=>{let n=this.elementsMap.get(t);n&&e(n.condition()),e(!0)}))}emit(...t){this.call(...t)}call(t,...e){return new Promise(((i,n)=>{let s;s=this.elementsMap.get("pre_"+t),s&&s.call(...e),s=this.elementsMap.get(t),s&&s.call(...e),s=this.elementsMap.get("post_"+t),s&&s.call(...e),i()}))}has(t,e){return!!this.elementsMap.has(t)&&(!e||this.elementsMap.get(t).has(e))}remove(t,e){return!!this.has(t)&&(e?this.elementsMap.get(t).remove(e):(this.elementsMap.delete(t),!0))}delete(t,e){this.remove(t,e)}clear(t){t?this.elementsMap.get(t).clear():this.elementsMap.clear()}prepend(t,e,i,n){this._attainEvent(t).prepend(e,i,n)}on(...t){this.append(...t)}append(t,e,i,n){if("function"==typeof e){let t=Object.values(arguments);return t.splice(1,0,"_"),void this.append(...t)}this._attainEvent(t).append(e,i,n)}insertBefore(t,e,i,n,s){if("function"==typeof i){let t=Object.values(arguments);return t.splice(1,0,"_"),void this.insertBefore(...t)}this._attainEvent(t).insertBefore(e,i,n,s)}insertAfter(t,e,i,n,s){if("function"==typeof i){let t=Object.values(arguments);return t.splice(1,0,"_"),void this.insertAfter(...t)}this._attainEvent(t).insertAfter(e,i,n,s)}_attainEvent(t){return this.elementsMap.has(t)||this.elementsMap.set(t,new $n(this)),this.elementsMap.get(t)}};var es=ts,is=function(){function t(){l(this,t),this.keyStates=new Map,this.events=new es}return c(t,[{key:"clear",value:function(){this.keyStates.clear()}},{key:"update",value:function(){var t=this;this.keyStates.forEach((function(e,i){var n=t.keyStates.get(i);n.alreadyPressed=!0,n.wasReleased&&t.keyStates.delete(i),ns.events.call("down",i,n),ns.events.call("down_"+i,i,n)}))}},{key:"isKeyDown",value:function(){for(var t=!1,e=arguments.length,i=new Array(e),n=0;n<e;n++)i[n]=arguments[n];for(var s=0,r=i;s<r.length;s++){var o=r[s],a=this.keyStates.get(o);a&&!a.wasReleased&&(t=!0)}return t}},{key:"isKeyUp",value:function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];return!this.isKeyDown(e)}},{key:"isKeyPressed",value:function(){for(var t=!1,e=arguments.length,i=new Array(e),n=0;n<e;n++)i[n]=arguments[n];if(0==i.length)return!1;for(var s=0,r=i;s<r.length;s++){var o=r[s],a=this.keyStates.get(o);!a||a.wasReleased||a.alreadyPressed||(t=!0)}return t}},{key:"isKeyReleased",value:function(){for(var t=!1,e=arguments.length,i=new Array(e),n=0;n<e;n++)i[n]=arguments[n];if(0==i.length)return!1;for(var s=0,r=i;s<r.length;s++){var o=r[s],a=this.keyStates.get(o);a&&a.wasReleased&&(t=!0)}return t}}]),t}(),ns=new is;is.keyboard=ns,window.addEventListener("keydown",(function(t){ns.keyStates.get(t.keyCode)||(ns.keyStates.set(t.keyCode,t),ns.events.call("pressed",t.keyCode,t),ns.events.call("pressed_"+t.keyCode,t.keyCode,t))}),!1),window.addEventListener("keyup",(function(t){(t=ns.keyStates.get(t.keyCode))&&(t.wasReleased=!0,ns.events.call("released",t.keyCode,t),ns.events.call("released_"+t.keyCode,t.keyCode,t))}),!1),window.addEventListener("click",(function(t){var e=ns.keyStates.get(Bt.ALT),i=ns.keyStates.get(Bt.CTRL),n=ns.keyStates.get(Bt.SHIFT),s=function(t){t.wasReleased=!0,ns.events.call("released",t.keyCode,t),ns.events.call("released_"+t.keyCode,t.keyCode,t)};e&&!t.altKey?s(e):i&&!t.ctrlKey?s(i):n&&!t.shiftKey&&s(n)}),!0);var ss,rs,os=function(){function t(){l(this,t),is.keyboard.events.on("down",null,this._onKeyDown.bind(this)),is.keyboard.events.on("released",null,this._onReleased.bind(this)),is.keyboard.events.on("pressed",null,this._onPressed.bind(this)),this._keys=[],this._keysEmit=new E.Emit,this._downDuration=[],this._ANY_KEY="any_key",this._blockBrowserHotKeys=!1,this.blockBrowserHotKeys=!0}return c(t,[{key:"update",value:function(t){is.keyboard.update()}},{key:"clear",value:function(){is.keyboard.clear()}},{key:"blockBrowserHotKeys",get:function(){return this._blockBrowserHotKeys},set:function(t){this._blockBrowserHotKeys!==t&&(this._blockBrowserHotKeys=t,this._blockBrowserHotKeys?window.addEventListener("keydown",this._onBrowserHotKey,!1):window.removeEventListener("keydown",this._onBrowserHotKey,!1))}},{key:"_onBrowserHotKey",value:function(t){var e;e=void 0!==t.key?{" ":32,Spacebar:32,ArrowLeft:37,ArrowUp:38,ArrowRight:39,ArrowDown:40}[t.key]||t.key.charCodeAt(0):t.which||t.charCode||t.keyCode||0;[32,37,38,39,40].indexOf(e)>-1&&t.preventDefault()}},{key:"_onKeyDown",value:function(t){this._downDuration[t]++}},{key:"_onPressed",value:function(t){this._downDuration[t]=0,Ft.inArray(this._keys,String(t))&&this._keysEmit.emit(String(t)),this._keysEmit.emit(this._ANY_KEY)}},{key:"_onReleased",value:function(t){this._downDuration[t]=0}},{key:"downDuration",value:function(t,e){return Boolean(this._downDuration[t]&&this._downDuration[t]/Hr.fps>=e)}},{key:"isDown",value:function(t){return is.keyboard.isKeyDown(t)}},{key:"isPressed",value:function(t){return is.keyboard.isKeyPressed(t)}},{key:"isReleased",value:function(t){return is.keyboard.isKeyReleased(t)}},{key:"registerFunction",value:function(t,e,i){var n=String(t);Ft.inArray(this._keys,n)||this._keys.push(n);var s=this._keysEmit._events;for(var r in s)if(r===n&&s[r].fn===e&&s[r].context===i)return;this._keysEmit.on(n,e,i)}},{key:"unregisterFunction",value:function(t,e,i){var n=String(t);Ft.inArray(this._keys,n)&&this._keysEmit.removeListener(n,e,i)}},{key:"unregisterAllFunction",value:function(t){var e=String(t);Ft.inArray(this._keys,e)&&this._keysEmit.removeAllListeners(e)}},{key:"addAnyKey",value:function(t,e){this._keysEmit.once(this._ANY_KEY,t,e)}},{key:"removeAnyKey",value:function(t,e){this._keysEmit.removeListener(this._ANY_KEY,t,e)}}]),t}(),as=function(){function t(){l(this,t),this._volume=1,this._isMute=!1,this._isMuteSound=!1,this._isMuteMusic=!1,this._isPauseAll=!1,this._soundList=[],this._musicList=[],this._emit=new E.Emit,this._map=new D,r.Howler.autoSuspend=!1}return c(t,[{key:"add2LibSprite",value:function(t,e,i){this._sprite=e,this._audioSpriteNames=i,this._spriteIdData={};for(var n=0;n<i.length;n++)this._soundList.push(i[n]),this._map.has(i[n])||this._map.set(i[n],{loop:!1});this._sprite.on("end",this._onEndSpriteAudio.bind(this)),this._sprite.on("stop",this._onStopSpriteAudio.bind(this)),Hr.isDesktop&&Hr.browser.safari&&this._map.has("_mac_fix")&&this.play("_mac_fix",!0)}},{key:"_onEndSpriteAudio",value:function(t){var e=this._spriteIdData[String(t)];e?e._loop||(this._spriteIdData[String(t)]=null,delete this._spriteIdData[String(t)],this._map.get(e.sName).loop&&this.play(e.sName,!0)):Hr.warn("sound not in lib")}},{key:"_onStopSpriteAudio",value:function(t){this._spriteIdData[String(t)]?(this._spriteIdData[String(t)]=null,delete this._spriteIdData[String(t)]):Hr.warn("sound not in lib")}},{key:"_inAudioSprite",value:function(t){return this._sprite&&Ft.inArray(this._audioSpriteNames,t)}},{key:"_getAllIds",value:function(t){var e=[];for(var i in this._spriteIdData)this._spriteIdData[i].sName===t&&e.push(Number(i));return e}},{key:"add2Lib",value:function(t,e,i){"sound"===t?this._soundList.push(e):this._musicList.push(e),i.omyPaused=!1,this._map.has(e)||this._map.set(e,i)}},{key:"pauseAll",value:function(){this._isPauseAll=!0;for(var t,e=this._map.names(),i=0;i<e.length;i++)if(this._inAudioSprite(e[i])){for(var n=this._getAllIds(e[i]),s=0;s<n.length;s++)t=this._spriteIdData[String(n[s])],this._sprite.pause(n[s]);t&&!t.omyPaused&&(t.omyPaused=!0)}else(t=this._map.get(e[i])).playing()&&(t.omyPaused=!0,t.pause())}},{key:"resumeAll",value:function(){this._isPauseAll=!1;for(var t,e=this._map.names(),i=0;i<e.length;i++)if(this._inAudioSprite(e[i])){for(var n=this._getAllIds(e[i]),s=0;s<n.length;s++)t=this._spriteIdData[String(n[s])],this._sprite.play(n[s]);t&&t.omyPaused&&(t.omyPaused=!1)}else(t=this._map.get(e[i])).omyPaused&&(t.omyPaused=!1,t.play())}},{key:"play",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;if(t){if(Hr.debugMode&&A.VERBOSE_BUTTONS_STATE&&Hr.warn("play sound: ",t),!this._map.has(t))return Hr.warn("Missed sound: "+t),null;var s=null;if(this._inAudioSprite(t)){s=this._sprite;var r=this._sprite.play(t),o=this._sprite._soundById(r);if(!o)return o;if(o.sName=t,this._spriteIdData[String(r)]=o,i)for(var a=this._getAllIds(t),h=0;h<a.length;h++)this._sprite.stop(a[h]);return this._sprite.loop(e,r),this._map.get(t).loop=e,this._sprite.volume(n,r),this._isPauseAll&&(o.omyPaused=!0,this._sprite.pause(r)),o}return(s=this._map.get(t)).loop(e),i&&s.stop(),s.volume(n),s.play(),this._isPauseAll&&(s.omyPaused=!0,s.pause()),s}}},{key:"playById",value:function(t){if(this._sprite)this._sprite.play(t);else for(var e=this._map.names(),i=0;i<e.length;i++)this._map.get(e[i])._soundById(t)&&this._map.get(e[i]).play(t)}},{key:"stop",value:function(t){if(Hr.debugMode&&A.VERBOSE_BUTTONS_STATE&&Hr.warn("stop sound, sName",t),!this._map.has(t))return Hr.warn("stop error, sName",t),null;if(this._inAudioSprite(t))for(var e=this._getAllIds(t),i=0;i<e.length;i++)this._sprite.stop(e[i]);else this._map.get(t).stop()}},{key:"stopById",value:function(t){if(this._sprite)this._sprite.stop(t);else for(var e=this._map.names(),i=0;i<e.length;i++)this._map.get(e[i])._soundById(t)&&this._map.get(e[i]).stop(t)}},{key:"pause",value:function(t){if(!this._map.has(t))return null;if(Hr.debugMode&&A.VERBOSE_BUTTONS_STATE&&Hr.warn("pause sound: ",t),this._inAudioSprite(t))for(var e=this._getAllIds(t),i=0;i<e.length;i++)this._sprite.pause(e[i]);else this._map.get(t).pause()}},{key:"resume",value:function(t){if(!this._map.has(t))return null;if(Hr.debugMode&&A.VERBOSE_BUTTONS_STATE&&Hr.warn("resume sound: ",t),this._inAudioSprite(t))for(var e=this._getAllIds(t),i=0;i<e.length;i++)this._sprite.play(e[i]);else this._map.get(t).play()}},{key:"fadeIn",value:function(t,e){this.fade(t,e,0,1)}},{key:"fadeOut",value:function(t,e){this.fade(t,e,1,0)}},{key:"fadeTo",value:function(t,e,i){if(!this._map.has(t))return null;if(this._inAudioSprite(t)){var n=this._getAllIds(t);n.length?this.fade(t,e,this._spriteIdData[String(n[0])]._volume,i):Hr.warn("cannot find active sound id")}else this.fade(t,e,this._map.get(t).volume(),i)}},{key:"fade",value:function(t,e,i,n){if(!this._map.has(t))return null;if(Hr.debugMode&&A.VERBOSE_BUTTONS_STATE&&Hr.warn("fade sound: ",t,e,i,n),this._inAudioSprite(t))for(var s=this._getAllIds(t),r=0;r<s.length;r++)this._sprite.fade(i,n,1e3*e,s[r]);else this._map.get(t).fade(i,n,1e3*e)}},{key:"getSound",value:function(t){return this._map.has(t)?this._sprite&&Ft.inArray(this._audioSpriteNames,t)?this._getAllIds(t):this._map.get(t):null}},{key:"getSoundVolume",value:function(t){if(!this._map.has(t))return null;if(this._sprite&&Ft.inArray(this._audioSpriteNames,t)){for(var e=0,i=0,n=this._getAllIds(t),s=0;s<n.length;s++){var r=this._sprite._soundById(n[s]);r&&(i++,e+=r._volume)}return e/i}return this._map.get(t).volume()}},{key:"isSoundPlay",value:function(t){if(!this._map.has(t))return!1;if(this._inAudioSprite(t)){var e=this._getAllIds(t);return Boolean(e.length)}return this._map.get(t).playing()}},{key:"isIdPlay",value:function(t){return this._sprite.playing(t)}},{key:"volume",value:function(t){t<0||t>1?Hr.log("no correct volume!"+t):(this._volume=t,r.Howler.volume(t))}},{key:"mute",value:function(){this._isMuteSound=!0,this._isMuteMusic=!0,this._isMute=!0,r.Howler.mute(!0)}},{key:"unmute",value:function(){this._isMuteSound=!1,this._isMuteMusic=!1,this._isMute=!1,r.Howler.mute(!1)}},{key:"toggleMute",value:function(){this._isMute?this.unmute():this.mute()}},{key:"toggleSoundMute",value:function(){this._isMuteSound=!this._isMuteSound;for(var t=0;t<this._soundList.length;t++)if(this._inAudioSprite(this._soundList[t]))for(var e=this._getAllIds(this._soundList[t]),i=0;i<e.length;i++)this._sprite.mute(this._isMuteSound,e[i]);else this.getSound(this._soundList[t]).mute(this._isMuteSound)}},{key:"toggleMusicMute",value:function(){this._isMuteMusic=!this._isMuteMusic;for(var t=0;t<this._musicList.length;t++)if(this._inAudioSprite(this._musicList[t]))for(var e=this._getAllIds(this._musicList[t]),i=0;i<e.length;i++)this._sprite.mute(this._isMuteMusic,e[i]);else this.getSound(this._musicList[t]).mute(this._isMuteMusic)}},{key:"addPlayEndEvent",value:function(t,e,i){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];this._addEvent(t,"end",e,i,n)}},{key:"removePlayEndEvent",value:function(t,e){if(!this._map.has(t))return Hr.error("cannot find this sound:",t),!1;if(this._inAudioSprite(t))for(var i=this._getAllIds(t),n=0;n<i.length;n++)this._sprite.off("end",e,i[n]);else this._map.get(t).off("end",e)}},{key:"addPlayEvent",value:function(t,e,i){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];this._addEvent(t,"play",e,i,n)}},{key:"removePlayEvent",value:function(t,e){if(!this._map.has(t))return Hr.error("cannot find this sound:",t),!1;if(this._inAudioSprite(t))for(var i=this._getAllIds(t),n=0;n<i.length;n++)this._sprite.off("play",e,i[n]);else this._map.get(t).off("play",e)}},{key:"addPauseEvent",value:function(t,e,i){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];this._addEvent(t,"pause",e,i,n)}},{key:"removePauseEvent",value:function(t,e){if(!this._map.has(t))return Hr.error("cannot find this sound:",t),!1;if(this._inAudioSprite(t))for(var i=this._getAllIds(t),n=0;n<i.length;n++)this._sprite.off("pause",e,i[n]);else this._map.get(t).off("pause",e)}},{key:"addStopEvent",value:function(t,e,i){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];this._addEvent(t,"stop",e,i,n)}},{key:"removeStopEvent",value:function(t,e){if(!this._map.has(t))return Hr.error("cannot find this sound:",t),!1;if(this._inAudioSprite(t))for(var i=this._getAllIds(t),n=0;n<i.length;n++)this._sprite.off("stop",e,i[n]);else this._map.get(t).off("stop",e)}},{key:"addFadeEvent",value:function(t,e,i){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];this._addEvent(t,"fade",e,i,n)}},{key:"removeFadeEvent",value:function(t,e){if(!this._map.has(t))return Hr.error("cannot find this sound:",t),!1;if(this._inAudioSprite(t))for(var i=this._getAllIds(t),n=0;n<i.length;n++)this._sprite.off("fade",e,i[n]);else this._map.get(t).off("fade",e)}},{key:"isSoundExist",value:function(t){var e=!1;return(this._inAudioSprite(t)||this._map.has(t))&&(e=!0),e}},{key:"_addEvent",value:function(t,e,i,n){var s=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];if(!this._map.has(t))return Hr.error("cannot find this sound:",t),!1;if(this._inAudioSprite(t))for(var r=this._getAllIds(t),o=0;o<r.length;o++)s?this._sprite.once(e,i.bind(n),r[o]):this._sprite.on(e,i.bind(n),r[o]);else s?this._map.get(t).once(e,i.bind(n)):this._map.get(t).on(e,i.bind(n))}},{key:"emit",get:function(){return this._emit}},{key:"isMute",get:function(){return this._isMute}},{key:"isMuteSound",get:function(){return this._isMuteSound}},{key:"isMuteMusic",get:function(){return this._isMuteMusic}},{key:"curVolume",get:function(){return this._volume}}]),t}(),hs=".json",ls=".mp3",us=".ogg",cs=".webm",ds=".webp",_s=".fnt",ps=".xml",fs=function(t){d(i,PIXI.utils.EventEmitter);var e=g(i);function i(){var t;return l(this,i),(t=e.call(this))._loader=Hr.loader,t._loadProgress=0,t._isError=!1,t._loader.onComplete.add(t._onCompleteHandler,f(t)),t._loader.onLoad.add(t._onLoadResourceComplete,f(t)),t._loader.onError.add(t._onErrorResourceLoad,f(t)),t._loader.onProgress.add(t._loadingProgress,f(t)),t._loader.pre(t._preResource.bind(f(t))),t._locMap=new D,t._bitmapFontDyMap=new D,t._bitmapFontDxMap=new D,t._lineHeightMap=new D,t._bFontCustomMap=new D,t._animMap=new D,t._spineMap=new D,t._audioCount=0,t._audioTotal=0,t._isLoad=!1,t._textures={},t._bitmapFontsNames=[],t._isSettingLoaded=!1,t._animationsListNames=[],t._spineListNames=[],t._resolutionConfig=null,t._resolution="",t._loadFilesConfig={},t.LOAD_TYPE_IMG="img",t.LOAD_TYPE_FONT="font",t.LOAD_TYPE_ATLAS="atlas",t.LOAD_TYPE_SPINE="spine",t}return c(i,[{key:"startLoad",value:function(){arguments.length&&console.error('assets is emitter. Pls use "complete", "error",  "progress" events!'),this._isError=!1,this._isLoad=!0,this._loadProgress=0,this._loader.load(),this._bitmapFontsNames.length&&Hr.log("BitmapFont names: ",this._bitmapFontsNames)}},{key:"_loadingProgress",value:function(t,e){this.emit("progress",this._isError?this._loadProgress:this._loader.progress)}},{key:"_onLoadResourceComplete",value:function(t,e){}},{key:"_onErrorResourceLoad",value:function(t,e,i){this._catchErrorLoad(t,e,i)}},{key:"_catchErrorLoad",value:function(t,e,i){if(!this._isError){for(var n in this._isError=!0,this._loadProgress=this._loader.progress,this._loader.resources)this._loader.resources[n].isLoading&&this._loader.resources[n].abort();this._loader.reset(),this.emit("error")}}},{key:"_onCompleteLoadAssets",value:function(t){!this._isError&&t.error&&this._catchErrorLoad(t.error,this._loader,t)}},{key:"_preResource",value:function(t,e){if(this._isError)t.abort();else{if(t.onComplete.once(this._onCompleteLoadAssets,this),t.loadType===PIXI.LoaderResource.LOAD_TYPE.XHR)t.onComplete.once((function(t){if("setting"===t.name&&(this._isSettingLoaded=!0),t.data&&t.data.meta)for(var e in t.data.frames)this._textures[e]=t.name;if(t.name.split("@").length>1&&t.data&&t.data.meta&&(t.data.meta.scale=String(t.name.split("@")[1])),"fnt"===t.extension){var i=t.data;if(-1===i.indexOf('info face="'+t.name+'"'))for(var n=i.split('"'),s=0;s<n.length;s++)if(-1!==n[s].indexOf("face=")){t.data=It.replaceAll(i,'info face="'+n[s+1]+'"','info face="'+t.name+'"');break}if(this._lineHeightMap.has(t.name))for(var r=t.data,o=r.split('"'),a=0;a<o.length;a++)if(-1!==o[a].indexOf("lineHeight=")){t.data=It.replaceAll(r,'lineHeight="'+o[a+1]+'"','lineHeight="'+String(Number(o[a+1])+this._lineHeightMap.get(t.name))+'"');break}}if(this._audioSpriteName===t.name){if(!t.data)return void console.error("catch null audiosprite data",this._audioSpriteName,this._audioSpriteURL);var h=[];for(var l in t.data.sprite)h.push(l);this._addAudioSprite(t.data.sprite,h),Hr.log("sounds names: ",h)}}),this);else if(t.loadType===PIXI.LoaderResource.LOAD_TYPE.IMAGE){var i=t.url,n=i.indexOf("."+String(t.extension)),s=i.slice(0,n),r=this._isHaveWebp(t.name);Hr.browser.isWebpSupported&&A.WEBP_SUPPORT&&r&&(i=s+ds),t.url=i}t.url.indexOf("tournaments")>0?t.url+=Hr.URLCacheTournament:t.url+=Hr.URLCache,e()}}},{key:"_onCompleteHandler",value:function(){if(!this._isError){if(this._animationsListNames.length){for(var t=0;t<this._animationsListNames.length;t++){var e=this._animationsListNames[t],i=Hr.resources[e];if(i.spritesheet&&i.spritesheet.animations){var n=i.spritesheet.animations;for(var s in n)this._animMap.has(s)?this._animMap.set(s,this._animMap.get(s).concat(n[s])):this._animMap.set(s,n[s])}}this._animationsListNames.length=0,Hr.log("animation names: ",this._animMap.names(),this._animMap)}if(this._spineListNames.length){Hr.groupCollapsed("spine animations");for(var r=0;r<this._spineListNames.length;r++){var o=this._spineListNames[r],a={};this._spineMap.set(o,a),Hr.groupCollapsed("animation name:",o);var h=this.getSpineData(o);if(h){Hr.info("x:",h.x),Hr.info("y:",h.y),Hr.info("width:",h.width),Hr.info("width:",h.height),Hr.info("version:",h.version),a.animations={},a.animationNames=[],Hr.group("animations list");for(var l=0;l<h.animations.length;l++)a.animationNames.push(h.animations[l].name),a.animations[h.animations[l].name]=h.animations[l].duration,Hr.info("name:",h.animations[l].name,"time:",Ft.roundNumber(h.animations[l].duration,100));Hr.groupEnd(),a.skins=[],Hr.groupCollapsed("skins");for(var u=0;u<h.skins.length;u++)a.skins.push(h.skins[u].name),Hr.info("name:",h.skins[u].name);if(Hr.groupEnd(),h.events){for(var c in a.events=[],Hr.groupCollapsed("events"),h.events)a.events.push(h.events[c].name),Hr.info("name:",h.events[c].name);Hr.groupEnd()}}Hr.groupEnd()}Hr.groupEnd(),Hr.log("spine animations names:\n",this._spineListNames)}if(this._isSettingLoaded){this._isSettingLoaded=!1;var d=this.getJSON("setting");if(d){var _=d.spriteSheetEff||d;this.addCustomEffect(_)}}this._isLoad=!1,this._audioCount<this._audioTotal||this.emit("complete")}}},{key:"addMiddleware",value:function(t){this._loader.use(t)}},{key:"addResolution",value:function(t){this._resolutionConfig=t;var e=null,i=0,n=0;window.screen.width<window.screen.height?(i=window.screen.height,n=window.screen.width):(i=window.screen.width,n=window.screen.height),i*=window.devicePixelRatio,n*=window.devicePixelRatio;for(var s=0;s<this._resolutionConfig.length;s++){var r=this._resolutionConfig[s].size;if(Math.max(i/r[0],n/r[1])<=1){e=this._resolutionConfig[s].resolution;break}}e?this._resolution=e:(Hr.info("cannot check resolution. set by def max"),this._resolution=this._resolutionConfig[this._resolutionConfig.length-1].resolution),Hr.log("game resolution",this._resolution)}},{key:"loadJson",value:function(t,e){this._addToLoader(t,e+t+".json")}},{key:"loadLocal",value:function(t,e){this._addToLoader(t,e)}},{key:"loadImage",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;i&&(this._loadFilesConfig[this.LOAD_TYPE_IMG]||(this._loadFilesConfig[this.LOAD_TYPE_IMG]={}),this._loadFilesConfig[this.LOAD_TYPE_IMG][t]=i);var n=null==i?void 0:i.locMap;if(n)for(var s in this._locMap.set(t,n),n.loadInfo={loader:"loadImage",urlRes:e},n)if(-1!==s.indexOf(Hr.language)){t=n[s];break}this._addToLoader(t,e+t+(i&&i.exc?i.exc:""))}},{key:"loadAtlas",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(i){this._loadFilesConfig[this.LOAD_TYPE_ATLAS]||(this._loadFilesConfig[this.LOAD_TYPE_ATLAS]={});var n=t;t.indexOf("-")>-1&&(n=n.split("-")[0]),this._loadFilesConfig[this.LOAD_TYPE_ATLAS][n]=i}var s=null==i?void 0:i.locMap;if(s)for(var r in this._locMap.set(t,s),s.loadInfo={loader:"loadAtlas",urlRes:e},s)if(-1!==r.indexOf(Hr.language)){t=s[r];break}i&&i.hasOwnProperty("resolution")&&i.resolution&&(this._resolutionConfig||console.error("pls. Add resolutionConfig. use addResolution method"),t+=this._resolution,s&&(s.loadInfo.resolution=this._resolution)),this._addToLoader(t,e+t,hs)}},{key:"loadAnimationAtlas",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(i){this._loadFilesConfig[this.LOAD_TYPE_ATLAS]||(this._loadFilesConfig[this.LOAD_TYPE_ATLAS]={});var n=t;t.indexOf("-")>-1&&(n=n.split("-")[0]),this._loadFilesConfig[this.LOAD_TYPE_ATLAS][n]=i}this._animationsListNames.push(t),this._addToLoader(t,e+t,hs)}},{key:"loadSpine",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;i&&(this._loadFilesConfig[this.LOAD_TYPE_SPINE]||(this._loadFilesConfig[this.LOAD_TYPE_SPINE]={}),this._loadFilesConfig[this.LOAD_TYPE_SPINE][t]=i);var n=e;this._spineListNames.push(t),this._addToLoader(t,n+t,hs)}},{key:"loadBitmapFont",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;i&&(this._loadFilesConfig[this.LOAD_TYPE_FONT]||(this._loadFilesConfig[this.LOAD_TYPE_FONT]={}),this._loadFilesConfig[this.LOAD_TYPE_FONT][t]=i);var n=null==i?void 0:i.locMap;if(n)for(var s in this._locMap.set(t,n),n.loadInfo={loader:"loadBitmapFont",urlRes:e},n)if(-1!==s.indexOf(Hr.language)){t=n[s];break}null!=i&&i.dxMap&&this._bitmapFontDxMap.set(i.name,i.dxMap),null!=i&&i.dyMap&&this._bitmapFontDyMap.set(i.name,i.dyMap);var r=null==i?void 0:i.lineHeight;if(r)for(var o in r)this._lineHeightMap.set(o,r[o]);this._bitmapFontsNames.push(t),this._addToLoader(t,e+t,null!=i&&i.xml?ps:_s)}},{key:"createBitmapFont",value:function(t){for(var e in t)if(Ft.inArray(this._bitmapFontsNames,e))OMY.Omy.error("this font",e," exists on base. Pls add another name");else{this._bitmapFontsNames.push(e),t[e].locMap&&this._locMap.set(e,t[e].locMap),t[e].dxMap&&this._bitmapFontDxMap.set(e,t[e].dxMap),t[e].dyMap&&this._bitmapFontDyMap.set(e,t[e].dyMap);var i=t[e].chars;t[e].chars="";for(var n=0;n<i.length;n++)t[e].chars+=i.charAt(n)+" ";PIXI.BitmapFont.from(e,t[e].style,{chars:t[e].chars,resolution:t[e].resolution||PIXI.settings.RESOLUTION,padding:t[e].hasOwnProperty("padding")?t[e].padding:4})}}},{key:"loadAudioSprite",value:function(t,e){if(this._audioSpriteName)throw new Error("AudioSprite exists! Use only one audio sprite for project.");this._audioSpriteName=t,this._audioSpriteURL=e,this._addToLoader(t,e,hs)}},{key:"loadAudio",value:function(t,e){var i,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"sound";this._audioTotal++,i=Hr.browser.isOggSupported&&A.OGG_SUPPORT?[this._generateUrl(e,us),this._generateUrl(e,ls)]:this._generateUrl(e,ls);var o=new r.Howl({src:i,autoplay:!1,loop:"sound"!==s,volume:n,onload:this._onAudioLoad.bind(this),onloaderror:this._onAudioError.bind(this)});Hr.sound.add2Lib(s,t,o)}},{key:"loadNeutrino",value:function(t,e){this._loader.add(t,e+t+".js",Hr.game.neutrino.loadOptions)}},{key:"initBundle",value:function(t){var e=this.getJSON(t);Hr.initRevolt(t,e)}},{key:"_addAudioSprite",value:function(t,e){this._audioTotal++;var i=[this._generateUrl(this._audioSpriteURL,cs+Hr.URLCache),this._generateUrl(this._audioSpriteURL,ls+Hr.URLCache)],n=new r.Howl({src:i,sprite:t,autoplay:!1,onload:this._onAudioLoad.bind(this),onloaderror:this._onAudioSpriteError.bind(this)});Hr.sound.add2LibSprite(this._audioSpriteName,n,e)}},{key:"_addToLoader",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n=this._generateUrl(e,i);this._loader.add({name:t,url:n})}},{key:"_generateUrl",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return t+e}},{key:"_onAudioLoad",value:function(){this._audioCount++,this._audioCount>=this._audioTotal&&!this._isLoad&&this.emit("complete")}},{key:"_onAudioError",value:function(){this._onAudioLoad()}},{key:"_onAudioSpriteError",value:function(){this.emit("error")}},{key:"addCustomEffect",value:function(t){for(var e=0;e<t.length;e++){var i=t[e];if(!this._animMap.has(i.cacheName)){for(var n=[],s=void 0,r=0;r<i.textures.length;r++)if("object"!==h(s=i.textures[r])||Array.isArray(s)){if(!Hr.resources[s]){console.warn("!OmyConst.resources[data]",s);continue}n=n.concat(this._createAnimation(s))}else{if(s.name&&!Hr.resources[s.name]){console.warn("!OmyConst.resources[data.name]",s.name);continue}if(s.cacheName&&!this._animMap.has(s.cacheName)){console.warn("!this._animMap.has(data.cacheName)",s.cacheName);continue}s.cacheName?n=n.concat(this._createAnimationFromCache(s)):s.frames?n=n.concat(this._createAnimationFromFrames(s)):(s.animations||s.frameNames)&&(n=n.concat(this._createAnimationFromNames(s)))}this._animMap.set(i.cacheName,n)}}}},{key:"getJSON",value:function(t){if(Hr.resources[t]){var e=Hr.resources[t].data;return e.isWasParse||(Hr.add.parseJson(e),e.isWasParse=!0),e}Hr.warn("Cannot find json: "+t)}},{key:"getAllTexturesNames",value:function(){return Object.keys(PIXI.utils.TextureCache).filter((function(t){return-1===t.indexOf("/")})).filter((function(t){return-1===t.toLowerCase().indexOf("assets")}))}},{key:"getAllAnimationNames",value:function(){return this._animMap.names()}},{key:"getAllBitmapFontsNames",value:function(){return this._bitmapFontsNames}},{key:"generateTextures",value:function(t){for(var e in t)Hr.add.generateTextureFrom(Hr.add.graphicJson(null,t[e]),t[e].option,e)}},{key:"getTexture",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=PIXI.utils.TextureCache;if(i[t])return PIXI.Texture.from(t);var n=(e=e||this._textures[t])||t;return Hr.resources[n]?e&&!Hr.resources[n].textures[t]?(Hr.warn("Cannot find texture: "+t+" in atlas:"+n),Hr.add.generateTextureFrom(Hr.add.graphicRectTexture(50,50,1,0))):e?Hr.resources[n].textures[t]:Hr.resources[n].texture:(Hr.warn("Cannot find texture or atlas: "+n),Hr.add.generateTextureFrom(Hr.add.graphicRectTexture(50,50,1,0)))}},{key:"getAnimation",value:function(t){return this._animMap.has(t)?this._animMap.get(t):(Hr.warn("Cannot find animation: "+t+" Please add to OMY.Omy.assets.addCustomEffect for use"),void console.log(this._animMap))}},{key:"_createAnimation",value:function(t){var e=Hr.resources[t];if(e){for(var i=[],n=e.spritesheet._frameKeys,s=e.spritesheet.textures,r=0;r<n.length;r++)i.push(s[n[r]]);return i}Hr.warn("Cannot find texture: "+t)}},{key:"_createAnimationFromFrames",value:function(t){if(Hr.resources[t.name]){for(var e=[],i=t.frames,n=Hr.resources[t.name],s=n.spritesheet._frameKeys,r=n.textures,o=0;o<i.length;o++){var a=i[o];if(a.split("..").length>1){var h=Number(a.split("..")[0]),l=Number(a.split("..")[1]);if(h<l)for(l++;h<l;h++)r[s[h]]&&e.push(r[s[h]]);else for(l--;h>=l;h--)r[s[h]]&&e.push(r[s[h]])}else{if(!r[s[Number(a)]])continue;e.push(r[s[Number(a)]])}}return e}Hr.warn("Cannot find texture: "+t.name)}},{key:"_createAnimationFromNames",value:function(t){if(Hr.resources[t.name]){var e=[],i=t.frameNames,n=t.animations,s=Hr.resources[t.name];if(i)for(var r=s.textures,o=0;o<i.length;o++){var a=i[o];r[a]&&e.push(r[a])}else e=s.spritesheet.animations[n];return e}Hr.warn("Cannot find texture: "+t.name)}},{key:"_createAnimationFromCache",value:function(t){if(this._animMap.has(t.cacheName)){var e=[],i=t.frames,n=this._animMap.get(t.cacheName);if(i)for(var s=0;s<i.length;s++){var r=i[s];if(r.split("..").length>1){var o=Number(r.split("..")[0]),a=Number(r.split("..")[1]);if(o<a)for(a++;o<a;o++)n[o]&&e.push(n[o]);else for(a--;o>=a;o--)n[o]&&e.push(n[o])}else{if(!n[Number(r)])continue;e.push(n[Number(r)])}}else e=n.concat();return e}Hr.warn("Cannot find animation: "+t.cacheName)}},{key:"getSpineData",value:function(t){if(Hr.resources[t])return Hr.resources[t].spineData;Hr.warn("Cannot find spineData: "+t)}},{key:"getAllSpineNames",value:function(){var t=[];for(var e in Hr.resources)Hr.resources[e].spineData&&t.push(e);return t}},{key:"getSpriteSheet",value:function(t){if(Hr.resources[t])return Hr.resources[t].spritesheet;Hr.warn("Cannot find SpriteSheet: "+t)}},{key:"cacheAnimations",value:function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;Boolean(e)&&Hr.add.timer(.5,e);var i=this._animMap.names();Hr.log("cache Animations: ",i);for(var n={cacheName:"symb_5",nameAnimation:"symb_5",type:"actor",fps:30,speed:1},s=5,r=0;r<i.length;r++){t||(t=Hr.add.container(),Hr.stage.addChildAt(t,0));for(var o=0;o<s;o++){n.cacheName=i[r],n.nameAnimation=i[r];var a=Hr.add.actorJson(null,n);a.x=5*Hr.WIDTH+a.width,a.y=5*Hr.HEIGHT+a.height,t.addChild(a),a.removeOnEnd=!0}}if(A.CACHE_SPINE_ON_START){n={textures:"symb_5",custom_a_name:"symb_5",type:"actorSpine",speed:1},t||(t=Hr.add.container(Hr.stage),Hr.stage.addChildAt(t,0));for(var h=0;h<this._spineListNames.length;h++){var l=this._spineMap.get(this._spineListNames[h]);n.textures=this._spineListNames[h],n.custom_a_name=l.animationNames[0];try{var u=Hr.add.actorJson(null,n);u.x=5*Hr.WIDTH+u.width,u.y=5*Hr.HEIGHT+u.height,u.play(),t.addChild(u),u.addComplete(this._onRemoveCacheSpine,this,!0)}catch(t){console.warn("Cache spine actor warning:","skeleton:",n.textures,"animation:",n.custom_a_name)}}}}},{key:"_onRemoveCacheSpine",value:function(t){t.stop(),t.visible=!1,t.alpha=0,t=null}},{key:"clearAnimMap",value:function(){this._animMap.clear()}},{key:"existsBitmapFont",value:function(t){return Ft.inArray(this._bitmapFontsNames,t)||(Hr.warn("not exist this font name",t,"pls load or remove from bitmapFont. Set default:",this._bitmapFontsNames[0]),t=this._bitmapFontsNames[0]),t}},{key:"localAssets",value:function(t){return this._findExistFromMap(t,this._locMap.get(t))}},{key:"getBitmapFontDx",value:function(t){return this._findExistFromMap(0,this._bitmapFontDxMap.get(t))}},{key:"getBitmapFontDy",value:function(t){return this._findExistFromMap(0,this._bitmapFontDyMap.get(t))}},{key:"isLocalAssets",value:function(t){return this._locMap.has(t)}},{key:"checkLocMap",value:function(){for(var t=this._locMap.names(),e=0;e<t.length;e++){var i=this._locMap.get(t[e]),n=null;for(var s in i)if(-1!==s.indexOf(Hr.language)){n=i[s];break}if(n=n||t[e],i.loadInfo&&i.loadInfo.resolution&&(n+=i.loadInfo.resolution),!Hr.resources[n]&&i.loadInfo)this[i.loadInfo.loader](n,i.loadInfo.urlRes)}}},{key:"addFontLocMap",value:function(t){if(t)for(var e in t)this._locMap.has(e)||(t[e].loadInfo=null,this._locMap.set(e,t[e]))}},{key:"_isHaveWebp",value:function(t){var e=null,i=null;for(var n in t.indexOf("_atlas_page_")>-1?(i=t.split("_atlas_page_")[0],e=this._loadFilesConfig[this.LOAD_TYPE_SPINE]):t.indexOf("_image")>-1?(i=(i=t.split("@")[0]).split("-")[0],e=this._loadFilesConfig[this.LOAD_TYPE_ATLAS]):t.indexOf("assets/font/")>-1?(i=(i=t.split("/font/")[1]).split(".png")[0],e=this._loadFilesConfig[this.LOAD_TYPE_FONT]):(i=t,e=this._loadFilesConfig[this.LOAD_TYPE_IMG]),e)if(i===n&&e[n].hasOwnProperty("noWebp")&&e[n].noWebp)return!1;return!i&&OMY.Omy.error("cannot find:",t),!0}},{key:"_findExistFromMap",value:function(t,e){if(!e)return t;for(var i in e)if(-1!==i.indexOf(Hr.language))return e[i];return t}},{key:"addChars2BitmapFont",value:function(t,e,i){this._bFontCustomMap.has(t)||this._bFontCustomMap.set(t,{fontName:t,chars:e,fontConfig:i}),t=this.localAssets(t);var n=PIXI.BitmapFont.available[t];if(!n)throw new Error('Missing BitmapFont "'.concat(t,'"'));var s=It.splitTextToCharacters(e),r=PIXI.BitmapFont.available[t+"custom_chars"];if(!r){i.chars="",i.style.fontSize=n.size;for(var o=0;o<s.length;o++)i.chars+=s[o]+" ";PIXI.BitmapFont.from(t+"custom_chars",i.style,{chars:i.chars,resolution:i.resolution||PIXI.settings.RESOLUTION,padding:i.hasOwnProperty("padding")?i.padding:4}),r=PIXI.BitmapFont.available[t+"custom_chars"];for(var a=0;a<s.length;a++){var h=It.extractCharCode(s[a]),l=r.chars[h];l&&(i.hasOwnProperty("kerning")&&(l.kerning=this._findExistFromMap(i.kerning,i.kerningMap)),i.hasOwnProperty("xOffset")&&(l.xOffset=this._findExistFromMap(i.xOffset,i.xOffsetMap)),i.hasOwnProperty("yOffset")&&(l.yOffset=this._findExistFromMap(i.yOffset,i.yOffsetMap)),i.hasOwnProperty("xAdvanceMap")&&i.xAdvanceMap[s[a]]?l.xAdvance+=i.xAdvanceMap[s[a]]:i.hasOwnProperty("xAdvance")&&(l.xAdvance+=i.xAdvance),i.hasOwnProperty("xAdvanceCustom")&&i.xAdvanceCustom[s[a]]&&(l.xAdvance=i.xAdvanceCustom[s[a]]))}}for(var u=0;u<s.length;u++){var c=It.extractCharCode(s[u]);n.chars[c]||(n.chars[c]=r.chars[c])}}},{key:"checkCustomChars",value:function(){for(var t=this._bFontCustomMap.names(),e=0;e<t.length;e++){var i=this._bFontCustomMap.get(t[e]);this.addChars2BitmapFont(i.fontName,i.chars,i.fontConfig)}}}]),i}(),vs=function(t){d(i,t);var e=g(i);function i(){var t;return l(this,i),(t=e.call(this)).C_DESTROY_W="destroyW",t.C_CREATE_W="createW",t.C_DESTROY_P="destroyP",t.C_CREATE_P="createP",t.C_OPEN="open:",t.C_CLOSE="close:",t._viewLayer1=new zt,t.addChild(t._viewLayer1),t._viewLayer2=new zt,t.addChild(t._viewLayer2),t._pageGuiLayer=new zt,t.addChild(t._pageGuiLayer),t._windowLayer=new zt,t.addChild(t._windowLayer),t._windowTopLayer=new zt,t.addChild(t._windowTopLayer),t._topGuiLayer=new zt,t.addChild(t._topGuiLayer),t.overlay=Hr.add.tint(0,1771267),t.overlay.interactive=!0,t._topGui=null,t._pageGui=null,t._viewStorage=new D,t}return c(i,[{key:"addTopGui",value:function(t){this._topGui?Hr.error("gui is exists!!"):(this._topGui=t,this._topGuiLayer.addChild(t),t.revive(),t=null)}},{key:"addPageGui",value:function(t){this._pageGui?Hr.error("gui is exists!!"):(this._pageGui=t,this._pageGuiLayer.addChild(t),t.revive(),t=null)}},{key:"toTopLayer",value:function(){this._topGuiLayer.addChild(this.gameUI),this.gameUI.revive()}},{key:"toBottomLayer",value:function(){this._pageGuiLayer.addChild(this.gameUI),this.gameUI.revive()}},{key:"showView",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(!this._viewStorage.has(t))return null;var i=this._viewStorage.get(t),n=null;if(2===e)n=this._viewLayer2;else n=this._viewLayer1;for(var s=n.contains(i),r=0;r<n.numChildren;r++)n.children[r].visible=!1;return s&&n.removeChild(i),n.addChild(i),s||i.revive(),this.emit(this.C_CREATE_P,t),n=null,i}},{key:"hideView",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;if(!this._viewStorage.has(t))return null;var i=this._viewStorage.get(t),n=null;if(2===e)n=this._viewLayer2;else n=this._viewLayer1;this.emit(this.C_DESTROY_P,t),n.removeChild(i),i.kill();for(var s=0;s<n.numChildren;s++)n.children[s].visible||(n.children[s].visible=!0);return i}},{key:"showWindowTop",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return this._viewStorage.has(t)?(this.addChild(this.overlay),this._showWindow(i||this._windowTopLayer,this._viewStorage.get(t),e)):null}},{key:"showWindow",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return this._viewStorage.has(t)?(this.addChild(this.overlay),this._showWindow(i||this._windowLayer,this._viewStorage.get(t),e)):null}},{key:"_showWindow",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(i)for(;t.numChildren;)t.removeChild(t.children[0]).kill();for(var n=0;n<t.numChildren;n++)t.children[n].hasOwnProperty("onActiveWindow")&&t.children[n].onActiveWindow(!1);var s=t.contains(e);return s&&t.removeChild(e),t.addChild(e),s||e.revive(this._onShowWindow.bind(this)),e}},{key:"_onShowWindow",value:function(t){this.overlay.parent&&this.removeChild(this.overlay),this.emit(this.C_CREATE_W,t),this.emit(this.C_OPEN+t)}},{key:"hideWindow",value:function(t){if(!this._viewStorage.has(t))return null;this.addChild(this.overlay);var e=this._viewStorage.get(t);return e.kill(this._onHideWindow.bind(this)),e}},{key:"_onHideWindow",value:function(t){var e=this._viewStorage.get(t).parent;e&&e.removeChild(this._viewStorage.get(t)),this.overlay.parent&&this.removeChild(this.overlay),this.emit(this.C_DESTROY_W,t),this.emit(this.C_CLOSE+t)}},{key:"update",value:function(){m(_(i.prototype),"update",this).call(this)}},{key:"getView",value:function(t){return this._viewStorage.has(t)?this._viewStorage.get(t):null}},{key:"isViewExist",value:function(t){return this._viewStorage.has(t)}},{key:"regWO",value:function(t,e){this._viewStorage.has(e)||this._viewStorage.set(e,t)}},{key:"addOpenWindow",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];n?this.once(this.C_OPEN+t,e,i):this.on(this.C_OPEN+t,e,i)}},{key:"removeOpenWindow",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.removeListener(this.C_OPEN+t,e,i)}},{key:"addCloseWindow",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];n?this.once(this.C_CLOSE+t,e,i):this.on(this.C_CLOSE+t,e,i)}},{key:"removeCloseWindow",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.removeListener(this.C_CLOSE+t,e,i)}},{key:"addDestroyWindow",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];i?this.once(this.C_DESTROY_W,t,e):this.on(this.C_DESTROY_W,t,e)}},{key:"removeDestroyWindow",value:function(t,e){this.removeListener(this.C_DESTROY_W,t,e)}},{key:"addCreateWindow",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];i?this.once(this.C_CREATE_W,t,e):this.on(this.C_CREATE_W,t,e)}},{key:"removeCreateWindow",value:function(t,e){this.removeListener(this.C_CREATE_W,t,e)}},{key:"addDestroyView",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];i?this.once(this.C_DESTROY_P,t,e):this.on(this.C_DESTROY_P,t,e)}},{key:"removeDestroyView",value:function(t,e){this.removeListener(this.C_DESTROY_P,t,e)}},{key:"addCreateView",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];i?this.once(this.C_CREATE_P,t,e):this.on(this.C_CREATE_P,t,e)}},{key:"removeCreateView",value:function(t,e){this.removeListener(this.C_CREATE_P,t,e)}},{key:"topGui",get:function(){return this._topGui||this._pageGui}},{key:"pageGui",get:function(){return this._pageGui||this._topGui}},{key:"gameUI",get:function(){return this._pageGui||this._topGui}}]),i}(zt),gs=function(){function t(){l(this,t),this._stateBtn=0,this._onUpEvent="up_state",this._onBlockEvent="block_state",this._emit=new E.Emit,this._isScreenBlock=!1,this._countBlockCall=0}return c(t,[{key:"updateState",value:function(t){this._stateBtn=t,Hr.debugMode&&A.VERBOSE_BUTTONS_STATE&&Hr.warn("btn state: ",this._stateBtn),this._emit.emit(this._onUpEvent,t)}},{key:"updateLastState",value:function(){this._emit.emit(this._onUpEvent,this._stateBtn),Hr.debugMode&&A.VERBOSE_BUTTONS_STATE&&Hr.warn("btn last state: ",this._stateBtn)}},{key:"addBtn",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e&&this._emit.on(this._onUpEvent,e,t),i&&this._emit.on(this._onBlockEvent,i,t)}},{key:"removeBtn",value:function(t,e,i){e&&this._emit.removeListener(this._onUpEvent,e,t),i&&this._emit.removeListener(this._onBlockEvent,i,t)}},{key:"addUpdateState",value:function(t,e){this._emit.on(this._onUpEvent,t,e)}},{key:"addBlockState",value:function(t,e){this._emit.on(this._onBlockEvent,t,e)}},{key:"removeUpdateState",value:function(t,e){this._emit.removeListener(this._onUpEvent,t,e)}},{key:"removeBlockState",value:function(t,e){this._emit.removeListener(this._onBlockEvent,t,e)}},{key:"blockingScreen",value:function(){this._countBlockCall++,this._emit.emit(this._onBlockEvent,!0),A.VERBOSE_BUTTONS_STATE&&Hr.warn("blockingScreen")}},{key:"globalBlockingScreen",value:function(){this._isScreenBlock=!0,this._emit.emit(this._onBlockEvent,!0),this._emit.removeAllListeners(this._onUpEvent),this._emit.removeAllListeners(this._onBlockEvent)}},{key:"unBlockingScreen",value:function(){this._countBlockCall--,this._countBlockCall<0&&(this._countBlockCall=0),this._emit.emit(this._onBlockEvent,!1),A.VERBOSE_BUTTONS_STATE&&Hr.warn("unBlockingScreen")}},{key:"state",get:function(){return this._stateBtn}},{key:"isScreenBlock",get:function(){return this._isScreenBlock||this._countBlockCall>0}}]),t}(),ys=function(){function t(){l(this,t),Hr.game.renderer.plugins.interaction.on("pointerdown",this._pointIsDown,this),Hr.game.renderer.plugins.interaction.on("pointerup",this._pointIsUp,this),Hr.game.renderer.plugins.interaction.on("pointerupoutside",this._pointIsUp,this),Hr.game.renderer.plugins.interaction.on("pointerover",this._pointIsOver,this),Hr.game.renderer.plugins.interaction.on("pointerout",this._pointIsOut,this),this._gameWidth=Hr.WIDTH,this._gameHeight=Hr.HEIGHT,this._isDownEvent=!1,this._isOutGame=!1,this._DOWN_EVENT="down",this._UP_EVENT="up",this._emit=new E.Emit}return c(t,[{key:"_pointIsDown",value:function(){this._isDownEvent=!0,this._emit.emit(this._DOWN_EVENT,this.mouseX,this.mouseY)}},{key:"_pointIsUp",value:function(){this._isDownEvent=!1,this._emit.emit(this._UP_EVENT,this.mouseX,this.mouseY)}},{key:"_pointIsOver",value:function(){this._isOutGame=!1}},{key:"_pointIsOut",value:function(){this._isOutGame=!0}},{key:"_update",value:function(){var t=Hr.game.renderer.plugins.interaction.eventData.data.global;t.x>0&&t.x<this._gameWidth&&t.y>0&&t.y<this._gameHeight?this._isOutGame=!1:this._isOutGame=!0}},{key:"isDown",get:function(){return this._isDownEvent}},{key:"mouseX",get:function(){return Hr.game.renderer.plugins.interaction.eventData.data.global.x}},{key:"mouseY",get:function(){return Hr.game.renderer.plugins.interaction.eventData.data.global.y}},{key:"outGame",get:function(){return this._isOutGame}},{key:"isMouse",get:function(){return!Hr.game.renderer.plugins.interaction.supportsTouchEvents}},{key:"addDownMouse",value:function(t,e){this._emit.once(this._DOWN_EVENT,t,e)}},{key:"addDownHandler",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];i?this._emit.once(this._DOWN_EVENT,t,e):this._emit.on(this._DOWN_EVENT,t,e)}},{key:"removeDownMouse",value:function(t,e){this._emit.removeListener(this._DOWN_EVENT,t,e)}},{key:"addUpHandler",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];i?this._emit.once(this._UP_EVENT,t,e):this._emit.on(this._UP_EVENT,t,e)}},{key:"removeUpMouse",value:function(t,e){this._emit.removeListener(this._UP_EVENT,t,e)}}]),t}(),ms=function(t){d(i,PIXI.utils.EventEmitter);var e=g(i);function i(t){var n;(l(this,i),(n=e.call(this))._app=t,n.C_FULL_CHANGE="full_change",n.C_ORIENTATION="orientation",n._gameWidth=Hr.WIDTH,n._gameHeight=Hr.HEIGHT,n._gameOrientation=n._gameWidth>n._gameHeight?"landscape":"portrait",n._gameLandscapeScreenRatio=n._gameWidth/n._gameHeight,n._gamePortraitScreenRatio=n._gameHeight/n._gameWidth,n._minWidth=0,n._minHeight=0,n._maxWidth=Number.MAX_VALUE,n._maxHeight=Number.MAX_VALUE,n._scaleMode=E.SCALE_EXACT_FIT,n._isFullScreen=!1,n._incorrectOrientation=!1,n._customResize=!1,n.forceOrientation(),n._screenRatio=n._gameWidth/n._gameHeight,window.addEventListener("resize",n.resize.bind(f(n)),!1),n.resize(),PIXI.utils.isMobile.apple.device)?A.CHECK_IOS_FULLSCREEN?!(Hr.browser.mobileSafari||Hr.browser.safari&&!Hr.isDesktop)||Hr.browser.chrome||/CriOS/.test(navigator.userAgent)?n._isFullScreen=!0:(n._isFullScreen=n._checkIosFull(),Hr.addUpdater(n._updateTick,f(n))):n._isFullScreen=!0:(document.addEventListener("fullscreenchange",n._screenChangeFull.bind(f(n))),document.addEventListener("webkitfullscreenchange",n._screenChangeFull.bind(f(n))),document.addEventListener("mozfullscreenchange",n._screenChangeFull.bind(f(n))),document.addEventListener("MSFullscreenChange",n._screenChangeFull.bind(f(n))),document.addEventListener("fullscreenerror",(function(){console.log("Full screen failed")})),document.addEventListener("webkitfullscreenerror",(function(){console.log("Full screen failed")})),document.addEventListener("mozfullscreenerror",(function(){console.log("Full screen failed")})),document.addEventListener("MSFullscreenError",(function(){console.log("Full screen failed")})),n._isFullScreen=!("fullscreenEnabled"in document||"webkitFullscreenEnabled"in document||"mozFullScreenEnabled"in document||"msFullscreenEnabled"in document));return n}return c(i,[{key:"newResizeHandler",value:function(){this._customResize=!0}},{key:"delayResize",value:function(){this.resize(null,!0)}},{key:"resize",value:function(t){var e,i,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!Hr.isDesktop&&!n)return this._delayTimer&&this._delayTimer.destroy(),void(this._delayTimer=Hr.add.timer(.1,this.delayResize,this));this._delayTimer=null,this._isScreenPortrait=window.innerHeight>=window.innerWidth,this._isScreenLandscape=!this._isScreenPortrait;var s=Math.max(Math.min(window.innerWidth,this._maxWidth),this._minWidth),r=Math.max(Math.min(window.innerHeight,this._maxHeight),this._minHeight);switch(this._scaleMode){case E.SCALE_EXACT_FIT:s/r>=this._screenRatio?(e=r*this._screenRatio,i=r):(e=s,i=s/this._screenRatio);break;case E.SCALE_SHOW_ALL:e=s,i=r}this._customResize||(this._app.renderer.view.style.width=e+"px",this._app.renderer.view.style.height=i+"px"),this._onlyLandscape?this.isScreenLandscape&&this._incorrectOrientation?(this._incorrectOrientation=!1,this.emit(this.C_ORIENTATION)):this.isScreenLandscape||this._incorrectOrientation||(this._incorrectOrientation=!0,this.emit(this.C_ORIENTATION)):this._onlyPortrait?this.isScreenPortrait&&this._incorrectOrientation?(this._incorrectOrientation=!1,this.emit(this.C_ORIENTATION)):this.isScreenPortrait||this._incorrectOrientation||(this._incorrectOrientation=!0,this.emit(this.C_ORIENTATION)):this.emit(this.C_ORIENTATION)}},{key:"startFullScreen",value:function(t){if(!this._isFullScreen)if(this._isFullScreen=!0,this.emit(this.C_FULL_CHANGE),"fullscreenEnabled"in document||"webkitFullscreenEnabled"in document||"mozFullScreenEnabled"in document||"msFullscreenEnabled"in document){if(document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled){console.log("User allows fullscreen");var e=t||document.documentElement;"requestFullscreen"in e?e.requestFullscreen():"webkitRequestFullscreen"in e?e.webkitRequestFullscreen():"mozRequestFullScreen"in e?e.mozRequestFullScreen():"msRequestFullscreen"in e&&e.msRequestFullscreen()}}else console.log("User doesn't allow full screen")}},{key:"stopFullScreen",value:function(){this._isFullScreen&&(this._isFullScreen=!1,this.emit(this.C_FULL_CHANGE),(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement)&&("exitFullscreen"in document?document.exitFullscreen():"webkitExitFullscreen"in document?document.webkitExitFullscreen():"mozCancelFullScreen"in document?document.mozCancelFullScreen():"msExitFullscreen"in document&&document.msExitFullscreen()))}},{key:"_screenChangeFull",value:function(){document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement?this._isFullScreen||(console.log("auto allows fullscreen"),this._isFullScreen=!0,this.emit(this.C_FULL_CHANGE)):this.stopFullScreen()}},{key:"addFullChange",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];i?this.once(this.C_FULL_CHANGE,t,e):this.on(this.C_FULL_CHANGE,t,e)}},{key:"removeFullChange",value:function(t,e){this.removeListener(this.C_FULL_CHANGE,t,e)}},{key:"_checkIosFull",value:function(){var t=window.screen.height<window.screen.width?window.screen.height:window.screen.width,e=768===t,i=1024===t,n=window.innerHeight===$(window).height();return e&&(n=!0),i&&(n=!0),n}},{key:"_updateTick",value:function(){this._checkIosFull()?this._isFullScreen||(this._isFullScreen=!0,this.emit(this.C_FULL_CHANGE)):this._isFullScreen&&(this._isFullScreen=!1,this.emit(this.C_FULL_CHANGE))}},{key:"forceOrientation",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];this._onlyLandscape=t,this._onlyPortrait=e,this._onlyLandscape?this.isScreenLandscape&&this._incorrectOrientation?(this._incorrectOrientation=!1,this.emit(this.C_ORIENTATION)):this.isScreenLandscape||this._incorrectOrientation||(this._incorrectOrientation=!0,this.emit(this.C_ORIENTATION)):this._onlyPortrait&&(this.isScreenPortrait&&this._incorrectOrientation?(this._incorrectOrientation=!1,this.emit(this.C_ORIENTATION)):this.isScreenPortrait||this._incorrectOrientation||(this._incorrectOrientation=!0,this.emit(this.C_ORIENTATION)))}},{key:"addIncorrectOrientation",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];i?this.once(this.C_ORIENTATION,t,e):this.on(this.C_ORIENTATION,t,e)}},{key:"removeIncorrectOrientation",value:function(t,e){this.removeListener(this.C_ORIENTATION,t,e)}},{key:"gameWidth",get:function(){return this._gameWidth}},{key:"gameHeight",get:function(){return this._gameHeight}},{key:"gameOrientation",get:function(){return this._gameOrientation}},{key:"gameLandscapeScreenRatio",get:function(){return this._gameLandscapeScreenRatio}},{key:"gamePortraitScreenRatio",get:function(){return this._gamePortraitScreenRatio}},{key:"screenRatio",get:function(){return this._screenRatio},set:function(t){this._screenRatio=t}},{key:"isScreenPortrait",get:function(){return this._isScreenPortrait}},{key:"isScreenLandscape",get:function(){return this._isScreenLandscape}},{key:"minWidth",set:function(t){this._minWidth=t}},{key:"minHeight",set:function(t){this._minHeight=t}},{key:"maxWidth",set:function(t){this._maxWidth=t}},{key:"maxHeight",set:function(t){this._maxHeight=t}},{key:"scaleMode",set:function(t){this._scaleMode=t,this.resize()}},{key:"isFullScreen",get:function(){return this._isFullScreen}},{key:"incorrectOrientation",get:function(){return this._incorrectOrientation}}]),i}(),ks=function(){function t(){l(this,t),this.android=!1,this.chromeOS=!1,this.cocoonJS=!1,this.cocoonJSApp=!1,this.cordova=!1,this.crosswalk=!1,this.desktop=!1,this.ejecta=!1,this.electron=!1,this.iOS=!1,this.iOSVersion=0,this.iPad=!1,this.iPhone=!1,this.kindle=!1,this.linux=!1,this.macOS=!1,this.node=!1,this.nodeWebkit=!1,this.pixelRatio=1,this.webApp=!1,this.windows=!1,this.windowsPhone=!1,this.init()}return c(t,[{key:"init",value:function(){var t=navigator.userAgent;/Windows/.test(t)?this.windows=!0:/Mac this/.test(t)?this.macthis=!0:/Linux/.test(t)?this.linux=!0:/Android/.test(t)?this.android=!0:/iP[ao]d|iPhone/i.test(t)?(this.ithis=!0,navigator.appVersion.match(/this (\d+)/),this.ithisVersion=parseInt(RegExp.$1,10)):/Kindle/.test(t)||/\bKF[A-Z][A-Z]+/.test(t)||/Silk.*Mobile Safari/.test(t)?this.kindle=!0:/Crthis/.test(t)&&(this.chromethis=!0),(/Windows Phone/i.test(t)||/IEMobile/i.test(t))&&(this.android=!1,this.ithis=!1,this.macthis=!1,this.windows=!0,this.windowsPhone=!0);var e,i=/Silk/.test(t);if((this.windows||this.macthis||this.linux&&!i||this.chromethis)&&(this.desktop=!0),(this.windowsPhone||/Windows NT/i.test(t)&&/Touch/i.test(t))&&(this.desktop=!1),navigator.standalone&&(this.webApp=!0),void 0!==window.cordova&&(this.cordova=!0),this.node&&"object"===h(e.versions)&&(this.nodeWebkit=!!e.versions["node-webkit"],this.electron=!!e.versions.electron),navigator.isCocoonJS){this.cocoonJS=!0;try{this.cocoonJSApp="undefined"!=typeof CocoonJS}catch(t){this.cocoonJSApp=!1}}return void 0!==window.ejecta&&(this.ejecta=!0),/Crthisswalk/.test(t)&&(this.crthisswalk=!0),this.iPhone=-1!==t.toLowerCase().indexOf("iphone"),this.iPad=-1!==t.toLowerCase().indexOf("ipad"),this.pixelRatio=window.devicePixelRatio||1,this}}]),t}(),xs=function(){function t(e){l(this,t),this._os=e,this.chrome=!1,this.chromeVersion=0,this.edge=!1,this.firefox=!1,this.firefoxVersion=0,this.ie=!1,this.ieVersion=0,this.mobileSafari=!1,this.opera=!1,this.safari=!1,this.safariVersion=0,this.silk=!1,this.trident=!1,this.tridentVersion=0,this.init(),this._isWebpSupported=!1,this._webpIsSupported(this._checkWeResult.bind(this)),this._isOggSupported=!1;var i=document.createElement("video");if(i.canPlayType){var n=i.canPlayType("audio/ogg");this._isOggSupported=Boolean(n.length)}}return c(t,[{key:"_checkWeResult",value:function(t){this._isWebpSupported=t}},{key:"_webpIsSupported",value:function(t){if(window.createImageBitmap){fetch("data:image/webp;base64,UklGRiQAAABXRUJQVlA4IBgAAAAwAQCdASoCAAEAAQAcJaQAA3AA/v3AgAA=").then((function(t){return t.blob()})).then((function(e){createImageBitmap(e).then((function(){t(!0)}),(function(){t(!1)}))}))}else t(!1)}},{key:"init",value:function(){var t=navigator.userAgent;return/Edge\/\d+/.test(t)?this.edge=!0:/Chrome\/(\d+)/.test(t)&&!this._os.windowsPhone?(this.chrome=!0,this.chromeVersion=parseInt(RegExp.$1,10)):/Firefox\D+(\d+)/.test(t)?(this.firefox=!0,this.firefoxVersion=parseInt(RegExp.$1,10)):/AppleWebKit/.test(t)&&this._os.iOS?this.mobileSafari=!0:/MSIE (\d+\.\d+);/.test(t)?(this.ie=!0,this.ieVersion=parseInt(RegExp.$1,10)):/Opera/.test(t)?this.opera=!0:/Safari/.test(t)&&!this._os.windowsPhone?this.safari=!0:/Trident\/(\d+\.\d+)(.*)rv:(\d+\.\d+)/.test(t)&&(this.ie=!0,this.trident=!0,this.tridentVersion=parseInt(RegExp.$1,10),this.ieVersion=parseInt(RegExp.$3,10)),/Silk/.test(t)&&(this.silk=!0),this}},{key:"isWebpSupported",get:function(){return this._isWebpSupported&&!Hr.offWebpSupport}},{key:"isOggSupported",get:function(){return this._isOggSupported}}]),t}(),bs={},ws={get exports(){return bs},set exports(t){bs=t}},Ss={};ss="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",rs={rotl:function(t,e){return t<<e|t>>>32-e},rotr:function(t,e){return t<<32-e|t>>>e},endian:function(t){if(t.constructor==Number)return 16711935&rs.rotl(t,8)|4278255360&rs.rotl(t,24);for(var e=0;e<t.length;e++)t[e]=rs.endian(t[e]);return t},randomBytes:function(t){for(var e=[];t>0;t--)e.push(Math.floor(256*Math.random()));return e},bytesToWords:function(t){for(var e=[],i=0,n=0;i<t.length;i++,n+=8)e[n>>>5]|=t[i]<<24-n%32;return e},wordsToBytes:function(t){for(var e=[],i=0;i<32*t.length;i+=8)e.push(t[i>>>5]>>>24-i%32&255);return e},bytesToHex:function(t){for(var e=[],i=0;i<t.length;i++)e.push((t[i]>>>4).toString(16)),e.push((15&t[i]).toString(16));return e.join("")},hexToBytes:function(t){for(var e=[],i=0;i<t.length;i+=2)e.push(parseInt(t.substr(i,2),16));return e},bytesToBase64:function(t){for(var e=[],i=0;i<t.length;i+=3)for(var n=t[i]<<16|t[i+1]<<8|t[i+2],s=0;s<4;s++)8*i+6*s<=8*t.length?e.push(ss.charAt(n>>>6*(3-s)&63)):e.push("=");return e.join("")},base64ToBytes:function(t){t=t.replace(/[^A-Z0-9+\/]/gi,"");for(var e=[],i=0,n=0;i<t.length;n=++i%4)0!=n&&e.push((ss.indexOf(t.charAt(i-1))&Math.pow(2,-2*n+8)-1)<<2*n|ss.indexOf(t.charAt(i))>>>6-2*n);return e}},{get exports(){return Ss},set exports(t){Ss=t}}.exports=rs;var Ts={utf8:{stringToBytes:function(t){return Ts.bin.stringToBytes(unescape(encodeURIComponent(t)))},bytesToString:function(t){return decodeURIComponent(escape(Ts.bin.bytesToString(t)))}},bin:{stringToBytes:function(t){for(var e=[],i=0;i<t.length;i++)e.push(255&t.charCodeAt(i));return e},bytesToString:function(t){for(var e=[],i=0;i<t.length;i++)e.push(String.fromCharCode(t[i]));return e.join("")}}},Os=Ts,Es=function(t){return null!=t&&(As(t)||function(t){return"function"==typeof t.readFloatLE&&"function"==typeof t.slice&&As(t.slice(0,0))}(t)||!!t._isBuffer)};function As(t){return!!t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t)}!function(){var t=Ss,e=Os.utf8,i=Es,n=Os.bin,s=function(r,o){r.constructor==String?r=o&&"binary"===o.encoding?n.stringToBytes(r):e.stringToBytes(r):i(r)?r=Array.prototype.slice.call(r,0):Array.isArray(r)||r.constructor===Uint8Array||(r=r.toString());for(var a=t.bytesToWords(r),h=8*r.length,l=1732584193,u=-271733879,c=-1732584194,d=271733878,_=0;_<a.length;_++)a[_]=16711935&(a[_]<<8|a[_]>>>24)|4278255360&(a[_]<<24|a[_]>>>8);a[h>>>5]|=128<<h%32,a[14+(h+64>>>9<<4)]=h;var p=s._ff,f=s._gg,v=s._hh,g=s._ii;for(_=0;_<a.length;_+=16){var y=l,m=u,k=c,x=d;l=p(l,u,c,d,a[_+0],7,-680876936),d=p(d,l,u,c,a[_+1],12,-389564586),c=p(c,d,l,u,a[_+2],17,606105819),u=p(u,c,d,l,a[_+3],22,-1044525330),l=p(l,u,c,d,a[_+4],7,-176418897),d=p(d,l,u,c,a[_+5],12,1200080426),c=p(c,d,l,u,a[_+6],17,-1473231341),u=p(u,c,d,l,a[_+7],22,-45705983),l=p(l,u,c,d,a[_+8],7,1770035416),d=p(d,l,u,c,a[_+9],12,-1958414417),c=p(c,d,l,u,a[_+10],17,-42063),u=p(u,c,d,l,a[_+11],22,-1990404162),l=p(l,u,c,d,a[_+12],7,1804603682),d=p(d,l,u,c,a[_+13],12,-40341101),c=p(c,d,l,u,a[_+14],17,-1502002290),l=f(l,u=p(u,c,d,l,a[_+15],22,1236535329),c,d,a[_+1],5,-165796510),d=f(d,l,u,c,a[_+6],9,-1069501632),c=f(c,d,l,u,a[_+11],14,643717713),u=f(u,c,d,l,a[_+0],20,-373897302),l=f(l,u,c,d,a[_+5],5,-701558691),d=f(d,l,u,c,a[_+10],9,38016083),c=f(c,d,l,u,a[_+15],14,-660478335),u=f(u,c,d,l,a[_+4],20,-405537848),l=f(l,u,c,d,a[_+9],5,568446438),d=f(d,l,u,c,a[_+14],9,-1019803690),c=f(c,d,l,u,a[_+3],14,-187363961),u=f(u,c,d,l,a[_+8],20,1163531501),l=f(l,u,c,d,a[_+13],5,-1444681467),d=f(d,l,u,c,a[_+2],9,-51403784),c=f(c,d,l,u,a[_+7],14,1735328473),l=v(l,u=f(u,c,d,l,a[_+12],20,-1926607734),c,d,a[_+5],4,-378558),d=v(d,l,u,c,a[_+8],11,-2022574463),c=v(c,d,l,u,a[_+11],16,1839030562),u=v(u,c,d,l,a[_+14],23,-35309556),l=v(l,u,c,d,a[_+1],4,-1530992060),d=v(d,l,u,c,a[_+4],11,1272893353),c=v(c,d,l,u,a[_+7],16,-155497632),u=v(u,c,d,l,a[_+10],23,-1094730640),l=v(l,u,c,d,a[_+13],4,681279174),d=v(d,l,u,c,a[_+0],11,-358537222),c=v(c,d,l,u,a[_+3],16,-722521979),u=v(u,c,d,l,a[_+6],23,76029189),l=v(l,u,c,d,a[_+9],4,-640364487),d=v(d,l,u,c,a[_+12],11,-421815835),c=v(c,d,l,u,a[_+15],16,530742520),l=g(l,u=v(u,c,d,l,a[_+2],23,-995338651),c,d,a[_+0],6,-198630844),d=g(d,l,u,c,a[_+7],10,1126891415),c=g(c,d,l,u,a[_+14],15,-1416354905),u=g(u,c,d,l,a[_+5],21,-57434055),l=g(l,u,c,d,a[_+12],6,1700485571),d=g(d,l,u,c,a[_+3],10,-1894986606),c=g(c,d,l,u,a[_+10],15,-1051523),u=g(u,c,d,l,a[_+1],21,-2054922799),l=g(l,u,c,d,a[_+8],6,1873313359),d=g(d,l,u,c,a[_+15],10,-30611744),c=g(c,d,l,u,a[_+6],15,-1560198380),u=g(u,c,d,l,a[_+13],21,1309151649),l=g(l,u,c,d,a[_+4],6,-145523070),d=g(d,l,u,c,a[_+11],10,-1120210379),c=g(c,d,l,u,a[_+2],15,718787259),u=g(u,c,d,l,a[_+9],21,-343485551),l=l+y>>>0,u=u+m>>>0,c=c+k>>>0,d=d+x>>>0}return t.endian([l,u,c,d])};s._ff=function(t,e,i,n,s,r,o){var a=t+(e&i|~e&n)+(s>>>0)+o;return(a<<r|a>>>32-r)+e},s._gg=function(t,e,i,n,s,r,o){var a=t+(e&n|i&~n)+(s>>>0)+o;return(a<<r|a>>>32-r)+e},s._hh=function(t,e,i,n,s,r,o){var a=t+(e^i^n)+(s>>>0)+o;return(a<<r|a>>>32-r)+e},s._ii=function(t,e,i,n,s,r,o){var a=t+(i^(e|~n))+(s>>>0)+o;return(a<<r|a>>>32-r)+e},s._blocksize=16,s._digestsize=16,ws.exports=function(e,i){if(null==e)throw new Error("Illegal argument "+e);var r=t.wordsToBytes(s(e,i));return i&&i.asBytes?r:i&&i.asString?n.bytesToString(r):t.bytesToHex(r)}}();var Ds={};!function(t){!function(t,e,i){function n(t){var e=this,i=function(){var t=4022871197,e=function(e){e=String(e);for(var i=0;i<e.length;i++){var n=.02519603282416938*(t+=e.charCodeAt(i));n-=t=n>>>0,t=(n*=t)>>>0,t+=4294967296*(n-=t)}return 2.3283064365386963e-10*(t>>>0)};return e}();e.next=function(){var t=2091639*e.s0+2.3283064365386963e-10*e.c;return e.s0=e.s1,e.s1=e.s2,e.s2=t-(e.c=0|t)},e.c=1,e.s0=i(" "),e.s1=i(" "),e.s2=i(" "),e.s0-=i(t),e.s0<0&&(e.s0+=1),e.s1-=i(t),e.s1<0&&(e.s1+=1),e.s2-=i(t),e.s2<0&&(e.s2+=1),i=null}function s(t,e){return e.c=t.c,e.s0=t.s0,e.s1=t.s1,e.s2=t.s2,e}function r(t,e){var i=new n(t),r=e&&e.state,o=i.next;return o.int32=function(){return 4294967296*i.next()|0},o.double=function(){return o()+11102230246251565e-32*(2097152*o()|0)},o.quick=o,r&&("object"==typeof r&&s(r,i),o.state=function(){return s(i,{})}),o}e&&e.exports?e.exports=r:i&&i.amd?i((function(){return r})):this.alea=r}(0,t,!1)}({get exports(){return Ds},set exports(t){Ds=t}});var Cs={};!function(t){!function(t,e,i){function n(t){var e=this,i="";e.x=0,e.y=0,e.z=0,e.w=0,e.next=function(){var t=e.x^e.x<<11;return e.x=e.y,e.y=e.z,e.z=e.w,e.w^=e.w>>>19^t^t>>>8},t===(0|t)?e.x=t:i+=t;for(var n=0;n<i.length+64;n++)e.x^=0|i.charCodeAt(n),e.next()}function s(t,e){return e.x=t.x,e.y=t.y,e.z=t.z,e.w=t.w,e}function r(t,e){var i=new n(t),r=e&&e.state,o=function(){return(i.next()>>>0)/4294967296};return o.double=function(){do{var t=((i.next()>>>11)+(i.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},o.int32=i.next,o.quick=o,r&&("object"==typeof r&&s(r,i),o.state=function(){return s(i,{})}),o}e&&e.exports?e.exports=r:i&&i.amd?i((function(){return r})):this.xor128=r}(0,t,!1)}({get exports(){return Cs},set exports(t){Cs=t}});var Ms={};!function(t){!function(t,e,i){function n(t){var e=this,i="";e.next=function(){var t=e.x^e.x>>>2;return e.x=e.y,e.y=e.z,e.z=e.w,e.w=e.v,(e.d=e.d+362437|0)+(e.v=e.v^e.v<<4^t^t<<1)|0},e.x=0,e.y=0,e.z=0,e.w=0,e.v=0,t===(0|t)?e.x=t:i+=t;for(var n=0;n<i.length+64;n++)e.x^=0|i.charCodeAt(n),n==i.length&&(e.d=e.x<<10^e.x>>>4),e.next()}function s(t,e){return e.x=t.x,e.y=t.y,e.z=t.z,e.w=t.w,e.v=t.v,e.d=t.d,e}function r(t,e){var i=new n(t),r=e&&e.state,o=function(){return(i.next()>>>0)/4294967296};return o.double=function(){do{var t=((i.next()>>>11)+(i.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},o.int32=i.next,o.quick=o,r&&("object"==typeof r&&s(r,i),o.state=function(){return s(i,{})}),o}e&&e.exports?e.exports=r:i&&i.amd?i((function(){return r})):this.xorwow=r}(0,t,!1)}({get exports(){return Ms},set exports(t){Ms=t}});var Ls={};!function(t){!function(t,e,i){function n(t){var e=this;e.next=function(){var t,i,n=e.x,s=e.i;return t=n[s],i=(t^=t>>>7)^t<<24,i^=(t=n[s+1&7])^t>>>10,i^=(t=n[s+3&7])^t>>>3,i^=(t=n[s+4&7])^t<<7,t=n[s+7&7],i^=(t^=t<<13)^t<<9,n[s]=i,e.i=s+1&7,i},function(t,e){var i,n=[];if(e===(0|e))n[0]=e;else for(e=""+e,i=0;i<e.length;++i)n[7&i]=n[7&i]<<15^e.charCodeAt(i)+n[i+1&7]<<13;for(;n.length<8;)n.push(0);for(i=0;i<8&&0===n[i];++i);for(8==i?n[7]=-1:n[i],t.x=n,t.i=0,i=256;i>0;--i)t.next()}(e,t)}function s(t,e){return e.x=t.x.slice(),e.i=t.i,e}function r(t,e){null==t&&(t=+new Date);var i=new n(t),r=e&&e.state,o=function(){return(i.next()>>>0)/4294967296};return o.double=function(){do{var t=((i.next()>>>11)+(i.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},o.int32=i.next,o.quick=o,r&&(r.x&&s(r,i),o.state=function(){return s(i,{})}),o}e&&e.exports?e.exports=r:i&&i.amd?i((function(){return r})):this.xorshift7=r}(0,t,!1)}({get exports(){return Ls},set exports(t){Ls=t}});var Ps={};!function(t){!function(t,e,i){function n(t){var e=this;e.next=function(){var t,i,n=e.w,s=e.X,r=e.i;return e.w=n=n+1640531527|0,i=s[r+34&127],t=s[r=r+1&127],i^=i<<13,t^=t<<17,i^=i>>>15,t^=t>>>12,i=s[r]=i^t,e.i=r,i+(n^n>>>16)|0},function(t,e){var i,n,s,r,o,a=[],h=128;for(e===(0|e)?(n=e,e=null):(e+="\0",n=0,h=Math.max(h,e.length)),s=0,r=-32;r<h;++r)e&&(n^=e.charCodeAt((r+32)%e.length)),0===r&&(o=n),n^=n<<10,n^=n>>>15,n^=n<<4,n^=n>>>13,r>=0&&(o=o+1640531527|0,s=0==(i=a[127&r]^=n+o)?s+1:0);for(s>=128&&(a[127&(e&&e.length||0)]=-1),s=127,r=512;r>0;--r)n=a[s+34&127],i=a[s=s+1&127],n^=n<<13,i^=i<<17,n^=n>>>15,i^=i>>>12,a[s]=n^i;t.w=o,t.X=a,t.i=s}(e,t)}function s(t,e){return e.i=t.i,e.w=t.w,e.X=t.X.slice(),e}function r(t,e){null==t&&(t=+new Date);var i=new n(t),r=e&&e.state,o=function(){return(i.next()>>>0)/4294967296};return o.double=function(){do{var t=((i.next()>>>11)+(i.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},o.int32=i.next,o.quick=o,r&&(r.X&&s(r,i),o.state=function(){return s(i,{})}),o}e&&e.exports?e.exports=r:i&&i.amd?i((function(){return r})):this.xor4096=r}(0,t,!1)}({get exports(){return Ps},set exports(t){Ps=t}});var Us={};!function(t){!function(t,e,i){function n(t){var e=this,i="";e.next=function(){var t=e.b,i=e.c,n=e.d,s=e.a;return t=t<<25^t>>>7^i,i=i-n|0,n=n<<24^n>>>8^s,s=s-t|0,e.b=t=t<<20^t>>>12^i,e.c=i=i-n|0,e.d=n<<16^i>>>16^s,e.a=s-t|0},e.a=0,e.b=0,e.c=-1640531527,e.d=1367130551,t===Math.floor(t)?(e.a=t/4294967296|0,e.b=0|t):i+=t;for(var n=0;n<i.length+20;n++)e.b^=0|i.charCodeAt(n),e.next()}function s(t,e){return e.a=t.a,e.b=t.b,e.c=t.c,e.d=t.d,e}function r(t,e){var i=new n(t),r=e&&e.state,o=function(){return(i.next()>>>0)/4294967296};return o.double=function(){do{var t=((i.next()>>>11)+(i.next()>>>0)/4294967296)/(1<<21)}while(0===t);return t},o.int32=i.next,o.quick=o,r&&("object"==typeof r&&s(r,i),o.state=function(){return s(i,{})}),o}e&&e.exports?e.exports=r:i&&i.amd?i((function(){return r})):this.tychei=r}(0,t,!1)}({get exports(){return Us},set exports(t){Us=t}});var Ns={},Is={get exports(){return Ns},set exports(t){Ns=t}},Rs=s(Object.freeze({__proto__:null,default:{}}));!function(t){!function(e,i,n){var s,r=256,o=n.pow(r,6),a=n.pow(2,52),h=2*a,l=255;function u(t,l,u){var v=[],g=p(_((l=1==l?{entropy:!0}:l||{}).entropy?[t,f(i)]:null==t?function(){try{var t;return s&&(t=s.randomBytes)?t=t(r):(t=new Uint8Array(r),(e.crypto||e.msCrypto).getRandomValues(t)),f(t)}catch(t){var n=e.navigator,o=n&&n.plugins;return[+new Date,e,o,e.screen,f(i)]}}():t,3),v),y=new c(v),m=function(){for(var t=y.g(6),e=o,i=0;t<a;)t=(t+i)*r,e*=r,i=y.g(1);for(;t>=h;)t/=2,e/=2,i>>>=1;return(t+i)/e};return m.int32=function(){return 0|y.g(4)},m.quick=function(){return y.g(4)/4294967296},m.double=m,p(f(y.S),i),(l.pass||u||function(t,e,i,s){return s&&(s.S&&d(s,y),t.state=function(){return d(y,{})}),i?(n.random=t,e):t})(m,g,"global"in l?l.global:this==n,l.state)}function c(t){var e,i=t.length,n=this,s=0,o=n.i=n.j=0,a=n.S=[];for(i||(t=[i++]);s<r;)a[s]=s++;for(s=0;s<r;s++)a[s]=a[o=l&o+t[s%i]+(e=a[s])],a[o]=e;(n.g=function(t){for(var e,i=0,s=n.i,o=n.j,a=n.S;t--;)e=a[s=l&s+1],i=i*r+a[l&(a[s]=a[o=l&o+e])+(a[o]=e)];return n.i=s,n.j=o,i})(r)}function d(t,e){return e.i=t.i,e.j=t.j,e.S=t.S.slice(),e}function _(t,e){var i,n=[],s=typeof t;if(e&&"object"==s)for(i in t)try{n.push(_(t[i],e-1))}catch(t){}return n.length?n:"string"==s?t:t+"\0"}function p(t,e){for(var i,n=t+"",s=0;s<n.length;)e[l&s]=l&(i^=19*e[l&s])+n.charCodeAt(s++);return f(e)}function f(t){return String.fromCharCode.apply(0,t)}if(p(n.random(),i),t.exports){t.exports=u;try{s=Rs}catch(t){}}else n.seedrandom=u}("undefined"!=typeof self?self:i,[],Math)}(Is);var Fs=Ds,Ys=Cs,Xs=Ms,Bs=Ls,zs=Ps,Vs=Us,Hs=Ns;Hs.alea=Fs,Hs.xor128=Ys,Hs.xorwow=Xs,Hs.xorshift7=Bs,Hs.xor4096=zs,Hs.tychei=Vs;var Ws=Hs,js=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}();function Gs(t){if(Array.isArray(t)){for(var e=0,i=Array(t.length);e<t.length;e++)i[e]=t[e];return i}return Array.from(t)}var Ks=Ws,qs=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.generator=Math.random}return js(t,[{key:"seed",value:function(t,e){e=e||{},this.generator=Ks[e.PRNG||"alea"](t,{state:e.state}),this.options=e}},{key:"save",value:function(){if(this.generator!==Math.random)return this.generator.state()}},{key:"restore",value:function(t){this.generator=Ks[this.options.PRNG||"alea"]("",{state:t})}},{key:"seedOld",value:function(t){this.generator=function(){var e=1e4*Math.sin(t++);return e-Math.floor(e)}}},{key:"separateSeed",value:function(e){var i=new t;return i.seed(e),i}},{key:"reset",value:function(){this.generator=Math.random}},{key:"get",value:function(t,e){var i=t<0?-1:1;t*=i;return(e?this.generator()*t:Math.floor(this.generator()*t))*i}},{key:"getHuge",value:function(){return this.get(Number.MAX_SAFE_INTEGER)}},{key:"middle",value:function(t,e,i){var n=e/2;return this.range(t-n,t+n,i)}},{key:"range",value:function(t,e,i){if(e===t)return e;if(i)return this.get(e-t,!0)+t;var n=void 0;return t<0&&e>0?n=-t+e+1:0===t&&e>0?n=e+1:t<0&&0===e?(n=t-1,t=1):n=t<0&&e<0?e-t-1:e-t+1,Math.floor(this.generator()*n)+t}},{key:"rangeMultiple",value:function(t,e,i,n){for(var s=[],r=0;r<i;r++)s.push(this.range(t,e,n));return s}},{key:"middleMultiple",value:function(t,e,i,n){for(var s=[],r=0;r<i;r++)s.push(t(t,e,n));return s}},{key:"sign",value:function(t){return t=t||.5,this.generator()<t?1:-1}},{key:"chance",value:function(t){return this.generator()<(t||.5)}},{key:"angle",value:function(){return this.get(2*Math.PI,!0)}},{key:"shuffle",value:function(t,e){if(e&&(t=t.slice()),0===t.length)return t;for(var i=t.length,n=void 0,s=void 0;0!==i;)s=this.get(i),n=t[i-=1],t[i]=t[s],t[s]=n;return t}},{key:"pick",value:function(t,e){if(e){var i=this.get(t.length),n=t[i];return t.splice(i,1),n}return t[this.get(t.length)]}},{key:"select",value:function(t,e){for(var i=[].concat(Gs(t)),n=[],s=0;s<e;s++){var r=this.get(i.length);n.push.apply(n,Gs(i.splice(r,1)))}return n}},{key:"property",value:function(t){var e,i=0;for(var n in t)this.chance(1/++i)&&(e=n);return e}},{key:"set",value:function(t,e,i){var n,s=[],r=[];for(n=t;n<e;n++)r.push(n);for(n=0;n<i;n++){var o=this.get(r.length);s.push(r[o]),r.splice(o,1)}return s}},{key:"distribution",value:function(t,e,i,n,s,r){var o=Math.floor((e-t)/i),a=o/2,h=o/4,l=[];n&&l.push(t);for(var u=0;u<i;u++)l.push(t+u*o+a+this.range(-h,h,r));return s&&l.push(e),l}},{key:"weightedProbabilityInt",value:function(t,e,i,n){function s(){var t=void 0,e=void 0,i=void 0;do{i=(t=2*this.get(1,!0)-1)*t+(e=2*this.get(1,!0)-1)*e}while(i>=1||0===i);return t*Math.sqrt(-2*Math.log(i)/i)}if(n=n||1,!(Math.random()<.81546))return this.range(t,e);for(;;){var r=s()*n+i;if(r>=t&&r<=e)return r}}},{key:"circle",value:function(t,e,i,n){var s=this.angle(),r=this.get(1,!0)+this.get(1,!0),o=r>1?2-r:r;return n?[t+o*Math.cos(s)*i,e+o*Math.sin(s)*i]:[Math.round(t+o*Math.cos(s)*i),Math.round(e+o*Math.sin(s)*i)]}},{key:"color",value:function(){return this.get(16777215)}}]),t}(),Js=new qs,Zs={};!function(t,e){(function(){var e,i;i=function(e){return t.exports=e},e={linear:function(t,e,i,n){return i*t/n+e},easeInQuad:function(t,e,i,n){return i*(t/=n)*t+e},easeOutQuad:function(t,e,i,n){return-i*(t/=n)*(t-2)+e},easeInOutQuad:function(t,e,i,n){return(t/=n/2)<1?i/2*t*t+e:-i/2*(--t*(t-2)-1)+e},easeInCubic:function(t,e,i,n){return i*(t/=n)*t*t+e},easeOutCubic:function(t,e,i,n){return i*((t=t/n-1)*t*t+1)+e},easeInOutCubic:function(t,e,i,n){return(t/=n/2)<1?i/2*t*t*t+e:i/2*((t-=2)*t*t+2)+e},easeInQuart:function(t,e,i,n){return i*(t/=n)*t*t*t+e},easeOutQuart:function(t,e,i,n){return-i*((t=t/n-1)*t*t*t-1)+e},easeInOutQuart:function(t,e,i,n){return(t/=n/2)<1?i/2*t*t*t*t+e:-i/2*((t-=2)*t*t*t-2)+e},easeInQuint:function(t,e,i,n){return i*(t/=n)*t*t*t*t+e},easeOutQuint:function(t,e,i,n){return i*((t=t/n-1)*t*t*t*t+1)+e},easeInOutQuint:function(t,e,i,n){return(t/=n/2)<1?i/2*t*t*t*t*t+e:i/2*((t-=2)*t*t*t*t+2)+e},easeInSine:function(t,e,i,n){return-i*Math.cos(t/n*(Math.PI/2))+i+e},easeOutSine:function(t,e,i,n){return i*Math.sin(t/n*(Math.PI/2))+e},easeInOutSine:function(t,e,i,n){return-i/2*(Math.cos(Math.PI*t/n)-1)+e},easeInExpo:function(t,e,i,n){return 0===t?e:i*Math.pow(2,10*(t/n-1))+e},easeOutExpo:function(t,e,i,n){return t===n?e+i:i*(1-Math.pow(2,-10*t/n))+e},easeInOutExpo:function(t,e,i,n){return(t/=n/2)<1?i/2*Math.pow(2,10*(t-1))+e:i/2*(2-Math.pow(2,-10*--t))+e},easeInCirc:function(t,e,i,n){return-i*(Math.sqrt(1-(t/=n)*t)-1)+e},easeOutCirc:function(t,e,i,n){return i*Math.sqrt(1-(t=t/n-1)*t)+e},easeInOutCirc:function(t,e,i,n){return(t/=n/2)<1?-i/2*(Math.sqrt(1-t*t)-1)+e:i/2*(Math.sqrt(1-(t-=2)*t)+1)+e},easeInElastic:function(t,e,i,n){var s,r,o;return o=1.70158,0===t||(t/=n),(r=0)||(r=.3*n),(s=i)<Math.abs(i)?(s=i,o=r/4):o=r/(2*Math.PI)*Math.asin(i/s),-s*Math.pow(2,10*(t-=1))*Math.sin((t*n-o)*(2*Math.PI)/r)+e},easeOutElastic:function(t,e,i,n){var s,r,o;return o=1.70158,0===t||(t/=n),(r=0)||(r=.3*n),(s=i)<Math.abs(i)?(s=i,o=r/4):o=r/(2*Math.PI)*Math.asin(i/s),s*Math.pow(2,-10*t)*Math.sin((t*n-o)*(2*Math.PI)/r)+i+e},easeInOutElastic:function(t,e,i,n){var s,r,o;return o=1.70158,0===t||(t/=n/2),(r=0)||(r=n*(.3*1.5)),(s=i)<Math.abs(i)?(s=i,o=r/4):o=r/(2*Math.PI)*Math.asin(i/s),t<1?s*Math.pow(2,10*(t-=1))*Math.sin((t*n-o)*(2*Math.PI)/r)*-.5+e:s*Math.pow(2,-10*(t-=1))*Math.sin((t*n-o)*(2*Math.PI)/r)*.5+i+e},easeInBack:function(t,e,i,n,s){return void 0===s&&(s=1.70158),i*(t/=n)*t*((s+1)*t-s)+e},easeOutBack:function(t,e,i,n,s){return void 0===s&&(s=1.70158),i*((t=t/n-1)*t*((s+1)*t+s)+1)+e},easeInOutBack:function(t,e,i,n,s){return void 0===s&&(s=1.70158),(t/=n/2)<1?i/2*(t*t*((1+(s*=1.525))*t-s))+e:i/2*((t-=2)*t*((1+(s*=1.525))*t+s)+2)+e},easeInBounce:function(t,i,n,s){return n-e.easeOutBounce(s-t,0,n,s)+i},easeOutBounce:function(t,e,i,n){return(t/=n)<1/2.75?i*(7.5625*t*t)+e:t<2/2.75?i*(7.5625*(t-=1.5/2.75)*t+.75)+e:t<2.5/2.75?i*(7.5625*(t-=2.25/2.75)*t+.9375)+e:i*(7.5625*(t-=2.625/2.75)*t+.984375)+e},easeInOutBounce:function(t,i,n,s){return t<s/2?.5*e.easeInBounce(2*t,0,n,s)+i:.5*e.easeOutBounce(2*t-s,0,n,s)+.5*n+i}},i(e)}).call(i)}({get exports(){return Zs},set exports(t){Zs=t}});var Qs=Zs,$s={};!function(t){var e=Object.prototype.hasOwnProperty,i="~";function n(){}function s(t,e,i){this.fn=t,this.context=e,this.once=i||!1}function r(t,e,n,r,o){if("function"!=typeof n)throw new TypeError("The listener must be a function");var a=new s(n,r||t,o),h=i?i+e:e;return t._events[h]?t._events[h].fn?t._events[h]=[t._events[h],a]:t._events[h].push(a):(t._events[h]=a,t._eventsCount++),t}function o(t,e){0==--t._eventsCount?t._events=new n:delete t._events[e]}function a(){this._events=new n,this._eventsCount=0}Object.create&&(n.prototype=Object.create(null),(new n).__proto__||(i=!1)),a.prototype.eventNames=function(){var t,n,s=[];if(0===this._eventsCount)return s;for(n in t=this._events)e.call(t,n)&&s.push(i?n.slice(1):n);return Object.getOwnPropertySymbols?s.concat(Object.getOwnPropertySymbols(t)):s},a.prototype.listeners=function(t){var e=i?i+t:t,n=this._events[e];if(!n)return[];if(n.fn)return[n.fn];for(var s=0,r=n.length,o=new Array(r);s<r;s++)o[s]=n[s].fn;return o},a.prototype.listenerCount=function(t){var e=i?i+t:t,n=this._events[e];return n?n.fn?1:n.length:0},a.prototype.emit=function(t,e,n,s,r,o){var a=i?i+t:t;if(!this._events[a])return!1;var h,l,u=this._events[a],c=arguments.length;if(u.fn){switch(u.once&&this.removeListener(t,u.fn,void 0,!0),c){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,e),!0;case 3:return u.fn.call(u.context,e,n),!0;case 4:return u.fn.call(u.context,e,n,s),!0;case 5:return u.fn.call(u.context,e,n,s,r),!0;case 6:return u.fn.call(u.context,e,n,s,r,o),!0}for(l=1,h=new Array(c-1);l<c;l++)h[l-1]=arguments[l];u.fn.apply(u.context,h)}else{var d,_=u.length;for(l=0;l<_;l++)switch(u[l].once&&this.removeListener(t,u[l].fn,void 0,!0),c){case 1:u[l].fn.call(u[l].context);break;case 2:u[l].fn.call(u[l].context,e);break;case 3:u[l].fn.call(u[l].context,e,n);break;case 4:u[l].fn.call(u[l].context,e,n,s);break;default:if(!h)for(d=1,h=new Array(c-1);d<c;d++)h[d-1]=arguments[d];u[l].fn.apply(u[l].context,h)}}return!0},a.prototype.on=function(t,e,i){return r(this,t,e,i,!1)},a.prototype.once=function(t,e,i){return r(this,t,e,i,!0)},a.prototype.removeListener=function(t,e,n,s){var r=i?i+t:t;if(!this._events[r])return this;if(!e)return o(this,r),this;var a=this._events[r];if(a.fn)a.fn!==e||s&&!a.once||n&&a.context!==n||o(this,r);else{for(var h=0,l=[],u=a.length;h<u;h++)(a[h].fn!==e||s&&!a[h].once||n&&a[h].context!==n)&&l.push(a[h]);l.length?this._events[r]=1===l.length?l[0]:l:o(this,r)}return this},a.prototype.removeAllListeners=function(t){var e;return t?(e=i?i+t:t,this._events[e]&&o(this,e)):(this._events=new n,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=i,a.EventEmitter=a,t.exports=a}({get exports(){return $s},set exports(t){$s=t}});var tr=$s,er=function(t){d(i,t);var e=g(i);function i(t,n,s){var r;for(var o in l(this,i),(r=e.call(this)).elements=Array.isArray(t)?t:[t],r.eases=[],r.options=s||{},r.time=0,n){var a,h=T(r.elements);try{for(h.s();!(a=h.n()).done;){var u=a.value;r.addParam(u,o,n[o])}}catch(t){h.e(t)}finally{h.f()}}return r}return c(i,[{key:"addParam",value:function(t,e,n){var s,r,o,a,h=this,l=e;switch(e){case"scaleX":case"skewX":r=n,o=n-(s=t[l=e.substr(0,e.length-1)].x),a=function(t){return h.updateCoord(t,l,"x")};break;case"scaleY":case"skewY":r=n,o=n-(s=t[l=e.substr(0,e.length-1)].y),a=function(t){return h.updateCoord(t,l,"y")};break;case"tint":case"blend":var u=Array.isArray(n)?n:[t.tint,n];s=0,o=r=u.length,a="tint"===e?function(t){return h.updateTint(t,u)}:function(t){return h.updateBlend(t,u)};break;case"shake":s={x:t.x,y:t.y},r=n,a=function(t){return h.updateShake(t)};break;case"position":s={x:t.x,y:t.y},o={x:(r={x:n.x,y:n.y}).x-s.x,y:r.y-s.y},a=function(t){return h.updatePosition(t)};break;case"skew":case"scale":r=n,o=n-(s=t[e].x),a=function(t){return h.updatePoint(t,e)};break;case"face":s=t.rotation,o=(r=i.shortestAngle(s,Math.atan2(n.y-t.y,n.x-t.x)))-s,a=function(t){return h.updateOne(t,"rotation")};break;default:r=n,o=n-(s=t[e]),a=function(t){return h.updateOne(t,e)}}this.eases.push({element:t,entry:e,update:a,start:s,to:r,delta:o})}},{key:"remove",value:function(t,e){if(0===arguments.length)this.eases=[];else{"string"==typeof e&&(e=[e]);for(var i=0;i<this.eases.length;i++){var n=this.eases[i];t&&n.element!==t||e&&-1===e.indexOf(n.entry)||(this.eases.splice(i,1),i--)}}if(0===this.eases.length)return!0}},{key:"updateOne",value:function(t,e){t.element[e]=this.options.ease(this.time,t.start,t.delta,this.options.duration)}},{key:"updatePoint",value:function(t,e){t.element[e].x=t.element[e].y=this.options.ease(this.time,t.start,t.delta,this.options.duration)}},{key:"updatePosition",value:function(t){t.element.x=this.options.ease(this.time,t.start.x,t.delta.x,this.options.duration),t.element.y=this.options.ease(this.time,t.start.y,t.delta.y,this.options.duration)}},{key:"updateCoord",value:function(t,e,i){t.element[e][i]=this.options.ease(this.time,t.start,t.delta,this.options.duration)}},{key:"updateTint",value:function(t,e){var i=Math.floor(this.options.ease(this.time,t.start,t.delta,this.options.duration));i===e.length&&(i=e.length-1),t.element.tint=e[i]}},{key:"updateBlend",value:function(t,e){var i=this.options.ease(this.time,t.start,t.delta,this.options.duration),n=Math.floor(i);n===e.length&&(n=e.length-1);var s=n+1;s===e.length&&(s=this.options.reverse?n-1:this.options.repeat?0:n);var r=i-n,o=e[n],a=e[s],h=1-r,l=h*(o>>16)+r*(a>>16),u=h*(o>>8&255)+r*(a>>8&255),c=h*(255&o)+r*(255&a);t.element.tint=l<<16|u<<8|c}},{key:"updateShake",value:function(t){function e(t){return Math.floor(Math.random()*t)-Math.floor(t/2)}t.element.x=t.start.x+e(t.to),t.element.y=t.start.y+e(t.to)}},{key:"complete",value:function(t){"shake"===t.entry&&(t.element.x=t.start.x,t.element.y=t.start.y)}},{key:"reverse",value:function(t){if("position"===t.entry){var e=t.to.x,i=t.to.y;t.to.x=t.start.x,t.to.y=t.start.y,t.start.x=e,t.start.y=i,t.delta.x=-t.delta.x,t.delta.y=-t.delta.y}else{var n=t.to;t.to=t.start,t.start=n,t.delta=-t.delta}}},{key:"repeat",value:function(t){switch(t.entry){case"skewX":t.element.skew.x=t.start;break;case"skewY":t.element.skew.y=t.start;break;case"skew":t.element.skew.x=t.start,t.element.skew.y=t.start;break;case"scaleX":t.element.scale.x=t.start;break;case"scaleY":t.element.scale.y=t.start;break;case"scale":t.element.scale.x=t.start,t.element.scale.y=t.start;break;case"position":t.element.x=t.start.x,t.element.y=t.start.y;break;default:t.element[t.entry]=t.start}}},{key:"update",value:function(t){var e=this;if(0===this.eases.length)return!0;if(this.options.wait){if(this.options.wait-=t,this.options.wait>0)return void this.emit("wait",this);t=-this.options.wait,this.options.wait=0,this.emit("wait-end",this)}this.time+=t;var i=0;this.time>=this.options.duration&&(i=this.time-this.options.duration,this.time=this.options.duration);for(var n=0;n<this.eases.length;n++){var s=this.eases[n];s.element._destroyed?(this.eases.splice(n,1),n--):s.update(s)}if(this.emit("each",this),this.time>=this.options.duration)if(this.options.reverse)this.eases.forEach((function(t){return e.reverse(t)})),this.time=i,i&&this.eases.forEach((function(t){return t.update(t)})),this.emit("reverse",this),this.options.repeat?!0!==this.options.repeat&&this.options.repeat--:this.options.reverse=!1;else{if(!this.options.repeat)return this.eases.forEach((function(t){return e.complete(t)})),this.emit("complete",this),!0;this.eases.forEach((function(t){return e.repeat(t)})),this.time=i,i&&this.eases.forEach((function(t){return t.update(t)})),!0!==this.options.repeat&&this.options.repeat--,this.emit("repeat",this)}}},{key:"count",get:function(){return this.eases.length}}],[{key:"shortestAngle",value:function(t,e){var i,n=2*Math.PI,s=Math.abs(t-e)%n;return(s=s>Math.PI?n-s:s)*(((e-t+Math.PI)%(i=n)+i)%i-Math.PI>0?1:-1)}}]),i}(tr),ir={duration:1e3,ease:Qs.easeInOutSine,maxFrame:1e3/60,ticker:null,useRAF:!0},nr=function(t){d(i,t);var e=g(i);function i(t){var n;return l(this,i),(n=e.call(this)).options=Object.assign({},ir,t),n.easings=[],n.empty=!0,n.options.ticker&&n.options.ticker.add(n.update,f(n)),n}return c(i,[{key:"destroy",value:function(){this.removeAll(),this.options.useTicker?this.ticker.remove(this.update,this):this.options.useRAF&&(cancelAnimationFrame(this.handleRAF),this.handleRAF=null)}},{key:"add",value:function(t,e,i){var n=this;(i=i||{}).duration=void 0!==i.duration?i.duration:this.options.duration,i.ease=i.ease||this.options.ease,"string"==typeof i.ease&&(i.ease=Qs[i.ease]);var s=new er(t,e,i);return this.easings.push(s),this.empty&&this.options.useRAF&&(this.handleRAF=requestAnimationFrame((function(){return n.update()})),this.lastTime=Date.now()),this.empty=!1,s}},{key:"target",value:function(t,e,i,n){var s=Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))/i;return(n=n||{}).duration=s,this.add(t,{x:e.x,y:e.y},n)}},{key:"face",value:function(t,e,i,n){var s=er.shortestAngle(t.rotation,Math.atan2(e.y-t.y,e.x-t.x)),r=Math.abs(s-t.rotation)/i;return(n=n||{}).duration=r,this.add(t,{rotation:s},n)}},{key:"removeEase",value:function(t,e){for(var i=0;i<this.easings.length;i++)this.easings[i].remove(t,e)&&(this.easings.splice(i,1),i--);0===this.easings.length&&(this.empty=!0,this.options.useRAF&&this.handleRAF&&(cancelAnimationFrame(this.handleRAF),this.handleRAF=null))}},{key:"removeAll",value:function(){this.easings=[],this.empty=!0,this.options.useRAF&&this.handleRAF&&(cancelAnimationFrame(this.handleRAF),this.handleRAF=null)}},{key:"update",value:function(t){var e=this;if(this.options.useTicker)t=this.ticker.elapsedMS;else if(this.options.useRAF){var i=Date.now();t=i-this.lastTime,this.lastTime=i}if(t=Math.min(t,this.options.maxFrame),!this.empty){var n,s=T(this.easings.slice(0));try{for(s.s();!(n=s.n()).done;){var r=n.value;r.update(t)&&this.easings.splice(this.easings.indexOf(r),1)}}catch(t){s.e(t)}finally{s.f()}this.emit("each",this),0===this.easings.length&&(this.empty=!0,this.emit("complete",this))}this.options.useRAF&&this.easings.length?this.handleRAF=requestAnimationFrame((function(){return e.update()})):this.handleRAF=null}},{key:"count",get:function(){return this.easings.length}},{key:"countRunning",value:function(){var t,e=0,i=T(this.easings);try{for(i.s();!(t=i.n()).done;){e+=t.value.count}}catch(t){i.e(t)}finally{i.f()}return e}},{key:"duration",get:function(){return this.options.duration},set:function(t){this.options.duration=t}},{key:"ease",get:function(){return this.options.ease},set:function(t){this.options.ease=t}}]),i}(tr);nr.id=0;var sr=new nr;nr.ease=sr;var rr,or,ar,hr,lr,ur,cr,dr,_r,pr,fr,vr,gr,yr,mr,kr=function(){function t(){l(this,t)}return c(t,[{key:"updateGameSize",value:function(t,e,i,n){if(!Hr.isDesktop||A.ALLOW_DESK_SIZE){Hr.isScreenPortrait=n,this._screenPos=n?"v_":Hr.isDesktop?"d_":"m_";var s=[t].concat(b(t.children));Hr.isDesktop;for(var r=0,o=s.length;r<o;r++){var a=s[r],h=a.json;if(h&&!h.noCheckSize){if(a!==t&&h.deepPosition&&this.updateGameSize(a,e,i,n),t.isAlign&&t.canvas&&h.deepPosition)for(var l=0;l<t.canvas.children.length;l++)this.updateGameSize(t.canvas.children[l],e,i,n);var u=this._param(h,"screen_height",null);if(n&&u)if(Array.isArray(u)){for(var c=0,d=0;d<u.length;d++)Hr.HEIGHT>=u[r]&&(c=u[r]);c&&(u=c)}else Hr.HEIGHT<u&&(u=0);var _=this._params(h,"scale","scaleX",1),p=this._params(h,"scale","scaleY",1);n&&u&&h["scale_"+String(u)]&&(_=h["scale_"+String(u)],p=h["scale_"+String(u)]),a.scale.x!==_&&(a.scale.x=_),a.scale.y!==p&&(a.scale.y=p),h.type===E.OMY_BUTTON_TWEEN&&(a._saveScaleX=_,a._saveScaleY=p);var f=this._param(h,"x");n&&u&&h["x_"+String(u)]&&(f=h["x_"+String(u)]);var v=f+this._param(h,"dx")*_;v+=e*this._param(h,"sdx");var g=this._param(h,"y");n&&u&&h["y_"+String(u)]&&(g=h["y_"+String(u)]);var y=g+this._param(h,"dy")*p;if(y+=i*this._param(h,"sdy"),a.x!==v&&(a.x=v),a.y!==y&&(a.y=y),this._checkParams(h,"rotate")&&(a.rotation=Ft.toRadians(this._param(h,"rotate"))),this._checkParams(h,"alpha")&&(a.alpha=this._param(h,"alpha",1)),n&&u&&h["alpha_"+String(u)]&&(a.alpha=h["alpha_"+String(u)]),h.hasOwnProperty("portrait")){var m=h.portrait&&n||!h.portrait&&!n;m=a.hasOwnProperty("forceVisible")?m&&a.forceVisible:m,a.visible=m}if(a.hitArea&&(this._checkParams(h,"hitArea_x")&&(a.hitArea.x=this._param(h,"hitArea_x")),this._checkParams(h,"hitArea_y")&&(a.hitArea.y=this._param(h,"hitArea_y")),this._checkParams(h,"hitArea_width")&&(a.hitArea.width=this._param(h,"hitArea_width")),this._checkParams(h,"hitArea_height")&&(a.hitArea.height=this._param(h,"hitArea_height")),this._checkParams(h,"hintAreaRect"))){var k=this._param(h,"hintAreaRect");for(var x in k)"type"!==x&&"debug"!==x&&(a.hitArea[x]=k[x])}if(h.type===E.OMY_SPRITE&&this._checkParams(h,"texture")){var w=a.textureName;h.hasOwnProperty(this._screenPos+"texture")?w=h[this._screenPos+"texture"]:h.hasOwnProperty("texture")&&(w=h.texture),n&&u&&h["texture_"+String(u)]&&(w=h["texture_"+String(u)]),a.textureName!==w&&(a.texture=w)}if(h.type!==E.OMY_BUTTON&&h.type!==E.OMY_BUTTON_TWEEN||this._checkParams(h,"out")&&a.changeTextures(this._param(h,"out"),this._param(h,"over"),this._param(h,"out"),this._param(h,"block")),h.type===E.OMY_CONTAINER&&a.isAlign&&(h.hasOwnProperty("align")?this._checkParams(h,"align")&&a.newAlignContainer(this._param(h,"align")):this._checkParams(h,"alignContainer")&&a.newAlignContainer(this._param(h,"alignContainer"))),h.type===E.OMY_TEXT_BITMAP||h.type===E.OMY_TEXT_NUMBER_BITMAP||h.type===E.OMY_TEXT_FONT||h.type===E.OMY_TEXT_NUMBER_FONT||h.type===E.OMY_MULTI_STYLE_TEXT_FONT||h.type===E.OMY_MULTI_STYLE_TEXT_NUMBER_FONT){var S=a.oneLine;if(this._checkParams(h,"oneLine")&&(S=this._param(h,"oneLine")),a.oneLine!==S&&(a.oneLine=S),this._checkParams(h,"locConst")&&(a.text=this._param(h,"locConst")),this._checkParams(h,"text")&&(a.text=this._param(h,"text")),h.hasOwnProperty("fontSize")&&(S=a.fontSize,this._checkParams(h,"fontSize")&&(S=this._param(h,"fontSize")),n&&u&&h["fontSize_"+String(u)]&&(S=h["fontSize_"+String(u)]),a.fontSize!==S&&(a.fontSize=S)),this._checkParams(h,"width")){a.resetCheckScale();var T=this._param(h,"width");n&&u&&h["width_"+String(u)]&&(T=h["width_"+String(u)]),a.textMaxWidth=T}this._checkParams(h,"height")&&(a.resetCheckScale(),a.textMaxHeight=this._param(h,"height")),this._checkParams(h,"align")&&(a.align=this._param(h,"align")),this._checkParams(h,"alignV")&&(a.alignV=this._param(h,"alignV"))}}}}}},{key:"_param",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=i;return t.hasOwnProperty(this._screenPos+e)?n=t[this._screenPos+e]:t.hasOwnProperty(e)&&(n=t[e]),n}},{key:"_params",value:function(t,e,i){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,s=n;return t.hasOwnProperty(this._screenPos+e)?s=t[this._screenPos+e]:t.hasOwnProperty(this._screenPos+i)?s=t[this._screenPos+i]:t.hasOwnProperty(e)?s=t[e]:t.hasOwnProperty(i)&&(s=t[i]),s}},{key:"_checkParams",value:function(t){for(var e=0;e<(arguments.length<=1?0:arguments.length-1);e++)if(t.hasOwnProperty("v_"+(e+1<1||arguments.length<=e+1?void 0:arguments[e+1])))return!0;return!1}}]),t}(),xr="",br=!0,wr=!1,Sr=0,Tr=0,Or=1,Er=0,Ar=0,Dr=null,Cr=!1,Mr=!1,Lr=!1,Pr=!1,Ur=!1,Nr=!1,Ir="eng",Rr=!1,Fr=!0,Yr="2.17.20",Xr="",Br=new E.Emit,zr=new D,Vr=[],Hr=function(){function t(){l(this,t)}return c(t,null,[{key:"init",value:function(){t.sayHello(),Ar=60,Dr.ticker.add(this._update,this),Fr=Dr.renderer instanceof PIXI.Renderer,yr=new ks,mr=new xs(yr),fr=new ys,dr=new fs,ur=new os,hr=new L(Dr.stage),or=new Kn(hr),ar=new qn(hr),cr=new as,pr=new gs,vr=new ms(Dr),gr=new kr,lr=new Zn,_r=new vs,Dr.stage.addChild(_r),Dr.ticker.add(this._updateRevolt)}},{key:"initRevolt",value:function(t,e){if(!zr.has(t)){var i=new revolt.FX;zr.set(t,i),i.initBundle(e),Vr=zr.names()}}},{key:"_updateRevolt",value:function(){for(var t=0;t<Vr.length;t++)zr.get(Vr[t]).update()}},{key:"revolt",value:function(t){for(var e=0;e<Vr.length;e++){var i=zr.get(Vr[e]);for(var n in i._nameMaps.emitters)if(n===t)return i;for(var s in i._nameMaps.effectSequences)if(s===t)return i}return null}},{key:"addUpdater",value:function(t,e){Dr.ticker.add(t,e)}},{key:"removeUpdater",value:function(t,e){Dr.ticker.remove(t,e)}},{key:"addSecUpdater",value:function(t,e){Br.on("dispatch",t,e)}},{key:"removeSecUpdater",value:function(t,e){Br.removeListener("dispatch",t,e)}},{key:"_update",value:function(){_r.update(),--Er<1&&(Br.emit("dispatch"),Er=Ar)}},{key:"updateGameSize",value:function(t,e,i,n){Sr=e,Tr=i,gr.updateGameSize(t,e,i,n)}},{key:"updateGameSizeForce",value:function(t){gr.updateGameSize(t,Sr,Tr,wr)}},{key:"checkURL",value:function(){var t=document.domain;function e(t){return(new RegExp("[?|&]"+t+"=([^&;]+?)(&|#|;|$)").exec(rr)||["",""])[1].replace(/\+/g,"%20")||null}rr=decodeURIComponent(location.search),Lr="true"===e("editMode")||Lr,Pr="true"===e("allowConsole")||Pr,Ur="true"===e("showFPS")||Ur,Rr="true"===e("offWebpSupport")||Rr,Cr=-1!==t.indexOf("localhost"),Mr=-1!==t.indexOf("omygames"),Lr&&(Pr=!0,Ur=!0)}},{key:"skipHello",value:function(){Nr=!0}},{key:"sayHello",value:function(){if(!Nr){if(navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var t=["%c %c %c OmyPixiJS 2.17.20 ---  http://omygames.com/  %c  \n","background: #478c13; padding:5px 0;","background: #478c13; padding:5px 0;","color: #478c13; background: #030307; padding:5px 0;","background: #478c13; padding:5px 0;"];window.console.log.apply(console,t)}else window.console&&window.console.log("OmyPixiJS 2.17.20 ---  - http://omygames.com/");Nr=!0}}},{key:"log",value:function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];Pr&&console.log.apply(console,e)}},{key:"warn",value:function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];Pr&&console.warn.apply(console,e)}},{key:"info",value:function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];Pr&&console.info.apply(console,e)}},{key:"group",value:function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];Pr&&console.group.apply(console,e)}},{key:"groupCollapsed",value:function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];Pr&&console.groupCollapsed.apply(console,e)}},{key:"groupEnd",value:function(){Pr&&console.groupEnd()}},{key:"error",value:function(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];console.error.apply(console,e)}},{key:"assetsURL",get:function(){return xr},set:function(t){xr=t}},{key:"isDesktop",get:function(){return br},set:function(t){br=t}},{key:"scale",get:function(){return Or},set:function(t){Or=t}},{key:"game",get:function(){return Dr},set:function(t){Dr=t}},{key:"stage",get:function(){return Dr.stage}},{key:"isLocal",get:function(){return Cr}},{key:"isOmy",get:function(){return Mr}},{key:"allowConsole",get:function(){return Pr}},{key:"showFPS",get:function(){return Ur},set:function(t){Ur=t,Dr&&Dr.stats&&(t?document.body.appendChild(Dr.stats.dom):document.body.removeChild(Dr.stats.dom))}},{key:"URLCache",get:function(){return A.NO_CACHE_ASSETS_ON_LOAD?"":"?"+String(bs(E.vers.version))}},{key:"URLCacheTournament",get:function(){return"?"+(Xr||String(bs(Ft.uniqueID())))},set:function(t){Xr=t}},{key:"add",get:function(){return or}},{key:"remove",get:function(){return ar}},{key:"cache",get:function(){return hr}},{key:"loc",get:function(){return lr}},{key:"keys",get:function(){return ur}},{key:"fps",get:function(){return Ar}},{key:"sound",get:function(){return cr}},{key:"assets",get:function(){return dr}},{key:"viewManager",get:function(){return _r}},{key:"navigateBtn",get:function(){return pr}},{key:"language",get:function(){return Ir},set:function(t){Ir=t}},{key:"mouse",get:function(){return fr}},{key:"debugMode",get:function(){return Lr}},{key:"scaleManager",get:function(){return vr}},{key:"OS",get:function(){return yr}},{key:"browser",get:function(){return mr}},{key:"offWebpSupport",get:function(){return Rr}},{key:"isWebGL",get:function(){return Fr}},{key:"Ease",get:function(){return nr.ease}},{key:"Random",get:function(){return Js}},{key:"revoltParticle",get:function(){throw new Error("old use. For init bundle use assetsManager.")}},{key:"keyboardManager",get:function(){return is.keyboard.events}},{key:"version",get:function(){return Yr}},{key:"isScreenPortrait",get:function(){return wr},set:function(t){wr=t}},{key:"renderer",get:function(){return Dr.renderer}},{key:"loader",get:function(){return Dr.loader}},{key:"resources",get:function(){return Dr.loader.resources}},{key:"dx",get:function(){return Sr}},{key:"dy",get:function(){return Tr}}]),t}();window.Clipboard=function(t,e,i){var n;function s(){var s,r;i.userAgent.match(/ipad|iphone/i)?((s=e.createRange()).selectNodeContents(n),(r=t.getSelection()).removeAllRanges(),r.addRange(s),n.setSelectionRange(0,999999)):n.select()}return{copy:function(t){!function(t){(n=e.createElement("textArea")).value=t,e.body.appendChild(n)}(t),s(),e.execCommand("copy"),e.body.removeChild(n)}}}(window,document,navigator),Hr.WIDTH=0,Hr.HEIGHT=0;var Wr=function t(){var e=0,i=document.createElement("div");function n(t){return i.appendChild(t.dom),t}function s(t){for(var n=0;n<i.children.length;n++)i.children[n].style.display=n===t?"block":"none";e=t}i.style.cssText="position:fixed;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000",i.addEventListener("click",(function(t){t.preventDefault(),s(++e%i.children.length)}),!1);var r=(performance||Date).now(),o=r,a=0,h=n(new t.Panel("FPS","#0ff","#002")),l=n(new t.Panel("MS","#0f0","#020"));if(self.performance&&self.performance.memory)var u=n(new t.Panel("MB","#f08","#201"));return s(0),{REVISION:16,dom:i,addPanel:n,showPanel:s,begin:function(){r=(performance||Date).now()},end:function(){a++;var t=(performance||Date).now();if(l.update(t-r,200),t>=o+1e3&&(h.update(1e3*a/(t-o),100),o=t,a=0,u)){var e=performance.memory;u.update(e.usedJSHeapSize/1048576,e.jsHeapSizeLimit/1048576)}return t},update:function(){r=this.end()},domElement:i,setMode:s}};Wr.Panel=function(t,e,i){var n=1/0,s=0,r=Math.round,o=r(window.devicePixelRatio||1),a=80*o,h=48*o,l=3*o,u=2*o,c=3*o,d=15*o,_=74*o,p=30*o,f=document.createElement("canvas");f.width=a,f.height=h,f.style.cssText="width:80px;height:48px";var v=f.getContext("2d");return v.font="bold "+9*o+"px Helvetica,Arial,sans-serif",v.textBaseline="top",v.fillStyle=i,v.fillRect(0,0,a,h),v.fillStyle=e,v.fillText(t,l,u),v.fillRect(c,d,_,p),v.fillStyle=i,v.globalAlpha=.9,v.fillRect(c,d,_,p),{dom:f,update:function(h,g){n=Math.min(n,h),s=Math.max(s,h),v.fillStyle=i,v.globalAlpha=1,v.fillRect(0,0,a,d),v.fillStyle=e,v.fillText(r(h)+" "+t+" ("+r(n)+"-"+r(s)+")",l,u),v.drawImage(f,c+o,d,_-o,p,c,d,_-o,p),v.fillRect(c+_-o,d,o,p),v.fillStyle=i,v.globalAlpha=.9,v.fillRect(c+_-o,d,o,r((1-h/g)*p))}}};var jr=function(t){d(i,PIXI.Application);var e=g(i);function i(t){var n,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return l(this,i),n=e.call(this,t),Array.isArray||(Array.isArray=function(t){return"[object Array]"===Object.prototype.toString.call(t)}),globalThis.__PIXI_APP__=f(n),n._gamePaused=!1,n._emit=new E.Emit,n.stage=s||n.stage||Hr.add.container(),n._updateList=[],Hr.WIDTH=t.width,Hr.HEIGHT=t.height,Hr.isDesktop=!PIXI.utils.isMobile.any,Hr.game=f(n),Hr.checkURL(),Hr.init(),Hr.showFPS&&(n._stats=new Wr,n._stats.showPanel(0),document.body.appendChild(n._stats.dom)),document.oncontextmenu=document.body.oncontextmenu=function(t){return!1},n._ticker=PIXI.Ticker.shared,n._ticker.autoStart=!1,n._ticker.add(n._animate,f(n)),n.isRunning=!1,n._stopOnVisibilityChange=!1,n._firstDate=0,n.maxFrame=1/A.RENDER_FPS,n.renderDelta=0,n.stopOnVisibilityChange=!0,n.startAnimate(),n}return c(i,[{key:"startAnimate",value:function(){this.isRunning||(PIXI.spine.Spine.globalAutoUpdate=!0,this.isRunning=!0,0===this._firstDate&&(this._firstDate=Date.now()),this._ticker.start())}},{key:"stopAnimate",value:function(){this.isRunning&&(PIXI.spine.Spine.globalAutoUpdate=!1,this.isRunning=!1,this._ticker.stop())}},{key:"_animate",value:function(){this.stage&&(this.renderDelta+=.001*this._ticker.deltaMS,this._onPrerenderALoop(),this.renderDelta>this.maxFrame&&(this.renderDelta-=this.maxFrame,this.renderer.render(this.stage)),this._onPostrenderALoop())}},{key:"_onVisibilityChange",value:function(){var t=!!(document.hidden||document.webkitHidden||document.mozHidden||document.msHidden);t?this.stopAnimate():this.startAnimate(),t?Hr.stage.on("tap",this._onVisibilityChange,this):Hr.stage.off("tap",this._onVisibilityChange,this),this._onVisibilityALoop(t)}},{key:"realTime",get:function(){return this._firstDate>0?(Date.now()-this._firstDate)/1e3:0}},{key:"stopOnVisibilityChange",get:function(){return this._stopOnVisibilityChange},set:function(t){if(t!==this._stopOnVisibilityChange){this._stopOnVisibilityChange=t;var e=function(){if(void 0!==document.hidden)return"visibilitychange";if(void 0!==document.webkitHidden)return"webkitvisibilitychange";if(void 0!==document.mozHidden)return"mozvisibilitychange";if(void 0!==document.msHidden)return"msvisibilitychange"}();t?document.addEventListener(e,this._onVisibilityChange.bind(this)):document.removeEventListener(e,this._onVisibilityChange.bind(this))}}},{key:"render",value:function(){}},{key:"_onPrerenderALoop",value:function(){this._stats&&this._stats.begin()}},{key:"_onPostrenderALoop",value:function(){if(jt.Timer.timerManager.update(this._ticker.elapsedMS),Hr.keys.update(),this._updateList.length){var t,e=T(this._updateList);try{for(e.s();!(t=e.n()).done;){var i=t.value;i.apply(null,i.methodParams)}}catch(t){e.e(t)}finally{e.f()}this._updateList.length=0}this._stats&&this._stats.end()}},{key:"_onVisibilityALoop",value:function(t){t?this._emit.emit("game_no_active"):this._emit.emit("game_active"),this.gamePaused=t}},{key:"addGameActive",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];i?this._emit.once("game_active",t,e):this._emit.on("game_active",t,e)}},{key:"addGameNoActive",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];i?this._emit.once("game_no_active",t,e):this._emit.on("game_no_active",t,e)}},{key:"updateRenderSetting",value:function(){this.maxFrame=1/A.RENDER_FPS}},{key:"removeGameActive",value:function(t,e){this._emit.removeListener("game_active",t,e)}},{key:"removeGameNoActive",value:function(t,e){this._emit.removeListener("game_no_active",t,e)}},{key:"addNextTickUpdate",value:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;i=i||[],t=t.bind(e),i.unshift(e),t.methodParams=i,this._updateList.push(t)}},{key:"gamePaused",get:function(){return this._gamePaused},set:function(t){this._gamePaused=t,this._gamePaused?(this._ticker.stop(),this.stopAnimate(),Hr.sound.pauseAll(),Hr.keys.clear()):(this._ticker.start(),this.startAnimate(),Hr.sound.resumeAll())}},{key:"stats",get:function(){return this._stats}},{key:"emit",get:function(){return this._emit}}]),i}();var Gr=function(){function t(e,i){l(this,t),this._targetClass=e,this._instances=[];for(var n=0;n<i;n++)this._instances.push(this.getNewInstance())}return c(t,[{key:"get",value:function(){return this._instances.length?this._instances.shift():this.getNewInstance()}},{key:"set",value:function(t){this._instances.push(t)}},{key:"clear",value:function(){this._instances=[],this._targetClass=null}},{key:"getNewInstance",value:function(){return new this._targetClass}}]),t}();return"undefined"!=typeof window?window.PIXI=PIXI:void 0!==e&&(e.PIXI=PIXI),document.oncontextmenu=document.body.oncontextmenu=function(){return!1},t.Key=Bt,t.OActor=M,t.OActorSpine=pe,t.OButton=Ht,t.OButtonMod=Ae,t.OButtonTween=Wt,t.OCheckBox=De,t.OCheckBoxTween=$t,t.OContainer=zt,t.OGraphic=Qt,t.OMY_SETTING=A,t.OMath=Ft,t.OMultiStyleTextFont=Wn,t.OMultiStyleTextNumberFont=jn,t.OParticle=ve,t.OParticleContainer=fe,t.ORevoltParticleEmitter=Ee,t.ORevoltParticleSequence=Oe,t.OSlider=Gn,t.OSound=as,t.OSprite=Vt,t.OTextBitmap=Rt,t.OTextFont=Nt,t.OTextInput=Yn,t.OTextNumberBitmap=Yt,t.OTextNumberFont=Xt,t.Omy=Hr,t.OmyConst=E,t.OmyGame=jr,t.SimpleCache=Gr,t.StringUtils=It,t}({});
//# sourceMappingURL=OMY.min.js.map
